!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports["genies-typescript-compiler"]=t():e["genies-typescript-compiler"]=t()}(this,(()=>(()=>{"use strict";var e={24:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.EventContextTransformer=void 0;const r=n(710),s=n(71);t.EventContextTransformer=class{constructor(){this.nodeTypes=[r.SyntaxKind.CallExpression]}transformNode(e,t){if(!r.Node.isCallExpression(e))return e;const n=e.asKindOrThrow(r.SyntaxKind.CallExpression),o=t.typeChecker,i=n.getExpression();if(r.Node.isPropertyAccessExpression(i)){const e=i.getName(),t=i.getExpression(),a=o.getTypeAtLocation(t),l=(0,s.isSignalBusType)(a)&&("subscribe"===e||"unsubscribe"===e),c=(0,s.isGeniesEventType)(a)&&("addListener"===e||"removeListener"===e);if(l||c){const e=n.getArguments(),t=l?1:0,s=l?2:1;if(e.length==s&&e.length>t&&r.Node.isPropertyAccessExpression(e[t])){const r=e[t],s=this.getContextExpression(r);n.addArgument(`//@ts-ignore\n${s.getText()}`)}}}return n}getContextExpression(e){return r.Node.isPropertyAccessExpression(e)?e.getExpression():e}}},58:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.TransformationContext=void 0,t.TransformationContext=class{constructor(e){this.sourceFileGenericTypeMap=new Map,this.lastGenericTypeVarIndex=new Map,this.overloadMap=new Map,this.typeChecker=e}setSwapOverload(e,t){this.overloadMap.set(e,t)}getSwapOverload(e){return this.overloadMap.get(e)}}},71:function(e,t,n){var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var s=Object.getOwnPropertyDescriptor(t,n);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,s)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),s=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return s(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.updateImportsToAliasPaths=t.convertToAliasPath=t.convertToGeniesAliasPath=t.isGeniesScriptType=t.getGeniesScriptTypeFromType=t.getIsUnityAPIDeclaration=t.isAssignmentToSymbol=t.cleanTypeText=t.getTypeByName=t.getIsUnityAPIType=t.getIsValidUnityGenericTypeArg=t.extractProperties=t.getFullTypeName=t.getTypeNameAndEnsureImported=t.ensureTypeImported=t.insertVariableStatements=t.sortImportsAndVars=t.isOrInheritsFromGameObjectOrComponent=t.isGeniesEventType=t.isSignalBusType=t.traversePrototypeChain=t.removeDecorators=t.extendsScriptableObject=t.extendsMonoBehaviour=t.setProjectRoot=t.GeniesScriptType=t.NumericalAliases=t.UiInterfaceToEnumMap=t.AllowedUiInterfaces=t.GeniesScriptUiEvents=t.componentMethods=t.SET_ITEM_NAME=t.GET_ITEM_NAME=t.TooltipDecorator=t.SpaceDecorator=t.HeaderDecorator=t.SerializeFieldDecorator=t.HideInInspectorDecorator=t.NonSerializedDecorator=t.ScriptableObjectTypeName=t.MonobehaviourTypeName=t.GeniesInstancePropName=t.GeniesDeclarationFileAnnotation=t.projectRoot=void 0;const i=n(710),a=o(n(928));var l;t.projectRoot="",t.GeniesDeclarationFileAnnotation="//@Genies-UnityApiInterface",t.GeniesInstancePropName="__geniesInstance__",t.MonobehaviourTypeName="MonoBehaviour",t.ScriptableObjectTypeName="ScriptableObject",t.NonSerializedDecorator="NonSerialized",t.HideInInspectorDecorator="HideInInspector",t.SerializeFieldDecorator="SerializeField",t.HeaderDecorator="Header",t.SpaceDecorator="Space",t.TooltipDecorator="Tooltip",t.GET_ITEM_NAME="get_Item",t.SET_ITEM_NAME="set_Item",t.componentMethods=new Set(["GetComponent","TryGetComponent","GetComponentInChildren","GetComponentsInChildren","GetComponentInParent","GetComponentsInParent","GetComponents","AddComponent"]),function(e){e[e.None=0]="None",e[e.PointerClick=1]="PointerClick",e[e.PointerDown=2]="PointerDown",e[e.PointerEnter=4]="PointerEnter",e[e.PointerExit=8]="PointerExit",e[e.PointerUp=16]="PointerUp",e[e.BeginDrag=32]="BeginDrag",e[e.Deselect=64]="Deselect",e[e.Drag=128]="Drag",e[e.Drop=256]="Drop",e[e.EndDrag=512]="EndDrag",e[e.InitializePotentialDrag=1024]="InitializePotentialDrag",e[e.Scroll=2048]="Scroll",e[e.Select=4096]="Select",e[e.Submit=8192]="Submit",e[e.UpdateSelected=16384]="UpdateSelected",e[e.Move=32768]="Move",e[e.Cancel=65536]="Cancel"}(l||(t.GeniesScriptUiEvents=l={})),t.AllowedUiInterfaces=new Set(["UnityEngine.EventSystems.IPointerClickHandler","UnityEngine.EventSystems.IPointerDownHandler","UnityEngine.EventSystems.IPointerEnterHandler","UnityEngine.EventSystems.IPointerExitHandler","UnityEngine.EventSystems.IPointerUpHandler","UnityEngine.EventSystems.IBeginDragHandler","UnityEngine.EventSystems.IDeselectHandler","UnityEngine.EventSystems.IDragHandler","UnityEngine.EventSystems.IDropHandler","UnityEngine.EventSystems.IEndDragHandler","UnityEngine.EventSystems.IInitializePotentialDragHandler","UnityEngine.EventSystems.IScrollHandler","UnityEngine.EventSystems.ISelectHandler","UnityEngine.EventSystems.ISubmitHandler","UnityEngine.EventSystems.IUpdateSelectedHandler","UnityEngine.EventSystems.IMoveHandler","UnityEngine.EventSystems.ICancelHandler"]),t.UiInterfaceToEnumMap=new Map([["UnityEngine.EventSystems.IPointerClickHandler",l.PointerClick],["UnityEngine.EventSystems.IPointerDownHandler",l.PointerDown],["UnityEngine.EventSystems.IPointerEnterHandler",l.PointerEnter],["UnityEngine.EventSystems.IPointerExitHandler",l.PointerExit],["UnityEngine.EventSystems.IPointerUpHandler",l.PointerUp],["UnityEngine.EventSystems.IBeginDragHandler",l.BeginDrag],["UnityEngine.EventSystems.IDeselectHandler",l.Deselect],["UnityEngine.EventSystems.IDragHandler",l.Drag],["UnityEngine.EventSystems.IDropHandler",l.Drop],["UnityEngine.EventSystems.IEndDragHandler",l.EndDrag],["UnityEngine.EventSystems.IInitializePotentialDragHandler",l.InitializePotentialDrag],["UnityEngine.EventSystems.IScrollHandler",l.Scroll],["UnityEngine.EventSystems.ISelectHandler",l.Select],["UnityEngine.EventSystems.ISubmitHandler",l.Submit],["UnityEngine.EventSystems.IUpdateSelectedHandler",l.UpdateSelected],["UnityEngine.EventSystems.IMoveHandler",l.Move],["UnityEngine.EventSystems.ICancelHandler",l.Cancel]]);const c=new Map([["float","Single"],["int","Int32"],["double","Double"],["long","Int64"],["bool","Boolean"],["string","String"],["number","Double"],["short","Int16"],["ushort","UInt16"],["byte","Byte"],["sbyte","SByte"],["uint","UInt32"],["char","Char"]]),p=new Map([["float","System.Single"],["int","System.Int32"],["double","System.Double"],["long","System.Int64"],["bool","System.Boolean"],["string","System.String"],["number","System.Double"],["short","System.Int16"],["ushort","System.UInt16"],["byte","System.Byte"],["sbyte","System.SByte"],["uint","System.UInt32"],["char","System.Char"]]);var u;function g(e){let t=e.getBaseClass();for(;t;){if("MonoBehaviour"===t.getName())return!0;t=t.getBaseClass()}return!1}function d(e){let t=e.getBaseClass();for(;t;){if("ScriptableObject"===t.getName())return!0;t=t.getBaseClass()}return!1}function y(e,t,n){var r;const s=function(e,t){const n=[],r=e.getSymbol();if(!r)return n;const s=r.getDeclarations();if(!s)return n;for(const e of s)if(i.Node.isClassDeclaration(e)){const r=e.getHeritageClauses();for(const e of r){const r=e.getTypeNodes();for(const e of r){const r=t.typeChecker.getTypeAtLocation(e);r&&n.push(r)}}}return n}(e,n);for(const e of s){const s=null===(r=e.getSymbol())||void 0===r?void 0:r.getName();if(s&&t.includes(s))return!0;if(y(e,t,n))return!0}return!1}function f(e,n=!0,r=!0){let s="";const o=e.getAliasSymbol();if(s=o?o.getName():e.getText(),p.has(s))return p.get(s);const l=e.getSymbol();if(!l)return s;if(N(e))s=l.getFullyQualifiedName().replace(/['"]/g,"");else{const e=l.getDeclarations();let n=!1;if(e.forEach((e=>{(i.Node.isInterfaceDeclaration(e)||i.Node.isClassDeclaration(e))&&(n=e.isExported())})),!n&&e.length>0){const n=e[0].getSourceFile().getFilePath(),r=P(t.projectRoot,n),o=a.parse(r),i=a.join(o.dir,o.name);s=`${i}.${l.getFullyQualifiedName().replace(/['"]/g,"")}`}else s=l.getFullyQualifiedName().replace(/['"]/g,"");const r=a.parse(s);if(""!==r.dir||""!==r.root){let e=I(s);null!=e&&(s=e)}}const c=/\$\d+$/;if(n&&c.test(s)&&(s=s.replace(c,""),r)){const t=e.getTypeArguments();t.length>0&&(s+="<",t.forEach(((e,n)=>{let r=f(e);s+=r,n<t.length-1&&(s+=", ")})),s+=">")}return s}function m(e,n="",r=new Map){const s=[];return e.getProperties().forEach((e=>{const o=e.getScope(),a=C(e);if(e.isStatic()||e.isReadonly())return;if("private"===o&&!a.some((e=>e.Type===t.SerializeFieldDecorator)))return;if("public"===o&&a.some((e=>e.Type===t.NonSerializedDecorator)))return;const l=x(e.getType(),r),c=l.isArray(),p=S(l,r),u=f(p),g=e.getName();let d=n?`${n}.${g}`:g;function y(e){if(e.getKind()===i.SyntaxKind.NewExpression){const t=e;return`new ${f(t.getType())}(${t.getArguments().map((e=>e.getText())).join(", ")});`}if(e.getKind()===i.SyntaxKind.PropertyAccessExpression){const t=e;return`${f(t.getExpression().getType())}.${t.getName()}`}return e.getText()}const m=[];if(e.hasInitializer()){const t=e.getInitializer();if(t)if(t.getKind()===i.SyntaxKind.ArrayLiteralExpression){const e=t;for(let t=0;t<e.getElements().length;t++){const n=e.getElements()[t];m.push(y(n))}}else m.push(y(t))}const E={Path:d,Name:g,TypeName:u,ChildProperties:[],IsArray:c,IsEnum:!1,EnumKeys:[],EnumValues:[],Decorators:C(e),IsGeniesBehaviourRef:!1,IsGeniesScriptableObjectRef:!1,Initializers:m,ArrayElementInitializer:void 0,ArrayDimension:-1};if(c){let e=1;return E.ArrayElementInitializer=T(l,u,g,d,e,r),E.ArrayDimension=e,void s.push(E)}h(p,E,r),s.push(E)})),s}function h(e,t,n){const r=e.isEnum(),s=e.getSymbol()||e.getAliasSymbol();if(!s)return;const o=s.getDeclarations()[0],a=b(o),l=v(o,a);if(t.IsGeniesBehaviourRef=l==u.Monobehaviour,t.IsGeniesScriptableObjectRef=l==u.ScriptableObject,!a&&l===u.None&&(r&&function(e,t){const{keys:n,values:r}=function(e){const t=e.getSymbol(),n=null==t?void 0:t.getDeclarations().find((e=>e.getKind()===i.SyntaxKind.EnumDeclaration));return n?{keys:n.getMembers().map((e=>e.getName())),values:n.getMembers().map((e=>e.getValue()))}:{keys:[],values:[]}}(t);e.EnumKeys=n,e.EnumValues=r.map((e=>void 0===e?"":e.toString())),e.IsEnum=!0}(t,e),s.getDeclarations().some((e=>i.Node.isClassDeclaration(e))))){const r=s.getDeclarations().find(i.Node.isClassDeclaration),o=r.getTypeParameters(),a=e.getTypeArguments(),l=new Map(n);o.forEach(((e,t)=>{const n=`${e.getName()}_${r.getName()}`;l.set(n,a[t])}));const c=[];let p=r;for(;p;){p.getName(),c.unshift(...m(p,t.Path,l));let e=p.getBaseClass();if(void 0===e)break;p=e}t.ChildProperties=c}}function T(e,t,n,r,s,o){let i=e.isArray()?e.getArrayElementType():e;i.isArray()||(i=S(i,o));let a=s;const l={Path:r+"_D"+s,Name:n,TypeName:t,ArrayDimension:s,ChildProperties:[],IsArray:i.isArray(),IsEnum:i.isEnum(),EnumKeys:[],EnumValues:[],Decorators:[],IsGeniesBehaviourRef:!1,IsGeniesScriptableObjectRef:!1,Initializers:[],ArrayElementInitializer:void 0};return i.isArray()?l.ArrayElementInitializer=T(i,t,n,r,++a,o):h(i,l,o),l}function x(e,t){var n,r;let s=e;if(s.isTypeParameter()){const e=null===(n=s.getSymbol())||void 0===n?void 0:n.getName(),o=null===(r=s.getSymbol())||void 0===r?void 0:r.getDeclarations()[0].getParent(),a=`${e}_${o&&i.Node.isClassDeclaration(o)?o.getName():""}`;a&&t.has(a)&&(s=t.get(a))}return s}function S(e,t){let n=e;for(;null==n?void 0:n.isArray();)n=n.getArrayElementType();return n=x(n,t),n}function E(e){if(!e)return!1;const n=e.getFirstChild();if(!n)return console.log("No nodes found in the file."),!1;const r=n.getLeadingCommentRanges();return r.length>0&&r[0].getText()===t.GeniesDeclarationFileAnnotation}function N(e){let t=e.getSymbol();if(!t){let t=e.getApparentType().getSymbol();return void(t&&console.log(t.getName()))}const n=t.getDeclarations();if(n&&0!==n.length)return E(n[0].getSourceFile())}function b(e){return E(e.getSourceFile())}function v(e,t){if(e.getKind()!==i.SyntaxKind.ClassDeclaration||t)return u.None;const n=e,r=g(n),s=d(n);return r?u.Monobehaviour:s?u.ScriptableObject:u.None}function A(e){const t=e.getSymbol();if(!t)return u.None;const n=t.getDeclarations();if(0===n.length)return u.None;const r=n[0];return v(r,b(r))}function I(e){const t=e.split(a.sep).join("/"),n=t.indexOf("/Assets/");if(-1!==n)return`@assets/${t.substring(n+8)}`;const r=t.match(/\/(com\.genies\.[^\/]+)\//);return r?`@${r[1]}/${t.substring(r.index+r[0].length)}`:null}function P(e,t){return I(a.resolve(e,t))||t}function C(e){return e.getDecorators().map((e=>({Type:e.getName(),Args:e.getArguments().map((e=>e.getText()))})))}t.NumericalAliases=new Set(["byte","sbyte","short","ushort","int","uint","float","double","number"]),function(e){e[e.None=0]="None",e[e.Monobehaviour=1]="Monobehaviour",e[e.ScriptableObject=2]="ScriptableObject"}(u||(t.GeniesScriptType=u={})),t.setProjectRoot=function(e){t.projectRoot=e},t.extendsMonoBehaviour=g,t.extendsScriptableObject=d,t.removeDecorators=function(e,t){e.forEach((e=>{try{t(e)&&e.remove()}catch(e){}}))},t.traversePrototypeChain=function(e){const t=new Set;let n=e;for(;n;){const e=f(n.getType());e&&t.add(e),n.getImplements().forEach((e=>{const n=[e.getType()];for(;n.length>0;){const e=n.shift();if(!e)continue;const r=f(e);r&&!t.has(r)&&(t.add(r),e.getBaseTypes().forEach((e=>{n.push(e)})))}})),n=n.getBaseClass()}return Array.from(t)},t.isSignalBusType=function(e){const t=e.getSymbol();return!!t&&"SignalBus"===t.getName()},t.isGeniesEventType=function(e){const t=e.getSymbol();return!!t&&"GeniesEvent"===t.getName()},t.isOrInheritsFromGameObjectOrComponent=function(e,t){if(!e)return!1;const n=e.getSymbol();return!!n&&(!!["GameObject","Component","MonoBehaviour"].includes(n.getName())||y(e,["GameObject","Component","MonoBehaviour"],t))},t.sortImportsAndVars=function(e){const t=e.getStatements(),n=t.filter((e=>e.getKind()===i.SyntaxKind.ImportDeclaration)),r=t.filter((e=>e.getKind()===i.SyntaxKind.VariableStatement)),s=t.filter((e=>e.getKind()!==i.SyntaxKind.ImportDeclaration&&e.getKind()!==i.SyntaxKind.VariableStatement)),o=[...n.map((e=>e.getText())),"",...r.map((e=>e.getText())),"",...s.map((e=>e.getText()))].join("\n\n");e.replaceWithText(o)},t.insertVariableStatements=function(e,t,n){if(0===t.length)return;let r;r=n.lastGenericTypeVarIndex.has(e)?n.lastGenericTypeVarIndex.get(e):function(e){const t=e.getStatements();let n=-1;return t.forEach(((e,t)=>{e.getKind()===i.SyntaxKind.ImportDeclaration&&(n=t)})),n}(e)+1;const s=e.getStatements().length;r=Math.min(r,s),e.insertVariableStatements(r,t),n.lastGenericTypeVarIndex.set(e,r+t.length)},t.ensureTypeImported=function(e,t){var n,r;let s=null!==(r=null===(n=e.getSymbol())||void 0===n?void 0:n.getName())&&void 0!==r?r:e.getText(),o="";if(c.has(s))s=c.get(s),o="System";else{const t=A(e);if(t!==u.None)switch(t){case u.Monobehaviour:s="MonoBehaviour",o="UnityEngine";break;case u.ScriptableObject:s="ScriptableObject",o="UnityEngine"}else{if(!N(e))throw new Error("Can't use non CSharp types");{const t=f(e,!0,!1),n=t.lastIndexOf(".");o=t.substring(0,n)}}}const a=t.getImportDeclarations().find((e=>e.getModuleSpecifierValue()===o));if(a)a.getNamedImports().some((e=>e.getName()===s))||a.addNamedImport(s);else{const e={kind:i.StructureKind.ImportDeclaration,moduleSpecifier:o,namedImports:[{name:s}]};t.addImportDeclaration(e)}},t.getTypeNameAndEnsureImported=function(e,t){var n,r;let s=null!==(r=null===(n=e.getSymbol())||void 0===n?void 0:n.getName())&&void 0!==r?r:e.getText(),o="",a="";if(c.has(s))o=s=c.get(s),a="System";else{const t=A(e);if(t!==u.None)switch(t){case u.Monobehaviour:s="MonoBehaviour",a="UnityEngine";break;case u.ScriptableObject:s="ScriptableObject",a="UnityEngine"}else{if(!N(e))throw new Error("Can't use non CSharp types");{o=f(e,!0,!1);const t=o.lastIndexOf(".");a=o.substring(0,t)}}}const l=t.getImportDeclarations().find((e=>e.getModuleSpecifierValue()===a));if(l)l.getNamedImports().some((e=>e.getName()===s))||l.addNamedImport(s);else{const e={kind:i.StructureKind.ImportDeclaration,moduleSpecifier:a,namedImports:[{name:s}]};t.addImportDeclaration(e)}return`$typeof("${o}")`},t.getFullTypeName=f,t.extractProperties=m,t.getIsValidUnityGenericTypeArg=function(e){let t="";const n=e.getAliasSymbol();return t=n?n.getName():e.getText(),!!["float","int","double","long","bool","string","number"].includes(t)||A(e)!==u.None||N(e)},t.getIsUnityAPIType=N,t.getTypeByName=function(e,t){const n=t.resolveName(e,void 0,i.SymbolFlags.All,!1);return n?t.getDeclaredTypeOfSymbol(n):void console.log(`Global type '${e}' not found.`)},t.cleanTypeText=function(e){return e.replace(/&\s*\{[^}]*\}/,"").trim()},t.isAssignmentToSymbol=function(e,t){if(i.Node.isPropertyAccessExpression(e)){const n=e.getExpression();if(i.Node.isThisExpression(n))return e.getNameNode().getSymbol()===t}else if(i.Node.isIdentifier(e))return e.getSymbol()===t;return!1},t.getIsUnityAPIDeclaration=b,t.getGeniesScriptTypeFromType=A,t.isGeniesScriptType=function(e){let t=A(e);return t===u.Monobehaviour||t===u.ScriptableObject},t.convertToGeniesAliasPath=I,t.convertToAliasPath=P,t.updateImportsToAliasPaths=function(e){const t=e.getDirectoryPath();e.getImportDeclarations().forEach((e=>{const n=e.getModuleSpecifierValue();if(n.startsWith("./")||n.startsWith("../")){const r=P(t,n);(r.startsWith("@assets/")||r.startsWith("@com.genies"))&&e.setModuleSpecifier(r)}}))}},101:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getNumericValue=t.typesAreEqual=t.isNumericCastable=t.selectBestOverload=t.inferPossibleTypes=void 0;const r=n(710),s=n(71);function o(e,t){const n=[],r=t.getTypeAtLocation(e);let o=[];const i=function(e,t){const n=e.getText();if(s.NumericalAliases.has(n)){const e=(0,s.getTypeByName)(n,t);if(e)return e}const r=n.match(/number\s*&\s*\{\s*__([a-zA-Z]+)Brand\?:\s*undefined\s*\}/);if(r){const e=r[1],n=(0,s.getTypeByName)(e,t);if(n)return n}return null}(r,t);if(null!=i)n.push(i);else{const t=p(e);if(void 0!==t)o=function(e){const{value:t,hasDecimal:n}=e,r=new Set;return n?(r.add("float"),r.add("double")):(t>=-2147483648&&t<=2147483647&&r.add("int"),t>=-32768&&t<=32767&&r.add("short"),t>=-128&&t<=127&&r.add("sbyte"),t>=0&&t<=255&&r.add("byte"),t>=0&&t<=65535&&r.add("ushort"),t>=0&&t<=4294967295&&r.add("uint")),Array.from(r)}(t);else{if(a=r,"number"!==(0,s.cleanTypeText)(a.getText()))return n.push(r),n;o=["byte","sbyte","short","ushort","int","uint","float","double"]}}var a;for(const e of o){const r=(0,s.getTypeByName)(e,t);r&&n.push(r)}return n}function i(e,t,n){const r=e.getParameters();if(r.length<t.length)return-1;let s=r.length==t.length?1:0;for(let e=0;e<r.length;e++){const o=n.getTypeAtLocation(r[e]),i=t[e];if(!i||i.length<=0)return-1;const l=a(o,i,n);if(l<0)return-1;s+=l}return s}function a(e,t,n){let r=-1;if(e.isTypeParameter()){const s=e.getConstraint();if(!s)return t.length>0?1:-1;for(const e of t)c(e,s)?r=Math.max(r,2):n.isTypeAssignableTo(e,s)&&(r=Math.max(r,1));return r}if(function(e){const t=(0,s.cleanTypeText)(e.getText());return s.NumericalAliases.has(t)}(e)){for(const n of t)c(n,e)?r=Math.max(r,2):l(n,e)&&(r=Math.max(r,1));return r}for(const s of t)c(s,e)?r=Math.max(r,2):n.isTypeAssignableTo(s,e)&&(r=Math.max(r,1));return r}function l(e,t){var n,r;const o=(0,s.cleanTypeText)(e.getText()),i=(0,s.cleanTypeText)(t.getText());return null!==(r=null===(n={byte:["short","ushort","int","uint","float","double","number"],sbyte:["short","int","float","double","number"],short:["int","float","double","number"],ushort:["int","uint","float","double","number"],int:["float","double","number"],uint:["float","double","number"],float:["double","number"],double:["number"],number:["byte","sbyte","short","ushort","int","uint","float","double"]}[o])||void 0===n?void 0:n.includes(i))&&void 0!==r&&r}function c(e,t){return(0,s.cleanTypeText)(e.getText())===(0,s.cleanTypeText)(t.getText())}function p(e){const t=u(e);if(void 0!==t)return t;if(r.Node.isIdentifier(e)||r.Node.isPropertyAccessExpression(e)){const t=e.getSymbol();if(t){const n=t.getDeclarations();if(n&&n.length>0){const s=n[0];if(r.Node.isVariableDeclaration(s)||r.Node.isPropertyDeclaration(s)){const n=g(t,s,e);if(n)return n}}}}}function u(e){if(r.Node.isNumericLiteral(e)){const t=e.getText();return{value:Number(t),hasDecimal:t.includes(".")}}if(r.Node.isPrefixUnaryExpression(e)&&e.getOperatorToken()===r.SyntaxKind.MinusToken){const t=e.getOperand();if(r.Node.isNumericLiteral(t)){const e=t.getText();return{value:-Number(e),hasDecimal:e.includes(".")}}}}function g(e,t,n){let o;const i=t.getInitializer();if(i){const r=d(i,e,t,n);r&&(o=r)}const a=n.getFirstAncestorByKind(r.SyntaxKind.MethodDeclaration);if(!a)return o;const l=a.getStatements()||[],c=n.getStart();for(const i of l){if(i.getStart()>c)break;{const a=i.getDescendants().filter((e=>r.Node.isBinaryExpression(e)||r.Node.isPrefixUnaryExpression(e)||r.Node.isPostfixUnaryExpression(e)));for(const i of a)if(r.Node.isBinaryExpression(i)){const a=i.getOperatorToken().getKind(),l=i.getLeft(),c=i.getRight();if((0,s.isAssignmentToSymbol)(l,e))if(a===r.SyntaxKind.EqualsToken){o=d(c,e,t,n,o)||void 0}else if([r.SyntaxKind.PlusEqualsToken,r.SyntaxKind.MinusEqualsToken,r.SyntaxKind.AsteriskEqualsToken,r.SyntaxKind.SlashEqualsToken,r.SyntaxKind.PercentEqualsToken].includes(a)){const r=d(c,e,t,n,o);if(r&&o){o=y(a,o,r)||void 0}else o=void 0}}else if(r.Node.isPrefixUnaryExpression(i)||r.Node.isPostfixUnaryExpression(i)){const t=i.getOperatorToken(),n=i.getOperand();if((0,s.isAssignmentToSymbol)(n,e))if(o){let e=t===r.SyntaxKind.PlusPlusToken?1:-1;o={value:o.value+e,hasDecimal:o.hasDecimal}}else o=void 0}}}return o}function d(e,t,n,o,i){if(r.Node.isNumericLiteral(e))return u(e);if(r.Node.isIdentifier(e)||r.Node.isPropertyAccessExpression(e)){if((0,s.isAssignmentToSymbol)(e,t))return i;{const t=e.getSymbol();if(t){const n=t.getDeclarations();if(n&&n.length>0){const s=n[0];if(r.Node.isVariableDeclaration(s)||r.Node.isPropertyDeclaration(s))return g(t,s,e)}}}}else if(r.Node.isBinaryExpression(e)){const r=d(e.getLeft(),t,n,o,i),s=d(e.getRight(),t,n,o,i);if(r&&s)return f(e.getOperatorToken().getKind(),r,s)}}function y(e,t,n){const s={[r.SyntaxKind.PlusEqualsToken]:r.SyntaxKind.PlusToken,[r.SyntaxKind.MinusEqualsToken]:r.SyntaxKind.MinusToken,[r.SyntaxKind.AsteriskEqualsToken]:r.SyntaxKind.AsteriskToken,[r.SyntaxKind.SlashEqualsToken]:r.SyntaxKind.SlashToken,[r.SyntaxKind.PercentEqualsToken]:r.SyntaxKind.PercentToken}[e];if(void 0!==s)return f(s,t,n)}function f(e,t,n){let s,o=t.hasDecimal||n.hasDecimal;switch(e){case r.SyntaxKind.PlusToken:s=t.value+n.value;break;case r.SyntaxKind.MinusToken:s=t.value-n.value;break;case r.SyntaxKind.AsteriskToken:s=t.value*n.value;break;case r.SyntaxKind.SlashToken:s=t.value/n.value,o=!0;break;case r.SyntaxKind.PercentToken:s=t.value%n.value;break;default:return}if(void 0!==s)return{value:s,hasDecimal:o}}t.inferPossibleTypes=o,t.selectBestOverload=function(e,t,n){if(!e||e.length<=0)return;if(1==e.length)return e[0];const r=t.getArguments();if(!r||r.length<=0){return e.find((e=>0===e.getParameters().length))||void 0}const s=t.getArguments().map((e=>o(e,n)));let a,l=-1;for(const t of e){const e=i(t,s,n);e>l&&(l=e,a=t)}return a},t.isNumericCastable=l,t.typesAreEqual=c,t.getNumericValue=p},105:function(e,t,n){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.getGeniesSemanticDiagnostics=void 0;const s=n(710),o=r(n(985)),i=n(71),a=10006,l=new Set(["MonoBehaviour","ScriptableObject"]),c=new Set(["GetComponent","TryGetComponent","GetComponentInChildren","GetComponentsInChildren","GetComponentInParent","GetComponentsInParent","GetComponents","AddComponent"]);function p(e,t,n,r){const s=t.getStart(),i=t.getWidth(),a={file:t.getSourceFile().compilerNode,start:s,length:i,messageText:n,category:o.default.DiagnosticCategory.Error,code:r,source:"Genies"};e.push(a)}t.getGeniesSemanticDiagnostics=function(e,t){if(!e)return[];const n=[];return function(e,t){e.getClasses().forEach((n=>{var r;const s=n.getBaseClass(),a=n.getImplements(),c=null==s?void 0:s.getName();if(s&&(0,i.getIsUnityAPIType)(s.getType())&&c&&!l.has(c)){const i=s.getStart(),a=null===(r=s.getName())||void 0===r?void 0:r.length,l=`Class '${n.getName()}' inherits from a Unity type '${s.getName()}' that is not 'MonoBehaviour' or 'ScriptableObject'.`,c={file:e.compilerNode,start:i,length:a,messageText:l,category:o.default.DiagnosticCategory.Error,code:10001,source:"Genies"};t.push(c)}a.forEach((r=>{if((0,i.getIsUnityAPIType)(r.getType())){const s=(0,i.getFullTypeName)(r.getType());if(i.AllowedUiInterfaces.has(s))return;const a=r.getStart(),l=r.getWidth(),c=`Class '${n.getName()}' implements a forbidden Unity interface '${r.getText()}'.`,p={file:e.compilerNode,start:a,length:l,messageText:c,category:o.default.DiagnosticCategory.Error,code:10002,source:"Genies"};t.push(p)}}))}))}(e,n),function(e,t){e.getDescendantsOfKind(s.SyntaxKind.CallExpression).forEach((e=>{!function(e,t){const n=e.getExpression();let r=[];if(s.Node.isPropertyAccessExpression(n)||s.Node.isIdentifier(n)){const e=n.getSymbol();e&&(r=e.getDeclarations().filter((e=>s.Node.isMethodDeclaration(e))))}if(0===r.length)return;if(!(r.filter((e=>e.getTypeParameters().length>0)).length>0))return;if(r=r.filter((e=>(0,i.getIsUnityAPIDeclaration)(e))),0===r.length)return;const o=function(e){return s.Node.isPropertyAccessExpression(e)?e.getName():s.Node.isIdentifier(e)?e.getText():""}(n);if(function(e,t){const n=t.getArguments().map((e=>e.getType())),r=t.getProject().getTypeChecker();return e.some((e=>{if(e.getTypeParameters().length>0)return!1;const t=e.getParameters();if(t.length!==n.length)return!1;for(let e=0;e<t.length;e++){const s=t[e].getType(),o=n[e];if(!r.isTypeAssignableTo(o,s))return!1}return!0}))}(r,e))return;const l=e.getTypeArguments();if(0===l.length)return void p(t,e,`Generic method '${o}' must be called with type arguments.`,10003);let u=r.map((e=>e.getTypeParameters().length));u.includes(l.length)||p(t,e,`Generic method '${o}' was provided the wrong number of arguments. Valid args counts: '${u.join(", ")}'`,a),c.has(o)?l.forEach((e=>{(function(e){const t=e.getType();if((0,i.getIsUnityAPIType)(t))return!0;if((0,i.getGeniesScriptTypeFromType)(t)===i.GeniesScriptType.Monobehaviour)return!0;const n=t.getSymbol();if(n){const e=n.getDeclarations();if(e&&e.length>0&&s.Node.isInterfaceDeclaration(e[0]))return!0}return!1})(e)||p(t,e,`Type arguments for method '${o}' must be a Unity API type, an interface, or a type that extends MonoBehaviour.`,10004)})):l.forEach((e=>{const n=e.getType();(0,i.getIsValidUnityGenericTypeArg)(n)||p(t,e,`Type arguments for method '${o}' must be Unity API types.`,10004)}))}(e,t)}))}(e,n),function(e,t){e.getDescendantsOfKind(s.SyntaxKind.NewExpression).forEach((e=>{const n=e.getType().getSymbol();if(!n)return;const r=n.getDeclarations();if(!r||0===r.length)return;const o=r.filter((e=>s.Node.isClassDeclaration(e)&&(0,i.getIsUnityAPIDeclaration)(e)&&e.getTypeParameters().length>0));if(0===o.length)return;const l=o[0].getTypeParameters().length,c=e.getTypeArguments(),u=c.length;0===u?p(t,e,`Generic class '${(0,i.getFullTypeName)(e.getType())}' must be instantiated with ${l} type argument(s).`,10005):(u!==l&&p(t,e,`Generic class '${(0,i.getFullTypeName)(e.getType())}' expects ${l} type argument(s), but got ${u}.`,a),c.forEach((n=>{const r=n.getType();(0,i.getIsValidUnityGenericTypeArg)(r)||p(t,n,`Type arguments for type '${(0,i.getFullTypeName)(e.getType())}' must be Unity API types.`,a)})))}))}(e,n),n}},113:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PromiseWrapperTransformer=void 0;const r=n(710);t.PromiseWrapperTransformer=class{constructor(){this.nodeTypes=[r.SyntaxKind.AwaitExpression,r.SyntaxKind.CallExpression]}transformNode(e,t){const n=t.typeChecker;if(r.Node.isAwaitExpression(e)){const t=e,r=t.getExpression(),s=n.getTypeAtLocation(r);if(this.isPromise(s)){const e=`await $promise(${r.getText()})`;return t.replaceWithText(`${e}`)}}else if(r.Node.isCallExpression(e)){const t=e,s=t.getExpression();if(r.Node.isPropertyAccessExpression(s)){const e=s.getName(),r=s.getExpression(),o=n.getTypeAtLocation(r);if(this.isPromise(o)&&this.isPromiseMethod(e)){const e=`$promise(${r.getText()})${t.getText().substring(r.getText().length)}`;return t.replaceWithText(e)}}}return e}isPromise(e){const t=e.getSymbol();if(!t)return!1;const n=t.getName();return"Task"===n||"Task$1"===n||"UniTask"===n||"UniTask$1"===n||"YieldAwaitable"===n}isPromiseMethod(e){return["then","catch","finally"].includes(e)}}},130:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getOperatorNodeReturnType=t.getUnaryOperatorMethodReturnType=t.getEquivalentOperatorForCompound=t.isCompoundAssignment=t.unwrapParenthesizedExpression=t.getOperatorMethodName=t.getOperatorMethodReturnType=void 0;const r=n(710),s=n(71),o=n(101);function i(e,t,n,s){const i=t.getSymbol();if(!i)return null;const a=i.getDeclarations();for(const i of a)if(r.Node.isClassDeclaration(i)){const r=i.getMethods().filter((e=>e.getName()===n&&0===e.getTypeParameters().length));for(const n of r){const r=n.getParameters();if(2===r.length){const i=r[0].getType(),a=r[1].getType(),l=(0,o.typesAreEqual)(a,s)||e.isTypeAssignableTo(s,a);if(((0,o.typesAreEqual)(i,t)||e.isTypeAssignableTo(t,i))&&l)return n.getReturnType()}}}return null}function a(e,t=!1){if(t)switch(e){case r.SyntaxKind.MinusToken:return"op_UnaryNegation";case r.SyntaxKind.PlusToken:return"op_UnaryPlus";case r.SyntaxKind.ExclamationToken:return"op_LogicalNot";case r.SyntaxKind.TildeToken:return"op_OnesComplement";case r.SyntaxKind.PlusPlusToken:return"op_Increment";case r.SyntaxKind.MinusMinusToken:return"op_Decrement";default:return}else switch(e){case r.SyntaxKind.PlusToken:return"op_Addition";case r.SyntaxKind.MinusToken:return"op_Subtraction";case r.SyntaxKind.AsteriskToken:return"op_Multiply";case r.SyntaxKind.SlashToken:return"op_Division";case r.SyntaxKind.PercentToken:return"op_Modulus";case r.SyntaxKind.EqualsEqualsToken:case r.SyntaxKind.EqualsEqualsEqualsToken:return"op_Equality";case r.SyntaxKind.ExclamationEqualsToken:case r.SyntaxKind.ExclamationEqualsEqualsToken:return"op_Inequality";case r.SyntaxKind.GreaterThanToken:return"op_GreaterThan";case r.SyntaxKind.LessThanToken:return"op_LessThan";case r.SyntaxKind.GreaterThanEqualsToken:return"op_GreaterThanOrEqual";case r.SyntaxKind.LessThanEqualsToken:return"op_LessThanOrEqual";case r.SyntaxKind.BarToken:return"op_BitwiseOr";case r.SyntaxKind.AmpersandToken:return"op_BitwiseAnd";case r.SyntaxKind.CaretToken:return"op_ExclusiveOr";case r.SyntaxKind.LessThanLessThanToken:return"op_LeftShift";case r.SyntaxKind.GreaterThanGreaterThanToken:return"op_RightShift";default:return}}function l(e){return r.Node.isParenthesizedExpression(e)?l(e.getExpression()):e}function c(e){return e>=r.SyntaxKind.FirstCompoundAssignment&&e<=r.SyntaxKind.LastCompoundAssignment}function p(e){switch(e){case r.SyntaxKind.PlusEqualsToken:return r.SyntaxKind.PlusToken;case r.SyntaxKind.MinusEqualsToken:return r.SyntaxKind.MinusToken;case r.SyntaxKind.AsteriskEqualsToken:return r.SyntaxKind.AsteriskToken;case r.SyntaxKind.SlashEqualsToken:return r.SyntaxKind.SlashToken;case r.SyntaxKind.PercentEqualsToken:return r.SyntaxKind.PercentToken;case r.SyntaxKind.AmpersandEqualsToken:return r.SyntaxKind.AmpersandToken;case r.SyntaxKind.BarEqualsToken:return r.SyntaxKind.BarToken;case r.SyntaxKind.CaretEqualsToken:return r.SyntaxKind.CaretToken;case r.SyntaxKind.LessThanLessThanEqualsToken:return r.SyntaxKind.LessThanLessThanToken;case r.SyntaxKind.GreaterThanGreaterThanEqualsToken:return r.SyntaxKind.GreaterThanGreaterThanToken;case r.SyntaxKind.GreaterThanGreaterThanGreaterThanEqualsToken:return r.SyntaxKind.GreaterThanGreaterThanGreaterThanToken;default:throw new Error(`Unsupported compound operator: ${r.SyntaxKind[e]}`)}}function u(e,t){const n=e.getSymbol();if(!n)return null;const s=n.getDeclarations();for(const n of s)if(r.Node.isClassDeclaration(n)){const r=n.getMethods().filter((e=>e.getName()===t&&0===e.getTypeParameters().length));for(const t of r){const n=t.getParameters();if(1===n.length&&n[0].getType().getText()===e.getText())return t.getReturnType()}}return null}function g(e,t){return r.Node.isBinaryExpression(e)?d(e,t):r.Node.isPrefixUnaryExpression(e)||r.Node.isPostfixUnaryExpression(e)?y(e,t):t.TypeChecker.getTypeAtLocation(e)}function d(e,t){const n=e.getOperatorToken().getKind();let o=a(n);if(c(n)&&(o=a(p(n))),null==o)return null;if(n===r.SyntaxKind.EqualsEqualsEqualsToken||n===r.SyntaxKind.EqualsEqualsToken||n===r.SyntaxKind.ExclamationEqualsEqualsToken||n==r.SyntaxKind.ExclamationEqualsToken){const t=l(e.getRight());if(r.Node.isNullLiteral(t)||r.Node.isUndefinedKeyword(t))return null;const n=l(e.getLeft());if(r.Node.isNullLiteral(n)||r.Node.isUndefinedKeyword(n))return null}const u=l(e.getLeft()),d=l(e.getRight());let y=g(u,t),f=g(d,t);if(null==y||null==f)return null;if(f.isLiteral()&&(f=t.TypeChecker.getBaseTypeOfLiteralType(f)),y.isLiteral()&&(y=t.TypeChecker.getBaseTypeOfLiteralType(y)),!(0,s.getIsUnityAPIType)(y)&&!(0,s.getIsUnityAPIType)(f))return t.TypeChecker.getTypeAtLocation(e);const m=i(t.TypeChecker,y,o,f),h=i(t.TypeChecker,f,o,y);if(null==m&&null==h)return null;if(c(n)){const e=a(p(n));return null==e?null:i(t.TypeChecker,y,e,f)}return null!=m?m:h}function y(e,t){const n=l(e.getOperand()),r=a(e.getOperatorToken(),!0);return r?u(t.TypeChecker.getTypeAtLocation(n),r):null}t.getOperatorMethodReturnType=i,t.getOperatorMethodName=a,t.unwrapParenthesizedExpression=l,t.isCompoundAssignment=c,t.getEquivalentOperatorForCompound=p,t.getUnaryOperatorMethodReturnType=u,t.getOperatorNodeReturnType=function(e,t){return r.Node.isBinaryExpression(e)?d(e,t):r.Node.isPrefixUnaryExpression(e)||r.Node.isPostfixUnaryExpression(e)?y(e,t):null}},150:function(e,t,n){var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var s=Object.getOwnPropertyDescriptor(t,n);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,s)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),s=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return s(t,e),t},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const a=o(n(899)),l=o(n(928)),c=n(71),p=n(710),u=n(113),g=n(538),d=n(340),y=n(780),f=n(195),m=n(371),h=n(58),T=n(551),x=n(452),S=n(821),E=n(24),N=n(105),b=n(286),v=n(682),A=n(325),I=n(256),P=i(n(471)),C=n(276),K=i(n(669));t.default=class{constructor(e){this.project=new p.Project({tsConfigFilePath:e,skipAddingFilesFromTsConfig:!1}),this.rootDirectory=l.dirname(e);const t=this.project.getTypeChecker();(0,c.setProjectRoot)(this.rootDirectory),this.transformationContext=new h.TransformationContext(t),this.transformers=[{phase:1,transformer:new I.CSharpEventTransformer},{phase:1,transformer:new d.RefTransformer},{phase:1,transformer:new E.EventContextTransformer},{phase:1,transformer:new b.DelegateToArrowFunctionTransformer},{phase:1,transformer:new A.BracketAccessTransformer},{phase:1,transformer:new u.PromiseWrapperTransformer},{phase:1,transformer:new g.ComponentCallTransformer},{phase:1,transformer:new x.ScriptableObjectCreateInstanceTransformer},{phase:1,transformer:new m.ExtensionMethodTransformer},{phase:1,transformer:new T.GeniesInstanceTransformer},{phase:2,transformer:new y.GenericTypeTransformer},{phase:3,transformer:new S.OperatorOverloadingTransformer},{phase:4,transformer:new v.NumericOverloadResolutionTransformer},{phase:5,transformer:new f.GenericMethodTransformer}]}compile(e,t,n){this.project.addSourceFilesAtPaths(e),this.project.addSourceFilesAtPaths(t),n&&n.length>0&&(this.fixReferences(n,this.rootDirectory),this.project.saveSync());let r=new Set,s=new Set,o=new Map;e.forEach((e=>{const t=this.project.getSourceFileOrThrow(e);this.collectFiles(t,r,s,o)}));const i=this.topologicalSort(Array.from(r),o),a=new Map;let l=new Map;return i.forEach((e=>{let t=new P.default(e.getFullText());this.setDefaultExport(e),(0,c.updateImportsToAliasPaths)(e),this.initializeCompileOutput(l,e);try{this.applyTransformationDiffs(t,e),a.set(e,t)}catch(e){console.error(e)}})),i.forEach((e=>{this.emit(l,a,e)})),JSON.stringify({outputs:[...l.values()]})}setDefaultExport(e){const t=e.getDefaultExportSymbol();let n=null;if(t&&(n=t.getDeclarations().find((e=>e.getKind()===a.SyntaxKind.ClassDeclaration))),null==n)for(const t of e.getClasses())if(((0,c.extendsMonoBehaviour)(t)||(0,c.extendsScriptableObject)(t))&&!t.isDefaultExport()){t.setIsDefaultExport(!0);break}}fixReferences(e,t){const n=new Map;for(const{oldPath:t,newPath:r}of e)n.set(l.resolve(t),l.resolve(r));for(const e of this.project.getSourceFiles())for(const r of e.getImportDeclarations()){const s=r.getModuleSpecifierValue();if(!s)continue;const o=this.resolveSpecifier(s,e.getDirectoryPath(),t)+".ts";if(n.has(o)){const t=n.get(o);let s;const i=this.project.getSourceFile(t);if(i)s=e.getRelativePathAsModuleSpecifierTo(i);else{const n=e.getDirectoryPath();s=l.relative(n,t).replace(/\\/g,"/"),s.startsWith(".")||(s="./"+s)}r.setModuleSpecifier(s)}}}resolveSpecifier(e,t,n){return e.startsWith(".")?l.resolve(t,e):e.startsWith("/")?l.resolve(e):l.resolve(n,e)}groupTransformersByPhase(){return this.transformers.reduce(((e,t)=>{const{phase:n}=t;return e[n]||(e[n]=[]),e[n].push(t),e}),{})}runTransformers(e){const t=this.groupTransformersByPhase();for(const n of Object.keys(t).sort(((e,t)=>Number(e)-Number(t)))){const r=Number(n),s=t[r];let o=0,i=!0;for(;i;){i=!1,o++;const t=e.getDescendants();for(let e=0;e<t.length;e++){let n=t[e],r=n;if(i)break;s.forEach((({transformer:s})=>{r.wasForgotten()?i=!0:!r.wasForgotten()&&s.nodeTypes.includes(r.getKind())&&(r=s.transformNode(r,this.transformationContext),r!==n&&(i=!0,t[e]=r))}))}i&&console.log(`Phase ${r}: Retrying transformation due to forgotten nodes. Attempt ${o}`)}}}initializeCompileOutput(e,t){var n;try{const n=this.getGeniesDiagnostics(t);if(this.runTransformers(t),(0,c.sortImportsAndVars)(t),n.push(...this.getDiagnostics(t)),n.length>0)return void e.set(t,{FilePath:t.getFilePath(),IsSuccessful:!1,Errors:n,JsSource:"",IsMonobehaviour:!1,IsScriptableObj:!1,Properties:[],Id:t.getFilePath(),DefaultTypeName:"",InheritanceChain:[],SupportedUiEvents:c.GeniesScriptUiEvents.None,ReferencedSpecifiers:[]});const r=t.getDefaultExportSymbol();let s;r&&(s=r.getDeclarations().find((e=>e.getKind()===a.SyntaxKind.ClassDeclaration)));let o=!1,i=!1,l="";void 0!==s&&(o=(0,c.extendsMonoBehaviour)(s),i=(0,c.extendsScriptableObject)(s),l=(0,c.getFullTypeName)(s.getType()));const p=[];let u=[],g=c.GeniesScriptUiEvents.None;if(o||i&&s){let e=s;for(;e;){const t=e.getName();if(t==c.MonobehaviourTypeName||t==c.ScriptableObjectTypeName)break;p.unshift(...(0,c.extractProperties)(e)),e=e.getBaseClass()}u=(0,c.traversePrototypeChain)(s),(null==u?void 0:u.length)>0&&u.forEach((e=>{c.UiInterfaceToEnumMap.has(e)&&(g|=c.UiInterfaceToEnumMap.get(e))}))}const d=t.getImportDeclarations().map((e=>e.getModuleSpecifierValue())).filter((e=>e.startsWith("@assets/")||e.startsWith("@com.genies")));e.set(t,{FilePath:t.getFilePath(),IsSuccessful:!1,Errors:n,JsSource:"",IsMonobehaviour:o,IsScriptableObj:i,Properties:p,Id:t.getFilePath(),DefaultTypeName:l,InheritanceChain:u,SupportedUiEvents:g,ReferencedSpecifiers:d})}catch(r){let s=null!==(n=this.getDiagnostics(t))&&void 0!==n?n:[];return s.push(`Transformations Failed: ${r}`),void e.set(t,{FilePath:t.getFilePath(),IsSuccessful:!1,Errors:s,JsSource:"",IsMonobehaviour:!1,IsScriptableObj:!1,Properties:[],Id:t.getFilePath(),DefaultTypeName:"",InheritanceChain:[],SupportedUiEvents:c.GeniesScriptUiEvents.None,ReferencedSpecifiers:[]})}}emit(e,t,n){try{const r=[c.NonSerializedDecorator,c.HideInInspectorDecorator,c.SerializeFieldDecorator,c.HeaderDecorator,c.SpaceDecorator,c.TooltipDecorator],s=n.getDescendantsOfKind(p.SyntaxKind.Decorator);(0,c.removeDecorators)(s,(e=>r.includes(e.getName())));let o=n.getEmitOutput().getOutputFiles()[0].getText();o=this.remapSources(o,n,t);let i=e.get(n),a=i.Errors;i.IsSuccessful=void 0===a||0===a.length,i.JsSource=o}catch(t){let r=e.get(n);if(!r)return void console.error(t);r.Errors?r.Errors.push(`Compilation Failed: ${t}`):r.Errors=[t],r.IsSuccessful=!1,r.JsSource=""}}remapSources(e,t,n){try{let r=n.get(t).generateMap({source:t.getBaseName(),file:t.getBaseName(),includeContent:!1,hires:!0});const s=/\/\/# sourceMappingURL=data:application\/json(?:;charset=utf-8)?;base64,([A-Za-z0-9+/=]+)/,o=e.match(s);if(!o)throw new Error("No inline source map found in the JS output.");const i=o[1],a=Buffer.from(i,"base64").toString("utf8"),l=JSON.parse(a),c=(0,K.default)([l,JSON.stringify(r)],(()=>null)),p=JSON.stringify(c),u=`data:application/json;charset=utf-8;base64,${Buffer.from(p,"utf8").toString("base64")}`;return`${e.replace(s,"").trim()}\n//# sourceMappingURL=${u}`}catch(t){return console.error(t),e}}getGeniesDiagnostics(e){return(0,N.getGeniesSemanticDiagnostics)(e,this.project.getTypeChecker()).map((t=>{var n;const r=null!==(n=t.start)&&void 0!==n?n:0,{line:s,column:o}=e.getLineAndColumnAtPos(r),i=this.flattenDiagnosticMessageText(t.messageText);return`${e.getFilePath()} (${s},${o}): ${i}`}))}getDiagnostics(e){return e.getPreEmitDiagnostics().map((e=>e.compilerObject)).map((t=>{var n;const r=null!==(n=t.start)&&void 0!==n?n:0,{line:s,column:o}=e.getLineAndColumnAtPos(r),i=this.flattenDiagnosticMessageText(t.messageText);return`${e.getFilePath()} (${s},${o}): ${i}`}))}flattenDiagnosticMessageText(e){return"string"==typeof e?e:a.flattenDiagnosticMessageText(e,"\n")}collectFiles(e,t,n,r){const s=e.getFilePath();n.has(s)||(n.add(s),t.add(e),r.has(e)||r.set(e,new Set),e.getReferencingSourceFiles().forEach((s=>{this.collectFiles(s,t,n,r),r.has(s)||r.set(s,new Set),r.get(s).add(e)})))}topologicalSort(e,t){try{return this.topologicalSortWithTarjan(e,t)}catch(e){return console.error(`Topological Sort Failed: ${e}`),[]}}topologicalSortWithCycles(e,t){const n=new Map,r=new Map,s={value:0},o=[],i=new Set,a=[],l=e=>{if(n.set(e,s.value),r.set(e,s.value),s.value++,o.push(e),i.add(e),(t.get(e)||new Set).forEach((t=>{n.has(t)?i.has(t)&&r.set(e,Math.min(r.get(e),n.get(t))):(l(t),r.set(e,Math.min(r.get(e),r.get(t))))})),r.get(e)===n.get(e)){const t=[];let n;do{if(n=o.pop(),void 0===n)break;i.delete(n),t.push(n)}while(n!==e);a.push(t)}};return e.forEach((e=>{n.has(e)||l(e)})),a}topologicalSortWithTarjan(e,t){const n=this.topologicalSortWithCycles(e,t),r=[];for(let e=n.length-1;e>=0;e--)r.push(...n[e]);return r}applyTransformationDiffs(e,t){const n=new C.diff_match_patch,r=e.original,s=t.getFullText(),o=n.diff_main(r,s);let i=0,a=0;for(const[t,n]of o)if(0===t)i+=n.length,a+=n.length;else if(-1===t){try{e.remove(i,i+n.length)}catch(e){console.error(`Error removing text at [${i}, ${i+n.length}): ${e}`)}i+=n.length}else if(1===t){try{e.appendRight(i,n)}catch(e){console.error(`Error inserting text at ${i}: ${e}`)}a+=n.length}}}},195:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.GenericMethodTransformer=void 0;const r=n(710),s=n(71);t.GenericMethodTransformer=class{constructor(){this.nodeTypes=[r.SyntaxKind.CallExpression],this.sourceFileGenericMap=new Map}transformNode(e,t){let n=e;if(e.getKind()===r.SyntaxKind.CallExpression){const o=e.asKindOrThrow(r.SyntaxKind.CallExpression),i=o.getExpression(),a=i.getLastChildByKind(r.SyntaxKind.Identifier);if(a){const e=a.getText();if(s.componentMethods.has(e)){const e=i.getFirstChild();if(e){const r=t.typeChecker.getTypeAtLocation(e);if((0,s.isOrInheritsFromGameObjectOrComponent)(r,t))return n}}}if(i.getKind()===r.SyntaxKind.PropertyAccessExpression){const a=i.asKindOrThrow(r.SyntaxKind.PropertyAccessExpression);let l,c=a.getName();const p=a.getSymbol(),u=a.getExpression(),g=u.getType();if(!p)return n;const d=t.getSwapOverload(o);if(d&&(c=d.methodSwapValue,l=d.declaration),void 0===l){const e=p.getDeclarations();if(!(e.length>0))return n;l=e[0]}if(!l)return n;{if(!(0,s.getIsUnityAPIDeclaration)(l))return n;const r=l.getParent().getType(),i=o.getArguments(),a=o.getTypeArguments();if(a.length>0){const p=e.getSourceFile();this.sourceFileGenericMap.has(p)||this.sourceFileGenericMap.set(p,new Map);const d=a.map((e=>e.getType()));if(this.hasMatchingNonGenericOverload(l,d,i))n=this.replaceWithNonGenericCall(o,d,i,t);else{let e=[];const d=this.createGenericMethodVariable(r,c,a,p,e,t);(0,s.insertVariableStatements)(p,e,t);const y=i.map((e=>e.getFullText())).join(", "),f=l.isStatic(),m=(0,s.isGeniesScriptType)(g)&&!f?"//@ts-ignore\n"+u.getText()+"."+s.GeniesInstancePropName:u.getText(),h=f?`${d}(${y})`:`${d}.call(${m}, ${y})`;n=o.replaceWithText(h)}}}}}return n}getTypeName(e){var t,n;return null!==(n=null===(t=e.getSymbol())||void 0===t?void 0:t.getName())&&void 0!==n?n:e.getText()}getTypeKey(e,t){return`${this.getTypeName(e)}$${t.map((e=>{let t=e.getTypeArguments();return t.length>0?this.getTypeKey(e,t):this.getTypeName(e)})).join("$")}`}getKey(e,t,n){return`${this.getTypeName(e)}$${t}$${n.map((e=>this.getTypeName(e.getType()))).join("$")}`}createGenericMethodVariable(e,t,n,o,i,a){const l=this.getTypeName(e),c=this.getKey(e,t,n),p=this.sourceFileGenericMap.get(o);if(!p.has(c)){const e=`$genericMethod(${l}, "${t}", ${n.map((e=>(0,s.getIsUnityAPIType)(e.getType())&&e.getType().isInterface()?`$typeof("${(0,s.getFullTypeName)(e.getType())}")`:this.getTypeNameAndEnsureImported(e.getType(),o,a))).join(", ")})`,u=`_${c.replace(/\$/g,"_")}`;p.set(c,u),i.push({declarationKind:r.VariableDeclarationKind.Const,declarations:[{name:u,initializer:e}]})}return p.get(c)}getTypeNameAndEnsureImported(e,t,n){if(n.sourceFileGenericTypeMap.has(t)){let r=n.sourceFileGenericTypeMap.get(t),s=e.getTypeArguments(),o=this.getTypeKey(e,s);if(r.has(o))return r.get(o)}return(0,s.getTypeNameAndEnsureImported)(e,t)}hasMatchingNonGenericOverload(e,t,n){const r=e.getParent(),o=e.getName(),i=r.getMethods().filter((e=>e.getName()===o&&0===e.getTypeParameters().length)),a="System.Type";for(const e of i){const r=e.getParameters();if(r.filter((e=>(0,s.getFullTypeName)(e.getType())===a)).length===t.length&&r.length===t.length+n.length)return r.every(((e,r)=>r<t.length?(0,s.getFullTypeName)(e.getType())===a:e.getType().getText()===n[r-t.length].getType().getText()))}return!1}replaceWithNonGenericCall(e,t,n,o){const i=e.asKindOrThrow(r.SyntaxKind.CallExpression),a=i.getExpression().asKindOrThrow(r.SyntaxKind.PropertyAccessExpression),l=a.getName(),c=a.getExpression().getText(),p=t.map((t=>(0,s.getIsUnityAPIType)(t)&&t.isInterface()?`$typeof("${(0,s.getFullTypeName)(t)}")`:`${this.getTypeNameAndEnsureImported(t,e.getSourceFile(),o)}`)).join(", "),u=n.map((e=>e.getText())).join(", "),g=`${c}.${l}(${p}${u?`, ${u}`:""}) as ${i.getReturnType().getText()}`;return e.replaceWithText(g)}}},229:function(e,t,n){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=r(n(150));!function(){const e=process.argv.slice(2);let t,n=[],r=[],o=[],i=null;for(const s of e)if("--tsconfig"===s||"-t"===s)i="tsconfig";else if("-c"===s||"--compile"===s)i="compile";else if("-p"===s||"--project"===s)i="project";else if("-mf"===s||"--movedFiles"===s)i="movedFiles";else if("tsconfig"===i)t=s,i=null;else if("compile"===i)n.push(s);else if("project"===i)r.push(s);else if("movedFiles"===i){try{o=JSON.parse(s)}catch(e){console.error("Failed to parse movedFiles JSON:",e),process.exit(1)}i=null}t&&0!==n.length||(console.error("Usage: node index.js --tsconfig <tsconfigPath> -c <file1> [<file2> [...]] -p <additionalFile1> [<additionalFile2> [...]]"),process.exit(1));try{const e=new s.default(t).compile(n,r,o);process.stdout.write(e.toString())}catch(e){console.error("Compilation failed:",e),process.exit(1)}}()},256:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CSharpEventTransformer=void 0;const r=n(710);t.CSharpEventTransformer=class{constructor(){this.nodeTypes=[r.SyntaxKind.CallExpression]}transformNode(e,t){if(r.Node.isCallExpression(e)){const n=e,s=n.getExpression();if(r.Node.isPropertyAccessExpression(s)){const e=s.getName();if("Add"===e||"Remove"===e){const o=s.getExpression(),i=t.typeChecker.getTypeAtLocation(o);if(this.isCSharpEventType(i)&&r.Node.isPropertyAccessExpression(o)){const t=o.getName(),r=o.getExpression(),s=this.createNewCallExpression(n,r,e.toLowerCase(),t);return this.addTsIgnoreComment(s),s}}}}return e}isCSharpEventType(e){const t=e.getSymbol();if(!t)return!1;const n=t.getName();return"CSharpEvent"===n||"CSharpEvent_Add"===n||"CSharpEvent_Remove"===n}createNewCallExpression(e,t,n,r){const s=e.getArguments().map((e=>e.getText())).join(", "),o=`${n}_${r}`,i=`${t.getText()}.${o}(${s})`;return e.replaceWithText(i)}addTsIgnoreComment(e){const t=e.getSourceFile(),n=e.getStart();t.insertText(n,"// @ts-ignore\n")}}},276:e=>{e.exports=require("diff-match-patch")},286:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DelegateToArrowFunctionTransformer=void 0;const r=n(710),s=n(71);t.DelegateToArrowFunctionTransformer=class{constructor(){this.nodeTypes=[r.SyntaxKind.CallExpression]}transformNode(e,t){if(!r.Node.isCallExpression(e))return e;const n=e.asKindOrThrow(r.SyntaxKind.CallExpression),o=t.typeChecker,i=n.getExpression();if(r.Node.isPropertyAccessExpression(i)){const t=i.getExpression(),n=o.getTypeAtLocation(t);if((0,s.isSignalBusType)(n)||(0,s.isGeniesEventType)(n))return e}const a=o.getResolvedSignature(n);if(!a)return e;const l=a.getParameters();return n.getArguments().map(((e,t)=>{const s=l[t];if(s){const t=o.getTypeOfSymbolAtLocation(s,n);if(this.isDelegateType(t)&&!r.Node.isArrowFunction(e))return this.wrapInArrowFunction(e,t)}return e})),n}isDelegateType(e){return e.getCallSignatures().length>0}wrapInArrowFunction(e,t){const n=t.getCallSignatures();if(0===n.length)throw new Error("Expected delegate type to have call signatures.");const r=n[0].getParameters().map((e=>e.getName())).join(", "),s=`(${r}) => ${e.getText()}(${r})`;return console.log(`Wrapping in arrow function: ${s}`),e.replaceWithText(s)}}},325:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.BracketAccessTransformer=void 0;const r=n(710),s=n(71);t.BracketAccessTransformer=class{constructor(){this.nodeTypes=[r.SyntaxKind.ElementAccessExpression]}transformNode(e,t){if(!r.Node.isElementAccessExpression(e))return e;const n=e,o=n.getExpression(),i=n.getArgumentExpression();if(!i)return e;const a=o.getType();if(!(0,s.getIsUnityAPIType)(a))return e;const l=a.getSymbol();if(!l)return e;const c=l.getDeclarations().filter((e=>r.Node.isClassDeclaration(e)||r.Node.isInterfaceDeclaration(e)));if(0===c.length)return e;const p=[],u=[],g=new Set;if(c.forEach((e=>{e.getMethods().forEach((e=>{var t;const n=e.getName();if(n===s.GET_ITEM_NAME||n===s.SET_ITEM_NAME){const r=null===(t=e.getSignature().getDeclaration())||void 0===t?void 0:t.getText();r&&!g.has(r)&&(n===s.GET_ITEM_NAME?p.push(e):u.push(e),g.add(r))}}))})),0===p.length&&0===u.length)return e;const d=n.getParent();if(r.Node.isBinaryExpression(d)&&d.getOperatorToken().getKind()===r.SyntaxKind.EqualsToken&&d.getLeft()===n){if(0===u.length)return e;const n=d.getRight();if(!u.find((e=>{const r=e.getParameters();if(2!==r.length)return!1;const s=r[0].getType(),o=r[1].getType(),a=i.getType(),l=n.getType(),c=t.typeChecker;return c.isTypeAssignableTo(a,s)&&c.isTypeAssignableTo(l,o)})))return e;const r=o.getText(),a=i.getText(),l=n.getText(),c=`${r}.${s.SET_ITEM_NAME}(${a}, ${l})`;return d.replaceWithText(c),d}{if(0===p.length)return e;if(!p.find((e=>{const n=e.getParameters();if(1!==n.length)return!1;const r=n[0].getType(),s=i.getType();return t.typeChecker.isTypeAssignableTo(s,r)})))return e;const r=o.getText(),a=i.getText(),l=`${r}.${s.GET_ITEM_NAME}(${a})`;return n.replaceWithText(l),n}}}},340:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.RefTransformer=void 0;const r=n(710);t.RefTransformer=class{constructor(){this.nodeTypes=[r.SyntaxKind.BinaryExpression,r.SyntaxKind.PropertyAccessExpression]}transformNode(e,t){let n=e;if(r.Node.isBinaryExpression(e)&&e.getOperatorToken().getKind()===r.SyntaxKind.EqualsToken){const s=e,o=s.getLeft(),i=s.getRight();if(r.Node.isPropertyAccessExpression(o)&&"value"===o.getName()&&this.isRefType(o.getExpression(),t.typeChecker)){const t=o.getExpression().getText(),r=i.getText();n=e.replaceWithText(`$set(${t}, ${r})`)}}else if(r.Node.isPropertyAccessExpression(e)){const r=e;if("value"===r.getName()&&this.isRefType(r.getExpression(),t.typeChecker)){const t=r.getExpression().getText();n=e.replaceWithText(`$unref(${t})`)}}return n}isRefType(e,t){const n=t.getTypeAtLocation(e).getSymbol();return!!n&&"$Ref"===n.getName()}}},371:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ExtensionMethodTransformer=void 0;const r=n(710),s=n(71),o=n(101);t.ExtensionMethodTransformer=class{constructor(){this.nodeTypes=[r.SyntaxKind.CallExpression]}transformNode(e,t){if(!r.Node.isCallExpression(e))return e;const n=e,i=n.getExpression();if(!r.Node.isPropertyAccessExpression(i))return e;const a=i.asKindOrThrow(r.SyntaxKind.PropertyAccessExpression),l=a.getName(),c=a.getExpression(),p=c.getType(),u=a.getSymbol();if(!u)return e;const g=u.getDeclarations();if(!g||g.length<=0)return e;const d=g.filter((e=>r.Node.isMethodSignature(e)));if(0===d.length)return e;const y=d[0];if(!(0,s.getIsUnityAPIDeclaration)(y))return e;const f=t.typeChecker,m=(0,o.selectBestOverload)(d,n,f);if(!m)return e;if(m.getKind()!=r.SyntaxKind.MethodSignature)return e;const h=m.getJsDocs().flatMap((e=>e.getTags()))||[];if(!h.some((e=>"extension"===e.getTagName())))return e;const T=h.find((e=>"extension"===e.getTagName()));if(!T)return e;let x=null;const S=h.find((e=>"extension-generic-arg-index"===e.getTagName()));if(S){const e=S.getCommentText()||"0";x=parseInt(e,10),isNaN(x)&&(x=null)}const E=T.getCommentText(),{extensionClass:N,extensionMethod:b,typeParameters:v}=this.parseExtensionComment(E,l),A=e.getSourceFile(),I=this.extractAndOrderTypeArguments(c,n,m,v,x);A.fixMissingImports();const P=n.getArguments(),C=N.split("."),K=C.pop()||"",D=C.join(".");this.ensureImport(A,K,D);const M=(0,s.isGeniesScriptType)(p)?"//@ts-ignore\n"+c.getText()+"."+s.GeniesInstancePropName:c.getText(),O=P.map((e=>e.getFullText())).join(", "),$=I.length>0?`${K}.${b}<${I.join(", ")}>(${M}, ${O})`:`${K}.${b}(${M}, ${O})`;return n.replaceWithText($)}parseExtensionComment(e,t){if(!e)return{extensionClass:"",extensionMethod:t,typeParameters:[]};const n=e.match(/^(?<namespace>[a-zA-Z_]\w*(?:\.[a-zA-Z_]\w*)*)\.(?<method>[a-zA-Z_]\w*)\s*(?:<(?<arguments>[^>]*)>)?$/);if(n&&n.groups){const{namespace:e,method:t,arguments:r}=n.groups;return{extensionClass:e,extensionMethod:t,typeParameters:r?r.split(",").map((e=>e.trim())):[]}}return{extensionClass:"",extensionMethod:t,typeParameters:[]}}ensureImport(e,t,n){const r=e.getImportDeclarations();let s=!1;for(const e of r)if(e.getModuleSpecifier().getLiteralText()===n){s=!0,e.getNamedImports().some((e=>e.getName()===t))||e.addNamedImport(t);break}s||e.addImportDeclaration({namedImports:[{name:t}],moduleSpecifier:n})}getTypeName(e){return e.getText(void 0,r.TypeFormatFlags.None)}extractAndOrderTypeArguments(e,t,n,r,o){const i=e.getType(),a=i.getTypeArguments(),l=i.getSymbolOrThrow().getDeclaredType().getTypeArguments(),c=new Map;a.forEach(((e,t)=>{const n=l[t];n&&c.set(n.getText(),e.getText())}));const p=t.getTypeArguments(),u=n.getTypeParameters();p.forEach(((e,t)=>{const n=u[t];n&&c.set(n.getText(),e.getText())}));let g=r.map((e=>c.get(e)||e));return null!==o&&o>=0&&o<=g.length&&((0,s.getTypeNameAndEnsureImported)(i,t.getSourceFile()),g.splice(o,0,this.getTypeName(i))),g}}},452:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ScriptableObjectCreateInstanceTransformer=void 0;const r=n(710),s=n(71);t.ScriptableObjectCreateInstanceTransformer=class{constructor(){this.nodeTypes=[r.SyntaxKind.CallExpression]}transformNode(e,t){let n=e;if(r.Node.isCallExpression(e)){const s=e,o=s.getExpression(),i=s.getTypeArguments(),a=s.getArguments();if(i.length>0||this.isTypeofArgument(a)){const e=o.getLastChildByKind(r.SyntaxKind.Identifier);if(!e)return n;const l=e.getText();if("CreateInstance"===l){const e=o.getFirstChild();if(!e)return n;const r=t.typeChecker.getTypeAtLocation(e);if(this.isScriptableObject(r,t)){const r=t.typeChecker.getTypeAtLocation(s);if(i.length>0){const o=i[0],a=t.typeChecker.getTypeAtLocation(o);n=this.processTypeArgument(s,a,!1,l,e,r)}else if(this.isTypeofArgument(a)){const o=this.getTypeFromTypeofArgument(a[0]);if(o){const i=t.typeChecker.getTypeAtLocation(o);n=this.processTypeArgument(s,i,!0,l,e,r)}}}}}}return n}isTypeofArgument(e){return e.length>0&&e[0].getText().startsWith("$typeof(")}getTypeFromTypeofArgument(e){const t=e.getFirstChildByKind(r.SyntaxKind.CallExpression);if(t){const e=t.getArguments()[0];if(r.Node.isTypeNode(e))return e}}processTypeArgument(e,t,n,r,o,i){if((0,s.getIsUnityAPIType)(t)){if(n)return e;const s=this.getTypeName(t),a=this.createOverloadedCallExpression(e,`$typeof(${s})`,r,o,i);return e.replaceWithText(a)}if((0,s.getGeniesScriptTypeFromType)(t)===s.GeniesScriptType.ScriptableObject){const n=(0,s.getFullTypeName)(t),a=this.createOverloadedCallExpression(e,`"${n}"`,r,o,i,!0);return e.replaceWithText(a)}return e}isScriptableObject(e,t){if(!e)return!1;const n=e.getSymbol();return!!n&&("ScriptableObject"===n.getName()||this.inheritsFrom(e,["ScriptableObject"],t))}inheritsFrom(e,t,n){var r;const s=this.getBaseTypes(e,n);for(const e of s){const s=null===(r=e.getSymbol())||void 0===r?void 0:r.getName();if(s&&t.includes(s))return!0;if(this.inheritsFrom(e,t,n))return!0}return!1}getBaseTypes(e,t){const n=[],s=e.getSymbol();if(!s)return n;const o=s.getDeclarations();if(!o)return n;for(const e of o)if(r.Node.isClassDeclaration(e)){const r=e.getHeritageClauses();for(const e of r){const r=e.getTypeNodes();for(const e of r){const r=t.typeChecker.getTypeAtLocation(e);r&&n.push(r)}}}return n}getTypeName(e){const t=e.getSymbol();return t?t.getName():e.getText()}createOverloadedCallExpression(e,t,n,r,s,o=!1){const i=e.getArguments().map((e=>e.getText())).join(", "),a=s.getText();let l=`(${r.getFullText()}.${n}(${t}${i?", "+i:""}) as ${a})`;return o&&(l=`${l}`),l}}},471:e=>{e.exports=require("magic-string")},538:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ComponentCallTransformer=void 0;const r=n(710),s=n(71);t.ComponentCallTransformer=class{constructor(){this.nodeTypes=[r.SyntaxKind.CallExpression]}transformNode(e,t){let n=e;if(r.Node.isCallExpression(e)){const o=e,i=o.getExpression(),a=o.getTypeArguments(),l=o.getArguments();if(a.length>0||this.isTypeofArgument(l)){const e=i.getLastChildByKind(r.SyntaxKind.Identifier);if(!e)return n;const c=e.getText();if(s.componentMethods.has(c)){const e=i.getFirstChild();if(!e)return n;const r=t.typeChecker.getTypeAtLocation(e);if((0,s.isOrInheritsFromGameObjectOrComponent)(r,t)){const e=t.typeChecker.getTypeAtLocation(o);if(a.length>0){const r=a[0],s=t.typeChecker.getTypeAtLocation(r);n=this.processTypeArgument(o,s,!1,e)}else if(this.isTypeofArgument(l)){const r=this.getTypeFromTypeofArgument(l[0]);if(r){const s=t.typeChecker.getTypeAtLocation(r);n=this.processTypeArgument(o,s,!0,e)}}}}}}return n}isTypeofArgument(e){return e.length>0&&e[0].getText().startsWith("$typeof(")}getTypeFromTypeofArgument(e){const t=e.getFirstChildByKind(r.SyntaxKind.CallExpression);if(t){const e=t.getArguments()[0];if(r.Node.isTypeNode(e))return e}}processTypeArgument(e,t,n,r){if((0,s.getIsUnityAPIType)(t)){if(n)return e;const o=t.isInterface()?`$typeof("${(0,s.getFullTypeName)(t)}")`:`$typeof(${this.getTypeName(t)})`;return this.createOverloadedCallExpression(e,`${o}`,r)}if(t.isInterface()){const n=(0,s.getFullTypeName)(t);return this.createOverloadedCallExpression(e,`"${n}"`,r,!0)}if((0,s.getGeniesScriptTypeFromType)(t)===s.GeniesScriptType.Monobehaviour){const n=(0,s.getFullTypeName)(t);return this.createOverloadedCallExpression(e,`"${n}"`,r,!0)}return e}getTypeName(e){const t=e.getSymbol();return t?t.getName():e.getText()}createOverloadedCallExpression(e,t,n,r=!1){const s=n.getText();e.getTypeArguments().forEach((t=>{e.removeTypeArgument(t)})),e.insertArgument(0,t);const o=`(${e.getText()} as ${s})`,i=e.replaceWithText(o);if(r){const e=i.getSourceFile(),t=i.getStart();e.insertText(t,"// @ts-ignore\n")}return i}}},551:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.GeniesInstanceTransformer=void 0;const r=n(710),s=n(71);t.GeniesInstanceTransformer=class{constructor(){this.nodeTypes=[r.SyntaxKind.CallExpression]}transformNode(e,t){if(!r.Node.isCallExpression(e))return e;const n=e.asKindOrThrow(r.SyntaxKind.CallExpression),o=t.typeChecker,i=o.getTypeAtLocation(n.getExpression());if(!(0,s.getIsUnityAPIType)(i))return e;const a=n.getArguments();return a.forEach(((e,t)=>{const n=o.getTypeAtLocation(e);if((0,s.isGeniesScriptType)(n)){const n=`//@ts-ignore\n${e.getText()}.${s.GeniesInstancePropName}`;a[t]=e.replaceWithText(n)}})),n}}},669:e=>{e.exports=require("@ampproject/remapping")},682:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.NumericOverloadResolutionTransformer=void 0;const r=n(710),s=n(71),o=n(101);t.NumericOverloadResolutionTransformer=class{constructor(){this.nodeTypes=[r.SyntaxKind.CallExpression]}transformNode(e,t){if(!r.Node.isCallExpression(e))return e;const n=e,i=n.getExpression();if(!r.Node.isPropertyAccessExpression(i)&&!r.Node.isIdentifier(i))return e;const a=(r.Node.isPropertyAccessExpression(i)?i.getNameNode():i).getSymbol();if(!a)return e;const l=a.getDeclarations().filter((e=>r.Node.isMethodDeclaration(e)));if(0===l.length)return e;const c=l[0];if(!(0,s.getIsUnityAPIDeclaration)(c))return e;const p=t.typeChecker,u=(0,o.selectBestOverload)(l,n,p);if(!u)return e;const g=u.getJsDocs();let d;for(const e of g){const t=e.getTags();for(const e of t)if("methodSwap"===e.getTagName()){d=e.getCommentText();break}if(d)break}if(!d)return e;if(u.getTypeParameters().length>0)return t.setSwapOverload(n,{declaration:u,methodSwapValue:d}),e;const y=n.getArguments().map((e=>(0,o.inferPossibleTypes)(e,p))),f=n.getArguments().map(((e,t)=>{const n=y[t],r=p.getTypeAtLocation(u.getParameters()[t]);return n.find((e=>(0,o.typesAreEqual)(e,r)))?e.getFullText():(n.some((e=>(0,o.isNumericCastable)(e,r))),`(${e.getFullText()}) as ${r.getText()}`)}));let m;m=r.Node.isPropertyAccessExpression(i)?`${i.getExpression().getText()}.${d}`:d;const h=`${m}(${f.join(", ")})`,T=n.replaceWithText(h),x=T.getSourceFile(),S=T.getStart();return x.insertText(S,"// @ts-ignore\n"),T}}},710:e=>{e.exports=require("ts-morph")},780:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.GenericTypeTransformer=void 0;const r=n(710),s=n(71);t.GenericTypeTransformer=class{constructor(){this.nodeTypes=[r.SyntaxKind.NewExpression,r.SyntaxKind.CallExpression]}transformNode(e,t){return e.isKind(r.SyntaxKind.NewExpression)?this.transformNewExpression(e,t):this.transformGenericUsage(e,t)}transformNewExpression(e,t){const n=e.asKindOrThrow(r.SyntaxKind.NewExpression),o=n.getType(),i=n.getTypeArguments().map((e=>e.getType())),a=n.getArguments();if((0,s.getIsUnityAPIType)(o)&&i.length>0){const r=e.getSourceFile();this.ensureGenericTypeMap(r,t),(0,s.ensureTypeImported)(o,r);let l=[];const c=this.createGenericTypeVariable(o,i,r,l,t);(0,s.insertVariableStatements)(r,l,t);const p=`new ${c}(${a.map((e=>e.getFullText())).join(", ")}) as ${o.getText()}`;return n.replaceWithText(p)}return e}transformGenericUsage(e,t){let n;switch(e.getKind()){case r.SyntaxKind.CallExpression:{const s=e.asKindOrThrow(r.SyntaxKind.CallExpression);n=t.typeChecker.getTypeAtLocation(s);break}case r.SyntaxKind.PropertyAccessExpression:n=e.asKindOrThrow(r.SyntaxKind.PropertyAccessExpression).getType();break;case r.SyntaxKind.VariableDeclaration:{const t=e.asKindOrThrow(r.SyntaxKind.VariableDeclaration).getInitializer();if(!t)return e;n=t.getType();break}case r.SyntaxKind.BinaryExpression:n=e.asKindOrThrow(r.SyntaxKind.BinaryExpression).getRight().getType();break;case r.SyntaxKind.AsExpression:n=e.asKindOrThrow(r.SyntaxKind.AsExpression).getType();break;case r.SyntaxKind.TypeAssertionExpression:n=e.asKindOrThrow(r.SyntaxKind.TypeAssertionExpression).getType();break;default:return e}if(!n||!(0,s.getIsUnityAPIType)(n))return e;const o=n.getTypeArguments();if(0===o.length)return e;const i=e.getSourceFile();t.sourceFileGenericTypeMap.has(i)||t.sourceFileGenericTypeMap.set(i,new Map),(0,s.ensureTypeImported)(n,i);let a=[];return this.createGenericTypeVariable(n,o,i,a,t),(0,s.insertVariableStatements)(i,a,t),e}ensureGenericTypeMap(e,t){t.sourceFileGenericTypeMap.has(e)||t.sourceFileGenericTypeMap.set(e,new Map)}createGenericTypeVariable(e,t,n,s,o){const i=o.sourceFileGenericTypeMap.get(n),a=this.getKey(e,t);if(!i.has(a)){const l=`$generic(${this.getTypeName(e)}, ${t.map((e=>this.getTypeNameAndEnsureImported(e,n,s,o))).join(", ")})`,c=`_${a.replace(/\$/g,"_")}`;i.set(a,c),s.push({declarationKind:r.VariableDeclarationKind.Const,declarations:[{name:c,initializer:l}]})}return i.get(a)}getKey(e,t){return`${this.getTypeName(e)}$${t.map((e=>{const t=e.getTypeArguments();return t.length>0?this.getKey(e,t):this.getTypeName(e)})).join("$")}`}getTypeName(e){var t,n;return null!==(n=null===(t=e.getSymbol())||void 0===t?void 0:t.getName())&&void 0!==n?n:e.getText()}getTypeNameAndEnsureImported(e,t,n,r){return e.getTypeArguments().length>0?this.createGenericTypeVariable(e,e.getTypeArguments(),t,n,r):(0,s.getTypeNameAndEnsureImported)(e,t)}}},821:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.OperatorOverloadingTransformer=void 0;const r=n(710),s=n(71),o=n(130);t.OperatorOverloadingTransformer=class{constructor(){this.nodeTypes=[r.SyntaxKind.BinaryExpression,r.SyntaxKind.PrefixUnaryExpression,r.SyntaxKind.PostfixUnaryExpression]}transformNode(e,t){return r.Node.isBinaryExpression(e)?this.transformBinaryExpression(e,t):r.Node.isPrefixUnaryExpression(e)||r.Node.isPostfixUnaryExpression(e)?this.transformUnaryExpression(e,t):e}transformBinaryExpression(e,t){var n,i;const a=e.getOperatorToken().getKind();let l=(0,o.getOperatorMethodName)(a);if((0,o.isCompoundAssignment)(a)){const e=(0,o.getEquivalentOperatorForCompound)(a);l=(0,o.getOperatorMethodName)(e)}if(l){if(a===r.SyntaxKind.EqualsEqualsEqualsToken||a===r.SyntaxKind.EqualsEqualsToken||a===r.SyntaxKind.ExclamationEqualsEqualsToken||a==r.SyntaxKind.ExclamationEqualsToken){const t=(0,o.unwrapParenthesizedExpression)(e.getRight());if(r.Node.isNullLiteral(t)||r.Node.isUndefinedKeyword(t))return e}const c=(0,o.unwrapParenthesizedExpression)(e.getLeft()),p=(0,o.unwrapParenthesizedExpression)(e.getRight()),u=this.transformNodeIfNeeded(c,t),g=this.transformNodeIfNeeded(p,t);let d=t.typeChecker.getTypeAtLocation(u),y=t.typeChecker.getTypeAtLocation(g);if(y.isLiteral()&&(y=t.typeChecker.getBaseTypeOfLiteralType(y)),d.isLiteral()&&(d=t.typeChecker.getBaseTypeOfLiteralType(d)),!(0,s.getIsUnityAPIType)(d)&&!(0,s.getIsUnityAPIType)(y))return e;const f=u.getText(),m=g.getText(),h=(0,o.getOperatorMethodReturnType)(t.typeChecker,d,l,y),T=(0,o.getOperatorMethodReturnType)(t.typeChecker,y,l,d);if(null==h&&null==T)return e;if((0,o.isCompoundAssignment)(a)){const t=c.getText(),r=(0,o.getEquivalentOperatorForCompound)(a),s=(0,o.getOperatorMethodName)(r),i=`${t} = ${null===(n=d.getSymbol())||void 0===n?void 0:n.getName()}.${s}(${t}, ${m})`;return e.replaceWithText(i)}const x=`${null===(i=(null!=h?d:y).getSymbol())||void 0===i?void 0:i.getName()}.${l}(${f}, ${m})`;if(r.Node.isBinaryExpression(u)||r.Node.isBinaryExpression(g)){const t=`(${x})`;return e.replaceWithText(t)}return e.replaceWithText(x)}return e}transformUnaryExpression(e,t){var n;const r=(0,o.unwrapParenthesizedExpression)(e.getOperand()),s=e.getOperatorToken(),i=(0,o.getOperatorMethodName)(s,!0);if(i){const s=t.typeChecker.getTypeAtLocation(r);if((0,o.getUnaryOperatorMethodReturnType)(s,i)){const t=r.getText(),o=`(${null===(n=s.getSymbol())||void 0===n?void 0:n.getName()}.${i}(${t}))`;return e.replaceWithText(o)}}return e}transformNodeIfNeeded(e,t){const n=(0,o.unwrapParenthesizedExpression)(e);return r.Node.isBinaryExpression(n)||r.Node.isPrefixUnaryExpression(n)||r.Node.isPostfixUnaryExpression(n)?this.transformNode(n,t):n}}},899:e=>{e.exports=require("typescript")},928:e=>{e.exports=require("path")},985:e=>{e.exports=require("typescript/lib/tsserverlibrary")}},t={};return function n(r){var s=t[r];if(void 0!==s)return s.exports;var o=t[r]={exports:{}};return e[r].call(o.exports,o,o.exports,n),o.exports}(229)})()));
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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Z0IsR0FDcEQsT0FBSSxFQUFBRSxLQUFLK1ksbUJBQW1CbWdCLElBQWtCLEVBQUFsNUIsS0FBSytYLHdCQUF3Qm1oQixJQUFrQixFQUFBbDVCLEtBQUtnWix5QkFBeUJrZ0IsR0FDaEh6NUIsS0FBS0ksY0FBY3E1QixFQUFlbjVCLEdBRXRDbTVCLENBQ1gsRSxVQ3pJSjU1QixFQUFPRCxRQUFVMHhCLFFBQVEsYSxVQ0F6Qnp4QixFQUFPRCxRQUFVMHhCLFFBQVEsTyxVQ0F6Qnp4QixFQUFPRCxRQUFVMHhCLFFBQVEsaUMsR0NDckJvSSxFQUEyQixDQUFDLEUsT0FHaEMsU0FBU0MsRUFBb0JDLEdBRTVCLElBQUlDLEVBQWVILEVBQXlCRSxHQUM1QyxRQUFxQnh0QixJQUFqQnl0QixFQUNILE9BQU9BLEVBQWFqNkIsUUFHckIsSUFBSUMsRUFBUzY1QixFQUF5QkUsR0FBWSxDQUdqRGg2QixRQUFTLENBQUMsR0FPWCxPQUhBazZCLEVBQW9CRixHQUFVRyxLQUFLbDZCLEVBQU9ELFFBQVNDLEVBQVFBLEVBQU9ELFFBQVMrNUIsR0FHcEU5NUIsRUFBT0QsT0FDZixDQ25CMEIrNUIsQ0FBb0IsSSIsInNvdXJjZXMiOlsiZmlsZTovLy9Vc2Vycy9yZGFsYXEvRGVza3RvcC9Qcm9qZWN0cy9nZW5pZXMtdW5pdHktcGFja2FnZXMvaW50ZXJuYWwvY29tLmdlbmllcy5zY3JpcHRpbmcuaW50ZXJuYWwvRWRpdG9yL0NvbXBpbGVyL1Byb2plY3R+L3dlYnBhY2svdW5pdmVyc2FsTW9kdWxlRGVmaW5pdGlvbiIsImZpbGU6Ly8vVXNlcnMvcmRhbGFxL0Rlc2t0b3AvUHJvamVjdHMvZ2VuaWVzLXVuaXR5LXBhY2thZ2VzL2ludGVybmFsL2NvbS5nZW5pZXMuc2NyaXB0aW5nLmludGVybmFsL0VkaXRvci9Db21waWxlci9Qcm9qZWN0fi9zcmMvdHJhbnNmb3JtZXJzL0V2ZW50Q29udGV4dFRyYW5zZm9ybWVyLnRzIiwiZmlsZTovLy9Vc2Vycy9yZGFsYXEvRGVza3RvcC9Qcm9qZWN0cy9nZW5pZXMtdW5pdHktcGFja2FnZXMvaW50ZXJuYWwvY29tLmdlbmllcy5zY3JpcHRpbmcuaW50ZXJuYWwvRWRpdG9yL0NvbXBpbGVyL1Byb2plY3R+L3NyYy90cmFuc2Zvcm1lcnMvVHJhbnNmb3JtYXRpb25Db250ZXh0LnRzIiwiZmlsZTovLy9Vc2Vycy9yZGFsYXEvRGVza3RvcC9Qcm9qZWN0cy9nZW5pZXMtdW5pdHktcGFja2FnZXMvaW50ZXJuYWwvY29tLmdlbmllcy5zY3JpcHRpbmcuaW50ZXJuYWwvRWRpdG9yL0NvbXBpbGVyL1Byb2plY3R+L3NyYy9Db21waWxlclV0aWxzLnRzIiwiZmlsZTovLy9Vc2Vycy9yZGFsYXEvRGVza3RvcC9Qcm9qZWN0cy9nZW5pZXMtdW5pdHktcGFja2FnZXMvaW50ZXJuYWwvY29tLmdlbmllcy5zY3JpcHRpbmcuaW50ZXJuYWwvRWRpdG9yL0NvbXBpbGVyL1Byb2plY3R+L3NyYy9NZXRob2RPdmVybG9hZFV0aWxzLnRzIiwiZmlsZTovLy9Vc2Vycy9yZGFsYXEvRGVza3RvcC9Qcm9qZWN0cy9nZW5pZXMtdW5pdHktcGFja2FnZXMvaW50ZXJuYWwvY29tLmdlbmllcy5zY3JpcHRpbmcuaW50ZXJuYWwvRWRpdG9yL0NvbXBpbGVyL1Byb2plY3R+L3NyYy9HZW5pZXNEaWFnbm9zdGljc1V0aWxzLnRzIiwiZmlsZTovLy9Vc2Vycy9yZGFsYXEvRGVza3RvcC9Qcm9qZWN0cy9nZW5pZXMtdW5pdHktcGFja2FnZXMvaW50ZXJuYWwvY29tLmdlbmllcy5zY3JpcHRpbmcuaW50ZXJuYWwvRWRpdG9yL0NvbXBpbGVyL1Byb2plY3R+L3NyYy90cmFuc2Zvcm1lcnMvUHJvbWlzZVdyYXBwZXJUcmFuc2Zvcm1lci50cyIsImZpbGU6Ly8vVXNlcnMvcmRhbGFxL0Rlc2t0b3AvUHJvamVjdHMvZ2VuaWVzLXVuaXR5LXBhY2thZ2VzL2ludGVybmFsL2NvbS5nZW5pZXMuc2NyaXB0aW5nLmludGVybmFsL0VkaXRvci9Db21waWxlci9Qcm9qZWN0fi9zcmMvT3BlcmF0b3JPdmVybG9hZGluZ1V0aWxzLnRzIiwiZmlsZTovLy9Vc2Vycy9yZGFsYXEvRGVza3RvcC9Qcm9qZWN0cy9nZW5pZXMtdW5pdHktcGFja2FnZXMvaW50ZXJuYWwvY29tLmdlbmllcy5zY3JpcHRpbmcuaW50ZXJuYWwvRWRpdG9yL0NvbXBpbGVyL1Byb2plY3R+L3NyYy9jb21waWxlci9Db21waWxlci50cyIsImZpbGU6Ly8vVXNlcnMvcmRhbGFxL0Rlc2t0b3AvUHJvamVjdHMvZ2VuaWVzLXVuaXR5LXBhY2thZ2VzL2ludGVybmFsL2NvbS5nZW5pZXMuc2NyaXB0aW5nLmludGVybmFsL0VkaXRvci9Db21waWxlci9Qcm9qZWN0fi9zcmMvdHJhbnNmb3JtZXJzL0dlbmVyaWNNZXRob2RUcmFuc2Zvcm1lci50cyIsImZpbGU6Ly8vVXNlcnMvcmRhbGFxL0Rlc2t0b3AvUHJvamVjdHMvZ2VuaWVzLXVuaXR5LXBhY2thZ2VzL2ludGVybmFsL2NvbS5nZW5pZXMuc2NyaXB0aW5nLmludGVybmFsL0VkaXRvci9Db21waWxlci9Qcm9qZWN0fi9zcmMvaW5kZXgudHMiLCJmaWxlOi8vL1VzZXJzL3JkYWxhcS9EZXNrdG9wL1Byb2plY3RzL2dlbmllcy11bml0eS1wYWNrYWdlcy9pbnRlcm5hbC9jb20uZ2VuaWVzLnNjcmlwdGluZy5pbnRlcm5hbC9FZGl0b3IvQ29tcGlsZXIvUHJvamVjdH4vc3JjL3RyYW5zZm9ybWVycy9DU2hhcnBFdmVudFRyYW5zZm9ybWVyLnRzIiwiZmlsZTovLy9Vc2Vycy9yZGFsYXEvRGVza3RvcC9Qcm9qZWN0cy9nZW5pZXMtdW5pdHktcGFja2FnZXMvaW50ZXJuYWwvY29tLmdlbmllcy5zY3JpcHRpbmcuaW50ZXJuYWwvRWRpdG9yL0NvbXBpbGVyL1Byb2plY3R+L2V4dGVybmFsIGNvbW1vbmpzIFwiZGlmZi1tYXRjaC1wYXRjaFwiIiwiZmlsZTovLy9Vc2Vycy9yZGFsYXEvRGVza3RvcC9Qcm9qZWN0cy9nZW5pZXMtdW5pdHktcGFja2FnZXMvaW50ZXJuYWwvY29tLmdlbmllcy5zY3JpcHRpbmcuaW50ZXJuYWwvRWRpdG9yL0NvbXBpbGVyL1Byb2plY3R+L3NyYy90cmFuc2Zvcm1lcnMvRGVsZWdhdGVUb0Fycm93RnVuY3Rpb25UcmFuc2Zvcm1lci50cyIsImZpbGU6Ly8vVXNlcnMvcmRhbGFxL0Rlc2t0b3AvUHJvamVjdHMvZ2VuaWVzLXVuaXR5LXBhY2thZ2VzL2ludGVybmFsL2NvbS5nZW5pZXMuc2NyaXB0aW5nLmludGVybmFsL0VkaXRvci9Db21waWxlci9Qcm9qZWN0fi9zcmMvdHJhbnNmb3JtZXJzL0JyYWNrZXRBY2Nlc3NUcmFuc2Zvcm1lci50cyIsImZpbGU6Ly8vVXNlcnMvcmRhbGFxL0Rlc2t0b3AvUHJvamVjdHMvZ2VuaWVzLXVuaXR5LXBhY2thZ2VzL2ludGVybmFsL2NvbS5nZW5pZXMuc2NyaXB0aW5nLmludGVybmFsL0VkaXRvci9Db21waWxlci9Qcm9qZWN0fi9zcmMvdHJhbnNmb3JtZXJzL1JlZlRyYW5zZm9ybWVyLnRzIiwiZmlsZTovLy9Vc2Vycy9yZGFsYXEvRGVza3RvcC9Qcm9qZWN0cy9nZW5pZXMtdW5pdHktcGFja2FnZXMvaW50ZXJuYWwvY29tLmdlbmllcy5zY3JpcHRpbmcuaW50ZXJuYWwvRWRpdG9yL0NvbXBpbGVyL1Byb2plY3R+L3NyYy90cmFuc2Zvcm1lcnMvRXh0ZW5zaW9uTWV0aG9kVHJhbnNmb3JtZXIudHMiLCJmaWxlOi8vL1VzZXJzL3JkYWxhcS9EZXNrdG9wL1Byb2plY3RzL2dlbmllcy11bml0eS1wYWNrYWdlcy9pbnRlcm5hbC9jb20uZ2VuaWVzLnNjcmlwdGluZy5pbnRlcm5hbC9FZGl0b3IvQ29tcGlsZXIvUHJvamVjdH4vc3JjL3RyYW5zZm9ybWVycy9TY3JpcHRhYmxlT2JqZWN0Q3JlYXRlSW5zdGFuY2VUcmFuc2Zvcm1lci50cyIsImZpbGU6Ly8vVXNlcnMvcmRhbGFxL0Rlc2t0b3AvUHJvamVjdHMvZ2VuaWVzLXVuaXR5LXBhY2thZ2VzL2ludGVybmFsL2NvbS5nZW5pZXMuc2NyaXB0aW5nLmludGVybmFsL0VkaXRvci9Db21waWxlci9Qcm9qZWN0fi9leHRlcm5hbCBjb21tb25qcyBcIm1hZ2ljLXN0cmluZ1wiIiwiZmlsZTovLy9Vc2Vycy9yZGFsYXEvRGVza3RvcC9Qcm9qZWN0cy9nZW5pZXMtdW5pdHktcGFja2FnZXMvaW50ZXJuYWwvY29tLmdlbmllcy5zY3JpcHRpbmcuaW50ZXJuYWwvRWRpdG9yL0NvbXBpbGVyL1Byb2plY3R+L3NyYy90cmFuc2Zvcm1lcnMvQ29tcG9uZW50Q2FsbFRyYW5zZm9ybWVyLnRzIiwiZmlsZTovLy9Vc2Vycy9yZGFsYXEvRGVza3RvcC9Qcm9qZWN0cy9nZW5pZXMtdW5pdHktcGFja2FnZXMvaW50ZXJuYWwvY29tLmdlbmllcy5zY3JpcHRpbmcuaW50ZXJuYWwvRWRpdG9yL0NvbXBpbGVyL1Byb2plY3R+L3NyYy90cmFuc2Zvcm1lcnMvR2VuaWVzSW5zdGFuY2VUcmFuc2Zvcm1lci50cyIsImZpbGU6Ly8vVXNlcnMvcmRhbGFxL0Rlc2t0b3AvUHJvamVjdHMvZ2VuaWVzLXVuaXR5LXBhY2thZ2VzL2ludGVybmFsL2NvbS5nZW5pZXMuc2NyaXB0aW5nLmludGVybmFsL0VkaXRvci9Db21waWxlci9Qcm9qZWN0fi9leHRlcm5hbCBjb21tb25qcyBcIkBhbXBwcm9qZWN0L3JlbWFwcGluZ1wiIiwiZmlsZTovLy9Vc2Vycy9yZGFsYXEvRGVza3RvcC9Qcm9qZWN0cy9nZW5pZXMtdW5pdHktcGFja2FnZXMvaW50ZXJuYWwvY29tLmdlbmllcy5zY3JpcHRpbmcuaW50ZXJuYWwvRWRpdG9yL0NvbXBpbGVyL1Byb2plY3R+L3NyYy90cmFuc2Zvcm1lcnMvTnVtZXJpY092ZXJsb2FkUmVzb2x1dGlvblRyYW5zZm9ybWVyLnRzIiwiZmlsZTovLy9Vc2Vycy9yZGFsYXEvRGVza3RvcC9Qcm9qZWN0cy9nZW5pZXMtdW5pdHktcGFja2FnZXMvaW50ZXJuYWwvY29tLmdlbmllcy5zY3JpcHRpbmcuaW50ZXJuYWwvRWRpdG9yL0NvbXBpbGVyL1Byb2plY3R+L2V4dGVybmFsIGNvbW1vbmpzIFwidHMtbW9ycGhcIiIsImZpbGU6Ly8vVXNlcnMvcmRhbGFxL0Rlc2t0b3AvUHJvamVjdHMvZ2VuaWVzLXVuaXR5LXBhY2thZ2VzL2ludGVybmFsL2NvbS5nZW5pZXMuc2NyaXB0aW5nLmludGVybmFsL0VkaXRvci9Db21waWxlci9Qcm9qZWN0fi9zcmMvdHJhbnNmb3JtZXJzL0dlbmVyaWNUeXBlVHJhbnNmb3JtZXIudHMiLCJmaWxlOi8vL1VzZXJzL3JkYWxhcS9EZXNrdG9wL1Byb2plY3RzL2dlbmllcy11bml0eS1wYWNrYWdlcy9pbnRlcm5hbC9jb20uZ2VuaWVzLnNjcmlwdGluZy5pbnRlcm5hbC9FZGl0b3IvQ29tcGlsZXIvUHJvamVjdH4vc3JjL3RyYW5zZm9ybWVycy9PcGVyYXRvck92ZXJsb2FkaW5nVHJhbnNmb3JtZXIudHMiLCJmaWxlOi8vL1VzZXJzL3JkYWxhcS9EZXNrdG9wL1Byb2plY3RzL2dlbmllcy11bml0eS1wYWNrYWdlcy9pbnRlcm5hbC9jb20uZ2VuaWVzLnNjcmlwdGluZy5pbnRlcm5hbC9FZGl0b3IvQ29tcGlsZXIvUHJvamVjdH4vZXh0ZXJuYWwgY29tbW9uanMgXCJ0eXBlc2NyaXB0XCIiLCJmaWxlOi8vL1VzZXJzL3JkYWxhcS9EZXNrdG9wL1Byb2plY3RzL2dlbmllcy11bml0eS1wYWNrYWdlcy9pbnRlcm5hbC9jb20uZ2VuaWVzLnNjcmlwdGluZy5pbnRlcm5hbC9FZGl0b3IvQ29tcGlsZXIvUHJvamVjdH4vZXh0ZXJuYWwgbm9kZS1jb21tb25qcyBcInBhdGhcIiIsImZpbGU6Ly8vVXNlcnMvcmRhbGFxL0Rlc2t0b3AvUHJvamVjdHMvZ2VuaWVzLXVuaXR5LXBhY2thZ2VzL2ludGVybmFsL2NvbS5nZW5pZXMuc2NyaXB0aW5nLmludGVybmFsL0VkaXRvci9Db21waWxlci9Qcm9qZWN0fi9leHRlcm5hbCBjb21tb25qcyBcInR5cGVzY3JpcHQvbGliL3Rzc2VydmVybGlicmFyeVwiIiwiZmlsZTovLy9Vc2Vycy9yZGFsYXEvRGVza3RvcC9Qcm9qZWN0cy9nZW5pZXMtdW5pdHktcGFja2FnZXMvaW50ZXJuYWwvY29tLmdlbmllcy5zY3JpcHRpbmcuaW50ZXJuYWwvRWRpdG9yL0NvbXBpbGVyL1Byb2plY3R+L3dlYnBhY2svYm9vdHN0cmFwIiwiZmlsZTovLy9Vc2Vycy9yZGFsYXEvRGVza3RvcC9Qcm9qZWN0cy9nZW5pZXMtdW5pdHktcGFja2FnZXMvaW50ZXJuYWwvY29tLmdlbmllcy5zY3JpcHRpbmcuaW50ZXJuYWwvRWRpdG9yL0NvbXBpbGVyL1Byb2plY3R+L3dlYnBhY2svc3RhcnR1cCJdLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24gd2VicGFja1VuaXZlcnNhbE1vZHVsZURlZmluaXRpb24ocm9vdCwgZmFjdG9yeSkge1xuXHRpZih0eXBlb2YgZXhwb3J0cyA9PT0gJ29iamVjdCcgJiYgdHlwZW9mIG1vZHVsZSA9PT0gJ29iamVjdCcpXG5cdFx0bW9kdWxlLmV4cG9ydHMgPSBmYWN0b3J5KCk7XG5cdGVsc2UgaWYodHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kKVxuXHRcdGRlZmluZShbXSwgZmFjdG9yeSk7XG5cdGVsc2UgaWYodHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnKVxuXHRcdGV4cG9ydHNbXCJnZW5pZXMtdHlwZXNjcmlwdC1jb21waWxlclwiXSA9IGZhY3RvcnkoKTtcblx0ZWxzZVxuXHRcdHJvb3RbXCJnZW5pZXMtdHlwZXNjcmlwdC1jb21waWxlclwiXSA9IGZhY3RvcnkoKTtcbn0pKHRoaXMsICgpID0+IHtcbnJldHVybiAiLCJpbXBvcnQge05vZGUsIFN5bnRheEtpbmQsIFR5cGVDaGVja2VyLCB0cywgVHlwZX0gZnJvbSBcInRzLW1vcnBoXCI7XG5pbXBvcnQgeyBJVHJhbnNmb3JtZXIgfSBmcm9tIFwiLi9JVHJhbnNmb3JtZXJcIjtcbmltcG9ydCB7VHJhbnNmb3JtYXRpb25Db250ZXh0fSBmcm9tIFwiLi9UcmFuc2Zvcm1hdGlvbkNvbnRleHRcIjtcbmltcG9ydCB7aXNHZW5pZXNFdmVudFR5cGUsIGlzU2lnbmFsQnVzVHlwZX0gZnJvbSBcIi4uL0NvbXBpbGVyVXRpbHNcIjtcblxuZXhwb3J0IGNsYXNzIEV2ZW50Q29udGV4dFRyYW5zZm9ybWVyIGltcGxlbWVudHMgSVRyYW5zZm9ybWVyIHtcbiAgICBub2RlVHlwZXMgPSBbU3ludGF4S2luZC5DYWxsRXhwcmVzc2lvbl07XG5cbiAgICB0cmFuc2Zvcm1Ob2RlKG5vZGU6IE5vZGUsIHRyYW5zZm9ybWF0aW9uQ29udGV4dDogVHJhbnNmb3JtYXRpb25Db250ZXh0KTogTm9kZSB7XG4gICAgICAgIGlmICghTm9kZS5pc0NhbGxFeHByZXNzaW9uKG5vZGUpKSB7XG4gICAgICAgICAgICByZXR1cm4gbm9kZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGNhbGxFeHByZXNzaW9uID0gbm9kZS5hc0tpbmRPclRocm93KFN5bnRheEtpbmQuQ2FsbEV4cHJlc3Npb24pO1xuICAgICAgICBjb25zdCB0eXBlQ2hlY2tlciA9IHRyYW5zZm9ybWF0aW9uQ29udGV4dC50eXBlQ2hlY2tlcjtcbiAgICAgICAgY29uc3QgZXhwcmVzc2lvbiA9IGNhbGxFeHByZXNzaW9uLmdldEV4cHJlc3Npb24oKTtcblxuICAgICAgICAvLyBDaGVjayBpZiB0aGUgY2FsbCBpcyBhIHByb3BlcnR5IGFjY2VzcyAoZS5nLiwgU2lnbmFsQnVzLnN1YnNjcmliZSlcbiAgICAgICAgaWYgKE5vZGUuaXNQcm9wZXJ0eUFjY2Vzc0V4cHJlc3Npb24oZXhwcmVzc2lvbikpIHtcbiAgICAgICAgICAgIGNvbnN0IG1ldGhvZE5hbWUgPSBleHByZXNzaW9uLmdldE5hbWUoKTtcbiAgICAgICAgICAgIGNvbnN0IG9iamVjdEV4cHJlc3Npb24gPSBleHByZXNzaW9uLmdldEV4cHJlc3Npb24oKTtcbiAgICAgICAgICAgIGNvbnN0IG9iamVjdFR5cGUgPSB0eXBlQ2hlY2tlci5nZXRUeXBlQXRMb2NhdGlvbihvYmplY3RFeHByZXNzaW9uKTtcblxuICAgICAgICAgICAgLy8gQ2hlY2sgaWYgaXQgaXMgYSBTaWduYWxCdXMgb3IgR2VuaWVzRXZlbnQgbWV0aG9kIHdlIHdhbnQgdG8gdHJhbnNmb3JtXG4gICAgICAgICAgICBjb25zdCBpc1NpZ25hbEJ1c01ldGhvZCA9IGlzU2lnbmFsQnVzVHlwZShvYmplY3RUeXBlKSAmJiAobWV0aG9kTmFtZSA9PT0gXCJzdWJzY3JpYmVcIiB8fCBtZXRob2ROYW1lID09PSBcInVuc3Vic2NyaWJlXCIpO1xuICAgICAgICAgICAgY29uc3QgaXNHZW5pZXNFdmVudE1ldGhvZCA9IGlzR2VuaWVzRXZlbnRUeXBlKG9iamVjdFR5cGUpICYmIChtZXRob2ROYW1lID09PSBcImFkZExpc3RlbmVyXCIgfHwgbWV0aG9kTmFtZSA9PT0gXCJyZW1vdmVMaXN0ZW5lclwiKTtcblxuICAgICAgICAgICAgaWYgKGlzU2lnbmFsQnVzTWV0aG9kIHx8IGlzR2VuaWVzRXZlbnRNZXRob2QpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBhcmdzID0gY2FsbEV4cHJlc3Npb24uZ2V0QXJndW1lbnRzKCk7XG4gICAgICAgICAgICAgICAgY29uc3QgbWV0aG9kQXJnSW5kZXggPSBpc1NpZ25hbEJ1c01ldGhvZCA/IDEgOiAwO1xuICAgICAgICAgICAgICAgIGNvbnN0IG1ldGhvZEFyZ3NDb3VudCA9IGlzU2lnbmFsQnVzTWV0aG9kID8gMiA6IDE7XG5cbiAgICAgICAgICAgICAgICBpZiAoYXJncy5sZW5ndGggPT0gbWV0aG9kQXJnc0NvdW50ICYmIGFyZ3MubGVuZ3RoID4gbWV0aG9kQXJnSW5kZXggJiYgTm9kZS5pc1Byb3BlcnR5QWNjZXNzRXhwcmVzc2lvbihhcmdzW21ldGhvZEFyZ0luZGV4XSkpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbWV0aG9kQXJnID0gYXJnc1ttZXRob2RBcmdJbmRleF0gYXMgTm9kZTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgY29udGV4dEV4cHJlc3Npb24gPSB0aGlzLmdldENvbnRleHRFeHByZXNzaW9uKG1ldGhvZEFyZyk7XG5cbiAgICAgICAgICAgICAgICAgICAgLy8gQWRkIHRoZSBjb250ZXh0IGFzIHRoZSBsYXN0IGFyZ3VtZW50IHdpdGggdHMtaWdub3JlXG4gICAgICAgICAgICAgICAgICAgIGNhbGxFeHByZXNzaW9uLmFkZEFyZ3VtZW50KGAvL0B0cy1pZ25vcmVcXG4ke2NvbnRleHRFeHByZXNzaW9uLmdldFRleHQoKX1gKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gY2FsbEV4cHJlc3Npb247XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBnZXRDb250ZXh0RXhwcmVzc2lvbihub2RlOiBOb2RlKTogTm9kZSB7XG4gICAgICAgIGlmIChOb2RlLmlzUHJvcGVydHlBY2Nlc3NFeHByZXNzaW9uKG5vZGUpKSB7XG4gICAgICAgICAgICByZXR1cm4gbm9kZS5nZXRFeHByZXNzaW9uKCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gbm9kZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBcbn0iLCJpbXBvcnQge0NhbGxFeHByZXNzaW9uLCBNZXRob2REZWNsYXJhdGlvbiwgU291cmNlRmlsZSwgVHlwZUNoZWNrZXJ9IGZyb20gXCJ0cy1tb3JwaFwiO1xuXG5pbnRlcmZhY2UgU3dhcE92ZXJsb2FkSW5mbyB7XG4gICAgZGVjbGFyYXRpb246IE1ldGhvZERlY2xhcmF0aW9uO1xuICAgIG1ldGhvZFN3YXBWYWx1ZTogc3RyaW5nO1xufVxuXG5leHBvcnQgY2xhc3MgVHJhbnNmb3JtYXRpb25Db250ZXh0XG57XG4gICAgcHVibGljIHNvdXJjZUZpbGVHZW5lcmljVHlwZU1hcDogTWFwPFNvdXJjZUZpbGUsIE1hcDxzdHJpbmcsIHN0cmluZz4+ID0gbmV3IE1hcDxTb3VyY2VGaWxlLCBNYXA8c3RyaW5nLCBzdHJpbmc+PigpO1xuICAgIHB1YmxpYyBsYXN0R2VuZXJpY1R5cGVWYXJJbmRleDogTWFwPFNvdXJjZUZpbGUsIG51bWJlcj4gPSBuZXcgTWFwPFNvdXJjZUZpbGUsIG51bWJlcj4oKTtcbiAgICBwdWJsaWMgdHlwZUNoZWNrZXIgOiBUeXBlQ2hlY2tlcjtcbiAgICBwcml2YXRlIG92ZXJsb2FkTWFwOiBNYXA8Q2FsbEV4cHJlc3Npb24sIFN3YXBPdmVybG9hZEluZm8+ID0gbmV3IE1hcCgpO1xuXG4gICAgcHVibGljIGNvbnN0cnVjdG9yKHR5cGVDaGVja2VyIDogVHlwZUNoZWNrZXIpIHtcbiAgICAgICAgdGhpcy50eXBlQ2hlY2tlciA9IHR5cGVDaGVja2VyO1xuICAgIH1cbiAgICBcbiAgICBwdWJsaWMgc2V0U3dhcE92ZXJsb2FkKGNhbGxFeHByZXNzaW9uOiBDYWxsRXhwcmVzc2lvbiwgb3ZlcmxvYWRJbmZvOiBTd2FwT3ZlcmxvYWRJbmZvKTogdm9pZCB7XG4gICAgICAgIHRoaXMub3ZlcmxvYWRNYXAuc2V0KGNhbGxFeHByZXNzaW9uLCBvdmVybG9hZEluZm8pO1xuICAgIH1cblxuICAgIHB1YmxpYyBnZXRTd2FwT3ZlcmxvYWQoY2FsbEV4cHJlc3Npb246IENhbGxFeHByZXNzaW9uKTogU3dhcE92ZXJsb2FkSW5mbyB8IHVuZGVmaW5lZCB7XG4gICAgICAgIHJldHVybiB0aGlzLm92ZXJsb2FkTWFwLmdldChjYWxsRXhwcmVzc2lvbik7XG4gICAgfVxufSIsImltcG9ydCB7XG4gICAgQXJyYXlMaXRlcmFsRXhwcmVzc2lvbixcbiAgICBDbGFzc0RlY2xhcmF0aW9uLFxuICAgIERlY29yYXRvcixcbiAgICBFbnVtRGVjbGFyYXRpb24sXG4gICAgRXhwcmVzc2lvbiwgSW1wb3J0RGVjbGFyYXRpb25TdHJ1Y3R1cmUsXG4gICAgTmV3RXhwcmVzc2lvbixcbiAgICBOb2RlLCBPcHRpb25hbEtpbmQsIFByb2plY3QsIFByb3BlcnR5QWNjZXNzRXhwcmVzc2lvbixcbiAgICBQcm9wZXJ0eURlY2xhcmF0aW9uLFxuICAgIFNvdXJjZUZpbGUsIFN0cnVjdHVyZUtpbmQsIFN5bWJvbCwgU3ltYm9sRmxhZ3MsXG4gICAgU3ludGF4S2luZCxcbiAgICBUeXBlLCBUeXBlQ2hlY2tlciwgVHlwZUZvcm1hdEZsYWdzLCBWYXJpYWJsZVN0YXRlbWVudFN0cnVjdHVyZVxufSBmcm9tIFwidHMtbW9ycGhcIjtcbmltcG9ydCAqIGFzIHBhdGggZnJvbSAncGF0aCc7XG5pbXBvcnQge1RyYW5zZm9ybWF0aW9uQ29udGV4dH0gZnJvbSBcIi4vdHJhbnNmb3JtZXJzL1RyYW5zZm9ybWF0aW9uQ29udGV4dFwiO1xuXG5leHBvcnQgbGV0IHByb2plY3RSb290OiBzdHJpbmcgPSBcIlwiO1xuZXhwb3J0IGNvbnN0IEdlbmllc0RlY2xhcmF0aW9uRmlsZUFubm90YXRpb24gPSBcIi8vQEdlbmllcy1Vbml0eUFwaUludGVyZmFjZVwiO1xuZXhwb3J0IGNvbnN0IEdlbmllc0luc3RhbmNlUHJvcE5hbWUgPSBcIl9fZ2VuaWVzSW5zdGFuY2VfX1wiO1xuZXhwb3J0IGNvbnN0IE1vbm9iZWhhdmlvdXJUeXBlTmFtZSA9IFwiTW9ub0JlaGF2aW91clwiO1xuZXhwb3J0IGNvbnN0IFNjcmlwdGFibGVPYmplY3RUeXBlTmFtZSA9IFwiU2NyaXB0YWJsZU9iamVjdFwiO1xuZXhwb3J0IGNvbnN0IE5vblNlcmlhbGl6ZWREZWNvcmF0b3IgPSBcIk5vblNlcmlhbGl6ZWRcIjtcbmV4cG9ydCBjb25zdCBIaWRlSW5JbnNwZWN0b3JEZWNvcmF0b3IgPSBcIkhpZGVJbkluc3BlY3RvclwiO1xuZXhwb3J0IGNvbnN0IFNlcmlhbGl6ZUZpZWxkRGVjb3JhdG9yID0gXCJTZXJpYWxpemVGaWVsZFwiO1xuZXhwb3J0IGNvbnN0IEhlYWRlckRlY29yYXRvciA9IFwiSGVhZGVyXCI7XG5leHBvcnQgY29uc3QgU3BhY2VEZWNvcmF0b3IgPSBcIlNwYWNlXCI7XG5leHBvcnQgY29uc3QgVG9vbHRpcERlY29yYXRvciA9IFwiVG9vbHRpcFwiO1xuXG5leHBvcnQgY29uc3QgR0VUX0lURU1fTkFNRSA9IFwiZ2V0X0l0ZW1cIjtcbmV4cG9ydCBjb25zdCBTRVRfSVRFTV9OQU1FID0gXCJzZXRfSXRlbVwiO1xuXG5leHBvcnQgY29uc3QgY29tcG9uZW50TWV0aG9kcyA9IG5ldyBTZXQoW1xuICAgICdHZXRDb21wb25lbnQnLFxuICAgICdUcnlHZXRDb21wb25lbnQnLFxuICAgICdHZXRDb21wb25lbnRJbkNoaWxkcmVuJyxcbiAgICAnR2V0Q29tcG9uZW50c0luQ2hpbGRyZW4nLFxuICAgICdHZXRDb21wb25lbnRJblBhcmVudCcsXG4gICAgJ0dldENvbXBvbmVudHNJblBhcmVudCcsXG4gICAgJ0dldENvbXBvbmVudHMnLFxuICAgICdBZGRDb21wb25lbnQnXG5dKTtcblxuZXhwb3J0IGVudW0gR2VuaWVzU2NyaXB0VWlFdmVudHMge1xuICAgIE5vbmUgPSAwLFxuICAgIFBvaW50ZXJDbGljayA9IDEgPDwgMCwgLy8gMVxuICAgIFBvaW50ZXJEb3duID0gMSA8PCAxLCAvLyAyXG4gICAgUG9pbnRlckVudGVyID0gMSA8PCAyLCAvLyA0XG4gICAgUG9pbnRlckV4aXQgPSAxIDw8IDMsIC8vIDhcbiAgICBQb2ludGVyVXAgPSAxIDw8IDQsIC8vIDE2XG4gICAgQmVnaW5EcmFnID0gMSA8PCA1LCAvLyAzMlxuICAgIERlc2VsZWN0ID0gMSA8PCA2LCAvLyA2NFxuICAgIERyYWcgPSAxIDw8IDcsIC8vIDEyOFxuICAgIERyb3AgPSAxIDw8IDgsIC8vIDI1NlxuICAgIEVuZERyYWcgPSAxIDw8IDksIC8vIDUxMlxuICAgIEluaXRpYWxpemVQb3RlbnRpYWxEcmFnID0gMSA8PCAxMCwgLy8gMTAyNFxuICAgIFNjcm9sbCA9IDEgPDwgMTEsIC8vIDIwNDhcbiAgICBTZWxlY3QgPSAxIDw8IDEyLCAvLyA0MDk2XG4gICAgU3VibWl0ID0gMSA8PCAxMywgLy8gODE5MlxuICAgIFVwZGF0ZVNlbGVjdGVkID0gMSA8PCAxNCwgLy8gMTYzODRcbiAgICBNb3ZlID0gMSA8PCAxNSwgLy8gMzI3NjhcbiAgICBDYW5jZWwgPSAxIDw8IDE2IC8vIDY1NTM2XG59XG5cbmV4cG9ydCBjb25zdCBBbGxvd2VkVWlJbnRlcmZhY2VzID0gbmV3IFNldChbXG4gICAgJ1VuaXR5RW5naW5lLkV2ZW50U3lzdGVtcy5JUG9pbnRlckNsaWNrSGFuZGxlcicsXG4gICAgJ1VuaXR5RW5naW5lLkV2ZW50U3lzdGVtcy5JUG9pbnRlckRvd25IYW5kbGVyJyxcbiAgICAnVW5pdHlFbmdpbmUuRXZlbnRTeXN0ZW1zLklQb2ludGVyRW50ZXJIYW5kbGVyJyxcbiAgICAnVW5pdHlFbmdpbmUuRXZlbnRTeXN0ZW1zLklQb2ludGVyRXhpdEhhbmRsZXInLFxuICAgICdVbml0eUVuZ2luZS5FdmVudFN5c3RlbXMuSVBvaW50ZXJVcEhhbmRsZXInLFxuICAgICdVbml0eUVuZ2luZS5FdmVudFN5c3RlbXMuSUJlZ2luRHJhZ0hhbmRsZXInLFxuICAgICdVbml0eUVuZ2luZS5FdmVudFN5c3RlbXMuSURlc2VsZWN0SGFuZGxlcicsXG4gICAgJ1VuaXR5RW5naW5lLkV2ZW50U3lzdGVtcy5JRHJhZ0hhbmRsZXInLFxuICAgICdVbml0eUVuZ2luZS5FdmVudFN5c3RlbXMuSURyb3BIYW5kbGVyJyxcbiAgICAnVW5pdHlFbmdpbmUuRXZlbnRTeXN0ZW1zLklFbmREcmFnSGFuZGxlcicsXG4gICAgJ1VuaXR5RW5naW5lLkV2ZW50U3lzdGVtcy5JSW5pdGlhbGl6ZVBvdGVudGlhbERyYWdIYW5kbGVyJyxcbiAgICAnVW5pdHlFbmdpbmUuRXZlbnRTeXN0ZW1zLklTY3JvbGxIYW5kbGVyJyxcbiAgICAnVW5pdHlFbmdpbmUuRXZlbnRTeXN0ZW1zLklTZWxlY3RIYW5kbGVyJyxcbiAgICAnVW5pdHlFbmdpbmUuRXZlbnRTeXN0ZW1zLklTdWJtaXRIYW5kbGVyJyxcbiAgICAnVW5pdHlFbmdpbmUuRXZlbnRTeXN0ZW1zLklVcGRhdGVTZWxlY3RlZEhhbmRsZXInLFxuICAgICdVbml0eUVuZ2luZS5FdmVudFN5c3RlbXMuSU1vdmVIYW5kbGVyJyxcbiAgICAnVW5pdHlFbmdpbmUuRXZlbnRTeXN0ZW1zLklDYW5jZWxIYW5kbGVyJyxcbl0pO1xuXG5leHBvcnQgY29uc3QgVWlJbnRlcmZhY2VUb0VudW1NYXAgPSBuZXcgTWFwKFtcbiAgICBbJ1VuaXR5RW5naW5lLkV2ZW50U3lzdGVtcy5JUG9pbnRlckNsaWNrSGFuZGxlcicsIEdlbmllc1NjcmlwdFVpRXZlbnRzLlBvaW50ZXJDbGlja10sXG4gICAgWydVbml0eUVuZ2luZS5FdmVudFN5c3RlbXMuSVBvaW50ZXJEb3duSGFuZGxlcicsIEdlbmllc1NjcmlwdFVpRXZlbnRzLlBvaW50ZXJEb3duXSxcbiAgICBbJ1VuaXR5RW5naW5lLkV2ZW50U3lzdGVtcy5JUG9pbnRlckVudGVySGFuZGxlcicsIEdlbmllc1NjcmlwdFVpRXZlbnRzLlBvaW50ZXJFbnRlcl0sXG4gICAgWydVbml0eUVuZ2luZS5FdmVudFN5c3RlbXMuSVBvaW50ZXJFeGl0SGFuZGxlcicsIEdlbmllc1NjcmlwdFVpRXZlbnRzLlBvaW50ZXJFeGl0XSxcbiAgICBbJ1VuaXR5RW5naW5lLkV2ZW50U3lzdGVtcy5JUG9pbnRlclVwSGFuZGxlcicsIEdlbmllc1NjcmlwdFVpRXZlbnRzLlBvaW50ZXJVcF0sXG4gICAgWydVbml0eUVuZ2luZS5FdmVudFN5c3RlbXMuSUJlZ2luRHJhZ0hhbmRsZXInLCBHZW5pZXNTY3JpcHRVaUV2ZW50cy5CZWdpbkRyYWddLFxuICAgIFsnVW5pdHlFbmdpbmUuRXZlbnRTeXN0ZW1zLklEZXNlbGVjdEhhbmRsZXInLCBHZW5pZXNTY3JpcHRVaUV2ZW50cy5EZXNlbGVjdF0sXG4gICAgWydVbml0eUVuZ2luZS5FdmVudFN5c3RlbXMuSURyYWdIYW5kbGVyJywgR2VuaWVzU2NyaXB0VWlFdmVudHMuRHJhZ10sXG4gICAgWydVbml0eUVuZ2luZS5FdmVudFN5c3RlbXMuSURyb3BIYW5kbGVyJywgR2VuaWVzU2NyaXB0VWlFdmVudHMuRHJvcF0sXG4gICAgWydVbml0eUVuZ2luZS5FdmVudFN5c3RlbXMuSUVuZERyYWdIYW5kbGVyJywgR2VuaWVzU2NyaXB0VWlFdmVudHMuRW5kRHJhZ10sXG4gICAgWydVbml0eUVuZ2luZS5FdmVudFN5c3RlbXMuSUluaXRpYWxpemVQb3RlbnRpYWxEcmFnSGFuZGxlcicsIEdlbmllc1NjcmlwdFVpRXZlbnRzLkluaXRpYWxpemVQb3RlbnRpYWxEcmFnXSxcbiAgICBbJ1VuaXR5RW5naW5lLkV2ZW50U3lzdGVtcy5JU2Nyb2xsSGFuZGxlcicsIEdlbmllc1NjcmlwdFVpRXZlbnRzLlNjcm9sbF0sXG4gICAgWydVbml0eUVuZ2luZS5FdmVudFN5c3RlbXMuSVNlbGVjdEhhbmRsZXInLCBHZW5pZXNTY3JpcHRVaUV2ZW50cy5TZWxlY3RdLFxuICAgIFsnVW5pdHlFbmdpbmUuRXZlbnRTeXN0ZW1zLklTdWJtaXRIYW5kbGVyJywgR2VuaWVzU2NyaXB0VWlFdmVudHMuU3VibWl0XSxcbiAgICBbJ1VuaXR5RW5naW5lLkV2ZW50U3lzdGVtcy5JVXBkYXRlU2VsZWN0ZWRIYW5kbGVyJywgR2VuaWVzU2NyaXB0VWlFdmVudHMuVXBkYXRlU2VsZWN0ZWRdLFxuICAgIFsnVW5pdHlFbmdpbmUuRXZlbnRTeXN0ZW1zLklNb3ZlSGFuZGxlcicsIEdlbmllc1NjcmlwdFVpRXZlbnRzLk1vdmVdLFxuICAgIFsnVW5pdHlFbmdpbmUuRXZlbnRTeXN0ZW1zLklDYW5jZWxIYW5kbGVyJywgR2VuaWVzU2NyaXB0VWlFdmVudHMuQ2FuY2VsXSxcbl0pO1xuXG5jb25zdCBBbGlhc1RvVHlwZU5hbWU6IE1hcDxzdHJpbmcsIHN0cmluZz4gPSBuZXcgTWFwKFtcbiAgICAgICAgW1wiZmxvYXRcIiwgXCJTaW5nbGVcIl0sXG4gICAgICAgIFtcImludFwiLCBcIkludDMyXCJdLFxuICAgICAgICBbXCJkb3VibGVcIiwgXCJEb3VibGVcIl0sXG4gICAgICAgIFtcImxvbmdcIiwgXCJJbnQ2NFwiXSxcbiAgICAgICAgW1wiYm9vbFwiLCBcIkJvb2xlYW5cIl0sXG4gICAgICAgIFtcInN0cmluZ1wiLCBcIlN0cmluZ1wiXSxcbiAgICAgICAgW1wibnVtYmVyXCIsIFwiRG91YmxlXCJdLFxuICAgICAgICBbXCJzaG9ydFwiLCBcIkludDE2XCJdLFxuICAgICAgICBbXCJ1c2hvcnRcIiwgXCJVSW50MTZcIl0sXG4gICAgICAgIFtcImJ5dGVcIiwgXCJCeXRlXCJdLFxuICAgICAgICBbXCJzYnl0ZVwiLCBcIlNCeXRlXCJdLFxuICAgICAgICBbXCJ1aW50XCIsIFwiVUludDMyXCJdLFxuICAgICAgICBbXCJjaGFyXCIsIFwiQ2hhclwiXVxuICAgIF1cbilcblxuY29uc3QgQWxpYXNUb0Z1bGxUeXBlTmFtZTogTWFwPHN0cmluZywgc3RyaW5nPiA9IG5ldyBNYXAoW1xuICAgICAgICBbXCJmbG9hdFwiLCBcIlN5c3RlbS5TaW5nbGVcIl0sXG4gICAgICAgIFtcImludFwiLCBcIlN5c3RlbS5JbnQzMlwiXSxcbiAgICAgICAgW1wiZG91YmxlXCIsIFwiU3lzdGVtLkRvdWJsZVwiXSxcbiAgICAgICAgW1wibG9uZ1wiLCBcIlN5c3RlbS5JbnQ2NFwiXSxcbiAgICAgICAgW1wiYm9vbFwiLCBcIlN5c3RlbS5Cb29sZWFuXCJdLFxuICAgICAgICBbXCJzdHJpbmdcIiwgXCJTeXN0ZW0uU3RyaW5nXCJdLFxuICAgICAgICBbXCJudW1iZXJcIiwgXCJTeXN0ZW0uRG91YmxlXCJdLFxuICAgICAgICBbXCJzaG9ydFwiLCBcIlN5c3RlbS5JbnQxNlwiXSxcbiAgICAgICAgW1widXNob3J0XCIsIFwiU3lzdGVtLlVJbnQxNlwiXSxcbiAgICAgICAgW1wiYnl0ZVwiLCBcIlN5c3RlbS5CeXRlXCJdLFxuICAgICAgICBbXCJzYnl0ZVwiLCBcIlN5c3RlbS5TQnl0ZVwiXSxcbiAgICAgICAgW1widWludFwiLCBcIlN5c3RlbS5VSW50MzJcIl0sXG4gICAgICAgIFtcImNoYXJcIiwgXCJTeXN0ZW0uQ2hhclwiXVxuICAgIF1cbilcblxuZXhwb3J0IGNvbnN0IE51bWVyaWNhbEFsaWFzZXMgPSBuZXcgU2V0KFtcbiAgICBcImJ5dGVcIixcbiAgICBcInNieXRlXCIsXG4gICAgXCJzaG9ydFwiLFxuICAgIFwidXNob3J0XCIsXG4gICAgXCJpbnRcIixcbiAgICBcInVpbnRcIixcbiAgICBcImZsb2F0XCIsXG4gICAgXCJkb3VibGVcIixcbiAgICBcIm51bWJlclwiXG5dKVxuXG5leHBvcnQgZW51bSBHZW5pZXNTY3JpcHRUeXBlIHtcbiAgICBOb25lID0gMCxcbiAgICBNb25vYmVoYXZpb3VyID0gMSxcbiAgICBTY3JpcHRhYmxlT2JqZWN0ID0gMlxufVxuXG5leHBvcnQgaW50ZXJmYWNlIFByb3BlcnR5SW5mbyB7XG4gICAgUGF0aDogc3RyaW5nO1xuICAgIE5hbWU6IHN0cmluZztcbiAgICBUeXBlTmFtZTogc3RyaW5nO1xuICAgIENoaWxkUHJvcGVydGllczogUHJvcGVydHlJbmZvW107XG4gICAgSXNBcnJheTogYm9vbGVhbjtcbiAgICBJc0VudW06IGJvb2xlYW47XG4gICAgRW51bUtleXM6IHN0cmluZ1tdO1xuICAgIEVudW1WYWx1ZXM6IHN0cmluZ1tdO1xuICAgIERlY29yYXRvcnM6IEdlbmllc0RlY29yYXRvckluZm9bXTtcbiAgICBJc0dlbmllc0JlaGF2aW91clJlZjogYm9vbGVhbjtcbiAgICBJc0dlbmllc1NjcmlwdGFibGVPYmplY3RSZWY6IGJvb2xlYW47XG4gICAgSW5pdGlhbGl6ZXJzOiBzdHJpbmdbXTtcbiAgICBBcnJheUVsZW1lbnRJbml0aWFsaXplcjogUHJvcGVydHlJbmZvIHwgdW5kZWZpbmVkO1xuICAgIEFycmF5RGltZW5zaW9uOiBudW1iZXI7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgR2VuaWVzRGVjb3JhdG9ySW5mbyB7XG4gICAgVHlwZTogc3RyaW5nO1xuICAgIEFyZ3M6IHN0cmluZ1tdO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEZpbGVDb21waWxlT3V0cHV0IHtcbiAgICBGaWxlUGF0aDogc3RyaW5nO1xuICAgIElzU3VjY2Vzc2Z1bDogYm9vbGVhbjtcbiAgICBFcnJvcnM/OiBzdHJpbmdbXTtcbiAgICBCYXNlVHlwZXM/OiBzdHJpbmdbXTtcbiAgICBKc1NvdXJjZTogc3RyaW5nO1xuICAgIElzU2NyaXB0YWJsZU9iajogYm9vbGVhbjtcbiAgICBJc01vbm9iZWhhdmlvdXI6IGJvb2xlYW47XG4gICAgUHJvcGVydGllczogUHJvcGVydHlJbmZvW107XG4gICAgSWQ6IHN0cmluZztcbiAgICBEZWZhdWx0VHlwZU5hbWU6IHN0cmluZztcbiAgICBJbmhlcml0YW5jZUNoYWluOiBzdHJpbmdbXTtcbiAgICBTdXBwb3J0ZWRVaUV2ZW50czogR2VuaWVzU2NyaXB0VWlFdmVudHM7XG4gICAgUmVmZXJlbmNlZFNwZWNpZmllcnM/OiBzdHJpbmdbXTtcbn1cblxuLyoqXG4gKiBTZXRzIHRoZSBwcm9qZWN0IHJvb3QgcGF0aCBmb3Igb3RoZXIgdXRpbGl0aWVzIHRvIGNvbnN1bWUuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBzZXRQcm9qZWN0Um9vdChyb290OiBzdHJpbmcpIHtcbiAgICBwcm9qZWN0Um9vdCA9IHJvb3Q7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBleHRlbmRzTW9ub0JlaGF2aW91cihjbGFzc0RlY2w6IENsYXNzRGVjbGFyYXRpb24pOiBib29sZWFuIHtcbiAgICBsZXQgYmFzZUNsYXNzID0gY2xhc3NEZWNsLmdldEJhc2VDbGFzcygpO1xuICAgIHdoaWxlIChiYXNlQ2xhc3MpIHtcbiAgICAgICAgaWYgKGJhc2VDbGFzcy5nZXROYW1lKCkgPT09IFwiTW9ub0JlaGF2aW91clwiKSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBiYXNlQ2xhc3MgPSBiYXNlQ2xhc3MuZ2V0QmFzZUNsYXNzKCk7XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGV4dGVuZHNTY3JpcHRhYmxlT2JqZWN0KGNsYXNzRGVjbDogQ2xhc3NEZWNsYXJhdGlvbik6IGJvb2xlYW4ge1xuICAgIGxldCBiYXNlQ2xhc3MgPSBjbGFzc0RlY2wuZ2V0QmFzZUNsYXNzKCk7XG4gICAgd2hpbGUgKGJhc2VDbGFzcykge1xuICAgICAgICBpZiAoYmFzZUNsYXNzLmdldE5hbWUoKSA9PT0gXCJTY3JpcHRhYmxlT2JqZWN0XCIpIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGJhc2VDbGFzcyA9IGJhc2VDbGFzcy5nZXRCYXNlQ2xhc3MoKTtcbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gcmVtb3ZlRGVjb3JhdG9ycyhkZWNvcmF0b3JzOiBEZWNvcmF0b3JbXSwgY29uZGl0aW9uOiAoZGVjb3JhdG9yOiBEZWNvcmF0b3IpID0+IGJvb2xlYW4pIHtcbiAgICBkZWNvcmF0b3JzLmZvckVhY2goZGVjb3JhdG9yID0+IHtcbiAgICAgICAgXG4gICAgICAgIC8vV3JhcCB0cnkvY2F0Y2gsIHRoZXJlJ3MgYW4gaXNzdWUgd2l0aCByZW1vdmluZyBkZWNvcmF0b3JzIHdpdGggdHJhaWxpbmcgY29tbWVudHNcbiAgICAgICAgLy90aGUgY29tbWVudHMgc2VlbXMgdG8gYmUgY29uc2lkZXJlZCBwYXJ0IG9mIHRoZSBBU1Qgb2YgdGhlIGRlY29yYXRvclxuICAgICAgICAvL3RoaXMgY2F1c2VzIHRzbW9ycGggdG8gdGhyb3cgYW4gZXJyb3IgZm9yIG1pc21hdGNoZWQgdHJlZXMuXG4gICAgICAgIC8vRm9yIG5vdywgd2UganVzdCBzdXBwcmVzcyBhbmQgY29udGludWUgKGNvbW1lbnRzIGFyZSBzYWZlIHRvIHJlbW92ZSBhbnl3YXkpXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBpZiAoY29uZGl0aW9uKGRlY29yYXRvcikpIHtcbiAgICAgICAgICAgICAgICBkZWNvcmF0b3IucmVtb3ZlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2hcbiAgICAgICAge1xuICAgICAgICAgICAgLy9JZ25vcmUgYW5kIGNvbnRpbnVlXG4gICAgICAgIH1cbiAgICB9KTtcbn1cblxuLyoqXG4gKiBUcmF2ZXJzZXMgdGhlIGZ1bGwgcHJvdG90eXBlIGNoYWluIG9mIGEgY2xhc3MsIGluY2x1ZGluZyBiYXNlIGNsYXNzZXMgYW5kIGltcGxlbWVudGVkIGludGVyZmFjZXMuXG4gKiBAcGFyYW0gY2xhc3NEZWNsYXJhdGlvbiBUaGUgQ2xhc3NEZWNsYXJhdGlvbiB0byB0cmF2ZXJzZS5cbiAqIEByZXR1cm5zIFRoZSBQcm90b3R5cGVDaGFpbiBjb250YWluaW5nIGFsbCBiYXNlIGNsYXNzZXMgYW5kIGludGVyZmFjZXMuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB0cmF2ZXJzZVByb3RvdHlwZUNoYWluKGNsYXNzRGVjbGFyYXRpb246IENsYXNzRGVjbGFyYXRpb24pOiBzdHJpbmdbXSB7XG4gICAgY29uc3QgcmVzdWx0U2V0OiBTZXQ8c3RyaW5nPiA9IG5ldyBTZXQoKTsgLy8gVG8gc3RvcmUgdW5pcXVlIHR5cGUgbmFtZXNcblxuICAgIGxldCBjdXJyZW50Q2xhc3M6IENsYXNzRGVjbGFyYXRpb24gfCB1bmRlZmluZWQgPSBjbGFzc0RlY2xhcmF0aW9uO1xuXG4gICAgd2hpbGUgKGN1cnJlbnRDbGFzcykge1xuICAgICAgICAvLyBBZGQgdGhlIGN1cnJlbnQgY2xhc3MncyBmdWxsIHR5cGUgbmFtZVxuICAgICAgICBjb25zdCBjbGFzc1R5cGVOYW1lID0gZ2V0RnVsbFR5cGVOYW1lKGN1cnJlbnRDbGFzcy5nZXRUeXBlKCkpO1xuICAgICAgICBpZiAoY2xhc3NUeXBlTmFtZSkge1xuICAgICAgICAgICAgcmVzdWx0U2V0LmFkZChjbGFzc1R5cGVOYW1lKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFByb2Nlc3MgYWxsIGltcGxlbWVudGVkIGludGVyZmFjZXNcbiAgICAgICAgY29uc3QgaW1wbGVtZW50ZWRJbnRlcmZhY2VzID0gY3VycmVudENsYXNzLmdldEltcGxlbWVudHMoKTtcblxuICAgICAgICBpbXBsZW1lbnRlZEludGVyZmFjZXMuZm9yRWFjaChpbXBsZW1lbnRDbGF1c2UgPT4ge1xuICAgICAgICAgICAgY29uc3QgaWZhY2VUeXBlID0gaW1wbGVtZW50Q2xhdXNlLmdldFR5cGUoKTtcblxuICAgICAgICAgICAgLy8gSW5pdGlhbGl6ZSBxdWV1ZSB3aXRoIHRoZSBjdXJyZW50IGludGVyZmFjZSB0eXBlXG4gICAgICAgICAgICBjb25zdCBxdWV1ZTogVHlwZVtdID0gW2lmYWNlVHlwZV07XG5cbiAgICAgICAgICAgIHdoaWxlIChxdWV1ZS5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgY3VycmVudElmYWNlVHlwZSA9IHF1ZXVlLnNoaWZ0KCk7XG4gICAgICAgICAgICAgICAgaWYgKCFjdXJyZW50SWZhY2VUeXBlKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGNvbnN0IGlmYWNlTmFtZSA9IGdldEZ1bGxUeXBlTmFtZShjdXJyZW50SWZhY2VUeXBlKTtcbiAgICAgICAgICAgICAgICBpZiAoIWlmYWNlTmFtZSB8fCByZXN1bHRTZXQuaGFzKGlmYWNlTmFtZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7IC8vIFNraXAgaWYgYWxyZWFkeSBwcm9jZXNzZWQgb3IgbmFtZSBpcyBpbnZhbGlkXG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgcmVzdWx0U2V0LmFkZChpZmFjZU5hbWUpO1xuXG4gICAgICAgICAgICAgICAgLy8gRW5xdWV1ZSBleHRlbmRlZCBpbnRlcmZhY2VzXG4gICAgICAgICAgICAgICAgY29uc3QgYmFzZVR5cGVzID0gY3VycmVudElmYWNlVHlwZS5nZXRCYXNlVHlwZXMoKTtcbiAgICAgICAgICAgICAgICBiYXNlVHlwZXMuZm9yRWFjaChiYXNlVHlwZSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHF1ZXVlLnB1c2goYmFzZVR5cGUpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICAvLyBNb3ZlIHRvIHRoZSBiYXNlIGNsYXNzLCBpZiBhbnlcbiAgICAgICAgY3VycmVudENsYXNzID0gY3VycmVudENsYXNzLmdldEJhc2VDbGFzcygpO1xuICAgIH1cblxuICAgIHJldHVybiBBcnJheS5mcm9tKHJlc3VsdFNldCk7XG59XG5cblxuZXhwb3J0IGZ1bmN0aW9uIGlzU2lnbmFsQnVzVHlwZSh0eXBlOiBUeXBlKTogYm9vbGVhbiB7XG4gICAgY29uc3Qgc3ltYm9sID0gdHlwZS5nZXRTeW1ib2woKTtcbiAgICBpZiAoIXN5bWJvbCkgcmV0dXJuIGZhbHNlO1xuICAgIGNvbnN0IG5hbWUgPSBzeW1ib2wuZ2V0TmFtZSgpO1xuICAgIHJldHVybiBuYW1lID09PSBcIlNpZ25hbEJ1c1wiO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gaXNHZW5pZXNFdmVudFR5cGUodHlwZTogVHlwZSk6IGJvb2xlYW4ge1xuICAgIGNvbnN0IHN5bWJvbCA9IHR5cGUuZ2V0U3ltYm9sKCk7XG4gICAgaWYgKCFzeW1ib2wpIHJldHVybiBmYWxzZTtcbiAgICBjb25zdCBuYW1lID0gc3ltYm9sLmdldE5hbWUoKTtcblxuICAgIHJldHVybiBuYW1lID09PSBcIkdlbmllc0V2ZW50XCI7XG59XG5cblxuZXhwb3J0IGZ1bmN0aW9uIGlzT3JJbmhlcml0c0Zyb21HYW1lT2JqZWN0T3JDb21wb25lbnQodHlwZTogVHlwZSwgdHJhbnNmb3JtYXRpb25Db250ZXh0OiBUcmFuc2Zvcm1hdGlvbkNvbnRleHQpOiBib29sZWFuIHtcbiAgICBpZiAoIXR5cGUpIHJldHVybiBmYWxzZTtcblxuICAgIGNvbnN0IHN5bWJvbCA9IHR5cGUuZ2V0U3ltYm9sKCk7XG4gICAgaWYgKCFzeW1ib2wpIHJldHVybiBmYWxzZTtcblxuICAgIGlmIChbJ0dhbWVPYmplY3QnLCAnQ29tcG9uZW50JywgJ01vbm9CZWhhdmlvdXInXS5pbmNsdWRlcyhzeW1ib2wuZ2V0TmFtZSgpKSkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG5cbiAgICByZXR1cm4gaW5oZXJpdHNGcm9tKHR5cGUsIFsnR2FtZU9iamVjdCcsICdDb21wb25lbnQnLCAnTW9ub0JlaGF2aW91ciddLCB0cmFuc2Zvcm1hdGlvbkNvbnRleHQpO1xufVxuXG5mdW5jdGlvbiBpbmhlcml0c0Zyb20odHlwZTogVHlwZSwgYmFzZU5hbWVzOiBzdHJpbmdbXSwgdHJhbnNmb3JtYXRpb25Db250ZXh0OiBUcmFuc2Zvcm1hdGlvbkNvbnRleHQpOiBib29sZWFuIHtcbiAgICBjb25zdCBiYXNlVHlwZXMgPSBnZXRCYXNlVHlwZXModHlwZSwgdHJhbnNmb3JtYXRpb25Db250ZXh0KTtcbiAgICBmb3IgKGNvbnN0IGJhc2VUeXBlIG9mIGJhc2VUeXBlcykge1xuICAgICAgICBjb25zdCBiYXNlVHlwZU5hbWUgPSBiYXNlVHlwZS5nZXRTeW1ib2woKT8uZ2V0TmFtZSgpO1xuICAgICAgICBpZiAoYmFzZVR5cGVOYW1lICYmIGJhc2VOYW1lcy5pbmNsdWRlcyhiYXNlVHlwZU5hbWUpKSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaW5oZXJpdHNGcm9tKGJhc2VUeXBlLCBiYXNlTmFtZXMsIHRyYW5zZm9ybWF0aW9uQ29udGV4dCkpIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbn1cblxuZnVuY3Rpb24gZ2V0QmFzZVR5cGVzKHR5cGU6IFR5cGUsIHRyYW5zZm9ybWF0aW9uQ29udGV4dDogVHJhbnNmb3JtYXRpb25Db250ZXh0KTogVHlwZVtdIHtcbiAgICBjb25zdCBiYXNlVHlwZXM6IFR5cGVbXSA9IFtdO1xuICAgIGNvbnN0IHN5bWJvbCA9IHR5cGUuZ2V0U3ltYm9sKCk7XG4gICAgaWYgKCFzeW1ib2wpIHJldHVybiBiYXNlVHlwZXM7XG5cbiAgICBjb25zdCBkZWNsYXJhdGlvbnMgPSBzeW1ib2wuZ2V0RGVjbGFyYXRpb25zKCk7XG4gICAgaWYgKCFkZWNsYXJhdGlvbnMpIHJldHVybiBiYXNlVHlwZXM7XG5cbiAgICBmb3IgKGNvbnN0IGRlY2xhcmF0aW9uIG9mIGRlY2xhcmF0aW9ucykge1xuICAgICAgICBpZiAoTm9kZS5pc0NsYXNzRGVjbGFyYXRpb24oZGVjbGFyYXRpb24pKSB7XG4gICAgICAgICAgICBjb25zdCBoZXJpdGFnZUNsYXVzZXMgPSBkZWNsYXJhdGlvbi5nZXRIZXJpdGFnZUNsYXVzZXMoKTtcbiAgICAgICAgICAgIGZvciAoY29uc3QgaGVyaXRhZ2VDbGF1c2Ugb2YgaGVyaXRhZ2VDbGF1c2VzKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgdHlwZXMgPSBoZXJpdGFnZUNsYXVzZS5nZXRUeXBlTm9kZXMoKTtcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IHR5cGVOb2RlIG9mIHR5cGVzKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGJhc2VUeXBlID0gdHJhbnNmb3JtYXRpb25Db250ZXh0LnR5cGVDaGVja2VyLmdldFR5cGVBdExvY2F0aW9uKHR5cGVOb2RlKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGJhc2VUeXBlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBiYXNlVHlwZXMucHVzaChiYXNlVHlwZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGJhc2VUeXBlcztcbn1cblxuXG5mdW5jdGlvbiBleHRyYWN0RW51bURldGFpbHModHlwZTogVHlwZSk6IHtcbiAgICBrZXlzOiBzdHJpbmdbXTtcbiAgICB2YWx1ZXM6IChzdHJpbmcgfCBudW1iZXIgfCB1bmRlZmluZWQpW107XG59IHtcbiAgICBjb25zdCBzeW1ib2wgPSB0eXBlLmdldFN5bWJvbCgpO1xuICAgIGNvbnN0IGRlY2xhcmF0aW9uID0gc3ltYm9sPy5nZXREZWNsYXJhdGlvbnMoKS5maW5kKGRlYyA9PiBkZWMuZ2V0S2luZCgpID09PSBTeW50YXhLaW5kLkVudW1EZWNsYXJhdGlvbikgYXMgRW51bURlY2xhcmF0aW9uO1xuICAgIGlmIChkZWNsYXJhdGlvbikge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAga2V5czogZGVjbGFyYXRpb24uZ2V0TWVtYmVycygpLm1hcChtZW1iZXIgPT4gbWVtYmVyLmdldE5hbWUoKSksXG4gICAgICAgICAgICB2YWx1ZXM6IGRlY2xhcmF0aW9uLmdldE1lbWJlcnMoKS5tYXAobWVtYmVyID0+IG1lbWJlci5nZXRWYWx1ZSgpKSAvLyBhc3N1bWluZyBudW1lcmljIG9yIGNvbnN0IGVudW1zXG4gICAgICAgIH07XG4gICAgfVxuICAgIHJldHVybiB7a2V5czogW10sIHZhbHVlczogW119O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gc29ydEltcG9ydHNBbmRWYXJzKHNvdXJjZUZpbGU6IFNvdXJjZUZpbGUpIHtcbiAgICAvLyBHZXQgYWxsIHRvcC1sZXZlbCBzdGF0ZW1lbnRzXG4gICAgY29uc3QgYWxsU3RhdGVtZW50cyA9IHNvdXJjZUZpbGUuZ2V0U3RhdGVtZW50cygpO1xuXG4gICAgLy8gU2VwYXJhdGUgaW1wb3J0IGRlY2xhcmF0aW9ucywgdmFyaWFibGUgc3RhdGVtZW50cywgYW5kIG90aGVycy5cbiAgICBjb25zdCBpbXBvcnREZWNsYXJhdGlvbnMgPSBhbGxTdGF0ZW1lbnRzLmZpbHRlcihzdG10ID0+XG4gICAgICAgIHN0bXQuZ2V0S2luZCgpID09PSBTeW50YXhLaW5kLkltcG9ydERlY2xhcmF0aW9uXG4gICAgKTtcbiAgICBjb25zdCB2YXJpYWJsZVN0YXRlbWVudHMgPSBhbGxTdGF0ZW1lbnRzLmZpbHRlcihzdG10ID0+XG4gICAgICAgIHN0bXQuZ2V0S2luZCgpID09PSBTeW50YXhLaW5kLlZhcmlhYmxlU3RhdGVtZW50XG4gICAgKTtcbiAgICBjb25zdCBvdGhlclN0YXRlbWVudHMgPSBhbGxTdGF0ZW1lbnRzLmZpbHRlcihzdG10ID0+XG4gICAgICAgIHN0bXQuZ2V0S2luZCgpICE9PSBTeW50YXhLaW5kLkltcG9ydERlY2xhcmF0aW9uICYmXG4gICAgICAgIHN0bXQuZ2V0S2luZCgpICE9PSBTeW50YXhLaW5kLlZhcmlhYmxlU3RhdGVtZW50XG4gICAgKTtcblxuICAgIC8vIFJlY29uc3RydWN0IHRoZSBzb3VyY2UgZmlsZSB0ZXh0OlxuICAgIC8vIDEuIEFsbCBzb3J0ZWQgaW1wb3J0IGRlY2xhcmF0aW9ucy5cbiAgICAvLyAyLiBUaGVuIGEgYmxhbmsgbGluZS5cbiAgICAvLyAzLiBUaGVuIGFsbCBzb3J0ZWQgdmFyaWFibGUgc3RhdGVtZW50cy5cbiAgICAvLyA0LiBUaGVuIGEgYmxhbmsgbGluZS5cbiAgICAvLyA1LiBGaW5hbGx5LCB0aGUgcmVzdCBvZiB0aGUgc3RhdGVtZW50cy5cbiAgICBjb25zdCBuZXdUZXh0ID0gW1xuICAgICAgICAuLi5pbXBvcnREZWNsYXJhdGlvbnMubWFwKHN0bXQgPT4gc3RtdC5nZXRUZXh0KCkpLFxuICAgICAgICBcIlwiLFxuICAgICAgICAuLi52YXJpYWJsZVN0YXRlbWVudHMubWFwKHN0bXQgPT4gc3RtdC5nZXRUZXh0KCkpLFxuICAgICAgICBcIlwiLFxuICAgICAgICAuLi5vdGhlclN0YXRlbWVudHMubWFwKHN0bXQgPT4gc3RtdC5nZXRUZXh0KCkpXG4gICAgXS5qb2luKFwiXFxuXFxuXCIpO1xuXG4gICAgLy8gUmVwbGFjZSB0aGUgc291cmNlIGZpbGUncyB0ZXh0IHdpdGggdGhlIG5ldyB0ZXh0LlxuICAgIHNvdXJjZUZpbGUucmVwbGFjZVdpdGhUZXh0KG5ld1RleHQpO1xufVxuXG5mdW5jdGlvbiAgZ2V0TGFzdEltcG9ydEluZGV4KHNvdXJjZUZpbGU6IFNvdXJjZUZpbGUpOiBudW1iZXIge1xuICAgIGNvbnN0IHN0YXRlbWVudHMgPSBzb3VyY2VGaWxlLmdldFN0YXRlbWVudHMoKTtcbiAgICBsZXQgbGFzdEltcG9ydEluZGV4ID0gLTE7XG4gICAgc3RhdGVtZW50cy5mb3JFYWNoKChzdG10LCBpKSA9PiB7XG4gICAgICAgIGlmIChzdG10LmdldEtpbmQoKSA9PT0gU3ludGF4S2luZC5JbXBvcnREZWNsYXJhdGlvbikge1xuICAgICAgICAgICAgbGFzdEltcG9ydEluZGV4ID0gaTtcbiAgICAgICAgfVxuICAgIH0pO1xuICAgIHJldHVybiBsYXN0SW1wb3J0SW5kZXg7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBpbnNlcnRWYXJpYWJsZVN0YXRlbWVudHMoXG4gICAgc291cmNlRmlsZTogU291cmNlRmlsZSxcbiAgICB2YXJTdGF0ZW1lbnRzOiBPcHRpb25hbEtpbmQ8VmFyaWFibGVTdGF0ZW1lbnRTdHJ1Y3R1cmU+W10sXG4gICAgdHJhbnNmb3JtYXRpb25Db250ZXh0OiBUcmFuc2Zvcm1hdGlvbkNvbnRleHRcbik6IHZvaWQge1xuICAgIGlmICh2YXJTdGF0ZW1lbnRzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gSWYgd2UgaGF2ZSBpbnNlcnRlZCBzb21lIHN0YXRlbWVudHMgYmVmb3JlLCBwaWNrIHVwIHdoZXJlIHdlIGxlZnQgb2ZmXG4gICAgbGV0IGxhc3RJbXBvcnRJbmRleDogbnVtYmVyO1xuICAgIGlmICh0cmFuc2Zvcm1hdGlvbkNvbnRleHQubGFzdEdlbmVyaWNUeXBlVmFySW5kZXguaGFzKHNvdXJjZUZpbGUpKSB7XG4gICAgICAgIGxhc3RJbXBvcnRJbmRleCA9IHRyYW5zZm9ybWF0aW9uQ29udGV4dC5sYXN0R2VuZXJpY1R5cGVWYXJJbmRleC5nZXQoc291cmNlRmlsZSkhO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIGxhc3RJbXBvcnRJbmRleCA9IGdldExhc3RJbXBvcnRJbmRleChzb3VyY2VGaWxlKSArIDE7XG4gICAgfVxuXG4gICAgLy8gRW5zdXJlIHdlIGRvbid0IGV4Y2VlZCB0aGUgbnVtYmVyIG9mIHN0YXRlbWVudHNcbiAgICBjb25zdCBzdGF0ZW1lbnRzTGVuZ3RoID0gc291cmNlRmlsZS5nZXRTdGF0ZW1lbnRzKCkubGVuZ3RoO1xuICAgIGxhc3RJbXBvcnRJbmRleCA9IE1hdGgubWluKGxhc3RJbXBvcnRJbmRleCwgc3RhdGVtZW50c0xlbmd0aCk7XG5cbiAgICAvLyBJbnNlcnQgbmV3IHN0YXRlbWVudHNcbiAgICBzb3VyY2VGaWxlLmluc2VydFZhcmlhYmxlU3RhdGVtZW50cyhsYXN0SW1wb3J0SW5kZXgsIHZhclN0YXRlbWVudHMpO1xuXG4gICAgLy8gVXBkYXRlIGluZGV4XG4gICAgdHJhbnNmb3JtYXRpb25Db250ZXh0Lmxhc3RHZW5lcmljVHlwZVZhckluZGV4LnNldChzb3VyY2VGaWxlLCBsYXN0SW1wb3J0SW5kZXggKyB2YXJTdGF0ZW1lbnRzLmxlbmd0aCk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBlbnN1cmVUeXBlSW1wb3J0ZWQodHlwZTogVHlwZSwgc291cmNlRmlsZTogU291cmNlRmlsZSkge1xuXG4gICAgbGV0IHR5cGVOYW1lID0gdHlwZS5nZXRTeW1ib2woKT8uZ2V0TmFtZSgpID8/IHR5cGUuZ2V0VGV4dCgpO1xuICAgIGxldCB0eXBlTW9kdWxlID0gXCJcIjtcblxuICAgIGlmIChBbGlhc1RvVHlwZU5hbWUuaGFzKHR5cGVOYW1lKSkge1xuICAgICAgICB0eXBlTmFtZSA9IEFsaWFzVG9UeXBlTmFtZS5nZXQodHlwZU5hbWUpIGFzIHN0cmluZztcbiAgICAgICAgdHlwZU1vZHVsZSA9IFwiU3lzdGVtXCI7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgY29uc3Qgc2NyaXB0VHlwZSA9IGdldEdlbmllc1NjcmlwdFR5cGVGcm9tVHlwZSh0eXBlKTtcbiAgICAgICAgaWYgKHNjcmlwdFR5cGUgIT09IEdlbmllc1NjcmlwdFR5cGUuTm9uZSkge1xuICAgICAgICAgICAgc3dpdGNoIChzY3JpcHRUeXBlKSB7XG4gICAgICAgICAgICAgICAgY2FzZSBHZW5pZXNTY3JpcHRUeXBlLk1vbm9iZWhhdmlvdXI6XG4gICAgICAgICAgICAgICAgICAgIHR5cGVOYW1lID0gXCJNb25vQmVoYXZpb3VyXCI7XG4gICAgICAgICAgICAgICAgICAgIHR5cGVNb2R1bGUgPSBcIlVuaXR5RW5naW5lXCI7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgR2VuaWVzU2NyaXB0VHlwZS5TY3JpcHRhYmxlT2JqZWN0OlxuICAgICAgICAgICAgICAgICAgICB0eXBlTmFtZSA9IFwiU2NyaXB0YWJsZU9iamVjdFwiO1xuICAgICAgICAgICAgICAgICAgICB0eXBlTW9kdWxlID0gXCJVbml0eUVuZ2luZVwiO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIGlmICghZ2V0SXNVbml0eUFQSVR5cGUodHlwZSkpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkNhbid0IHVzZSBub24gQ1NoYXJwIHR5cGVzXCIpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY29uc3QgY3NUeXBlTmFtZSA9IGdldEZ1bGxUeXBlTmFtZSh0eXBlLCB0cnVlLCBmYWxzZSk7XG4gICAgICAgICAgICBjb25zdCBsYXN0RG90SW5kZXggPSBjc1R5cGVOYW1lLmxhc3RJbmRleE9mKFwiLlwiKTtcbiAgICAgICAgICAgIHR5cGVNb2R1bGUgPSBjc1R5cGVOYW1lLnN1YnN0cmluZygwLCBsYXN0RG90SW5kZXgpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLy8gQ2hlY2sgaWYgdGhlIHR5cGUncyBtb2R1bGUgaXMgYWxyZWFkeSBpbXBvcnRlZFxuICAgIGNvbnN0IGV4aXN0aW5nSW1wb3J0ID0gc291cmNlRmlsZS5nZXRJbXBvcnREZWNsYXJhdGlvbnMoKS5maW5kKGltcG9ydERlY2wgPT4ge1xuICAgICAgICByZXR1cm4gaW1wb3J0RGVjbC5nZXRNb2R1bGVTcGVjaWZpZXJWYWx1ZSgpID09PSB0eXBlTW9kdWxlO1xuICAgIH0pO1xuXG4gICAgaWYgKCFleGlzdGluZ0ltcG9ydCkge1xuICAgICAgICAvLyBBZGQgdGhlIGltcG9ydCBpZiBpdCdzIG5vdCBhbHJlYWR5IGltcG9ydGVkXG4gICAgICAgIGNvbnN0IGltcG9ydFN0cnVjdHVyZTogSW1wb3J0RGVjbGFyYXRpb25TdHJ1Y3R1cmUgPSB7XG4gICAgICAgICAgICBraW5kOiBTdHJ1Y3R1cmVLaW5kLkltcG9ydERlY2xhcmF0aW9uLFxuICAgICAgICAgICAgbW9kdWxlU3BlY2lmaWVyOiB0eXBlTW9kdWxlLFxuICAgICAgICAgICAgbmFtZWRJbXBvcnRzOiBbe25hbWU6IHR5cGVOYW1lfV0sXG4gICAgICAgIH07XG4gICAgICAgIHNvdXJjZUZpbGUuYWRkSW1wb3J0RGVjbGFyYXRpb24oaW1wb3J0U3RydWN0dXJlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICAvLyBJZiB0aGUgbW9kdWxlIGlzIGltcG9ydGVkIGJ1dCB0aGUgdHlwZSBpcyBub3QgaW5jbHVkZWQsIGFkZCB0aGUgbmFtZWQgaW1wb3J0XG4gICAgICAgIGNvbnN0IG5hbWVkSW1wb3J0cyA9IGV4aXN0aW5nSW1wb3J0LmdldE5hbWVkSW1wb3J0cygpO1xuICAgICAgICBpZiAoIW5hbWVkSW1wb3J0cy5zb21lKG5hbWVkSW1wb3J0ID0+IG5hbWVkSW1wb3J0LmdldE5hbWUoKSA9PT0gdHlwZU5hbWUpKSB7XG4gICAgICAgICAgICBleGlzdGluZ0ltcG9ydC5hZGROYW1lZEltcG9ydCh0eXBlTmFtZSk7XG4gICAgICAgIH1cbiAgICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRUeXBlTmFtZUFuZEVuc3VyZUltcG9ydGVkKHR5cGU6IFR5cGUsIHNvdXJjZUZpbGU6IFNvdXJjZUZpbGUpOiBzdHJpbmcge1xuXG4gICAgbGV0IHR5cGVOYW1lID0gdHlwZS5nZXRTeW1ib2woKT8uZ2V0TmFtZSgpID8/IHR5cGUuZ2V0VGV4dCgpO1xuICAgIGxldCBjc1R5cGVOYW1lID0gXCJcIjtcbiAgICBsZXQgdHlwZU1vZHVsZSA9IFwiXCI7XG5cbiAgICBpZiAoQWxpYXNUb1R5cGVOYW1lLmhhcyh0eXBlTmFtZSkpIHtcbiAgICAgICAgY3NUeXBlTmFtZSA9IHR5cGVOYW1lID0gQWxpYXNUb1R5cGVOYW1lLmdldCh0eXBlTmFtZSkgYXMgc3RyaW5nO1xuICAgICAgICB0eXBlTW9kdWxlID0gXCJTeXN0ZW1cIjtcbiAgICB9IGVsc2Uge1xuICAgICAgICBjb25zdCBzY3JpcHRUeXBlID0gZ2V0R2VuaWVzU2NyaXB0VHlwZUZyb21UeXBlKHR5cGUpO1xuICAgICAgICBpZiAoc2NyaXB0VHlwZSAhPT0gR2VuaWVzU2NyaXB0VHlwZS5Ob25lKSB7XG4gICAgICAgICAgICBzd2l0Y2ggKHNjcmlwdFR5cGUpIHtcbiAgICAgICAgICAgICAgICBjYXNlIEdlbmllc1NjcmlwdFR5cGUuTW9ub2JlaGF2aW91cjpcbiAgICAgICAgICAgICAgICAgICAgdHlwZU5hbWUgPSBcIk1vbm9CZWhhdmlvdXJcIjtcbiAgICAgICAgICAgICAgICAgICAgdHlwZU1vZHVsZSA9IFwiVW5pdHlFbmdpbmVcIjtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSBHZW5pZXNTY3JpcHRUeXBlLlNjcmlwdGFibGVPYmplY3Q6XG4gICAgICAgICAgICAgICAgICAgIHR5cGVOYW1lID0gXCJTY3JpcHRhYmxlT2JqZWN0XCI7XG4gICAgICAgICAgICAgICAgICAgIHR5cGVNb2R1bGUgPSBcIlVuaXR5RW5naW5lXCI7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2UgaWYgKCFnZXRJc1VuaXR5QVBJVHlwZSh0eXBlKSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiQ2FuJ3QgdXNlIG5vbiBDU2hhcnAgdHlwZXNcIik7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjc1R5cGVOYW1lID0gZ2V0RnVsbFR5cGVOYW1lKHR5cGUsIHRydWUsIGZhbHNlKTtcbiAgICAgICAgICAgIGNvbnN0IGxhc3REb3RJbmRleCA9IGNzVHlwZU5hbWUubGFzdEluZGV4T2YoXCIuXCIpO1xuICAgICAgICAgICAgdHlwZU1vZHVsZSA9IGNzVHlwZU5hbWUuc3Vic3RyaW5nKDAsIGxhc3REb3RJbmRleCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBDaGVjayBpZiB0aGUgdHlwZSdzIG1vZHVsZSBpcyBhbHJlYWR5IGltcG9ydGVkXG4gICAgY29uc3QgZXhpc3RpbmdJbXBvcnQgPSBzb3VyY2VGaWxlLmdldEltcG9ydERlY2xhcmF0aW9ucygpLmZpbmQoaW1wb3J0RGVjbCA9PiB7XG4gICAgICAgIHJldHVybiBpbXBvcnREZWNsLmdldE1vZHVsZVNwZWNpZmllclZhbHVlKCkgPT09IHR5cGVNb2R1bGU7XG4gICAgfSk7XG5cbiAgICBpZiAoIWV4aXN0aW5nSW1wb3J0KSB7XG4gICAgICAgIC8vIEFkZCB0aGUgaW1wb3J0IGlmIGl0J3Mgbm90IGFscmVhZHkgaW1wb3J0ZWRcbiAgICAgICAgY29uc3QgaW1wb3J0U3RydWN0dXJlOiBJbXBvcnREZWNsYXJhdGlvblN0cnVjdHVyZSA9IHtcbiAgICAgICAgICAgIGtpbmQ6IFN0cnVjdHVyZUtpbmQuSW1wb3J0RGVjbGFyYXRpb24sXG4gICAgICAgICAgICBtb2R1bGVTcGVjaWZpZXI6IHR5cGVNb2R1bGUsXG4gICAgICAgICAgICBuYW1lZEltcG9ydHM6IFt7bmFtZTogdHlwZU5hbWV9XSxcbiAgICAgICAgfTtcbiAgICAgICAgc291cmNlRmlsZS5hZGRJbXBvcnREZWNsYXJhdGlvbihpbXBvcnRTdHJ1Y3R1cmUpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIElmIHRoZSBtb2R1bGUgaXMgaW1wb3J0ZWQgYnV0IHRoZSB0eXBlIGlzIG5vdCBpbmNsdWRlZCwgYWRkIHRoZSBuYW1lZCBpbXBvcnRcbiAgICAgICAgY29uc3QgbmFtZWRJbXBvcnRzID0gZXhpc3RpbmdJbXBvcnQuZ2V0TmFtZWRJbXBvcnRzKCk7XG4gICAgICAgIGlmICghbmFtZWRJbXBvcnRzLnNvbWUobmFtZWRJbXBvcnQgPT4gbmFtZWRJbXBvcnQuZ2V0TmFtZSgpID09PSB0eXBlTmFtZSkpIHtcbiAgICAgICAgICAgIGV4aXN0aW5nSW1wb3J0LmFkZE5hbWVkSW1wb3J0KHR5cGVOYW1lKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8vIFJldHVybiB0aGUgJHR5cGVvZiBjb252ZXJzaW9uIHN0cmluZ1xuICAgIHJldHVybiBgJHR5cGVvZihcIiR7Y3NUeXBlTmFtZX1cIilgO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0RnVsbFR5cGVOYW1lKHR5cGU6IFR5cGUsIGZvckNzaGFycDogYm9vbGVhbiA9IHRydWUsIGluY2x1ZGVBcmd1bWVudHM6IGJvb2xlYW4gPSB0cnVlKTogc3RyaW5nIHtcbiAgICBsZXQgdGV4dCA9IFwiXCI7XG5cbiAgICBjb25zdCBhbGlhc1N5bWJvbCA9IHR5cGUuZ2V0QWxpYXNTeW1ib2woKTtcbiAgICBpZiAoYWxpYXNTeW1ib2wpIHtcbiAgICAgICAgdGV4dCA9IGFsaWFzU3ltYm9sLmdldE5hbWUoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICB0ZXh0ID0gdHlwZS5nZXRUZXh0KCk7XG4gICAgfVxuXG4gICAgaWYgKEFsaWFzVG9GdWxsVHlwZU5hbWUuaGFzKHRleHQpKSB7XG4gICAgICAgIHJldHVybiBBbGlhc1RvRnVsbFR5cGVOYW1lLmdldCh0ZXh0KSBhcyBzdHJpbmc7XG4gICAgfVxuXG4gICAgY29uc3Qgc3ltYm9sID0gdHlwZS5nZXRTeW1ib2woKTtcbiAgICBpZiAoIXN5bWJvbCkge1xuICAgICAgICByZXR1cm4gdGV4dDsgLy8gUmV0dXJuIHRoZSBzaW1wbGUgdHlwZSB0ZXh0IGlmIG5vIHN5bWJvbCBpcyBhdmFpbGFibGVcbiAgICB9XG5cbiAgICBpZiAoIWdldElzVW5pdHlBUElUeXBlKHR5cGUpKSB7XG4gICAgICAgIGNvbnN0IGRlY2xhcmF0aW9ucyA9IHN5bWJvbC5nZXREZWNsYXJhdGlvbnMoKTtcbiAgICAgICAgbGV0IGlzRXhwb3J0ZWQgPSBmYWxzZTtcblxuICAgICAgICBkZWNsYXJhdGlvbnMuZm9yRWFjaChkZWNsID0+IHtcbiAgICAgICAgICAgIGlmIChOb2RlLmlzSW50ZXJmYWNlRGVjbGFyYXRpb24oZGVjbCkgfHwgTm9kZS5pc0NsYXNzRGVjbGFyYXRpb24oZGVjbCkpIHtcbiAgICAgICAgICAgICAgICBpc0V4cG9ydGVkID0gZGVjbC5pc0V4cG9ydGVkKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGlmICghaXNFeHBvcnRlZCAmJiBkZWNsYXJhdGlvbnMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgY29uc3Qgc291cmNlRmlsZSA9IGRlY2xhcmF0aW9uc1swXS5nZXRTb3VyY2VGaWxlKCk7XG4gICAgICAgICAgICBjb25zdCBzb3VyY2VGaWxlUGF0aCA9IHNvdXJjZUZpbGUuZ2V0RmlsZVBhdGgoKTtcbiAgICAgICAgICAgIGNvbnN0IHJlbGF0aXZlUGF0aCA9IGNvbnZlcnRUb0FsaWFzUGF0aChwcm9qZWN0Um9vdCwgc291cmNlRmlsZVBhdGgpO1xuICAgICAgICAgICAgY29uc3QgcGFyc2VkUGF0aCA9IHBhdGgucGFyc2UocmVsYXRpdmVQYXRoKTtcbiAgICAgICAgICAgIGNvbnN0IGZpbGVQYXRoV2l0aG91dEV4dCA9IHBhdGguam9pbihwYXJzZWRQYXRoLmRpciwgcGFyc2VkUGF0aC5uYW1lKTtcblxuICAgICAgICAgICAgdGV4dCA9IGAke2ZpbGVQYXRoV2l0aG91dEV4dH0uJHtzeW1ib2wuZ2V0RnVsbHlRdWFsaWZpZWROYW1lKCkucmVwbGFjZSgvWydcIl0vZywgXCJcIil9YDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRleHQgPSBzeW1ib2wuZ2V0RnVsbHlRdWFsaWZpZWROYW1lKCkucmVwbGFjZSgvWydcIl0vZywgXCJcIik7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBwYXJzZWQgPSBwYXRoLnBhcnNlKHRleHQpO1xuICAgICAgICAvLyBJZiAnZGlyJyBpc27igJl0IGVtcHR5LCBpdCBzdWdnZXN0cyB0aGF0IHRleHQgaW5jbHVkZXMgc29tZSBzbGFzaC1saWtlIHNlcGFyYXRvclxuICAgICAgICBjb25zdCBpc1BhdGggPSBwYXJzZWQuZGlyICE9PSBcIlwiIHx8IHBhcnNlZC5yb290ICE9PSBcIlwiO1xuICAgICAgICBpZiAoaXNQYXRoKSB7XG4gICAgICAgICAgICBsZXQgYWxpYXNQYXRoID0gY29udmVydFRvR2VuaWVzQWxpYXNQYXRoKHRleHQpO1xuXG4gICAgICAgICAgICBpZiAoYWxpYXNQYXRoICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICB0ZXh0ID0gYWxpYXNQYXRoO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICB9IGVsc2Uge1xuICAgICAgICB0ZXh0ID0gc3ltYm9sLmdldEZ1bGx5UXVhbGlmaWVkTmFtZSgpLnJlcGxhY2UoL1snXCJdL2csIFwiXCIpO1xuICAgIH1cblxuICAgIGNvbnN0IHJlZ2V4ID0gL1xcJFxcZCskLztcbiAgICBpZiAoZm9yQ3NoYXJwICYmIHJlZ2V4LnRlc3QodGV4dCkpIHtcblxuICAgICAgICB0ZXh0ID0gdGV4dC5yZXBsYWNlKHJlZ2V4LCBcIlwiKTtcblxuICAgICAgICBpZiAoaW5jbHVkZUFyZ3VtZW50cykge1xuICAgICAgICAgICAgY29uc3QgdHlwZUFyZ3VtZW50cyA9IHR5cGUuZ2V0VHlwZUFyZ3VtZW50cygpO1xuICAgICAgICAgICAgaWYgKHR5cGVBcmd1bWVudHMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgIHRleHQgKz0gJzwnO1xuICAgICAgICAgICAgICAgIHR5cGVBcmd1bWVudHMuZm9yRWFjaCgoYXJnLCBpbmRleCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBsZXQgYXJnVGV4dCA9IGdldEZ1bGxUeXBlTmFtZShhcmcpO1xuICAgICAgICAgICAgICAgICAgICB0ZXh0ICs9IGFyZ1RleHQ7XG4gICAgICAgICAgICAgICAgICAgIGlmIChpbmRleCA8IHR5cGVBcmd1bWVudHMubGVuZ3RoIC0gMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGV4dCArPSAnLCAnO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgdGV4dCArPSAnPic7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gdGV4dDtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGV4dHJhY3RQcm9wZXJ0aWVzKGNsczogQ2xhc3NEZWNsYXJhdGlvbiwgYmFzZVBhdGg6IHN0cmluZyA9ICcnLCB0eXBlQXJndW1lbnRNYXA6IE1hcDxzdHJpbmcsIFR5cGU+ID0gbmV3IE1hcCgpKTogUHJvcGVydHlJbmZvW10ge1xuICAgIGNvbnN0IHByb3BlcnRpZXM6IFByb3BlcnR5SW5mb1tdID0gW107XG5cbiAgICBjbHMuZ2V0UHJvcGVydGllcygpLmZvckVhY2gocHJvcCA9PiB7XG4gICAgICAgIGNvbnN0IHZpc2liaWxpdHkgPSBwcm9wLmdldFNjb3BlKCk7XG4gICAgICAgIGNvbnN0IGRlY29yYXRvcnMgPSBleHRyYWN0RGVjb3JhdG9ycyhwcm9wKTtcblxuICAgICAgICAvLyBTa2lwIHN0YXRpYyBvciByZWFkb25seSBwcm9wZXJ0aWVzXG4gICAgICAgIGlmIChwcm9wLmlzU3RhdGljKCkgfHwgcHJvcC5pc1JlYWRvbmx5KCkpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh2aXNpYmlsaXR5ID09PSAncHJpdmF0ZScgJiYgIWRlY29yYXRvcnMuc29tZShkID0+IGQuVHlwZSA9PT0gU2VyaWFsaXplRmllbGREZWNvcmF0b3IpKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodmlzaWJpbGl0eSA9PT0gJ3B1YmxpYycgJiYgZGVjb3JhdG9ycy5zb21lKGQgPT4gZC5UeXBlID09PSBOb25TZXJpYWxpemVkRGVjb3JhdG9yKSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgdHlwZSA9IHJlc29sdmVHZW5lcmljVHlwZShwcm9wLmdldFR5cGUoKSwgdHlwZUFyZ3VtZW50TWFwKTtcbiAgICAgICAgY29uc3QgaXNBcnJheSA9IHR5cGUuaXNBcnJheSgpO1xuXG4gICAgICAgIGNvbnN0IHJlc29sdmVkVHlwZSA9IHJlc29sdmVBcnJheUVsZW1lbnRUeXBlKHR5cGUsIHR5cGVBcmd1bWVudE1hcCk7XG4gICAgICAgIGNvbnN0IHR5cGVOYW1lID0gZ2V0RnVsbFR5cGVOYW1lKHJlc29sdmVkVHlwZSk7XG4gICAgICAgIGNvbnN0IHByb3BOYW1lID0gcHJvcC5nZXROYW1lKCk7XG4gICAgICAgIGxldCBmdWxsUGF0aCA9IGJhc2VQYXRoID8gYCR7YmFzZVBhdGh9LiR7cHJvcE5hbWV9YCA6IHByb3BOYW1lO1xuXG4gICAgICAgIGZ1bmN0aW9uIGdldEluaXRpYWxpemVyKGV4cHJlc3Npb246IEV4cHJlc3Npb24pOiBzdHJpbmcge1xuICAgICAgICAgICAgaWYgKGV4cHJlc3Npb24uZ2V0S2luZCgpID09PSBTeW50YXhLaW5kLk5ld0V4cHJlc3Npb24pIHtcbiAgICAgICAgICAgICAgICBjb25zdCBuZXdFeHByZXNzaW9uID0gZXhwcmVzc2lvbiBhcyBOZXdFeHByZXNzaW9uO1xuICAgICAgICAgICAgICAgIGNvbnN0IHR5cGUgPSBuZXdFeHByZXNzaW9uLmdldFR5cGUoKTtcbiAgICAgICAgICAgICAgICBjb25zdCBmdWxsVHlwZU5hbWUgPSBnZXRGdWxsVHlwZU5hbWUodHlwZSk7XG5cbiAgICAgICAgICAgICAgICAvLyBFeHRyYWN0IHRoZSBhcmd1bWVudHMgb2YgdGhlIG5ldyBleHByZXNzaW9uXG4gICAgICAgICAgICAgICAgY29uc3QgYXJncyA9IG5ld0V4cHJlc3Npb24uZ2V0QXJndW1lbnRzKCkubWFwKGFyZyA9PiBhcmcuZ2V0VGV4dCgpKS5qb2luKFwiLCBcIik7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGBuZXcgJHtmdWxsVHlwZU5hbWV9KCR7YXJnc30pO2A7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGV4cHJlc3Npb24uZ2V0S2luZCgpID09PSBTeW50YXhLaW5kLlByb3BlcnR5QWNjZXNzRXhwcmVzc2lvbikge1xuICAgICAgICAgICAgICAgIC8vIEhhbmRsZSBzb21ldGhpbmcgbGlrZSBcIlZlY3RvcjMuZm9yd2FyZFwiXG4gICAgICAgICAgICAgICAgY29uc3QgcGFlID0gZXhwcmVzc2lvbiBhcyBQcm9wZXJ0eUFjY2Vzc0V4cHJlc3Npb247XG5cbiAgICAgICAgICAgICAgICAvLyBUaGUgbGVmdCBzaWRlIHNob3VsZCBiZSBzb21ldGhpbmcgbGlrZSBcIlZlY3RvcjNcIlxuICAgICAgICAgICAgICAgIGNvbnN0IGxlZnRFeHByID0gcGFlLmdldEV4cHJlc3Npb24oKTtcbiAgICAgICAgICAgICAgICBjb25zdCBsZWZ0VHlwZSA9IGxlZnRFeHByLmdldFR5cGUoKTtcblxuICAgICAgICAgICAgICAgIGNvbnN0IGxlZnRGdWxsVHlwZU5hbWUgPSBnZXRGdWxsVHlwZU5hbWUobGVmdFR5cGUpO1xuXG4gICAgICAgICAgICAgICAgLy8gVGhlIHJpZ2h0IHNpZGUgKHRoZSBhY3R1YWwgcHJvcGVydHkpLCBlLmcuIFwiZm9yd2FyZFwiXG4gICAgICAgICAgICAgICAgY29uc3QgbWVtYmVyTmFtZSA9IHBhZS5nZXROYW1lKCk7XG5cbiAgICAgICAgICAgICAgICAvLyBSZXR1cm4gZS5nLiBcIlVuaXR5RW5naW5lLlZlY3RvcjMuZm9yd2FyZFwiXG4gICAgICAgICAgICAgICAgcmV0dXJuIGAke2xlZnRGdWxsVHlwZU5hbWV9LiR7bWVtYmVyTmFtZX1gO1xuXG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIC8vIEZhbGxiYWNrOiBqdXN0IHJldHVybiB0aGUgcmF3IHRleHRcbiAgICAgICAgICAgICAgICByZXR1cm4gZXhwcmVzc2lvbi5nZXRUZXh0KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBpbml0aWFsaXplckV4cHJlc3Npb25zOiBzdHJpbmdbXSA9IFtdO1xuICAgICAgICBpZiAocHJvcC5oYXNJbml0aWFsaXplcigpKSB7XG4gICAgICAgICAgICBjb25zdCBpbml0aWFsaXplciA9IHByb3AuZ2V0SW5pdGlhbGl6ZXIoKTtcbiAgICAgICAgICAgIGlmIChpbml0aWFsaXplcikge1xuICAgICAgICAgICAgICAgIGlmIChpbml0aWFsaXplci5nZXRLaW5kKCkgPT09IFN5bnRheEtpbmQuQXJyYXlMaXRlcmFsRXhwcmVzc2lvbikge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBhcnJheUxpdGVyYWwgPSBpbml0aWFsaXplciBhcyBBcnJheUxpdGVyYWxFeHByZXNzaW9uO1xuICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGFycmF5TGl0ZXJhbC5nZXRFbGVtZW50cygpLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBlbGVtZW50ID0gYXJyYXlMaXRlcmFsLmdldEVsZW1lbnRzKClbaV07XG4gICAgICAgICAgICAgICAgICAgICAgICBpbml0aWFsaXplckV4cHJlc3Npb25zLnB1c2goZ2V0SW5pdGlhbGl6ZXIoZWxlbWVudCkpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgaW5pdGlhbGl6ZXJFeHByZXNzaW9ucy5wdXNoKGdldEluaXRpYWxpemVyKGluaXRpYWxpemVyKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgcHJvcGVydHlJbmZvOiBQcm9wZXJ0eUluZm8gPSB7XG4gICAgICAgICAgICBQYXRoOiBmdWxsUGF0aCxcbiAgICAgICAgICAgIE5hbWU6IHByb3BOYW1lLFxuICAgICAgICAgICAgVHlwZU5hbWU6IHR5cGVOYW1lLFxuICAgICAgICAgICAgQ2hpbGRQcm9wZXJ0aWVzOiBbXSxcbiAgICAgICAgICAgIElzQXJyYXk6IGlzQXJyYXksXG4gICAgICAgICAgICBJc0VudW06IGZhbHNlLFxuICAgICAgICAgICAgRW51bUtleXM6IFtdLFxuICAgICAgICAgICAgRW51bVZhbHVlczogW10sXG4gICAgICAgICAgICBEZWNvcmF0b3JzOiBleHRyYWN0RGVjb3JhdG9ycyhwcm9wKSxcbiAgICAgICAgICAgIElzR2VuaWVzQmVoYXZpb3VyUmVmOiBmYWxzZSxcbiAgICAgICAgICAgIElzR2VuaWVzU2NyaXB0YWJsZU9iamVjdFJlZjogZmFsc2UsXG4gICAgICAgICAgICBJbml0aWFsaXplcnM6IGluaXRpYWxpemVyRXhwcmVzc2lvbnMsXG4gICAgICAgICAgICBBcnJheUVsZW1lbnRJbml0aWFsaXplcjogdW5kZWZpbmVkLFxuICAgICAgICAgICAgQXJyYXlEaW1lbnNpb246IC0xLFxuICAgICAgICB9O1xuXG4gICAgICAgIGlmIChpc0FycmF5KSB7XG4gICAgICAgICAgICBsZXQgZGltZW5zaW9uID0gMTtcbiAgICAgICAgICAgIHByb3BlcnR5SW5mby5BcnJheUVsZW1lbnRJbml0aWFsaXplciA9IGdldEFycmF5RWxlbWVudEluaXRpYWxpemVyKHR5cGUsIHR5cGVOYW1lLCBwcm9wTmFtZSwgZnVsbFBhdGgsIGRpbWVuc2lvbiwgdHlwZUFyZ3VtZW50TWFwKTtcbiAgICAgICAgICAgIHByb3BlcnR5SW5mby5BcnJheURpbWVuc2lvbiA9IGRpbWVuc2lvbjtcbiAgICAgICAgICAgIHByb3BlcnRpZXMucHVzaChwcm9wZXJ0eUluZm8pO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgZmlsbEV4dHJhUHJvcGVydHlJbmZvKHJlc29sdmVkVHlwZSwgcHJvcGVydHlJbmZvLCB0eXBlQXJndW1lbnRNYXApO1xuICAgICAgICBwcm9wZXJ0aWVzLnB1c2gocHJvcGVydHlJbmZvKTtcbiAgICB9KTtcblxuICAgIHJldHVybiBwcm9wZXJ0aWVzO1xufVxuXG5mdW5jdGlvbiBmaWxsRXh0cmFQcm9wZXJ0eUluZm8ocmVzb2x2ZWRUeXBlOiBUeXBlLCBwcm9wZXJ0eUluZm86IFByb3BlcnR5SW5mbywgdHlwZUFyZ3VtZW50TWFwOiBNYXA8c3RyaW5nLCBUeXBlPikge1xuICAgIGNvbnN0IGlzRW51bSA9IHJlc29sdmVkVHlwZS5pc0VudW0oKTtcbiAgICBjb25zdCBzeW1ib2wgPSByZXNvbHZlZFR5cGUuZ2V0U3ltYm9sKCkgfHwgcmVzb2x2ZWRUeXBlLmdldEFsaWFzU3ltYm9sKCk7XG5cbiAgICBpZiAoIXN5bWJvbCkge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3QgZGVjbGFyYXRpb25zID0gc3ltYm9sLmdldERlY2xhcmF0aW9ucygpO1xuICAgIGNvbnN0IGRlY2xhcmF0aW9uID0gZGVjbGFyYXRpb25zWzBdO1xuICAgIGNvbnN0IGlzVW5pdHlUeXBlID0gZ2V0SXNVbml0eUFQSURlY2xhcmF0aW9uKGRlY2xhcmF0aW9uKTtcbiAgICBjb25zdCBnZW5pZXNTY3JpcHRUeXBlID0gZ2V0R2VuaWVzU2NyaXB0VHlwZUZyb21Ob2RlKGRlY2xhcmF0aW9uLCBpc1VuaXR5VHlwZSk7XG5cbiAgICBwcm9wZXJ0eUluZm8uSXNHZW5pZXNCZWhhdmlvdXJSZWYgPSBnZW5pZXNTY3JpcHRUeXBlID09IEdlbmllc1NjcmlwdFR5cGUuTW9ub2JlaGF2aW91cjtcbiAgICBwcm9wZXJ0eUluZm8uSXNHZW5pZXNTY3JpcHRhYmxlT2JqZWN0UmVmID0gZ2VuaWVzU2NyaXB0VHlwZSA9PSBHZW5pZXNTY3JpcHRUeXBlLlNjcmlwdGFibGVPYmplY3Q7XG5cbiAgICBpZiAoaXNVbml0eVR5cGUgfHwgZ2VuaWVzU2NyaXB0VHlwZSAhPT0gR2VuaWVzU2NyaXB0VHlwZS5Ob25lKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAoaXNFbnVtKSB7XG4gICAgICAgIGZpbGxFbnVtSW5mbyhwcm9wZXJ0eUluZm8sIHJlc29sdmVkVHlwZSk7XG4gICAgfVxuXG4gICAgaWYgKHN5bWJvbC5nZXREZWNsYXJhdGlvbnMoKS5zb21lKGRlY2xhcmF0aW9uID0+IE5vZGUuaXNDbGFzc0RlY2xhcmF0aW9uKGRlY2xhcmF0aW9uKSkpIHtcbiAgICAgICAgY29uc3QgY2xhc3NEZWNsID0gc3ltYm9sLmdldERlY2xhcmF0aW9ucygpLmZpbmQoTm9kZS5pc0NsYXNzRGVjbGFyYXRpb24pIGFzIENsYXNzRGVjbGFyYXRpb247XG4gICAgICAgIGNvbnN0IHR5cGVQYXJhbXMgPSBjbGFzc0RlY2wuZ2V0VHlwZVBhcmFtZXRlcnMoKTtcbiAgICAgICAgY29uc3QgdHlwZUFyZ3MgPSByZXNvbHZlZFR5cGUuZ2V0VHlwZUFyZ3VtZW50cygpO1xuICAgICAgICBjb25zdCBuZXdUeXBlQXJndW1lbnRNYXAgPSBuZXcgTWFwKHR5cGVBcmd1bWVudE1hcCk7XG5cbiAgICAgICAgdHlwZVBhcmFtcy5mb3JFYWNoKChwYXJhbSwgaW5kZXgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHBhcmFtTmFtZSA9IHBhcmFtLmdldE5hbWUoKTtcbiAgICAgICAgICAgIGNvbnN0IHVuaXF1ZVBhcmFtTmFtZSA9IGAke3BhcmFtTmFtZX1fJHtjbGFzc0RlY2wuZ2V0TmFtZSgpfWA7IC8vIEVuc3VyZSB1bmlxdWVuZXNzIGJ5IGFwcGVuZGluZyB0aGUgY2xhc3MgbmFtZVxuICAgICAgICAgICAgbmV3VHlwZUFyZ3VtZW50TWFwLnNldCh1bmlxdWVQYXJhbU5hbWUsIHR5cGVBcmdzW2luZGV4XSk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vQ29sbGVjdCBwcm9wZXJ0aWVzXG4gICAgICAgIGNvbnN0IGNoaWxkUHJvcGVydGllczogUHJvcGVydHlJbmZvW10gPSBbXTtcbiAgICAgICAgbGV0IGJhc2VDbGFzcyA9IGNsYXNzRGVjbDtcbiAgICAgICAgd2hpbGUgKGJhc2VDbGFzcykge1xuICAgICAgICAgICAgY29uc3QgYmFzZUNsYXNzTmFtZSA9IGJhc2VDbGFzcy5nZXROYW1lKCk7XG5cbiAgICAgICAgICAgIGNoaWxkUHJvcGVydGllcy51bnNoaWZ0KC4uLmV4dHJhY3RQcm9wZXJ0aWVzKGJhc2VDbGFzcywgcHJvcGVydHlJbmZvLlBhdGgsIG5ld1R5cGVBcmd1bWVudE1hcCkpO1xuXG4gICAgICAgICAgICBsZXQgbmV3QmFzZSA9IGJhc2VDbGFzcy5nZXRCYXNlQ2xhc3MoKTtcbiAgICAgICAgICAgIGlmIChuZXdCYXNlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBiYXNlQ2xhc3MgPSBuZXdCYXNlO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHByb3BlcnR5SW5mby5DaGlsZFByb3BlcnRpZXMgPSBjaGlsZFByb3BlcnRpZXM7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBmaWxsRW51bUluZm8ocHJvcGVydHlJbmZvOiBQcm9wZXJ0eUluZm8sIHJlc29sdmVkVHlwZTogVHlwZSkge1xuICAgIGNvbnN0IHtrZXlzLCB2YWx1ZXN9ID0gZXh0cmFjdEVudW1EZXRhaWxzKHJlc29sdmVkVHlwZSk7XG4gICAgcHJvcGVydHlJbmZvLkVudW1LZXlzID0ga2V5cztcbiAgICBwcm9wZXJ0eUluZm8uRW51bVZhbHVlcyA9IHZhbHVlcy5tYXAodmFsdWUgPT4gdmFsdWUgPT09IHVuZGVmaW5lZCA/IFwiXCIgOiB2YWx1ZS50b1N0cmluZygpKTtcbiAgICBwcm9wZXJ0eUluZm8uSXNFbnVtID0gdHJ1ZTtcbn1cblxuZnVuY3Rpb24gZ2V0QXJyYXlFbGVtZW50SW5pdGlhbGl6ZXIodHlwZTogVHlwZSwgdW5kZXJseWluZ1R5cGVOYW1lOiBzdHJpbmcsIHByb3BOYW1lOiBzdHJpbmcsIHByb3BQYXRoOiBzdHJpbmcsIGRpbWVuc2lvbjogbnVtYmVyLCB0eXBlQXJndW1lbnRNYXA6IE1hcDxzdHJpbmcsIFR5cGU+KTogUHJvcGVydHlJbmZvIHtcbiAgICBsZXQgcmVzb2x2ZWRUeXBlID0gdHlwZS5pc0FycmF5KCkgPyB0eXBlLmdldEFycmF5RWxlbWVudFR5cGUoKSEgOiB0eXBlO1xuXG4gICAgLy8gRW5zdXJlIHByb3BlciByZXNvbHV0aW9uIG9mIGdlbmVyaWMgdHlwZSBhcmd1bWVudHMgYW5kIGFycmF5IGVsZW1lbnRzXG4gICAgaWYgKCFyZXNvbHZlZFR5cGUuaXNBcnJheSgpKSB7XG4gICAgICAgIHJlc29sdmVkVHlwZSA9IHJlc29sdmVBcnJheUVsZW1lbnRUeXBlKHJlc29sdmVkVHlwZSwgdHlwZUFyZ3VtZW50TWFwKTtcbiAgICB9XG5cbiAgICBsZXQgY3VycmVudERpbWVuc2lvbiA9IGRpbWVuc2lvbjtcblxuICAgIGNvbnN0IHByb3BlcnR5SW5mbzogUHJvcGVydHlJbmZvID0ge1xuICAgICAgICBQYXRoOiBwcm9wUGF0aCArIFwiX0RcIiArIGRpbWVuc2lvbixcbiAgICAgICAgTmFtZTogcHJvcE5hbWUsXG4gICAgICAgIFR5cGVOYW1lOiB1bmRlcmx5aW5nVHlwZU5hbWUsXG4gICAgICAgIEFycmF5RGltZW5zaW9uOiBkaW1lbnNpb24sXG4gICAgICAgIENoaWxkUHJvcGVydGllczogW10sXG4gICAgICAgIElzQXJyYXk6IHJlc29sdmVkVHlwZS5pc0FycmF5KCksXG4gICAgICAgIElzRW51bTogcmVzb2x2ZWRUeXBlLmlzRW51bSgpLFxuICAgICAgICBFbnVtS2V5czogW10sXG4gICAgICAgIEVudW1WYWx1ZXM6IFtdLFxuICAgICAgICBEZWNvcmF0b3JzOiBbXSxcbiAgICAgICAgSXNHZW5pZXNCZWhhdmlvdXJSZWY6IGZhbHNlLFxuICAgICAgICBJc0dlbmllc1NjcmlwdGFibGVPYmplY3RSZWY6IGZhbHNlLFxuICAgICAgICBJbml0aWFsaXplcnM6IFtdLFxuICAgICAgICBBcnJheUVsZW1lbnRJbml0aWFsaXplcjogdW5kZWZpbmVkXG4gICAgfTtcblxuICAgIGlmICghcmVzb2x2ZWRUeXBlLmlzQXJyYXkoKSkge1xuICAgICAgICBmaWxsRXh0cmFQcm9wZXJ0eUluZm8ocmVzb2x2ZWRUeXBlLCBwcm9wZXJ0eUluZm8sIHR5cGVBcmd1bWVudE1hcCk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgcHJvcGVydHlJbmZvLkFycmF5RWxlbWVudEluaXRpYWxpemVyID0gZ2V0QXJyYXlFbGVtZW50SW5pdGlhbGl6ZXIocmVzb2x2ZWRUeXBlLCB1bmRlcmx5aW5nVHlwZU5hbWUsIHByb3BOYW1lLCBwcm9wUGF0aCwgKytjdXJyZW50RGltZW5zaW9uLCB0eXBlQXJndW1lbnRNYXApO1xuICAgIH1cblxuICAgIHJldHVybiBwcm9wZXJ0eUluZm87XG59XG5cbmZ1bmN0aW9uIHJlc29sdmVHZW5lcmljVHlwZSh0eXBlOiBUeXBlLCB0eXBlQXJndW1lbnRNYXA6IE1hcDxzdHJpbmcsIFR5cGU+KTogVHlwZSB7XG4gICAgbGV0IHJlc29sdmVkVHlwZSA9IHR5cGU7XG5cbiAgICBpZiAocmVzb2x2ZWRUeXBlLmlzVHlwZVBhcmFtZXRlcigpKSB7XG4gICAgICAgIGNvbnN0IHR5cGVOYW1lID0gcmVzb2x2ZWRUeXBlLmdldFN5bWJvbCgpPy5nZXROYW1lKCk7XG4gICAgICAgIGNvbnN0IHBhcmVudERlY2wgPSByZXNvbHZlZFR5cGUuZ2V0U3ltYm9sKCk/LmdldERlY2xhcmF0aW9ucygpWzBdLmdldFBhcmVudCgpO1xuICAgICAgICBjb25zdCBkZWNsYXJpbmdDbGFzc05hbWUgPSBwYXJlbnREZWNsICYmIE5vZGUuaXNDbGFzc0RlY2xhcmF0aW9uKHBhcmVudERlY2wpID8gcGFyZW50RGVjbC5nZXROYW1lKCkgOiAnJztcbiAgICAgICAgY29uc3QgdW5pcXVlVHlwZU5hbWUgPSBgJHt0eXBlTmFtZX1fJHtkZWNsYXJpbmdDbGFzc05hbWV9YDsgLy8gRW5zdXJlIHVuaXF1ZW5lc3MgYnkgYXBwZW5kaW5nIHRoZSBjbGFzcyBuYW1lXG4gICAgICAgIGlmICh1bmlxdWVUeXBlTmFtZSAmJiB0eXBlQXJndW1lbnRNYXAuaGFzKHVuaXF1ZVR5cGVOYW1lKSkge1xuICAgICAgICAgICAgcmVzb2x2ZWRUeXBlID0gdHlwZUFyZ3VtZW50TWFwLmdldCh1bmlxdWVUeXBlTmFtZSkhO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHJlc29sdmVkVHlwZTtcbn1cblxuZnVuY3Rpb24gcmVzb2x2ZUFycmF5RWxlbWVudFR5cGUodHlwZTogVHlwZSwgdHlwZUFyZ3VtZW50TWFwOiBNYXA8c3RyaW5nLCBUeXBlPik6IFR5cGUge1xuICAgIGxldCByZXNvbHZlZFR5cGUgPSB0eXBlO1xuXG4gICAgd2hpbGUgKHJlc29sdmVkVHlwZT8uaXNBcnJheSgpKSB7XG4gICAgICAgIHJlc29sdmVkVHlwZSA9IHJlc29sdmVkVHlwZS5nZXRBcnJheUVsZW1lbnRUeXBlKCkhO1xuICAgIH1cblxuICAgIHJlc29sdmVkVHlwZSA9IHJlc29sdmVHZW5lcmljVHlwZShyZXNvbHZlZFR5cGUsIHR5cGVBcmd1bWVudE1hcCk7XG5cbiAgICByZXR1cm4gcmVzb2x2ZWRUeXBlO1xufVxuXG5mdW5jdGlvbiBnZXRJc1VuaXR5QVBJU291cmNlRmlsZShzb3VyY2VGaWxlOiBTb3VyY2VGaWxlKSB7XG4gICAgaWYgKCFzb3VyY2VGaWxlKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICBjb25zdCBmaXJzdE5vZGUgPSBzb3VyY2VGaWxlLmdldEZpcnN0Q2hpbGQoKTtcblxuICAgIGlmICghZmlyc3ROb2RlKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKFwiTm8gbm9kZXMgZm91bmQgaW4gdGhlIGZpbGUuXCIpO1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgY29uc3QgbGVhZGluZ0NvbW1lbnRzID0gZmlyc3ROb2RlLmdldExlYWRpbmdDb21tZW50UmFuZ2VzKCk7XG4gICAgcmV0dXJuIGxlYWRpbmdDb21tZW50cy5sZW5ndGggPiAwICYmIGxlYWRpbmdDb21tZW50c1swXS5nZXRUZXh0KCkgPT09IEdlbmllc0RlY2xhcmF0aW9uRmlsZUFubm90YXRpb247XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRJc1ZhbGlkVW5pdHlHZW5lcmljVHlwZUFyZyhhcmdUeXBlOiBUeXBlKSB7XG4gICAgbGV0IHRleHQgPSBcIlwiO1xuXG4gICAgY29uc3QgYWxpYXNTeW1ib2wgPSBhcmdUeXBlLmdldEFsaWFzU3ltYm9sKCk7XG4gICAgaWYgKGFsaWFzU3ltYm9sKSB7XG4gICAgICAgIHRleHQgPSBhbGlhc1N5bWJvbC5nZXROYW1lKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgdGV4dCA9IGFyZ1R5cGUuZ2V0VGV4dCgpO1xuICAgIH1cblxuICAgIGlmIChbXCJmbG9hdFwiLCBcImludFwiLCBcImRvdWJsZVwiLCBcImxvbmdcIiwgXCJib29sXCIsIFwic3RyaW5nXCIsIFwibnVtYmVyXCJdLmluY2x1ZGVzKHRleHQpKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIGNvbnN0IHNjcmlwdFR5cGUgPSBnZXRHZW5pZXNTY3JpcHRUeXBlRnJvbVR5cGUoYXJnVHlwZSk7XG4gICAgaWYgKHNjcmlwdFR5cGUgIT09IEdlbmllc1NjcmlwdFR5cGUuTm9uZSkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG5cbiAgICByZXR1cm4gZ2V0SXNVbml0eUFQSVR5cGUoYXJnVHlwZSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRJc1VuaXR5QVBJVHlwZSh0eXBlOiBUeXBlKSB7XG4gICAgLy8gVHJ5IHRvIGdldCB0aGUgcHJpbWFyeSBzeW1ib2xcbiAgICBsZXQgc3ltYm9sID0gdHlwZS5nZXRTeW1ib2woKTtcblxuICAgIFxuICAgIC8vIElmIGl0J3MgbWlzc2luZywgdHJ5IHRoZSBhbGlhcyBzeW1ib2wgKGZvciB0eXBlcyBsaWtlIGFsaWFzZXMsIGV0Yy4pXG4gICAgaWYgKCFzeW1ib2wpIHtcbiAgICAgICAgbGV0IHMgPSB0eXBlLmdldEFwcGFyZW50VHlwZSgpLmdldFN5bWJvbCgpO1xuICAgICAgICBcbiAgICAgICAgaWYocylcbiAgICAgICAge1xuICAgICAgICAgICAgY29uc29sZS5sb2cocy5nZXROYW1lKCkpXG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCBkZWNsYXJhdGlvbnMgPSBzeW1ib2wuZ2V0RGVjbGFyYXRpb25zKCk7XG4gICAgaWYgKCFkZWNsYXJhdGlvbnMgfHwgZGVjbGFyYXRpb25zLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3Qgc291cmNlRmlsZSA9IGRlY2xhcmF0aW9uc1swXS5nZXRTb3VyY2VGaWxlKCk7XG4gICAgcmV0dXJuIGdldElzVW5pdHlBUElTb3VyY2VGaWxlKHNvdXJjZUZpbGUpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0VHlwZUJ5TmFtZSh0eXBlTmFtZTogc3RyaW5nLCB0eXBlQ2hlY2tlcjogVHlwZUNoZWNrZXIpOiBUeXBlIHwgdW5kZWZpbmVkIHtcbiAgICAvLyBSZXNvbHZlIHRoZSBzeW1ib2wgZm9yIHRoZSB0eXBlIG5hbWUgaW4gdGhlIGdsb2JhbCBzY29wZVxuICAgIGNvbnN0IHN5bWJvbCA9IHR5cGVDaGVja2VyLnJlc29sdmVOYW1lKHR5cGVOYW1lLCB1bmRlZmluZWQsIFN5bWJvbEZsYWdzLkFsbCwgZmFsc2UpO1xuXG4gICAgaWYgKCFzeW1ib2wpIHtcbiAgICAgICAgY29uc29sZS5sb2coYEdsb2JhbCB0eXBlICcke3R5cGVOYW1lfScgbm90IGZvdW5kLmApO1xuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH1cblxuICAgIC8vIEdldCB0aGUgdHlwZSBmcm9tIHRoZSBzeW1ib2xcbiAgICBjb25zdCB0eXBlID0gdHlwZUNoZWNrZXIuZ2V0RGVjbGFyZWRUeXBlT2ZTeW1ib2woc3ltYm9sKTtcblxuICAgIHJldHVybiB0eXBlO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gY2xlYW5UeXBlVGV4dCh0eXBlVGV4dDogc3RyaW5nKTogc3RyaW5nIHtcbiAgICAvLyBSZW1vdmUgYnJhbmRpbmcgYW5kIGV4dHJhIHNwYWNlc1xuICAgIHJldHVybiB0eXBlVGV4dC5yZXBsYWNlKC8mXFxzKlxce1tefV0qXFx9LywgJycpLnRyaW0oKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGlzQXNzaWdubWVudFRvU3ltYm9sKG5vZGU6IE5vZGUsIHN5bWJvbDogU3ltYm9sKTogYm9vbGVhbiB7XG4gICAgaWYgKE5vZGUuaXNQcm9wZXJ0eUFjY2Vzc0V4cHJlc3Npb24obm9kZSkpIHtcbiAgICAgICAgY29uc3QgZXhwcmVzc2lvbiA9IG5vZGUuZ2V0RXhwcmVzc2lvbigpO1xuICAgICAgICBpZiAoTm9kZS5pc1RoaXNFeHByZXNzaW9uKGV4cHJlc3Npb24pKSB7XG4gICAgICAgICAgICBjb25zdCBsZWZ0U3ltYm9sID0gbm9kZS5nZXROYW1lTm9kZSgpLmdldFN5bWJvbCgpO1xuICAgICAgICAgICAgcmV0dXJuIGxlZnRTeW1ib2wgPT09IHN5bWJvbDtcbiAgICAgICAgfVxuICAgIH0gZWxzZSBpZiAoTm9kZS5pc0lkZW50aWZpZXIobm9kZSkpIHtcbiAgICAgICAgY29uc3QgbGVmdFN5bWJvbCA9IG5vZGUuZ2V0U3ltYm9sKCk7XG4gICAgICAgIHJldHVybiBsZWZ0U3ltYm9sID09PSBzeW1ib2w7XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldElzVW5pdHlBUElEZWNsYXJhdGlvbihkZWNsYXJhdGlvbjogTm9kZSk6IGJvb2xlYW4ge1xuICAgIGNvbnN0IHNvdXJjZUZpbGUgPSBkZWNsYXJhdGlvbi5nZXRTb3VyY2VGaWxlKCk7XG4gICAgcmV0dXJuIGdldElzVW5pdHlBUElTb3VyY2VGaWxlKHNvdXJjZUZpbGUpO1xufVxuXG5mdW5jdGlvbiBnZXRHZW5pZXNTY3JpcHRUeXBlRnJvbU5vZGUoZGVjbGFyYXRpb246IE5vZGUsIGlzVW5pdHlUeXBlOiBib29sZWFuKTogR2VuaWVzU2NyaXB0VHlwZSB7XG4gICAgaWYgKGRlY2xhcmF0aW9uLmdldEtpbmQoKSAhPT0gU3ludGF4S2luZC5DbGFzc0RlY2xhcmF0aW9uIHx8IGlzVW5pdHlUeXBlKSB7XG4gICAgICAgIHJldHVybiBHZW5pZXNTY3JpcHRUeXBlLk5vbmU7XG4gICAgfVxuXG4gICAgY29uc3QgY2xzID0gZGVjbGFyYXRpb24gYXMgQ2xhc3NEZWNsYXJhdGlvbjtcbiAgICBjb25zdCBpc01vbm9iZWhhdmlvdXIgPSBleHRlbmRzTW9ub0JlaGF2aW91cihjbHMpO1xuICAgIGNvbnN0IGlzU2NyaXB0YWJsZU9iamVjdCA9IGV4dGVuZHNTY3JpcHRhYmxlT2JqZWN0KGNscyk7XG5cbiAgICBpZiAoaXNNb25vYmVoYXZpb3VyKSB7XG4gICAgICAgIHJldHVybiBHZW5pZXNTY3JpcHRUeXBlLk1vbm9iZWhhdmlvdXI7XG4gICAgfVxuXG4gICAgaWYgKGlzU2NyaXB0YWJsZU9iamVjdCkge1xuICAgICAgICByZXR1cm4gR2VuaWVzU2NyaXB0VHlwZS5TY3JpcHRhYmxlT2JqZWN0O1xuICAgIH1cblxuICAgIHJldHVybiBHZW5pZXNTY3JpcHRUeXBlLk5vbmU7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRHZW5pZXNTY3JpcHRUeXBlRnJvbVR5cGUodHlwZTogVHlwZSk6IEdlbmllc1NjcmlwdFR5cGUge1xuICAgIGNvbnN0IHN5bWJvbCA9IHR5cGUuZ2V0U3ltYm9sKCk7XG5cbiAgICBpZiAoIXN5bWJvbCkge1xuICAgICAgICByZXR1cm4gR2VuaWVzU2NyaXB0VHlwZS5Ob25lO1xuICAgIH1cblxuICAgIGNvbnN0IGRlY2xhcmF0aW9ucyA9IHN5bWJvbC5nZXREZWNsYXJhdGlvbnMoKTtcbiAgICBpZiAoZGVjbGFyYXRpb25zLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICByZXR1cm4gR2VuaWVzU2NyaXB0VHlwZS5Ob25lO1xuICAgIH1cblxuICAgIGNvbnN0IGRlY2xhcmF0aW9uID0gZGVjbGFyYXRpb25zWzBdO1xuICAgIGNvbnN0IGlzVW5pdHlUeXBlID0gZ2V0SXNVbml0eUFQSURlY2xhcmF0aW9uKGRlY2xhcmF0aW9uKVxuICAgIHJldHVybiBnZXRHZW5pZXNTY3JpcHRUeXBlRnJvbU5vZGUoZGVjbGFyYXRpb24sIGlzVW5pdHlUeXBlKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGlzR2VuaWVzU2NyaXB0VHlwZSh0eXBlOiBUeXBlKTogYm9vbGVhbiB7XG4gICAgbGV0IGdUeXBlID0gZ2V0R2VuaWVzU2NyaXB0VHlwZUZyb21UeXBlKHR5cGUpO1xuICAgIHJldHVybiBnVHlwZSA9PT0gR2VuaWVzU2NyaXB0VHlwZS5Nb25vYmVoYXZpb3VyIHx8IGdUeXBlID09PSBHZW5pZXNTY3JpcHRUeXBlLlNjcmlwdGFibGVPYmplY3Q7XG59XG5cbi8qKlxuICogQ29udmVydHMgYW4gYWJzb2x1dGUgcGF0aCB0byBhbiBhbGlhcyBwYXRoIGJhc2VkIG9uIHByZWRlZmluZWQgcnVsZXMuXG4gKlxuICogQHBhcmFtIGFic29sdXRlUGF0aCAtIFRoZSBhYnNvbHV0ZSBwYXRoIHRvIGNvbnZlcnQuXG4gKiBAcmV0dXJucyBUaGUgYWxpYXNlZCBwYXRoIG9yIG51bGwgaWYgaXQgZG9lc24ndCBtYXRjaCBhbnkgYWxpYXMgcnVsZXMuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjb252ZXJ0VG9HZW5pZXNBbGlhc1BhdGgoYWJzb2x1dGVQYXRoOiBzdHJpbmcpOiBzdHJpbmcgfCBudWxsIHtcbiAgICAvLyBOb3JtYWxpemUgdGhlIHBhdGggdG8gdXNlIGZvcndhcmQgc2xhc2hlc1xuICAgIGNvbnN0IG5vcm1hbGl6ZWRQYXRoID0gbm9ybWFsaXplUGF0aChhYnNvbHV0ZVBhdGgpO1xuXG4gICAgLy8gQ2hlY2sgaWYgdGhlIHBhdGggaW5jbHVkZXMgJy9Bc3NldHMvJ1xuICAgIGNvbnN0IGFzc2V0c1ByZWZpeCA9ICcvQXNzZXRzLyc7XG4gICAgY29uc3QgYXNzZXRzSW5kZXggPSBub3JtYWxpemVkUGF0aC5pbmRleE9mKGFzc2V0c1ByZWZpeCk7XG4gICAgaWYgKGFzc2V0c0luZGV4ICE9PSAtMSkge1xuICAgICAgICBjb25zdCByZWxhdGl2ZVBhdGggPSBub3JtYWxpemVkUGF0aC5zdWJzdHJpbmcoYXNzZXRzSW5kZXggKyBhc3NldHNQcmVmaXgubGVuZ3RoKTtcbiAgICAgICAgcmV0dXJuIGBAYXNzZXRzLyR7cmVsYXRpdmVQYXRofWA7XG4gICAgfVxuXG4gICAgLy8gQ2hlY2sgaWYgdGhlIHBhdGggaW5jbHVkZXMgJy9jb20uZ2VuaWVzLjxwYWNrYWdlPi8nXG4gICAgY29uc3QgY29tR2VuaWVzUmVnZXggPSAvXFwvKGNvbVxcLmdlbmllc1xcLlteXFwvXSspXFwvLztcbiAgICBjb25zdCBjb21HZW5pZXNNYXRjaCA9IG5vcm1hbGl6ZWRQYXRoLm1hdGNoKGNvbUdlbmllc1JlZ2V4KTtcbiAgICBpZiAoY29tR2VuaWVzTWF0Y2gpIHtcbiAgICAgICAgY29uc3QgcGFja2FnZU5hbWUgPSBjb21HZW5pZXNNYXRjaFsxXTsgLy8gZS5nLiwgY29tLmdlbmllcy5leHBlcmllbmNlLnNka1xuICAgICAgICBjb25zdCBwYXRoQWZ0ZXJQYWNrYWdlID0gbm9ybWFsaXplZFBhdGguc3Vic3RyaW5nKGNvbUdlbmllc01hdGNoLmluZGV4ISArIGNvbUdlbmllc01hdGNoWzBdLmxlbmd0aCk7XG4gICAgICAgIHJldHVybiBgQCR7cGFja2FnZU5hbWV9LyR7cGF0aEFmdGVyUGFja2FnZX1gO1xuICAgIH1cblxuICAgIC8vIElmIG5vIGFsaWFzIHJ1bGUgbWF0Y2hlcywgcmV0dXJuIG51bGxcbiAgICByZXR1cm4gbnVsbDtcbn1cblxuLyoqXG4gKiBOb3JtYWxpemVzIGEgZmlsZSBwYXRoIHRvIHVzZSBmb3J3YXJkIHNsYXNoZXMuXG4gKlxuICogQHBhcmFtIHAgLSBUaGUgcGF0aCB0byBub3JtYWxpemUuXG4gKiBAcmV0dXJucyBUaGUgbm9ybWFsaXplZCBwYXRoLlxuICovXG5mdW5jdGlvbiBub3JtYWxpemVQYXRoKHA6IHN0cmluZyk6IHN0cmluZyB7XG4gICAgcmV0dXJuIHAuc3BsaXQocGF0aC5zZXApLmpvaW4oJy8nKTtcbn1cblxuLyoqXG4gKiBDb252ZXJ0cyBhIHJlbGF0aXZlIGltcG9ydCBwYXRoIHRvIGFuIGFsaWFzIHBhdGggaWYgYXBwbGljYWJsZS5cbiAqXG4gKiBAcGFyYW0gcm9vdFxuICogQHBhcmFtIHJlbGF0aXZlUGF0aCAtIFRoZSByZWxhdGl2ZSBpbXBvcnQgcGF0aC5cbiAqIEByZXR1cm5zIFRoZSBhbGlhc2VkIHBhdGggb3IgdGhlIG9yaWdpbmFsIHJlbGF0aXZlIHBhdGggaWYgbm8gYWxpYXMgYXBwbGllcy5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNvbnZlcnRUb0FsaWFzUGF0aChyb290OiBzdHJpbmcsIHJlbGF0aXZlUGF0aDogc3RyaW5nKTogc3RyaW5nIHtcblxuICAgIGNvbnN0IGFic29sdXRlUGF0aCA9IHBhdGgucmVzb2x2ZShyb290LCByZWxhdGl2ZVBhdGgpO1xuICAgIGNvbnN0IGFsaWFzUGF0aCA9IGNvbnZlcnRUb0dlbmllc0FsaWFzUGF0aChhYnNvbHV0ZVBhdGgpO1xuXG4gICAgaWYgKGFsaWFzUGF0aCkge1xuICAgICAgICByZXR1cm4gYWxpYXNQYXRoO1xuICAgIH1cblxuICAgIC8vIElmIG5vIGFsaWFzIGFwcGxpZXMsIHJldHVybiB0aGUgbm9ybWFsaXplZCByZWxhdGl2ZSBwYXRoXG4gICAgcmV0dXJuIHJlbGF0aXZlUGF0aDtcbn1cblxuLyoqXG4gKiBVcGRhdGVzIGltcG9ydCBkZWNsYXJhdGlvbnMgaW4gYSBzb3VyY2UgZmlsZSB0byB1c2UgYWxpYXMgcGF0aHMgZm9yIEFzc2V0cy8gYW5kIGNvbS5nZW5pZXMuKiBwYWNrYWdlcy5cbiAqXG4gKiBAcGFyYW0gc291cmNlRmlsZSAtIFRoZSBUeXBlU2NyaXB0IHNvdXJjZSBmaWxlIHRvIHByb2Nlc3MuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB1cGRhdGVJbXBvcnRzVG9BbGlhc1BhdGhzKHNvdXJjZUZpbGU6IFNvdXJjZUZpbGUpIHtcbiAgICBjb25zdCBmaWxlUGF0aCA9IHNvdXJjZUZpbGUuZ2V0RGlyZWN0b3J5UGF0aCgpIGFzIHN0cmluZztcblxuICAgIHNvdXJjZUZpbGUuZ2V0SW1wb3J0RGVjbGFyYXRpb25zKCkuZm9yRWFjaChpbXBvcnREZWNsYXJhdGlvbiA9PiB7XG4gICAgICAgIGNvbnN0IG1vZHVsZVNwZWNpZmllciA9IGltcG9ydERlY2xhcmF0aW9uLmdldE1vZHVsZVNwZWNpZmllclZhbHVlKCk7XG5cbiAgICAgICAgLy8gQ2hlY2sgaWYgdGhlIGltcG9ydCBwYXRoIGlzIHJlbGF0aXZlXG4gICAgICAgIGlmIChtb2R1bGVTcGVjaWZpZXIuc3RhcnRzV2l0aCgnLi8nKSB8fCBtb2R1bGVTcGVjaWZpZXIuc3RhcnRzV2l0aCgnLi4vJykpIHtcbiAgICAgICAgICAgIC8vIENvbnZlcnQgdGhlIHJlbGF0aXZlIHBhdGggdG8gYW4gYWxpYXMgcGF0aFxuICAgICAgICAgICAgY29uc3QgYWxpYXNQYXRoID0gY29udmVydFRvQWxpYXNQYXRoKGZpbGVQYXRoLCBtb2R1bGVTcGVjaWZpZXIpO1xuXG4gICAgICAgICAgICAvLyBVcGRhdGUgdGhlIG1vZHVsZSBzcGVjaWZpZXIgaWYgaXQncyBiZWVuIGNvbnZlcnRlZCB0byBhbiBhbGlhc1xuICAgICAgICAgICAgaWYgKGFsaWFzUGF0aC5zdGFydHNXaXRoKCdAYXNzZXRzLycpIHx8IGFsaWFzUGF0aC5zdGFydHNXaXRoKCdAY29tLmdlbmllcycpKSB7XG4gICAgICAgICAgICAgICAgaW1wb3J0RGVjbGFyYXRpb24uc2V0TW9kdWxlU3BlY2lmaWVyKGFsaWFzUGF0aCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9KTtcbn1cblxuZnVuY3Rpb24gZXh0cmFjdERlY29yYXRvcnMocHJvcDogUHJvcGVydHlEZWNsYXJhdGlvbik6IEdlbmllc0RlY29yYXRvckluZm9bXSB7XG4gICAgcmV0dXJuIHByb3AuZ2V0RGVjb3JhdG9ycygpLm1hcChkID0+IHtcbiAgICAgICAgY29uc3QgZGVjb3JhdG9ySW5mbzogR2VuaWVzRGVjb3JhdG9ySW5mbyA9IHtcbiAgICAgICAgICAgIFR5cGU6IGQuZ2V0TmFtZSgpLFxuICAgICAgICAgICAgQXJnczogZC5nZXRBcmd1bWVudHMoKS5tYXAoYSA9PiBhLmdldFRleHQoKSlcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIGRlY29yYXRvckluZm87XG4gICAgfSk7XG59XG4iLCJpbXBvcnQge1xuICAgIENhbGxFeHByZXNzaW9uLCBNZXRob2REZWNsYXJhdGlvbixcbiAgICBOb2RlLFxuICAgIFByb3BlcnR5RGVjbGFyYXRpb24sXG4gICAgU3ltYm9sLFxuICAgIFN5bnRheEtpbmQsIHRzLFxuICAgIFR5cGUsXG4gICAgVHlwZUNoZWNrZXIsXG4gICAgVmFyaWFibGVEZWNsYXJhdGlvblxufSBmcm9tIFwidHMtbW9ycGhcIjtcbmltcG9ydCB7Y2xlYW5UeXBlVGV4dCwgZ2V0VHlwZUJ5TmFtZSwgaXNBc3NpZ25tZW50VG9TeW1ib2wsIE51bWVyaWNhbEFsaWFzZXN9IGZyb20gXCIuL0NvbXBpbGVyVXRpbHNcIjtcbmltcG9ydCBDYWxsTGlrZUV4cHJlc3Npb24gPSB0cy5DYWxsTGlrZUV4cHJlc3Npb247XG5cbmludGVyZmFjZSBOdW1lcmljTGl0ZXJhbEluZm8ge1xuICAgIHZhbHVlOiBudW1iZXI7XG4gICAgaGFzRGVjaW1hbDogYm9vbGVhbjtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGluZmVyUG9zc2libGVUeXBlcyhhcmc6IE5vZGUsIHR5cGVDaGVja2VyOiBUeXBlQ2hlY2tlcik6IFR5cGVbXSB7XG4gICAgY29uc3QgdHlwZXM6IFR5cGVbXSA9IFtdO1xuICAgIGNvbnN0IGFyZ1R5cGUgPSB0eXBlQ2hlY2tlci5nZXRUeXBlQXRMb2NhdGlvbihhcmcpO1xuXG4gICAgbGV0IGluZmVycmVkVHlwZU5hbWVzOiBzdHJpbmdbXSA9IFtdO1xuXG4gICAgY29uc3QgYnJhbmRlZFR5cGUgPSBnZXRCcmFuZGVkVHlwZXMoYXJnVHlwZSwgdHlwZUNoZWNrZXIpO1xuICAgIGlmIChicmFuZGVkVHlwZSAhPSBudWxsKSB7XG4gICAgICAgIHR5cGVzLnB1c2goYnJhbmRlZFR5cGUpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIEF0dGVtcHQgdG8gZ2V0IHRoZSBudW1lcmljIGxpdGVyYWwgaW5mb1xuICAgICAgICBjb25zdCBudW1lcmljSW5mbyA9IGdldE51bWVyaWNWYWx1ZShhcmcpO1xuICAgICAgICBpZiAobnVtZXJpY0luZm8gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgaW5mZXJyZWRUeXBlTmFtZXMgPSBpbmZlclR5cGVzRnJvbU51bWVyaWNJbmZvKG51bWVyaWNJbmZvKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIC8vIFVzZSB0aGUgYXJndW1lbnQncyB0eXBlXG4gICAgICAgICAgICBpZiAoaXNOdW1iZXJUeXBlKGFyZ1R5cGUpKSB7XG4gICAgICAgICAgICAgICAgLy8gSW5jbHVkZSBhbGwgbnVtYmVyIHR5cGVzXG4gICAgICAgICAgICAgICAgaW5mZXJyZWRUeXBlTmFtZXMgPSBbJ2J5dGUnLCAnc2J5dGUnLCAnc2hvcnQnLCAndXNob3J0JywgJ2ludCcsICd1aW50JywgJ2Zsb2F0JywgJ2RvdWJsZSddO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB0eXBlcy5wdXNoKGFyZ1R5cGUpO1xuICAgICAgICAgICAgICAgIHJldHVybiB0eXBlcztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuXG4gICAgLy8gQ29udmVydCB0eXBlIG5hbWVzIHRvIFR5cGUgb2JqZWN0c1xuICAgIGZvciAoY29uc3QgdHlwZU5hbWUgb2YgaW5mZXJyZWRUeXBlTmFtZXMpIHtcbiAgICAgICAgY29uc3QgdHlwZSA9IGdldFR5cGVCeU5hbWUodHlwZU5hbWUsIHR5cGVDaGVja2VyKTtcbiAgICAgICAgaWYgKHR5cGUpIHtcbiAgICAgICAgICAgIHR5cGVzLnB1c2godHlwZSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gdHlwZXM7XG59XG5cblxuZXhwb3J0IGZ1bmN0aW9uIHNlbGVjdEJlc3RPdmVybG9hZChcbiAgICBvdmVybG9hZHM6IE1ldGhvZERlY2xhcmF0aW9uW10sXG4gICAgY2FsbEV4cHJlc3Npb246IENhbGxFeHByZXNzaW9uLFxuICAgIHR5cGVDaGVja2VyOiBUeXBlQ2hlY2tlclxuKTogTWV0aG9kRGVjbGFyYXRpb24gfCB1bmRlZmluZWQge1xuICAgIFxuICAgIGlmKCFvdmVybG9hZHMgfHwgb3ZlcmxvYWRzLmxlbmd0aCA8PSAwKSB7XG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfVxuICAgIFxuICAgIC8vSWYgb25seSAxIG92ZXJsb2FkLCByZXR1cm4gaXQuXG4gICAgaWYob3ZlcmxvYWRzLmxlbmd0aCA9PSAxKSB7XG4gICAgICAgIHJldHVybiBvdmVybG9hZHNbMF07XG4gICAgfVxuICAgIFxuICAgIGNvbnN0IGNhbGxBcmdzID0gY2FsbEV4cHJlc3Npb24uZ2V0QXJndW1lbnRzKCk7XG4gICAgXG4gICAgaWYoIWNhbGxBcmdzIHx8IGNhbGxBcmdzLmxlbmd0aCA8PSAwKSB7XG4gICAgICAgIGNvbnN0IG5vQXJnT3ZlcmxvYWQgPSBvdmVybG9hZHMuZmluZChvdmVybG9hZCA9PiBvdmVybG9hZC5nZXRQYXJhbWV0ZXJzKCkubGVuZ3RoID09PSAwKTtcbiAgICAgICAgaWYgKG5vQXJnT3ZlcmxvYWQpIHtcbiAgICAgICAgICAgIHJldHVybiBub0FyZ092ZXJsb2FkO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH1cbiAgICBcbiAgICAvLyBJbmZlciBwb3NzaWJsZSB0eXBlcyBmb3IgZWFjaCBhcmd1bWVudFxuICAgIGNvbnN0IGFyZ3VtZW50VHlwZXNMaXN0ID0gY2FsbEV4cHJlc3Npb24uZ2V0QXJndW1lbnRzKCkubWFwKGFyZyA9PlxuICAgICAgICBpbmZlclBvc3NpYmxlVHlwZXMoYXJnLCB0eXBlQ2hlY2tlcilcbiAgICApO1xuXG4gICAgbGV0IGJlc3RPdmVybG9hZDogTWV0aG9kRGVjbGFyYXRpb24gfCB1bmRlZmluZWQ7XG4gICAgbGV0IGhpZ2hlc3RTY29yZSA9IC0xO1xuXG4gICAgZm9yIChjb25zdCBvdmVybG9hZCBvZiBvdmVybG9hZHMpIHtcbiAgICAgICAgY29uc3Qgc2NvcmUgPSBzY29yZU92ZXJsb2FkKG92ZXJsb2FkLCBhcmd1bWVudFR5cGVzTGlzdCwgdHlwZUNoZWNrZXIpO1xuICAgICAgICBpZiAoc2NvcmUgPiBoaWdoZXN0U2NvcmUpIHtcbiAgICAgICAgICAgIGhpZ2hlc3RTY29yZSA9IHNjb3JlO1xuICAgICAgICAgICAgYmVzdE92ZXJsb2FkID0gb3ZlcmxvYWQ7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gYmVzdE92ZXJsb2FkO1xufVxuXG5mdW5jdGlvbiBzY29yZU92ZXJsb2FkKFxuICAgIG92ZXJsb2FkOiBNZXRob2REZWNsYXJhdGlvbixcbiAgICBhcmd1bWVudFR5cGVzTGlzdDogVHlwZVtdW10sXG4gICAgdHlwZUNoZWNrZXI6IFR5cGVDaGVja2VyKTogbnVtYmVyIHtcbiAgICBjb25zdCBwYXJhbWV0ZXJzID0gb3ZlcmxvYWQuZ2V0UGFyYW1ldGVycygpO1xuICAgIFxuICAgIC8vQXNzdW1lIHRoYXQgaXRzIG5vdCB0aGUgY29ycmVjdCBvdmVybG9hZCwgdGhpcyBhbHNvIGFjY291bnRzIGZvciB0aGUgY2hhbmNlIHRoYXQgcGFyYW1zIGFyZSBvcHRpb25hbC5cbiAgICBpZiAocGFyYW1ldGVycy5sZW5ndGggPCBhcmd1bWVudFR5cGVzTGlzdC5sZW5ndGgpIHJldHVybiAtMTtcbiAgICBcbiAgICAvL0lmIGV4YWN0IG1hdGNoIG9mIHBhcmFtcyB0byBhcmdzIHdlIHN0YXJ0IHRoZSBzY29yZSBhdCAxXG4gICAgbGV0IHNjb3JlID0gcGFyYW1ldGVycy5sZW5ndGggPT0gYXJndW1lbnRUeXBlc0xpc3QubGVuZ3RoID8gMSA6IDA7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBwYXJhbWV0ZXJzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGNvbnN0IHBhcmFtVHlwZSA9IHR5cGVDaGVja2VyLmdldFR5cGVBdExvY2F0aW9uKHBhcmFtZXRlcnNbaV0pO1xuICAgICAgICBjb25zdCBhcmdUeXBlcyA9IGFyZ3VtZW50VHlwZXNMaXN0W2ldO1xuICAgICAgICBcbiAgICAgICAgaWYoIWFyZ1R5cGVzIHx8IGFyZ1R5cGVzLmxlbmd0aCA8PSAwKSB7XG4gICAgICAgICAgICByZXR1cm4gLTE7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBhcmdTY29yZSA9IHNjb3JlUGFyYW1ldGVyKHBhcmFtVHlwZSwgYXJnVHlwZXMsIHR5cGVDaGVja2VyKTtcbiAgICAgICAgaWYgKGFyZ1Njb3JlIDwgMCkge1xuICAgICAgICAgICAgcmV0dXJuIC0xO1xuICAgICAgICB9XG4gICAgICAgIHNjb3JlICs9IGFyZ1Njb3JlO1xuICAgIH1cblxuICAgIHJldHVybiBzY29yZTtcbn1cblxuZnVuY3Rpb24gc2NvcmVQYXJhbWV0ZXIoXG4gICAgcGFyYW1UeXBlOiBUeXBlLFxuICAgIHBvc3NpYmxlQXJnVHlwZXM6IFR5cGVbXSxcbiAgICB0eXBlQ2hlY2tlcjogVHlwZUNoZWNrZXJcbik6IG51bWJlciB7XG4gICAgbGV0IGJlc3RTY29yZSA9IC0xO1xuXG4gICAgLy8gMSkgSWYgaXQncyBhIHR5cGUgcGFyYW1ldGVyLCBzZWUgaWYgd2UgY2FuIHVuaWZ5IHdpdGggdGhlIGNvbnN0cmFpbnRcbiAgICBpZiAocGFyYW1UeXBlLmlzVHlwZVBhcmFtZXRlcigpKSB7XG4gICAgICAgIGNvbnN0IGNvbnN0cmFpbnQgPSBwYXJhbVR5cGUuZ2V0Q29uc3RyYWludCgpO1xuICAgICAgICBpZiAoIWNvbnN0cmFpbnQpIHtcbiAgICAgICAgICAgIGlmIChwb3NzaWJsZUFyZ1R5cGVzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gMTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIC0xO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgZm9yIChjb25zdCBhcmdUeXBlIG9mIHBvc3NpYmxlQXJnVHlwZXMpIHtcbiAgICAgICAgICAgIGlmICh0eXBlc0FyZUVxdWFsKGFyZ1R5cGUsIGNvbnN0cmFpbnQpKSB7XG4gICAgICAgICAgICAgICAgYmVzdFNjb3JlID0gTWF0aC5tYXgoYmVzdFNjb3JlLCAyKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAodHlwZUNoZWNrZXIuaXNUeXBlQXNzaWduYWJsZVRvKGFyZ1R5cGUsIGNvbnN0cmFpbnQpKSB7XG4gICAgICAgICAgICAgICAgYmVzdFNjb3JlID0gTWF0aC5tYXgoYmVzdFNjb3JlLCAxKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gYmVzdFNjb3JlO1xuICAgIH1cblxuICAgIC8vIDIpIElmIHBhcmFtVHlwZSBpcyBhIHJlY29nbml6ZWQgbnVtZXJpYyB0eXBlXG4gICAgaWYgKGlzVmFsaWROdW1lcmljYWxUeXBlKHBhcmFtVHlwZSkpIHtcbiAgICAgICAgLy8gbnVtZXJpYyBwYXJhbSA9PiBleGFjdCBtYXRjaCA9PiBzY29yZSAyLCBvdGhlcndpc2UgY2FzdGFibGUgPT4gMVxuICAgICAgICBmb3IgKGNvbnN0IGFyZ1R5cGUgb2YgcG9zc2libGVBcmdUeXBlcykge1xuICAgICAgICAgICAgaWYgKHR5cGVzQXJlRXF1YWwoYXJnVHlwZSwgcGFyYW1UeXBlKSkge1xuICAgICAgICAgICAgICAgIGJlc3RTY29yZSA9IE1hdGgubWF4KGJlc3RTY29yZSwgMik7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGlzTnVtZXJpY0Nhc3RhYmxlKGFyZ1R5cGUsIHBhcmFtVHlwZSkpIHtcbiAgICAgICAgICAgICAgICBiZXN0U2NvcmUgPSBNYXRoLm1heChiZXN0U2NvcmUsIDEpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBiZXN0U2NvcmU7XG4gICAgfVxuXG4gICAgLy8gMykgTm9uLW51bWVyaWMsIG5vbi10eXBlLXBhcmFtZXRlciBleGFjdCBtYXRjaCBvciBpc1R5cGVBc3NpZ25hYmxlVG8uXG4gICAgZm9yIChjb25zdCBhcmdUeXBlIG9mIHBvc3NpYmxlQXJnVHlwZXMpIHtcbiAgICAgICAgaWYgKHR5cGVzQXJlRXF1YWwoYXJnVHlwZSwgcGFyYW1UeXBlKSkge1xuICAgICAgICAgICAgYmVzdFNjb3JlID0gTWF0aC5tYXgoYmVzdFNjb3JlLCAyKTtcbiAgICAgICAgfSBlbHNlIGlmICh0eXBlQ2hlY2tlci5pc1R5cGVBc3NpZ25hYmxlVG8oYXJnVHlwZSwgcGFyYW1UeXBlKSkge1xuICAgICAgICAgICAgYmVzdFNjb3JlID0gTWF0aC5tYXgoYmVzdFNjb3JlLCAxKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBiZXN0U2NvcmU7XG59XG5cbmZ1bmN0aW9uIGlzVmFsaWROdW1lcmljYWxUeXBlKHR5cGU6IFR5cGUpOiBib29sZWFuIHtcbiAgICBjb25zdCB0eXBlVGV4dCA9IGNsZWFuVHlwZVRleHQodHlwZS5nZXRUZXh0KCkpO1xuXG4gICAgcmV0dXJuIE51bWVyaWNhbEFsaWFzZXMuaGFzKHR5cGVUZXh0KTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGlzTnVtZXJpY0Nhc3RhYmxlKGZyb21UeXBlOiBUeXBlLCB0b1R5cGU6IFR5cGUpOiBib29sZWFuIHtcbiAgICBjb25zdCBjYXN0YWJpbGl0eU1hcDogeyBba2V5OiBzdHJpbmddOiBzdHJpbmdbXSB9ID0ge1xuICAgICAgICBieXRlOiBbJ3Nob3J0JywgJ3VzaG9ydCcsICdpbnQnLCAndWludCcsICdmbG9hdCcsICdkb3VibGUnLCAnbnVtYmVyJ10sXG4gICAgICAgIHNieXRlOiBbJ3Nob3J0JywgJ2ludCcsICdmbG9hdCcsICdkb3VibGUnLCAnbnVtYmVyJ10sXG4gICAgICAgIHNob3J0OiBbJ2ludCcsICdmbG9hdCcsICdkb3VibGUnLCAnbnVtYmVyJ10sXG4gICAgICAgIHVzaG9ydDogWydpbnQnLCAndWludCcsICdmbG9hdCcsICdkb3VibGUnLCAnbnVtYmVyJ10sXG4gICAgICAgIGludDogWydmbG9hdCcsICdkb3VibGUnLCAnbnVtYmVyJ10sXG4gICAgICAgIHVpbnQ6IFsnZmxvYXQnLCAnZG91YmxlJywgJ251bWJlciddLFxuICAgICAgICBmbG9hdDogWydkb3VibGUnLCAnbnVtYmVyJ10sXG4gICAgICAgIGRvdWJsZTogWydudW1iZXInXSxcbiAgICAgICAgbnVtYmVyOiBbJ2J5dGUnLCAnc2J5dGUnLCAnc2hvcnQnLCAndXNob3J0JywgJ2ludCcsICd1aW50JywgJ2Zsb2F0JywgJ2RvdWJsZSddLFxuICAgIH07XG5cbiAgICBjb25zdCBmcm9tVHlwZU5hbWUgPSBjbGVhblR5cGVUZXh0KGZyb21UeXBlLmdldFRleHQoKSk7XG4gICAgY29uc3QgdG9UeXBlTmFtZSA9IGNsZWFuVHlwZVRleHQodG9UeXBlLmdldFRleHQoKSk7XG5cbiAgICByZXR1cm4gY2FzdGFiaWxpdHlNYXBbZnJvbVR5cGVOYW1lXT8uaW5jbHVkZXModG9UeXBlTmFtZSkgPz8gZmFsc2U7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiB0eXBlc0FyZUVxdWFsKHR5cGUxOiBUeXBlLCB0eXBlMjogVHlwZSk6IGJvb2xlYW4ge1xuICAgIGNvbnN0IHR5cGUxVGV4dCA9IGNsZWFuVHlwZVRleHQodHlwZTEuZ2V0VGV4dCgpKTtcbiAgICBjb25zdCB0eXBlMlRleHQgPSBjbGVhblR5cGVUZXh0KHR5cGUyLmdldFRleHQoKSk7XG4gICAgcmV0dXJuIHR5cGUxVGV4dCA9PT0gdHlwZTJUZXh0O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0TnVtZXJpY1ZhbHVlKGFyZzogTm9kZSk6IE51bWVyaWNMaXRlcmFsSW5mbyB8IHVuZGVmaW5lZCB7XG4gICAgLy8gSGFuZGxlIG51bWVyaWMgbGl0ZXJhbHMgYW5kIG5lZ2F0aXZlIG51bWJlcnNcbiAgICBjb25zdCBudW1lcmljTGl0ZXJhbEluZm8gPSBnZXROdW1lcmljTGl0ZXJhbEluZm8oYXJnKTtcbiAgICBpZiAobnVtZXJpY0xpdGVyYWxJbmZvICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgcmV0dXJuIG51bWVyaWNMaXRlcmFsSW5mbztcbiAgICB9XG5cbiAgICAvLyBIYW5kbGUgdmFyaWFibGVzIGFuZCBwcm9wZXJ0aWVzIGJ5IHBlcmZvcm1pbmcgZmxvdyBhbmFseXNpc1xuICAgIGlmIChOb2RlLmlzSWRlbnRpZmllcihhcmcpIHx8IE5vZGUuaXNQcm9wZXJ0eUFjY2Vzc0V4cHJlc3Npb24oYXJnKSkge1xuICAgICAgICBjb25zdCBzeW1ib2wgPSBhcmcuZ2V0U3ltYm9sKCk7XG4gICAgICAgIGlmIChzeW1ib2wpIHtcbiAgICAgICAgICAgIGNvbnN0IGRlY2xhcmF0aW9ucyA9IHN5bWJvbC5nZXREZWNsYXJhdGlvbnMoKTtcbiAgICAgICAgICAgIGlmIChkZWNsYXJhdGlvbnMgJiYgZGVjbGFyYXRpb25zLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICBjb25zdCBkZWNsID0gZGVjbGFyYXRpb25zWzBdO1xuICAgICAgICAgICAgICAgIGlmIChOb2RlLmlzVmFyaWFibGVEZWNsYXJhdGlvbihkZWNsKSB8fCBOb2RlLmlzUHJvcGVydHlEZWNsYXJhdGlvbihkZWNsKSkge1xuICAgICAgICAgICAgICAgICAgICAvLyBQZXJmb3JtIGZsb3cgYW5hbHlzaXMgdG8gZ2V0IHRoZSB2YXJpYWJsZSdzIHZhbHVlIGF0IHRoZSBwb2ludCBvZiB1c2FnZVxuICAgICAgICAgICAgICAgICAgICBjb25zdCB2YWx1ZUluZm8gPSBwZXJmb3JtRmxvd0FuYWx5c2lzKHN5bWJvbCwgZGVjbCwgYXJnKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHZhbHVlSW5mbykge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHZhbHVlSW5mbztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiB1bmRlZmluZWQ7XG59XG5cbmZ1bmN0aW9uIGlzTnVtYmVyVHlwZSh0eXBlOiBUeXBlKTogYm9vbGVhbiB7XG4gICAgY29uc3QgdHlwZVRleHQgPSBjbGVhblR5cGVUZXh0KHR5cGUuZ2V0VGV4dCgpKTtcbiAgICByZXR1cm4gdHlwZVRleHQgPT09ICdudW1iZXInO1xufVxuXG5mdW5jdGlvbiBnZXROdW1lcmljTGl0ZXJhbEluZm8oYXJnOiBOb2RlKTogTnVtZXJpY0xpdGVyYWxJbmZvIHwgdW5kZWZpbmVkIHtcbiAgICBpZiAoTm9kZS5pc051bWVyaWNMaXRlcmFsKGFyZykpIHtcbiAgICAgICAgY29uc3QgdGV4dCA9IGFyZy5nZXRUZXh0KCk7XG4gICAgICAgIGNvbnN0IHZhbHVlID0gTnVtYmVyKHRleHQpO1xuICAgICAgICBjb25zdCBoYXNEZWNpbWFsID0gdGV4dC5pbmNsdWRlcygnLicpO1xuICAgICAgICByZXR1cm4ge3ZhbHVlLCBoYXNEZWNpbWFsfTtcbiAgICB9IGVsc2UgaWYgKE5vZGUuaXNQcmVmaXhVbmFyeUV4cHJlc3Npb24oYXJnKSAmJiBhcmcuZ2V0T3BlcmF0b3JUb2tlbigpID09PSBTeW50YXhLaW5kLk1pbnVzVG9rZW4pIHtcbiAgICAgICAgY29uc3Qgb3BlcmFuZCA9IGFyZy5nZXRPcGVyYW5kKCk7XG4gICAgICAgIGlmIChOb2RlLmlzTnVtZXJpY0xpdGVyYWwob3BlcmFuZCkpIHtcbiAgICAgICAgICAgIGNvbnN0IHRleHQgPSBvcGVyYW5kLmdldFRleHQoKTtcbiAgICAgICAgICAgIGNvbnN0IHZhbHVlID0gLU51bWJlcih0ZXh0KTtcbiAgICAgICAgICAgIGNvbnN0IGhhc0RlY2ltYWwgPSB0ZXh0LmluY2x1ZGVzKCcuJyk7XG4gICAgICAgICAgICByZXR1cm4ge3ZhbHVlLCBoYXNEZWNpbWFsfTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdW5kZWZpbmVkO1xufVxuXG5mdW5jdGlvbiBpbmZlclR5cGVzRnJvbU51bWVyaWNJbmZvKGluZm86IE51bWVyaWNMaXRlcmFsSW5mbyk6IHN0cmluZ1tdIHtcbiAgICBjb25zdCB7dmFsdWUsIGhhc0RlY2ltYWx9ID0gaW5mbztcbiAgICBjb25zdCB0eXBlcyA9IG5ldyBTZXQ8c3RyaW5nPigpO1xuXG4gICAgaWYgKCFoYXNEZWNpbWFsKSB7XG4gICAgICAgIC8vIE9yaWdpbmFsIGxpdGVyYWwgZGlkIG5vdCBoYXZlIGEgZGVjaW1hbCBwb2ludDsgdHJlYXQgYXMgaW50ZWdlclxuICAgICAgICBpZiAodmFsdWUgPj0gLTIxNDc0ODM2NDggJiYgdmFsdWUgPD0gMjE0NzQ4MzY0Nykge1xuICAgICAgICAgICAgdHlwZXMuYWRkKCdpbnQnKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodmFsdWUgPj0gLTMyNzY4ICYmIHZhbHVlIDw9IDMyNzY3KSB7XG4gICAgICAgICAgICB0eXBlcy5hZGQoJ3Nob3J0Jyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHZhbHVlID49IC0xMjggJiYgdmFsdWUgPD0gMTI3KSB7XG4gICAgICAgICAgICB0eXBlcy5hZGQoJ3NieXRlJyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHZhbHVlID49IDAgJiYgdmFsdWUgPD0gMjU1KSB7XG4gICAgICAgICAgICB0eXBlcy5hZGQoJ2J5dGUnKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodmFsdWUgPj0gMCAmJiB2YWx1ZSA8PSA2NTUzNSkge1xuICAgICAgICAgICAgdHlwZXMuYWRkKCd1c2hvcnQnKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodmFsdWUgPj0gMCAmJiB2YWx1ZSA8PSA0Mjk0OTY3Mjk1KSB7XG4gICAgICAgICAgICB0eXBlcy5hZGQoJ3VpbnQnKTtcbiAgICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIE9yaWdpbmFsIGxpdGVyYWwgaGFkIGEgZGVjaW1hbCBwb2ludDsgdHJlYXQgYXMgZmxvYXRcbiAgICAgICAgdHlwZXMuYWRkKCdmbG9hdCcpO1xuICAgICAgICB0eXBlcy5hZGQoJ2RvdWJsZScpO1xuICAgIH1cblxuICAgIHJldHVybiBBcnJheS5mcm9tKHR5cGVzKTtcbn1cblxuZnVuY3Rpb24gZ2V0QnJhbmRlZFR5cGVzKHR5cGU6IFR5cGUsIHR5cGVDaGVja2VyOiBUeXBlQ2hlY2tlcik6IFR5cGUgfCBudWxsIHtcblxuICAgIGNvbnN0IHR5cGVUZXh0ID0gdHlwZS5nZXRUZXh0KCk7XG5cbiAgICBpZiAoTnVtZXJpY2FsQWxpYXNlcy5oYXModHlwZVRleHQpKSB7XG4gICAgICAgIGNvbnN0IGJyYW5kZWRUeXBlID0gZ2V0VHlwZUJ5TmFtZSh0eXBlVGV4dCwgdHlwZUNoZWNrZXIpO1xuICAgICAgICBpZiAoYnJhbmRlZFR5cGUpIHtcbiAgICAgICAgICAgIHJldHVybiBicmFuZGVkVHlwZTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8vIENoZWNrIGZvciBicmFuZGVkIHR5cGVzIGJ5IGxvb2tpbmcgZm9yICcmIHsgX19icmFuZD86IHVuZGVmaW5lZCB9J1xuICAgIGNvbnN0IG1hdGNoID0gdHlwZVRleHQubWF0Y2goL251bWJlclxccyomXFxzKlxce1xccypfXyhbYS16QS1aXSspQnJhbmRcXD86XFxzKnVuZGVmaW5lZFxccypcXH0vKTtcbiAgICBpZiAobWF0Y2gpIHtcbiAgICAgICAgY29uc3QgYnJhbmQgPSBtYXRjaFsxXTtcbiAgICAgICAgY29uc3QgdHlwZU5hbWUgPSBicmFuZDtcblxuICAgICAgICBjb25zdCBicmFuZGVkVHlwZSA9IGdldFR5cGVCeU5hbWUodHlwZU5hbWUsIHR5cGVDaGVja2VyKTtcbiAgICAgICAgaWYgKGJyYW5kZWRUeXBlKSB7XG4gICAgICAgICAgICByZXR1cm4gYnJhbmRlZFR5cGU7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gbnVsbDtcbn1cblxuXG5mdW5jdGlvbiBwZXJmb3JtRmxvd0FuYWx5c2lzKFxuICAgIHN5bWJvbDogU3ltYm9sLFxuICAgIGRlY2xhcmF0aW9uOiBWYXJpYWJsZURlY2xhcmF0aW9uIHwgUHJvcGVydHlEZWNsYXJhdGlvbixcbiAgICB1c2FnZU5vZGU6IE5vZGVcbik6IE51bWVyaWNMaXRlcmFsSW5mbyB8IHVuZGVmaW5lZCB7XG4gICAgbGV0IGN1cnJlbnRWYWx1ZUluZm86IE51bWVyaWNMaXRlcmFsSW5mbyB8IHVuZGVmaW5lZCA9IHVuZGVmaW5lZDtcblxuICAgIC8vIEZpcnN0LCBjaGVjayBpZiB0aGUgdmFyaWFibGUvcHJvcGVydHkgaGFzIGFuIGluaXRpYWxpemVyXG4gICAgY29uc3QgaW5pdGlhbGl6ZXIgPSBkZWNsYXJhdGlvbi5nZXRJbml0aWFsaXplcigpO1xuICAgIGlmIChpbml0aWFsaXplcikge1xuICAgICAgICBjb25zdCBpbml0VmFsdWVJbmZvID0gZ2V0TnVtZXJpY1ZhbHVlRnJvbUV4cHJlc3Npb24oaW5pdGlhbGl6ZXIsIHN5bWJvbCwgZGVjbGFyYXRpb24sIHVzYWdlTm9kZSk7XG4gICAgICAgIGlmIChpbml0VmFsdWVJbmZvKSB7XG4gICAgICAgICAgICBjdXJyZW50VmFsdWVJbmZvID0gaW5pdFZhbHVlSW5mbztcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8vIEZpbmQgdGhlIG1ldGhvZCB3aGVyZSB0aGUgdXNhZ2Ugb2NjdXJzXG4gICAgY29uc3QgbWV0aG9kRGVjbGFyYXRpb24gPSB1c2FnZU5vZGUuZ2V0Rmlyc3RBbmNlc3RvckJ5S2luZChTeW50YXhLaW5kLk1ldGhvZERlY2xhcmF0aW9uKTtcbiAgICBpZiAoIW1ldGhvZERlY2xhcmF0aW9uKSB7XG4gICAgICAgIHJldHVybiBjdXJyZW50VmFsdWVJbmZvOyAvLyBDYW5ub3QgcHJvY2VlZCB3aXRob3V0IG1ldGhvZCBjb250ZXh0XG4gICAgfVxuXG4gICAgY29uc3Qgc3RhdGVtZW50cyA9IG1ldGhvZERlY2xhcmF0aW9uLmdldFN0YXRlbWVudHMoKSB8fCBbXTtcblxuICAgIGxldCB0cmFja2luZyA9IHRydWU7IC8vIFNpbmNlIHdlIG9ubHkgY2FyZSBhYm91dCB0aGUgbWV0aG9kIHNjb3BlLCB3ZSBjYW4gc3RhcnQgdHJhY2tpbmcgaW1tZWRpYXRlbHlcblxuICAgIGNvbnN0IHVzYWdlU3RhcnQgPSB1c2FnZU5vZGUuZ2V0U3RhcnQoKTtcblxuICAgIGZvciAoY29uc3Qgc3RtdCBvZiBzdGF0ZW1lbnRzKSB7XG4gICAgICAgIGlmIChzdG10LmdldFN0YXJ0KCkgPiB1c2FnZVN0YXJ0KSB7XG4gICAgICAgICAgICAvLyBSZWFjaGVkIHRoZSB1c2FnZSBwb2ludFxuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodHJhY2tpbmcpIHtcbiAgICAgICAgICAgIC8vIENoZWNrIGZvciBhc3NpZ25tZW50cyB0byB0aGUgdmFyaWFibGUvcHJvcGVydHlcbiAgICAgICAgICAgIGNvbnN0IGFzc2lnbm1lbnRzID0gc3RtdC5nZXREZXNjZW5kYW50cygpLmZpbHRlcihub2RlID0+XG4gICAgICAgICAgICAgICAgTm9kZS5pc0JpbmFyeUV4cHJlc3Npb24obm9kZSkgfHxcbiAgICAgICAgICAgICAgICBOb2RlLmlzUHJlZml4VW5hcnlFeHByZXNzaW9uKG5vZGUpIHx8XG4gICAgICAgICAgICAgICAgTm9kZS5pc1Bvc3RmaXhVbmFyeUV4cHJlc3Npb24obm9kZSlcbiAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgIGZvciAoY29uc3QgYXNzaWdubWVudCBvZiBhc3NpZ25tZW50cykge1xuICAgICAgICAgICAgICAgIGlmIChOb2RlLmlzQmluYXJ5RXhwcmVzc2lvbihhc3NpZ25tZW50KSkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBvcGVyYXRvcktpbmQgPSBhc3NpZ25tZW50LmdldE9wZXJhdG9yVG9rZW4oKS5nZXRLaW5kKCk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGxlZnQgPSBhc3NpZ25tZW50LmdldExlZnQoKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcmlnaHQgPSBhc3NpZ25tZW50LmdldFJpZ2h0KCk7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKGlzQXNzaWdubWVudFRvU3ltYm9sKGxlZnQsIHN5bWJvbCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvcGVyYXRvcktpbmQgPT09IFN5bnRheEtpbmQuRXF1YWxzVG9rZW4pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTaW1wbGUgYXNzaWdubWVudFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHZhbHVlSW5mbyA9IGdldE51bWVyaWNWYWx1ZUZyb21FeHByZXNzaW9uKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByaWdodCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3ltYm9sLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWNsYXJhdGlvbixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXNhZ2VOb2RlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50VmFsdWVJbmZvXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodmFsdWVJbmZvKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRWYWx1ZUluZm8gPSB2YWx1ZUluZm87XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudFZhbHVlSW5mbyA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgU3ludGF4S2luZC5QbHVzRXF1YWxzVG9rZW4sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFN5bnRheEtpbmQuTWludXNFcXVhbHNUb2tlbixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgU3ludGF4S2luZC5Bc3Rlcmlza0VxdWFsc1Rva2VuLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBTeW50YXhLaW5kLlNsYXNoRXF1YWxzVG9rZW4sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFN5bnRheEtpbmQuUGVyY2VudEVxdWFsc1Rva2VuLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF0uaW5jbHVkZXMob3BlcmF0b3JLaW5kKVxuICAgICAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ29tcG91bmQgYXNzaWdubWVudFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHZhbHVlSW5mbyA9IGdldE51bWVyaWNWYWx1ZUZyb21FeHByZXNzaW9uKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByaWdodCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3ltYm9sLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWNsYXJhdGlvbixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXNhZ2VOb2RlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50VmFsdWVJbmZvXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodmFsdWVJbmZvICYmIGN1cnJlbnRWYWx1ZUluZm8pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcmVzdWx0VmFsdWVJbmZvID0gZXZhbHVhdGVDb21wb3VuZEFzc2lnbm1lbnQoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcGVyYXRvcktpbmQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50VmFsdWVJbmZvLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWVJbmZvXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXN1bHRWYWx1ZUluZm8pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRWYWx1ZUluZm8gPSByZXN1bHRWYWx1ZUluZm87XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50VmFsdWVJbmZvID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudFZhbHVlSW5mbyA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKE5vZGUuaXNQcmVmaXhVbmFyeUV4cHJlc3Npb24oYXNzaWdubWVudCkgfHwgTm9kZS5pc1Bvc3RmaXhVbmFyeUV4cHJlc3Npb24oYXNzaWdubWVudCkpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgb3BlcmF0b3JLaW5kID0gYXNzaWdubWVudC5nZXRPcGVyYXRvclRva2VuKCk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG9wZXJhbmQgPSBhc3NpZ25tZW50LmdldE9wZXJhbmQoKTtcblxuICAgICAgICAgICAgICAgICAgICBpZiAoaXNBc3NpZ25tZW50VG9TeW1ib2wob3BlcmFuZCwgc3ltYm9sKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gSW5jcmVtZW50IG9yIGRlY3JlbWVudFxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGN1cnJlbnRWYWx1ZUluZm8pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgZGVsdGEgPSBvcGVyYXRvcktpbmQgPT09IFN5bnRheEtpbmQuUGx1c1BsdXNUb2tlbiA/IDEgOiAtMTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50VmFsdWVJbmZvID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogY3VycmVudFZhbHVlSW5mby52YWx1ZSArIGRlbHRhLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoYXNEZWNpbWFsOiBjdXJyZW50VmFsdWVJbmZvLmhhc0RlY2ltYWwsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudFZhbHVlSW5mbyA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBjdXJyZW50VmFsdWVJbmZvO1xufVxuXG5cbmZ1bmN0aW9uIGdldE51bWVyaWNWYWx1ZUZyb21FeHByZXNzaW9uKFxuICAgIGV4cHI6IE5vZGUsXG4gICAgc3ltYm9sOiBTeW1ib2wsXG4gICAgZGVjbGFyYXRpb246IFZhcmlhYmxlRGVjbGFyYXRpb24gfCBQcm9wZXJ0eURlY2xhcmF0aW9uLFxuICAgIHVzYWdlTm9kZTogTm9kZSxcbiAgICBjdXJyZW50VmFsdWVJbmZvPzogTnVtZXJpY0xpdGVyYWxJbmZvXG4pOiBOdW1lcmljTGl0ZXJhbEluZm8gfCB1bmRlZmluZWQge1xuICAgIGlmIChOb2RlLmlzTnVtZXJpY0xpdGVyYWwoZXhwcikpIHtcbiAgICAgICAgcmV0dXJuIGdldE51bWVyaWNMaXRlcmFsSW5mbyhleHByKTtcbiAgICB9IGVsc2UgaWYgKE5vZGUuaXNJZGVudGlmaWVyKGV4cHIpIHx8IE5vZGUuaXNQcm9wZXJ0eUFjY2Vzc0V4cHJlc3Npb24oZXhwcikpIHtcbiAgICAgICAgaWYgKGlzQXNzaWdubWVudFRvU3ltYm9sKGV4cHIsIHN5bWJvbCkpIHtcbiAgICAgICAgICAgIC8vIFVzZSB0aGUgY3VycmVudCB2YWx1ZSBvZiB0aGUgdmFyaWFibGUvcHJvcGVydHlcbiAgICAgICAgICAgIHJldHVybiBjdXJyZW50VmFsdWVJbmZvO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgLy8gUmV0cmlldmUgdGhlIHZhbHVlIG9mIGFub3RoZXIgdmFyaWFibGUgb3IgcHJvcGVydHlcbiAgICAgICAgICAgIGNvbnN0IGV4cHJTeW1ib2wgPSBleHByLmdldFN5bWJvbCgpO1xuICAgICAgICAgICAgaWYgKGV4cHJTeW1ib2wpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBkZWNsYXJhdGlvbnMgPSBleHByU3ltYm9sLmdldERlY2xhcmF0aW9ucygpO1xuICAgICAgICAgICAgICAgIGlmIChkZWNsYXJhdGlvbnMgJiYgZGVjbGFyYXRpb25zLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZGVjbCA9IGRlY2xhcmF0aW9uc1swXTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKE5vZGUuaXNWYXJpYWJsZURlY2xhcmF0aW9uKGRlY2wpIHx8IE5vZGUuaXNQcm9wZXJ0eURlY2xhcmF0aW9uKGRlY2wpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcGVyZm9ybUZsb3dBbmFseXNpcyhleHByU3ltYm9sLCBkZWNsLCBleHByKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0gZWxzZSBpZiAoTm9kZS5pc0JpbmFyeUV4cHJlc3Npb24oZXhwcikpIHtcbiAgICAgICAgY29uc3QgbGVmdEluZm8gPSBnZXROdW1lcmljVmFsdWVGcm9tRXhwcmVzc2lvbihcbiAgICAgICAgICAgIGV4cHIuZ2V0TGVmdCgpLFxuICAgICAgICAgICAgc3ltYm9sLFxuICAgICAgICAgICAgZGVjbGFyYXRpb24sXG4gICAgICAgICAgICB1c2FnZU5vZGUsXG4gICAgICAgICAgICBjdXJyZW50VmFsdWVJbmZvXG4gICAgICAgICk7XG4gICAgICAgIGNvbnN0IHJpZ2h0SW5mbyA9IGdldE51bWVyaWNWYWx1ZUZyb21FeHByZXNzaW9uKFxuICAgICAgICAgICAgZXhwci5nZXRSaWdodCgpLFxuICAgICAgICAgICAgc3ltYm9sLFxuICAgICAgICAgICAgZGVjbGFyYXRpb24sXG4gICAgICAgICAgICB1c2FnZU5vZGUsXG4gICAgICAgICAgICBjdXJyZW50VmFsdWVJbmZvXG4gICAgICAgICk7XG5cbiAgICAgICAgaWYgKGxlZnRJbmZvICYmIHJpZ2h0SW5mbykge1xuICAgICAgICAgICAgY29uc3Qgb3BlcmF0b3JLaW5kID0gZXhwci5nZXRPcGVyYXRvclRva2VuKCkuZ2V0S2luZCgpO1xuICAgICAgICAgICAgcmV0dXJuIGV2YWx1YXRlQmluYXJ5T3BlcmF0aW9uKG9wZXJhdG9yS2luZCwgbGVmdEluZm8sIHJpZ2h0SW5mbyk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gdW5kZWZpbmVkO1xufVxuXG5mdW5jdGlvbiBldmFsdWF0ZUNvbXBvdW5kQXNzaWdubWVudChcbiAgICBvcGVyYXRvcktpbmQ6IFN5bnRheEtpbmQsXG4gICAgbGVmdEluZm86IE51bWVyaWNMaXRlcmFsSW5mbyxcbiAgICByaWdodEluZm86IE51bWVyaWNMaXRlcmFsSW5mb1xuKTogTnVtZXJpY0xpdGVyYWxJbmZvIHwgdW5kZWZpbmVkIHtcbiAgICBjb25zdCBvcGVyYXRvck1hcDogeyBba2V5OiBudW1iZXJdOiBTeW50YXhLaW5kIH0gPSB7XG4gICAgICAgIFtTeW50YXhLaW5kLlBsdXNFcXVhbHNUb2tlbl06IFN5bnRheEtpbmQuUGx1c1Rva2VuLFxuICAgICAgICBbU3ludGF4S2luZC5NaW51c0VxdWFsc1Rva2VuXTogU3ludGF4S2luZC5NaW51c1Rva2VuLFxuICAgICAgICBbU3ludGF4S2luZC5Bc3Rlcmlza0VxdWFsc1Rva2VuXTogU3ludGF4S2luZC5Bc3Rlcmlza1Rva2VuLFxuICAgICAgICBbU3ludGF4S2luZC5TbGFzaEVxdWFsc1Rva2VuXTogU3ludGF4S2luZC5TbGFzaFRva2VuLFxuICAgICAgICBbU3ludGF4S2luZC5QZXJjZW50RXF1YWxzVG9rZW5dOiBTeW50YXhLaW5kLlBlcmNlbnRUb2tlbixcbiAgICB9O1xuICAgIGNvbnN0IGJpbmFyeU9wZXJhdG9yS2luZCA9IG9wZXJhdG9yTWFwW29wZXJhdG9yS2luZF07XG4gICAgaWYgKGJpbmFyeU9wZXJhdG9yS2luZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHJldHVybiBldmFsdWF0ZUJpbmFyeU9wZXJhdGlvbihiaW5hcnlPcGVyYXRvcktpbmQsIGxlZnRJbmZvLCByaWdodEluZm8pO1xuICAgIH1cbiAgICByZXR1cm4gdW5kZWZpbmVkO1xufVxuXG5mdW5jdGlvbiBldmFsdWF0ZUJpbmFyeU9wZXJhdGlvbihcbiAgICBvcGVyYXRvcktpbmQ6IFN5bnRheEtpbmQsXG4gICAgbGVmdEluZm86IE51bWVyaWNMaXRlcmFsSW5mbyxcbiAgICByaWdodEluZm86IE51bWVyaWNMaXRlcmFsSW5mb1xuKTogTnVtZXJpY0xpdGVyYWxJbmZvIHwgdW5kZWZpbmVkIHtcbiAgICBsZXQgcmVzdWx0VmFsdWU6IG51bWJlciB8IHVuZGVmaW5lZDtcbiAgICBsZXQgaGFzRGVjaW1hbCA9IGxlZnRJbmZvLmhhc0RlY2ltYWwgfHwgcmlnaHRJbmZvLmhhc0RlY2ltYWw7XG5cbiAgICBzd2l0Y2ggKG9wZXJhdG9yS2luZCkge1xuICAgICAgICBjYXNlIFN5bnRheEtpbmQuUGx1c1Rva2VuOlxuICAgICAgICAgICAgcmVzdWx0VmFsdWUgPSBsZWZ0SW5mby52YWx1ZSArIHJpZ2h0SW5mby52YWx1ZTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFN5bnRheEtpbmQuTWludXNUb2tlbjpcbiAgICAgICAgICAgIHJlc3VsdFZhbHVlID0gbGVmdEluZm8udmFsdWUgLSByaWdodEluZm8udmFsdWU7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBTeW50YXhLaW5kLkFzdGVyaXNrVG9rZW46XG4gICAgICAgICAgICByZXN1bHRWYWx1ZSA9IGxlZnRJbmZvLnZhbHVlICogcmlnaHRJbmZvLnZhbHVlO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgU3ludGF4S2luZC5TbGFzaFRva2VuOlxuICAgICAgICAgICAgcmVzdWx0VmFsdWUgPSBsZWZ0SW5mby52YWx1ZSAvIHJpZ2h0SW5mby52YWx1ZTtcbiAgICAgICAgICAgIGhhc0RlY2ltYWwgPSB0cnVlOyAvLyBEaXZpc2lvbiBjYW4gcmVzdWx0IGluIGEgZGVjaW1hbFxuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgU3ludGF4S2luZC5QZXJjZW50VG9rZW46XG4gICAgICAgICAgICByZXN1bHRWYWx1ZSA9IGxlZnRJbmZvLnZhbHVlICUgcmlnaHRJbmZvLnZhbHVlO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH1cblxuICAgIGlmIChyZXN1bHRWYWx1ZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHJldHVybiB7dmFsdWU6IHJlc3VsdFZhbHVlLCBoYXNEZWNpbWFsfTtcbiAgICB9XG5cbiAgICByZXR1cm4gdW5kZWZpbmVkO1xufVxuXG4iLCJpbXBvcnQge1xuICAgIFNvdXJjZUZpbGUsXG4gICAgTm9kZSxcbiAgICBTeW50YXhLaW5kLFxuICAgIENhbGxFeHByZXNzaW9uLFxuICAgIE1ldGhvZERlY2xhcmF0aW9uLFxuICAgIFR5cGUsXG4gICAgQ2xhc3NEZWNsYXJhdGlvbixcbiAgICBOZXdFeHByZXNzaW9uLFxuICAgIFR5cGVSZWZlcmVuY2VOb2RlLFxuICAgIElkZW50aWZpZXIsXG4gICAgUHJvcGVydHlBY2Nlc3NFeHByZXNzaW9uLFxuICAgIEVsZW1lbnRBY2Nlc3NFeHByZXNzaW9uLFxuICAgIEludGVyZmFjZURlY2xhcmF0aW9uLCBNZXRob2RTaWduYXR1cmUsIFR5cGVDaGVja2VyXG59IGZyb20gXCJ0cy1tb3JwaFwiO1xuaW1wb3J0IHRzIGZyb20gXCJ0eXBlc2NyaXB0L2xpYi90c3NlcnZlcmxpYnJhcnlcIjtcbmltcG9ydCB7XG4gICAgZ2V0SXNVbml0eUFQSVR5cGUsXG4gICAgZ2V0SXNVbml0eUFQSURlY2xhcmF0aW9uLFxuICAgIGdldEdlbmllc1NjcmlwdFR5cGVGcm9tVHlwZSxcbiAgICBHZW5pZXNTY3JpcHRUeXBlLCBnZXRGdWxsVHlwZU5hbWUsIEFsbG93ZWRVaUludGVyZmFjZXMsIGdldElzVmFsaWRVbml0eUdlbmVyaWNUeXBlQXJnLCBHRVRfSVRFTV9OQU1FLCBTRVRfSVRFTV9OQU1FXG59IGZyb20gXCIuL0NvbXBpbGVyVXRpbHNcIjtcblxuY29uc3QgQ1VTVE9NX0RJQUdOT1NUSUNfQ09ERVMgPSB7XG4gICAgSU5WQUxJRF9JTkhFUklUQU5DRTogMTAwMDEsXG4gICAgRk9SQklEREVOX0lOVEVSRkFDRTogMTAwMDIsXG4gICAgR0VORVJJQ19NRVRIT0RfTUlTU0lOR19UWVBFX0FSR1VNRU5UUzogMTAwMDMsXG4gICAgR0VORVJJQ19NRVRIT0RfSU5WQUxJRF9UWVBFX0FSR1VNRU5UUzogMTAwMDQsXG4gICAgR0VORVJJQ19DTEFTU19NSVNTSU5HX1RZUEVfQVJHVU1FTlRTOiAxMDAwNSxcbiAgICBHRU5FUklDX0NMQVNTX0lOVkFMSURfVFlQRV9BUkdVTUVOVFM6IDEwMDA2LFxuICAgIElOVkFMSURfR0VUX0lURU1fQVJHVU1FTlRTOiAxMDAwNyxcbn07XG5cbmNvbnN0IEFMTE9XRURfSU5IRVJJVEFOQ0VfVFlQRVMgPSBuZXcgU2V0KFsnTW9ub0JlaGF2aW91cicsICdTY3JpcHRhYmxlT2JqZWN0J10pO1xuXG5jb25zdCBDT01QT05FTlRfTUVUSE9EUyA9IG5ldyBTZXQoW1xuICAgICdHZXRDb21wb25lbnQnLFxuICAgICdUcnlHZXRDb21wb25lbnQnLFxuICAgICdHZXRDb21wb25lbnRJbkNoaWxkcmVuJyxcbiAgICAnR2V0Q29tcG9uZW50c0luQ2hpbGRyZW4nLFxuICAgICdHZXRDb21wb25lbnRJblBhcmVudCcsXG4gICAgJ0dldENvbXBvbmVudHNJblBhcmVudCcsXG4gICAgJ0dldENvbXBvbmVudHMnLFxuICAgICdBZGRDb21wb25lbnQnLFxuXSk7XG5cblxuZXhwb3J0IGZ1bmN0aW9uIGdldEdlbmllc1NlbWFudGljRGlhZ25vc3RpY3MoZmlsZTogU291cmNlRmlsZSwgdHlwZUNoZWNrZXI6IFR5cGVDaGVja2VyKTogdHMuRGlhZ25vc3RpY1tdIHtcbiAgICBpZiAoIWZpbGUpIHtcbiAgICAgICAgcmV0dXJuIFtdO1xuICAgIH1cblxuICAgIGNvbnN0IGRpYWdub3N0aWNzOiB0cy5EaWFnbm9zdGljW10gPSBbXTtcblxuICAgIHByb2Nlc3NDbGFzc0RpYWdub3N0aWNzKGZpbGUsIGRpYWdub3N0aWNzKTtcbiAgICBwcm9jZXNzQ2FsbEV4cHJlc3Npb25EaWFnbm9zdGljcyhmaWxlLCBkaWFnbm9zdGljcyk7XG4gICAgcHJvY2Vzc1R5cGVVc2FnZURpYWdub3N0aWNzKGZpbGUsIGRpYWdub3N0aWNzKTtcbiAgICBcbiAgICAvL1RPRE8gaW1wcm92ZSBkaWFnbm9zdGljcyBmb3IgYnJhY2tldCBhY2Nlc3NcbiAgICAvL3Byb2Nlc3NCcmFja2V0QWNjZXNzRGlhZ25vc3RpY3MoZmlsZSwgdHlwZUNoZWNrZXIsIGRpYWdub3N0aWNzKTtcblxuICAgIHJldHVybiBkaWFnbm9zdGljcztcbn1cblxuLy9UT0RPIGltcHJvdmUgZGlhZ25vc3RpY3MgZm9yIGJyYWNrZXQgYWNjZXNzXG4vLyBmdW5jdGlvbiBwcm9jZXNzQnJhY2tldEFjY2Vzc0RpYWdub3N0aWNzKGZpbGU6IFNvdXJjZUZpbGUsIHR5cGVDaGVja2VyOiBUeXBlQ2hlY2tlciwgZGlhZ25vc3RpY3M6IHRzLkRpYWdub3N0aWNbXSkge1xuLy9cbi8vICAgICBsZXQgZXhwcmVzc2lvbnMgPSBmaWxlLmdldERlc2NlbmRhbnRzT2ZLaW5kKFN5bnRheEtpbmQuRWxlbWVudEFjY2Vzc0V4cHJlc3Npb24pO1xuLy9cbi8vICAgICBpZiAoZXhwcmVzc2lvbnMubGVuZ3RoID09PSAwKSB7XG4vLyAgICAgICAgIHJldHVybjtcbi8vICAgICB9XG4vL1xuLy8gICAgIGV4cHJlc3Npb25zLmZvckVhY2gobm9kZSA9PiB7XG4vLyAgICAgICAgIGNvbnN0IGVsZW1lbnRBY2Nlc3MgPSBub2RlIGFzIEVsZW1lbnRBY2Nlc3NFeHByZXNzaW9uO1xuLy8gICAgICAgICBjb25zdCBleHByZXNzaW9uID0gZWxlbWVudEFjY2Vzcy5nZXRFeHByZXNzaW9uKCk7XG4vLyAgICAgICAgIGNvbnN0IGFyZ3VtZW50RXhwcmVzc2lvbiA9IGVsZW1lbnRBY2Nlc3MuZ2V0QXJndW1lbnRFeHByZXNzaW9uKCk7XG4vL1xuLy8gICAgICAgICBpZiAoIWFyZ3VtZW50RXhwcmVzc2lvbikge1xuLy8gICAgICAgICAgICAgLy8gSWYgdGhlcmUncyBubyBhcmd1bWVudCAoZS5nLiwgb2JqW10pLCBza2lwIHRyYW5zZm9ybWF0aW9uXG4vLyAgICAgICAgICAgICByZXR1cm4gbm9kZTtcbi8vICAgICAgICAgfVxuLy9cbi8vICAgICAgICAgY29uc3QgdHlwZSA9IGV4cHJlc3Npb24uZ2V0VHlwZSgpO1xuLy9cbi8vICAgICAgICAgLy8gQ2hlY2sgaWYgdGhlIHR5cGUgaXMgYSBVbml0eSBBUEkgdHlwZVxuLy8gICAgICAgICBpZiAoIWdldElzVW5pdHlBUElUeXBlKHR5cGUpKSB7XG4vLyAgICAgICAgICAgICByZXR1cm4gbm9kZTtcbi8vICAgICAgICAgfVxuLy9cbi8vICAgICAgICAgLy8gUmV0cmlldmUgdGhlIHN5bWJvbCBvZiB0aGUgdHlwZVxuLy8gICAgICAgICBjb25zdCB0eXBlU3ltYm9sID0gdHlwZS5nZXRTeW1ib2woKTtcbi8vICAgICAgICAgaWYgKCF0eXBlU3ltYm9sKSB7XG4vLyAgICAgICAgICAgICByZXR1cm47XG4vLyAgICAgICAgIH1cbi8vXG4vLyAgICAgICAgIC8vIEdldCBhbGwgZGVjbGFyYXRpb25zIChjbGFzc2VzIGFuZCBpbnRlcmZhY2VzKSBhc3NvY2lhdGVkIHdpdGggdGhlIHR5cGVcbi8vICAgICAgICAgY29uc3QgZGVjbGFyYXRpb25zID0gdHlwZVN5bWJvbC5nZXREZWNsYXJhdGlvbnMoKS5maWx0ZXIoXG4vLyAgICAgICAgICAgICBkZWNsID0+IE5vZGUuaXNDbGFzc0RlY2xhcmF0aW9uKGRlY2wpIHx8IE5vZGUuaXNJbnRlcmZhY2VEZWNsYXJhdGlvbihkZWNsKVxuLy8gICAgICAgICApIGFzIChDbGFzc0RlY2xhcmF0aW9uIHwgSW50ZXJmYWNlRGVjbGFyYXRpb24pW107XG4vL1xuLy8gICAgICAgICBpZiAoZGVjbGFyYXRpb25zLmxlbmd0aCA9PT0gMCkge1xuLy8gICAgICAgICAgICAgcmV0dXJuO1xuLy8gICAgICAgICB9XG4vL1xuLy8gICAgICAgICAvLyBDb2xsZWN0IGFsbCB1bmlxdWUgZ2V0X2l0ZW0gYW5kIHNldF9pdGVtIG1ldGhvZHMgYWNyb3NzIGFsbCBkZWNsYXJhdGlvbnNcbi8vICAgICAgICAgY29uc3QgZ2V0SXRlbU1ldGhvZHM6IChNZXRob2REZWNsYXJhdGlvbiB8IE1ldGhvZFNpZ25hdHVyZSlbXSA9IFtdO1xuLy8gICAgICAgICBjb25zdCBzZXRJdGVtTWV0aG9kczogKE1ldGhvZERlY2xhcmF0aW9uIHwgTWV0aG9kU2lnbmF0dXJlKVtdID0gW107XG4vL1xuLy8gICAgICAgICBjb25zdCBtZXRob2RTaWduYXR1cmVzID0gbmV3IFNldDxzdHJpbmc+KCk7XG4vL1xuLy8gICAgICAgICBkZWNsYXJhdGlvbnMuZm9yRWFjaChkZWNsID0+IHtcbi8vICAgICAgICAgICAgIGNvbnN0IGNsYXNzT3JJbnRlcmZhY2UgPSBkZWNsIGFzIENsYXNzRGVjbGFyYXRpb24gfCBJbnRlcmZhY2VEZWNsYXJhdGlvbjtcbi8vXG4vLyAgICAgICAgICAgICAvLyBnZXRNZXRob2RzIHJldHVybnMgYW4gYXJyYXkgb2YgTWV0aG9kRGVjbGFyYXRpb24gb3IgTWV0aG9kU2lnbmF0dXJlXG4vLyAgICAgICAgICAgICBjb25zdCBtZXRob2RzID0gY2xhc3NPckludGVyZmFjZS5nZXRNZXRob2RzKCk7XG4vL1xuLy8gICAgICAgICAgICAgbWV0aG9kcy5mb3JFYWNoKG1ldGhvZCA9PiB7XG4vLyAgICAgICAgICAgICAgICAgY29uc3QgbWV0aG9kTmFtZSA9IG1ldGhvZC5nZXROYW1lKCk7XG4vLyAgICAgICAgICAgICAgICAgaWYgKG1ldGhvZE5hbWUgPT09IEdFVF9JVEVNX05BTUUgfHwgbWV0aG9kTmFtZSA9PT0gU0VUX0lURU1fTkFNRSkge1xuLy8gICAgICAgICAgICAgICAgICAgICAvLyBHZW5lcmF0ZSBhIHVuaXF1ZSBzaWduYXR1cmUgc3RyaW5nIGZvciB0aGUgbWV0aG9kXG4vLyAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHNpZ25hdHVyZSA9IG1ldGhvZC5nZXRTaWduYXR1cmUoKS5nZXREZWNsYXJhdGlvbigpPy5nZXRUZXh0KCk7XG4vLyAgICAgICAgICAgICAgICAgICAgIGlmIChzaWduYXR1cmUgJiYgIW1ldGhvZFNpZ25hdHVyZXMuaGFzKHNpZ25hdHVyZSkpIHtcbi8vICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChtZXRob2ROYW1lID09PSBHRVRfSVRFTV9OQU1FKSB7XG4vLyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2V0SXRlbU1ldGhvZHMucHVzaChtZXRob2QpO1xuLy8gICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbi8vICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRJdGVtTWV0aG9kcy5wdXNoKG1ldGhvZCk7XG4vLyAgICAgICAgICAgICAgICAgICAgICAgICB9XG4vLyAgICAgICAgICAgICAgICAgICAgICAgICBtZXRob2RTaWduYXR1cmVzLmFkZChzaWduYXR1cmUpO1xuLy8gICAgICAgICAgICAgICAgICAgICB9XG4vLyAgICAgICAgICAgICAgICAgfVxuLy8gICAgICAgICAgICAgfSk7XG4vLyAgICAgICAgIH0pO1xuLy9cbi8vICAgICAgICAgaWYgKGdldEl0ZW1NZXRob2RzLmxlbmd0aCA9PT0gMCAmJiBzZXRJdGVtTWV0aG9kcy5sZW5ndGggPT09IDApIHtcbi8vICAgICAgICAgICAgIHJldHVybjtcbi8vICAgICAgICAgfVxuLy9cbi8vICAgICAgICAgY29uc3QgcGFyZW50ID0gZWxlbWVudEFjY2Vzcy5nZXRQYXJlbnQoKTtcbi8vXG4vLyAgICAgICAgIC8vIERldGVybWluZSBpZiB0aGlzIGlzIGEgZ2V0dGVyIG9yIHNldHRlclxuLy8gICAgICAgICBpZiAoXG4vLyAgICAgICAgICAgICBOb2RlLmlzQmluYXJ5RXhwcmVzc2lvbihwYXJlbnQpICYmXG4vLyAgICAgICAgICAgICBwYXJlbnQuZ2V0T3BlcmF0b3JUb2tlbigpLmdldEtpbmQoKSA9PT0gU3ludGF4S2luZC5FcXVhbHNUb2tlbiAmJlxuLy8gICAgICAgICAgICAgcGFyZW50LmdldExlZnQoKSA9PT0gZWxlbWVudEFjY2Vzc1xuLy8gICAgICAgICApIHtcbi8vICAgICAgICAgICAgIC8vIFRoaXMgaXMgYSBzZXR0ZXI6IG9ialtpbmRleF0gPSB2YWx1ZVxuLy8gICAgICAgICAgICAgaWYgKHNldEl0ZW1NZXRob2RzLmxlbmd0aCA9PT0gMCkge1xuLy8gICAgICAgICAgICAgICAgIHJldHVybjtcbi8vICAgICAgICAgICAgIH1cbi8vXG4vLyAgICAgICAgICAgICBjb25zdCB2YWx1ZUV4cHJlc3Npb24gPSBwYXJlbnQuZ2V0UmlnaHQoKTtcbi8vXG4vLyAgICAgICAgICAgICAvLyBBdHRlbXB0IHRvIGZpbmQgYSBtYXRjaGluZyBzZXRfaXRlbSBtZXRob2Rcbi8vICAgICAgICAgICAgIGNvbnN0IG1hdGNoaW5nU2V0SXRlbSA9IHNldEl0ZW1NZXRob2RzLmZpbmQobWV0aG9kID0+IHtcbi8vICAgICAgICAgICAgICAgICBjb25zdCBwYXJhbXMgPSBtZXRob2QuZ2V0UGFyYW1ldGVycygpO1xuLy8gICAgICAgICAgICAgICAgIGlmIChwYXJhbXMubGVuZ3RoICE9PSAyKSB7XG4vLyAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbi8vICAgICAgICAgICAgICAgICB9XG4vL1xuLy8gICAgICAgICAgICAgICAgIGNvbnN0IGluZGV4UGFyYW1UeXBlID0gcGFyYW1zWzBdLmdldFR5cGUoKTtcbi8vICAgICAgICAgICAgICAgICBjb25zdCB2YWx1ZVBhcmFtVHlwZSA9IHBhcmFtc1sxXS5nZXRUeXBlKCk7XG4vL1xuLy8gICAgICAgICAgICAgICAgIGNvbnN0IGluZGV4QXJnVHlwZSA9IGFyZ3VtZW50RXhwcmVzc2lvbi5nZXRUeXBlKCk7XG4vLyAgICAgICAgICAgICAgICAgY29uc3QgdmFsdWVBcmdUeXBlID0gdmFsdWVFeHByZXNzaW9uLmdldFR5cGUoKTtcbi8vXG4vLyAgICAgICAgICAgICAgICAgcmV0dXJuIChcbi8vICAgICAgICAgICAgICAgICAgICAgdHlwZUNoZWNrZXIuaXNUeXBlQXNzaWduYWJsZVRvKGluZGV4QXJnVHlwZSwgaW5kZXhQYXJhbVR5cGUpICYmXG4vLyAgICAgICAgICAgICAgICAgICAgIHR5cGVDaGVja2VyLmlzVHlwZUFzc2lnbmFibGVUbyh2YWx1ZUFyZ1R5cGUsIHZhbHVlUGFyYW1UeXBlKVxuLy8gICAgICAgICAgICAgICAgICk7XG4vLyAgICAgICAgICAgICB9KTtcbi8vXG4vLyAgICAgICAgICAgICBpZiAoIW1hdGNoaW5nU2V0SXRlbSkge1xuLy8gICAgICAgICAgICAgICAgIGFkZERpYWdub3N0aWMoXG4vLyAgICAgICAgICAgICAgICAgICAgIGRpYWdub3N0aWNzLFxuLy8gICAgICAgICAgICAgICAgICAgICBub2RlLFxuLy8gICAgICAgICAgICAgICAgICAgICBgSW52YWxpZCBBc3NpZ25tZW50YCxcbi8vICAgICAgICAgICAgICAgICAgICAgQ1VTVE9NX0RJQUdOT1NUSUNfQ09ERVMuSU5WQUxJRF9HRVRfSVRFTV9BUkdVTUVOVFMpO1xuLy8gICAgICAgICAgICAgfVxuLy8gICAgICAgICB9IGVsc2Uge1xuLy8gICAgICAgICAgICAgLy8gVGhpcyBpcyBhIGdldHRlcjogb2JqW2luZGV4XVxuLy8gICAgICAgICAgICAgaWYgKGdldEl0ZW1NZXRob2RzLmxlbmd0aCA9PT0gMCkge1xuLy8gICAgICAgICAgICAgICAgIHJldHVybiBub2RlO1xuLy8gICAgICAgICAgICAgfVxuLy9cbi8vICAgICAgICAgICAgIC8vIEF0dGVtcHQgdG8gZmluZCBhIG1hdGNoaW5nIGdldF9pdGVtIG1ldGhvZFxuLy8gICAgICAgICAgICAgY29uc3QgbWF0Y2hpbmdHZXRJdGVtID0gZ2V0SXRlbU1ldGhvZHMuZmluZChtZXRob2QgPT4ge1xuLy8gICAgICAgICAgICAgICAgIGNvbnN0IHBhcmFtcyA9IG1ldGhvZC5nZXRQYXJhbWV0ZXJzKCk7XG4vLyAgICAgICAgICAgICAgICAgaWYgKHBhcmFtcy5sZW5ndGggIT09IDEpIHtcbi8vICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuLy8gICAgICAgICAgICAgICAgIH1cbi8vXG4vLyAgICAgICAgICAgICAgICAgY29uc3QgaW5kZXhQYXJhbVR5cGUgPSBwYXJhbXNbMF0uZ2V0VHlwZSgpO1xuLy8gICAgICAgICAgICAgICAgIGNvbnN0IGluZGV4QXJnVHlwZSA9IGFyZ3VtZW50RXhwcmVzc2lvbi5nZXRUeXBlKCk7XG4vL1xuLy8gICAgICAgICAgICAgICAgIHJldHVybiB0eXBlQ2hlY2tlci5pc1R5cGVBc3NpZ25hYmxlVG8oaW5kZXhBcmdUeXBlLCBpbmRleFBhcmFtVHlwZSk7XG4vLyAgICAgICAgICAgICB9KTtcbi8vXG4vLyAgICAgICAgICAgICBsZXQgdmFsaWRQYXJhbXMgPSBnZXRJdGVtTWV0aG9kcy5mbGF0TWFwKGcgPT4gZy5nZXRQYXJhbWV0ZXJzKCkubWFwKHAgPT4gZ2V0RnVsbFR5cGVOYW1lKHAuZ2V0VHlwZSgpKSkpO1xuLy9cbi8vICAgICAgICAgICAgIGlmICghbWF0Y2hpbmdHZXRJdGVtKSB7XG4vLyAgICAgICAgICAgICAgICAgYWRkRGlhZ25vc3RpYyhcbi8vICAgICAgICAgICAgICAgICAgICAgZGlhZ25vc3RpY3MsXG4vLyAgICAgICAgICAgICAgICAgICAgIG5vZGUsXG4vLyAgICAgICAgICAgICAgICAgICAgIGBJbnZhbGlkIGFjY2VzcywgYWNjZXB0ZWQgdHlwZXMgYXJlICcke3ZhbGlkUGFyYW1zLmpvaW4oXCIsXCIpfSdgLFxuLy8gICAgICAgICAgICAgICAgICAgICBDVVNUT01fRElBR05PU1RJQ19DT0RFUy5JTlZBTElEX0dFVF9JVEVNX0FSR1VNRU5UUyk7XG4vLyAgICAgICAgICAgICB9XG4vLyAgICAgICAgIH1cbi8vICAgICB9KTtcbi8vIH1cblxuZnVuY3Rpb24gcHJvY2Vzc0NsYXNzRGlhZ25vc3RpY3MoZmlsZTogU291cmNlRmlsZSwgZGlhZ25vc3RpY3M6IHRzLkRpYWdub3N0aWNbXSkge1xuICAgIGNvbnN0IGdlbmllc0NsYXNzZXMgPSBmaWxlLmdldENsYXNzZXMoKTtcblxuICAgIGdlbmllc0NsYXNzZXMuZm9yRWFjaChjbHMgPT4ge1xuICAgICAgICBjb25zdCBiYXNlQ2xhc3MgPSBjbHMuZ2V0QmFzZUNsYXNzKCk7XG4gICAgICAgIGNvbnN0IGltcGxlbWVudGVkSW50ZXJmYWNlcyA9IGNscy5nZXRJbXBsZW1lbnRzKCk7XG4gICAgICAgIGNvbnN0IGJhc2VDbGFzc05hbWUgPSBiYXNlQ2xhc3M/LmdldE5hbWUoKTtcblxuICAgICAgICBpZiAoYmFzZUNsYXNzICYmIGdldElzVW5pdHlBUElUeXBlKGJhc2VDbGFzcy5nZXRUeXBlKCkpICYmIGJhc2VDbGFzc05hbWUgJiYgIUFMTE9XRURfSU5IRVJJVEFOQ0VfVFlQRVMuaGFzKGJhc2VDbGFzc05hbWUpKSB7XG4gICAgICAgICAgICBjb25zdCBzdGFydCA9IGJhc2VDbGFzcy5nZXRTdGFydCgpO1xuICAgICAgICAgICAgY29uc3QgbGVuZ3RoID0gYmFzZUNsYXNzLmdldE5hbWUoKT8ubGVuZ3RoO1xuXG4gICAgICAgICAgICBjb25zdCBkaWFnbm9zdGljTWVzc2FnZSA9IGBDbGFzcyAnJHtjbHMuZ2V0TmFtZSgpfScgaW5oZXJpdHMgZnJvbSBhIFVuaXR5IHR5cGUgJyR7YmFzZUNsYXNzLmdldE5hbWUoKX0nIHRoYXQgaXMgbm90ICdNb25vQmVoYXZpb3VyJyBvciAnU2NyaXB0YWJsZU9iamVjdCcuYDtcbiAgICAgICAgICAgIGNvbnN0IGRpYWdub3N0aWM6IHRzLkRpYWdub3N0aWMgPSB7XG4gICAgICAgICAgICAgICAgZmlsZTogZmlsZS5jb21waWxlck5vZGUsXG4gICAgICAgICAgICAgICAgc3RhcnQ6IHN0YXJ0LFxuICAgICAgICAgICAgICAgIGxlbmd0aDogbGVuZ3RoLFxuICAgICAgICAgICAgICAgIG1lc3NhZ2VUZXh0OiBkaWFnbm9zdGljTWVzc2FnZSxcbiAgICAgICAgICAgICAgICBjYXRlZ29yeTogdHMuRGlhZ25vc3RpY0NhdGVnb3J5LkVycm9yLFxuICAgICAgICAgICAgICAgIGNvZGU6IENVU1RPTV9ESUFHTk9TVElDX0NPREVTLklOVkFMSURfSU5IRVJJVEFOQ0UsXG4gICAgICAgICAgICAgICAgc291cmNlOiAnR2VuaWVzJyxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBkaWFnbm9zdGljcy5wdXNoKGRpYWdub3N0aWMpO1xuICAgICAgICB9XG5cbiAgICAgICAgaW1wbGVtZW50ZWRJbnRlcmZhY2VzLmZvckVhY2goaW50ZiA9PiB7XG4gICAgICAgICAgICBpZiAoZ2V0SXNVbml0eUFQSVR5cGUoaW50Zi5nZXRUeXBlKCkpKSB7XG5cbiAgICAgICAgICAgICAgICBjb25zdCB0eXBlTmFtZSA9IGdldEZ1bGxUeXBlTmFtZShpbnRmLmdldFR5cGUoKSk7XG4gICAgICAgICAgICAgICAgaWYgKEFsbG93ZWRVaUludGVyZmFjZXMuaGFzKHR5cGVOYW1lKSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgY29uc3Qgc3RhcnQgPSBpbnRmLmdldFN0YXJ0KCk7XG4gICAgICAgICAgICAgICAgY29uc3QgbGVuZ3RoID0gaW50Zi5nZXRXaWR0aCgpO1xuXG4gICAgICAgICAgICAgICAgY29uc3QgZGlhZ25vc3RpY01lc3NhZ2UgPSBgQ2xhc3MgJyR7Y2xzLmdldE5hbWUoKX0nIGltcGxlbWVudHMgYSBmb3JiaWRkZW4gVW5pdHkgaW50ZXJmYWNlICcke2ludGYuZ2V0VGV4dCgpfScuYDtcbiAgICAgICAgICAgICAgICBjb25zdCBkaWFnbm9zdGljOiB0cy5EaWFnbm9zdGljID0ge1xuICAgICAgICAgICAgICAgICAgICBmaWxlOiBmaWxlLmNvbXBpbGVyTm9kZSxcbiAgICAgICAgICAgICAgICAgICAgc3RhcnQ6IHN0YXJ0LFxuICAgICAgICAgICAgICAgICAgICBsZW5ndGg6IGxlbmd0aCxcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZVRleHQ6IGRpYWdub3N0aWNNZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICBjYXRlZ29yeTogdHMuRGlhZ25vc3RpY0NhdGVnb3J5LkVycm9yLFxuICAgICAgICAgICAgICAgICAgICBjb2RlOiBDVVNUT01fRElBR05PU1RJQ19DT0RFUy5GT1JCSURERU5fSU5URVJGQUNFLFxuICAgICAgICAgICAgICAgICAgICBzb3VyY2U6ICdHZW5pZXMnLFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgZGlhZ25vc3RpY3MucHVzaChkaWFnbm9zdGljKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfSk7XG59XG5cbmZ1bmN0aW9uIHByb2Nlc3NUeXBlVXNhZ2VEaWFnbm9zdGljcyhmaWxlOiBTb3VyY2VGaWxlLCBkaWFnbm9zdGljczogdHMuRGlhZ25vc3RpY1tdKSB7XG4gICAgLy8gR2F0aGVyIGFsbCBOZXdFeHByZXNzaW9uIGFuZCBUeXBlUmVmZXJlbmNlTm9kZSBpbnN0YW5jZXNcbiAgICBjb25zdCBuZXdFeHByZXNzaW9ucyA9IGZpbGUuZ2V0RGVzY2VuZGFudHNPZktpbmQoU3ludGF4S2luZC5OZXdFeHByZXNzaW9uKTtcblxuICAgIC8vIFByb2Nlc3MgTmV3RXhwcmVzc2lvbiBub2Rlc1xuICAgIG5ld0V4cHJlc3Npb25zLmZvckVhY2gobmV3RXhwciA9PiB7XG4gICAgICAgIC8vIFJlc29sdmUgdGhlIHN5bWJvbCBvZiB0aGUgY2xhc3MgYmVpbmcgaW5zdGFudGlhdGVkXG4gICAgICAgIGNvbnN0IHR5cGVTeW1ib2wgPSBuZXdFeHByLmdldFR5cGUoKS5nZXRTeW1ib2woKTtcblxuICAgICAgICBpZiAoIXR5cGVTeW1ib2wpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFJldHJpZXZlIGFsbCBkZWNsYXJhdGlvbnMgb2YgdGhlIHN5bWJvbFxuICAgICAgICBjb25zdCBkZWNsYXJhdGlvbnMgPSB0eXBlU3ltYm9sLmdldERlY2xhcmF0aW9ucygpO1xuXG4gICAgICAgIGlmICghZGVjbGFyYXRpb25zIHx8IGRlY2xhcmF0aW9ucy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIEZpbHRlciBmb3IgY2xhc3MgZGVjbGFyYXRpb25zIHdpdGggdHlwZSBwYXJhbWV0ZXJzIChpLmUuLCBnZW5lcmljIGNsYXNzZXMpXG4gICAgICAgIGNvbnN0IGNsYXNzRGVjbGFyYXRpb25zID0gZGVjbGFyYXRpb25zLmZpbHRlcihkZWNsID0+XG4gICAgICAgICAgICBOb2RlLmlzQ2xhc3NEZWNsYXJhdGlvbihkZWNsKSAmJiBnZXRJc1VuaXR5QVBJRGVjbGFyYXRpb24oZGVjbCkgJiYgZGVjbC5nZXRUeXBlUGFyYW1ldGVycygpLmxlbmd0aCA+IDBcbiAgICAgICAgKSBhcyBDbGFzc0RlY2xhcmF0aW9uW107XG5cbiAgICAgICAgaWYgKGNsYXNzRGVjbGFyYXRpb25zLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgcmV0dXJuOyAvLyBOb3QgYSBnZW5lcmljIGNsYXNzXG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBjbGFzc0RlY2xhcmF0aW9uID0gY2xhc3NEZWNsYXJhdGlvbnNbMF07XG4gICAgICAgIGNvbnN0IHR5cGVQYXJhbXMgPSBjbGFzc0RlY2xhcmF0aW9uLmdldFR5cGVQYXJhbWV0ZXJzKCk7XG4gICAgICAgIGNvbnN0IGV4cGVjdGVkVHlwZUFyZ3NDb3VudCA9IHR5cGVQYXJhbXMubGVuZ3RoO1xuXG4gICAgICAgIC8vIFJldHJpZXZlIHByb3ZpZGVkIHR5cGUgYXJndW1lbnRzIGZyb20gdGhlIE5ld0V4cHJlc3Npb25cbiAgICAgICAgY29uc3QgdHlwZUFyZ3MgPSBuZXdFeHByLmdldFR5cGVBcmd1bWVudHMoKTtcbiAgICAgICAgY29uc3QgcHJvdmlkZWRUeXBlQXJnc0NvdW50ID0gdHlwZUFyZ3MubGVuZ3RoO1xuXG4gICAgICAgIGlmIChwcm92aWRlZFR5cGVBcmdzQ291bnQgPT09IDApIHtcbiAgICAgICAgICAgIC8vIEdlbmVyaWMgY2xhc3MgdXNlZCB3aXRob3V0IHR5cGUgYXJndW1lbnRzXG4gICAgICAgICAgICBhZGREaWFnbm9zdGljKFxuICAgICAgICAgICAgICAgIGRpYWdub3N0aWNzLFxuICAgICAgICAgICAgICAgIG5ld0V4cHIsXG4gICAgICAgICAgICAgICAgYEdlbmVyaWMgY2xhc3MgJyR7Z2V0RnVsbFR5cGVOYW1lKG5ld0V4cHIuZ2V0VHlwZSgpKX0nIG11c3QgYmUgaW5zdGFudGlhdGVkIHdpdGggJHtleHBlY3RlZFR5cGVBcmdzQ291bnR9IHR5cGUgYXJndW1lbnQocykuYCxcbiAgICAgICAgICAgICAgICBDVVNUT01fRElBR05PU1RJQ19DT0RFUy5HRU5FUklDX0NMQVNTX01JU1NJTkdfVFlQRV9BUkdVTUVOVFNcbiAgICAgICAgICAgICk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBpZiAocHJvdmlkZWRUeXBlQXJnc0NvdW50ICE9PSBleHBlY3RlZFR5cGVBcmdzQ291bnQpIHtcbiAgICAgICAgICAgICAgICAvLyBJbmNvcnJlY3QgbnVtYmVyIG9mIHR5cGUgYXJndW1lbnRzIHByb3ZpZGVkXG4gICAgICAgICAgICAgICAgYWRkRGlhZ25vc3RpYyhcbiAgICAgICAgICAgICAgICAgICAgZGlhZ25vc3RpY3MsXG4gICAgICAgICAgICAgICAgICAgIG5ld0V4cHIsXG4gICAgICAgICAgICAgICAgICAgIGBHZW5lcmljIGNsYXNzICcke2dldEZ1bGxUeXBlTmFtZShuZXdFeHByLmdldFR5cGUoKSl9JyBleHBlY3RzICR7ZXhwZWN0ZWRUeXBlQXJnc0NvdW50fSB0eXBlIGFyZ3VtZW50KHMpLCBidXQgZ290ICR7cHJvdmlkZWRUeXBlQXJnc0NvdW50fS5gLFxuICAgICAgICAgICAgICAgICAgICBDVVNUT01fRElBR05PU1RJQ19DT0RFUy5HRU5FUklDX0NMQVNTX0lOVkFMSURfVFlQRV9BUkdVTUVOVFNcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvL0ludmFsaWQgYXJnc1xuICAgICAgICAgICAgdHlwZUFyZ3MuZm9yRWFjaCh0eXBlQXJnTm9kZSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgdHlwZUFyZ1R5cGUgPSB0eXBlQXJnTm9kZS5nZXRUeXBlKCk7XG4gICAgICAgICAgICAgICAgaWYgKCFnZXRJc1ZhbGlkVW5pdHlHZW5lcmljVHlwZUFyZyh0eXBlQXJnVHlwZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgYWRkRGlhZ25vc3RpYyhcbiAgICAgICAgICAgICAgICAgICAgICAgIGRpYWdub3N0aWNzLFxuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZUFyZ05vZGUsXG4gICAgICAgICAgICAgICAgICAgICAgICBgVHlwZSBhcmd1bWVudHMgZm9yIHR5cGUgJyR7Z2V0RnVsbFR5cGVOYW1lKG5ld0V4cHIuZ2V0VHlwZSgpKX0nIG11c3QgYmUgVW5pdHkgQVBJIHR5cGVzLmAsXG4gICAgICAgICAgICAgICAgICAgICAgICBDVVNUT01fRElBR05PU1RJQ19DT0RFUy5HRU5FUklDX0NMQVNTX0lOVkFMSURfVFlQRV9BUkdVTUVOVFNcbiAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICB9XG4gICAgfSk7XG59XG5cblxuZnVuY3Rpb24gcHJvY2Vzc0NhbGxFeHByZXNzaW9uRGlhZ25vc3RpY3MoZmlsZTogU291cmNlRmlsZSwgZGlhZ25vc3RpY3M6IHRzLkRpYWdub3N0aWNbXSkge1xuICAgIGNvbnN0IGNhbGxFeHByZXNzaW9ucyA9IGZpbGUuZ2V0RGVzY2VuZGFudHNPZktpbmQoU3ludGF4S2luZC5DYWxsRXhwcmVzc2lvbik7XG5cbiAgICBjYWxsRXhwcmVzc2lvbnMuZm9yRWFjaChjYWxsRXhwciA9PiB7XG4gICAgICAgIHByb2Nlc3NHZW5lcmljTWV0aG9kQ2FsbChjYWxsRXhwciwgZGlhZ25vc3RpY3MpO1xuICAgIH0pO1xufVxuXG5mdW5jdGlvbiBwcm9jZXNzR2VuZXJpY01ldGhvZENhbGwoY2FsbEV4cHI6IENhbGxFeHByZXNzaW9uLCBkaWFnbm9zdGljczogdHMuRGlhZ25vc3RpY1tdKSB7XG4gICAgY29uc3QgZXhwcmVzc2lvbiA9IGNhbGxFeHByLmdldEV4cHJlc3Npb24oKTtcblxuICAgIC8vIEdldCB0aGUgbWV0aG9kIHN5bWJvbCBhbmQgYWxsIGRlY2xhcmF0aW9uc1xuICAgIGxldCBtZXRob2REZWNsYXJhdGlvbnM6IE1ldGhvZERlY2xhcmF0aW9uW10gPSBbXTtcblxuICAgIGlmIChOb2RlLmlzUHJvcGVydHlBY2Nlc3NFeHByZXNzaW9uKGV4cHJlc3Npb24pIHx8IE5vZGUuaXNJZGVudGlmaWVyKGV4cHJlc3Npb24pKSB7XG4gICAgICAgIGNvbnN0IG1ldGhvZFN5bWJvbCA9IGV4cHJlc3Npb24uZ2V0U3ltYm9sKCk7XG4gICAgICAgIGlmIChtZXRob2RTeW1ib2wpIHtcbiAgICAgICAgICAgIGNvbnN0IGRlY2xhcmF0aW9ucyA9IG1ldGhvZFN5bWJvbC5nZXREZWNsYXJhdGlvbnMoKTtcbiAgICAgICAgICAgIG1ldGhvZERlY2xhcmF0aW9ucyA9IGRlY2xhcmF0aW9ucy5maWx0ZXIoZGVjbCA9PiBOb2RlLmlzTWV0aG9kRGVjbGFyYXRpb24oZGVjbCkpIGFzIE1ldGhvZERlY2xhcmF0aW9uW107XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAobWV0aG9kRGVjbGFyYXRpb25zLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICByZXR1cm47IC8vIENhbm5vdCBwcm9jZWVkIHdpdGhvdXQgbWV0aG9kIGRlY2xhcmF0aW9uc1xuICAgIH1cblxuICAgIGxldCBpc0dlbmVyaWNNZXRob2REZWNsYXJhdGlvbiA9IG1ldGhvZERlY2xhcmF0aW9ucy5maWx0ZXIoZGVjbCA9PiB7XG4gICAgICAgIHJldHVybiBkZWNsLmdldFR5cGVQYXJhbWV0ZXJzKCkubGVuZ3RoID4gMFxuICAgIH0pLmxlbmd0aCA+IDA7XG5cbiAgICBpZiAoIWlzR2VuZXJpY01ldGhvZERlY2xhcmF0aW9uKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyBGaWx0ZXIgdG8gVW5pdHkgQVBJIG1ldGhvZHNcbiAgICBtZXRob2REZWNsYXJhdGlvbnMgPSBtZXRob2REZWNsYXJhdGlvbnMuZmlsdGVyKGRlY2wgPT4gZ2V0SXNVbml0eUFQSURlY2xhcmF0aW9uKGRlY2wpKTtcblxuICAgIGlmIChtZXRob2REZWNsYXJhdGlvbnMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIHJldHVybjsgLy8gTm8gVW5pdHkgQVBJIG1ldGhvZHNcbiAgICB9XG5cbiAgICBjb25zdCBtZXRob2ROYW1lID0gZ2V0TWV0aG9kTmFtZShleHByZXNzaW9uKTtcblxuICAgIC8vIENoZWNrIGZvciBub24tZ2VuZXJpYyBvdmVybG9hZHMgdGhhdCBhY2NlcHQgdGhlIHNhbWUgcGFyYW1ldGVyc1xuICAgIGlmIChoYXNNYXRjaGluZ05vbkdlbmVyaWNPdmVybG9hZChtZXRob2REZWNsYXJhdGlvbnMsIGNhbGxFeHByKSkge1xuICAgICAgICByZXR1cm47IC8vIFNraXAgdGhlIGNoZWNrIHNpbmNlIGEgbm9uLWdlbmVyaWMgb3ZlcmxvYWQgZXhpc3RzXG4gICAgfVxuXG4gICAgLy8gTm93LCBlbnN1cmUgdGhhdCB0aGUgY2FsbCBwcm92aWRlcyB0eXBlIGFyZ3VtZW50c1xuICAgIGNvbnN0IHR5cGVBcmdzID0gY2FsbEV4cHIuZ2V0VHlwZUFyZ3VtZW50cygpO1xuXG4gICAgaWYgKHR5cGVBcmdzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAvLyBHZW5lcmljIG1ldGhvZCBjYWxsZWQgd2l0aG91dCBzcGVjaWZ5aW5nIHR5cGUgYXJndW1lbnRzXG4gICAgICAgIGFkZERpYWdub3N0aWMoXG4gICAgICAgICAgICBkaWFnbm9zdGljcyxcbiAgICAgICAgICAgIGNhbGxFeHByLFxuICAgICAgICAgICAgYEdlbmVyaWMgbWV0aG9kICcke21ldGhvZE5hbWV9JyBtdXN0IGJlIGNhbGxlZCB3aXRoIHR5cGUgYXJndW1lbnRzLmAsXG4gICAgICAgICAgICBDVVNUT01fRElBR05PU1RJQ19DT0RFUy5HRU5FUklDX01FVEhPRF9NSVNTSU5HX1RZUEVfQVJHVU1FTlRTXG4gICAgICAgICk7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBsZXQgdmFsaWRBcmdzID0gbWV0aG9kRGVjbGFyYXRpb25zLm1hcChtID0+IG0uZ2V0VHlwZVBhcmFtZXRlcnMoKS5sZW5ndGgpO1xuICAgIGlmICghdmFsaWRBcmdzLmluY2x1ZGVzKHR5cGVBcmdzLmxlbmd0aCkpIHtcbiAgICAgICAgLy8gSW5jb3JyZWN0IG51bWJlciBvZiB0eXBlIGFyZ3VtZW50cyBwcm92aWRlZFxuICAgICAgICBhZGREaWFnbm9zdGljKFxuICAgICAgICAgICAgZGlhZ25vc3RpY3MsXG4gICAgICAgICAgICBjYWxsRXhwcixcbiAgICAgICAgICAgIGBHZW5lcmljIG1ldGhvZCAnJHttZXRob2ROYW1lfScgd2FzIHByb3ZpZGVkIHRoZSB3cm9uZyBudW1iZXIgb2YgYXJndW1lbnRzLiBWYWxpZCBhcmdzIGNvdW50czogJyR7dmFsaWRBcmdzLmpvaW4oXCIsIFwiKX0nYCxcbiAgICAgICAgICAgIENVU1RPTV9ESUFHTk9TVElDX0NPREVTLkdFTkVSSUNfQ0xBU1NfSU5WQUxJRF9UWVBFX0FSR1VNRU5UU1xuICAgICAgICApO1xuICAgIH1cblxuICAgIC8vIFZhbGlkYXRlIHR5cGUgYXJndW1lbnRzXG4gICAgaWYgKENPTVBPTkVOVF9NRVRIT0RTLmhhcyhtZXRob2ROYW1lKSkge1xuICAgICAgICAvLyBBcHBseSBHZXRDb21wb25lbnQgcnVsZXNcbiAgICAgICAgdHlwZUFyZ3MuZm9yRWFjaCh0eXBlQXJnTm9kZSA9PiB7XG4gICAgICAgICAgICBpZiAoIWlzVmFsaWRDb21wb25lbnRUeXBlQXJnKHR5cGVBcmdOb2RlKSkge1xuICAgICAgICAgICAgICAgIGFkZERpYWdub3N0aWMoXG4gICAgICAgICAgICAgICAgICAgIGRpYWdub3N0aWNzLFxuICAgICAgICAgICAgICAgICAgICB0eXBlQXJnTm9kZSxcbiAgICAgICAgICAgICAgICAgICAgYFR5cGUgYXJndW1lbnRzIGZvciBtZXRob2QgJyR7bWV0aG9kTmFtZX0nIG11c3QgYmUgYSBVbml0eSBBUEkgdHlwZSwgYW4gaW50ZXJmYWNlLCBvciBhIHR5cGUgdGhhdCBleHRlbmRzIE1vbm9CZWhhdmlvdXIuYCxcbiAgICAgICAgICAgICAgICAgICAgQ1VTVE9NX0RJQUdOT1NUSUNfQ09ERVMuR0VORVJJQ19NRVRIT0RfSU5WQUxJRF9UWVBFX0FSR1VNRU5UU1xuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIEZvciBvdGhlciBtZXRob2RzLCB0eXBlIGFyZ3VtZW50cyBtdXN0IGJlIFVuaXR5IEFQSSB0eXBlc1xuICAgICAgICB0eXBlQXJncy5mb3JFYWNoKHR5cGVBcmdOb2RlID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHR5cGVBcmdUeXBlID0gdHlwZUFyZ05vZGUuZ2V0VHlwZSgpO1xuICAgICAgICAgICAgaWYgKCFnZXRJc1ZhbGlkVW5pdHlHZW5lcmljVHlwZUFyZyh0eXBlQXJnVHlwZSkpIHtcbiAgICAgICAgICAgICAgICBhZGREaWFnbm9zdGljKFxuICAgICAgICAgICAgICAgICAgICBkaWFnbm9zdGljcyxcbiAgICAgICAgICAgICAgICAgICAgdHlwZUFyZ05vZGUsXG4gICAgICAgICAgICAgICAgICAgIGBUeXBlIGFyZ3VtZW50cyBmb3IgbWV0aG9kICcke21ldGhvZE5hbWV9JyBtdXN0IGJlIFVuaXR5IEFQSSB0eXBlcy5gLFxuICAgICAgICAgICAgICAgICAgICBDVVNUT01fRElBR05PU1RJQ19DT0RFUy5HRU5FUklDX01FVEhPRF9JTlZBTElEX1RZUEVfQVJHVU1FTlRTXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBoYXNNYXRjaGluZ05vbkdlbmVyaWNPdmVybG9hZChcbiAgICBtZXRob2REZWNsYXJhdGlvbnM6IE1ldGhvZERlY2xhcmF0aW9uW10sXG4gICAgY2FsbEV4cHI6IENhbGxFeHByZXNzaW9uXG4pOiBib29sZWFuIHtcbiAgICBjb25zdCBjYWxsQXJnVHlwZXMgPSBjYWxsRXhwci5nZXRBcmd1bWVudHMoKS5tYXAoYXJnID0+IGFyZy5nZXRUeXBlKCkpO1xuICAgIGNvbnN0IHR5cGVDaGVja2VyID0gY2FsbEV4cHIuZ2V0UHJvamVjdCgpLmdldFR5cGVDaGVja2VyKCk7XG5cbiAgICByZXR1cm4gbWV0aG9kRGVjbGFyYXRpb25zLnNvbWUoZGVjbCA9PiB7XG4gICAgICAgIGlmIChkZWNsLmdldFR5cGVQYXJhbWV0ZXJzKCkubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlOyAvLyBJdCdzIGEgZ2VuZXJpYyBtZXRob2RcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHBhcmFtZXRlcnMgPSBkZWNsLmdldFBhcmFtZXRlcnMoKTtcbiAgICAgICAgaWYgKHBhcmFtZXRlcnMubGVuZ3RoICE9PSBjYWxsQXJnVHlwZXMubGVuZ3RoKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBDb21wYXJlIHBhcmFtZXRlciB0eXBlc1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHBhcmFtZXRlcnMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGNvbnN0IHBhcmFtVHlwZSA9IHBhcmFtZXRlcnNbaV0uZ2V0VHlwZSgpO1xuICAgICAgICAgICAgY29uc3QgYXJnVHlwZSA9IGNhbGxBcmdUeXBlc1tpXTtcblxuICAgICAgICAgICAgaWYgKCF0eXBlQ2hlY2tlci5pc1R5cGVBc3NpZ25hYmxlVG8oYXJnVHlwZSwgcGFyYW1UeXBlKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0cnVlOyAvLyBGb3VuZCBhIG1hdGNoaW5nIG5vbi1nZW5lcmljIG92ZXJsb2FkXG4gICAgfSk7XG59XG5cbmZ1bmN0aW9uIGlzVmFsaWRDb21wb25lbnRUeXBlQXJnKHR5cGVBcmdOb2RlOiBOb2RlKTogYm9vbGVhbiB7XG4gICAgY29uc3QgdHlwZUFyZ1R5cGUgPSB0eXBlQXJnTm9kZS5nZXRUeXBlKCk7XG5cbiAgICBpZiAoZ2V0SXNVbml0eUFQSVR5cGUodHlwZUFyZ1R5cGUpKSB7XG4gICAgICAgIC8vIEl0J3MgYSBVbml0eSBBUEkgdHlwZSwgYWNjZXB0YWJsZVxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG5cbiAgICBjb25zdCBnZW5pZXNTY3JpcHRUeXBlID0gZ2V0R2VuaWVzU2NyaXB0VHlwZUZyb21UeXBlKHR5cGVBcmdUeXBlKTtcbiAgICBpZiAoZ2VuaWVzU2NyaXB0VHlwZSA9PT0gR2VuaWVzU2NyaXB0VHlwZS5Nb25vYmVoYXZpb3VyKSB7XG4gICAgICAgIC8vIEl0J3MgYSBNb25vQmVoYXZpb3VyLCBhY2NlcHRhYmxlXG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIGNvbnN0IHN5bWJvbCA9IHR5cGVBcmdUeXBlLmdldFN5bWJvbCgpO1xuICAgIGlmIChzeW1ib2wpIHtcbiAgICAgICAgY29uc3QgZGVjbGFyYXRpb25zID0gc3ltYm9sLmdldERlY2xhcmF0aW9ucygpO1xuICAgICAgICBpZiAoZGVjbGFyYXRpb25zICYmIGRlY2xhcmF0aW9ucy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBpZiAoTm9kZS5pc0ludGVyZmFjZURlY2xhcmF0aW9uKGRlY2xhcmF0aW9uc1swXSkpIHtcbiAgICAgICAgICAgICAgICAvLyBJdCdzIGFuIGludGVyZmFjZSwgYWNjZXB0YWJsZVxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIGZhbHNlOyAvLyBJbnZhbGlkIHR5cGUgYXJndW1lbnRcbn1cblxuZnVuY3Rpb24gZ2V0TWV0aG9kTmFtZShleHByZXNzaW9uOiBOb2RlKTogc3RyaW5nIHtcbiAgICBpZiAoTm9kZS5pc1Byb3BlcnR5QWNjZXNzRXhwcmVzc2lvbihleHByZXNzaW9uKSkge1xuICAgICAgICByZXR1cm4gZXhwcmVzc2lvbi5nZXROYW1lKCk7XG4gICAgfSBlbHNlIGlmIChOb2RlLmlzSWRlbnRpZmllcihleHByZXNzaW9uKSkge1xuICAgICAgICByZXR1cm4gZXhwcmVzc2lvbi5nZXRUZXh0KCk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuICcnOyAvLyBVbmtub3duXG4gICAgfVxufVxuXG5mdW5jdGlvbiBhZGREaWFnbm9zdGljKFxuICAgIGRpYWdub3N0aWNzOiB0cy5EaWFnbm9zdGljW10sXG4gICAgbm9kZTogTm9kZSxcbiAgICBtZXNzYWdlVGV4dDogc3RyaW5nLFxuICAgIGNvZGU6IG51bWJlclxuKSB7XG4gICAgY29uc3Qgc3RhcnQgPSBub2RlLmdldFN0YXJ0KCk7XG4gICAgY29uc3QgbGVuZ3RoID0gbm9kZS5nZXRXaWR0aCgpO1xuICAgIGNvbnN0IGRpYWdub3N0aWM6IHRzLkRpYWdub3N0aWMgPSB7XG4gICAgICAgIGZpbGU6IG5vZGUuZ2V0U291cmNlRmlsZSgpLmNvbXBpbGVyTm9kZSxcbiAgICAgICAgc3RhcnQ6IHN0YXJ0LFxuICAgICAgICBsZW5ndGg6IGxlbmd0aCxcbiAgICAgICAgbWVzc2FnZVRleHQ6IG1lc3NhZ2VUZXh0LFxuICAgICAgICBjYXRlZ29yeTogdHMuRGlhZ25vc3RpY0NhdGVnb3J5LkVycm9yLFxuICAgICAgICBjb2RlOiBjb2RlLFxuICAgICAgICBzb3VyY2U6ICdHZW5pZXMnLFxuICAgIH07XG4gICAgZGlhZ25vc3RpY3MucHVzaChkaWFnbm9zdGljKTtcbn1cbiIsImltcG9ydCB7U3ludGF4S2luZCwgTm9kZSwgQXdhaXRFeHByZXNzaW9uLCBUeXBlQ2hlY2tlciwgQ2FsbEV4cHJlc3Npb24sIFR5cGUsIFByb3BlcnR5QWNjZXNzRXhwcmVzc2lvbn0gZnJvbSAndHMtbW9ycGgnO1xuaW1wb3J0IHtUcmFuc2Zvcm1hdGlvbkNvbnRleHR9IGZyb20gXCIuL1RyYW5zZm9ybWF0aW9uQ29udGV4dFwiO1xuaW1wb3J0IHtJVHJhbnNmb3JtZXJ9IGZyb20gXCIuL0lUcmFuc2Zvcm1lclwiO1xuXG5leHBvcnQgY2xhc3MgUHJvbWlzZVdyYXBwZXJUcmFuc2Zvcm1lciBpbXBsZW1lbnRzIElUcmFuc2Zvcm1lciB7XG4gICAgbm9kZVR5cGVzID0gW1N5bnRheEtpbmQuQXdhaXRFeHByZXNzaW9uLCBTeW50YXhLaW5kLkNhbGxFeHByZXNzaW9uXTtcblxuICAgIHRyYW5zZm9ybU5vZGUobm9kZTogTm9kZSwgdHJhbnNmb3JtYXRpb25Db250ZXh0OiBUcmFuc2Zvcm1hdGlvbkNvbnRleHQpOiBOb2RlIHtcbiAgICAgICAgY29uc3QgdHlwZUNoZWNrZXIgPSB0cmFuc2Zvcm1hdGlvbkNvbnRleHQudHlwZUNoZWNrZXI7XG5cbiAgICAgICAgaWYgKE5vZGUuaXNBd2FpdEV4cHJlc3Npb24obm9kZSkpIHtcbiAgICAgICAgICAgIGNvbnN0IGF3YWl0RXhwcmVzc2lvbiA9IG5vZGUgYXMgQXdhaXRFeHByZXNzaW9uO1xuICAgICAgICAgICAgY29uc3QgZXhwcmVzc2lvbiA9IGF3YWl0RXhwcmVzc2lvbi5nZXRFeHByZXNzaW9uKCk7XG4gICAgICAgICAgICBjb25zdCB0eXBlID0gdHlwZUNoZWNrZXIuZ2V0VHlwZUF0TG9jYXRpb24oZXhwcmVzc2lvbik7XG5cbiAgICAgICAgICAgIGlmICh0aGlzLmlzUHJvbWlzZSh0eXBlKSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHdyYXBwZWRFeHByZXNzaW9uVGV4dCA9IGBhd2FpdCAkcHJvbWlzZSgke2V4cHJlc3Npb24uZ2V0VGV4dCgpfSlgO1xuICAgICAgICAgICAgICAgIHJldHVybiBhd2FpdEV4cHJlc3Npb24ucmVwbGFjZVdpdGhUZXh0KGAke3dyYXBwZWRFeHByZXNzaW9uVGV4dH1gKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIGlmIChOb2RlLmlzQ2FsbEV4cHJlc3Npb24obm9kZSkpIHtcbiAgICAgICAgICAgIGNvbnN0IGNhbGxFeHByZXNzaW9uID0gbm9kZSBhcyBDYWxsRXhwcmVzc2lvbjtcbiAgICAgICAgICAgIGNvbnN0IGV4cHJlc3Npb24gPSBjYWxsRXhwcmVzc2lvbi5nZXRFeHByZXNzaW9uKCk7XG5cbiAgICAgICAgICAgIGlmIChOb2RlLmlzUHJvcGVydHlBY2Nlc3NFeHByZXNzaW9uKGV4cHJlc3Npb24pKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgbWV0aG9kTmFtZSA9IGV4cHJlc3Npb24uZ2V0TmFtZSgpO1xuICAgICAgICAgICAgICAgIGNvbnN0IG9iamVjdEV4cHJlc3Npb24gPSBleHByZXNzaW9uLmdldEV4cHJlc3Npb24oKTtcbiAgICAgICAgICAgICAgICBjb25zdCB0eXBlID0gdHlwZUNoZWNrZXIuZ2V0VHlwZUF0TG9jYXRpb24ob2JqZWN0RXhwcmVzc2lvbik7XG5cbiAgICAgICAgICAgICAgICBpZiAodGhpcy5pc1Byb21pc2UodHlwZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuaXNQcm9taXNlTWV0aG9kKG1ldGhvZE5hbWUpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB3cmFwcGVkRXhwcmVzc2lvblRleHQgPSBgJHByb21pc2UoJHtvYmplY3RFeHByZXNzaW9uLmdldFRleHQoKX0pJHtjYWxsRXhwcmVzc2lvbi5nZXRUZXh0KCkuc3Vic3RyaW5nKG9iamVjdEV4cHJlc3Npb24uZ2V0VGV4dCgpLmxlbmd0aCl9YDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBjYWxsRXhwcmVzc2lvbi5yZXBsYWNlV2l0aFRleHQod3JhcHBlZEV4cHJlc3Npb25UZXh0KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBub2RlO1xuICAgIH1cblxuICAgIHByaXZhdGUgaXNQcm9taXNlKHR5cGU6IFR5cGUpOiBib29sZWFuIHtcbiAgICAgICAgY29uc3QgdHlwZVN5bWJvbCA9IHR5cGUuZ2V0U3ltYm9sKCk7XG4gICAgICAgIGlmICghdHlwZVN5bWJvbCkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgdHlwZU5hbWUgPSB0eXBlU3ltYm9sLmdldE5hbWUoKTtcblxuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgdHlwZU5hbWUgPT09ICdUYXNrJyB8fFxuICAgICAgICAgICAgdHlwZU5hbWUgPT09ICdUYXNrJDEnIHx8XG4gICAgICAgICAgICB0eXBlTmFtZSA9PT0gJ1VuaVRhc2snIHx8XG4gICAgICAgICAgICB0eXBlTmFtZSA9PT0gJ1VuaVRhc2skMScgfHxcbiAgICAgICAgICAgIHR5cGVOYW1lID09PSAnWWllbGRBd2FpdGFibGUnXG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBpc1Byb21pc2VNZXRob2QobWV0aG9kTmFtZTogc3RyaW5nKTogYm9vbGVhbiB7XG4gICAgICAgIGNvbnN0IHByb21pc2VNZXRob2RzID0gWyd0aGVuJywgJ2NhdGNoJywgJ2ZpbmFsbHknXTtcblxuICAgICAgICByZXR1cm4gcHJvbWlzZU1ldGhvZHMuaW5jbHVkZXMobWV0aG9kTmFtZSk7XG4gICAgfVxufVxuIiwiaW1wb3J0IHtHZW5pZXNMU1BDb250ZXh0fSBmcm9tIFwiLi9wbHVnaW5zL0dlbmllc0xTUENvbnRleHRcIjtcbmltcG9ydCB7XG4gICAgQmluYXJ5RXhwcmVzc2lvbiwgQ2xhc3NEZWNsYXJhdGlvbixcbiAgICBOb2RlLFxuICAgIFBvc3RmaXhVbmFyeUV4cHJlc3Npb24sXG4gICAgUHJlZml4VW5hcnlFeHByZXNzaW9uLCBTeW50YXhLaW5kLFxuICAgIFR5cGUsIFR5cGVDaGVja2VyLCBUeXBlRmxhZ3Ncbn0gZnJvbSBcInRzLW1vcnBoXCI7XG5pbXBvcnQge1xuICAgIGdldElzVW5pdHlBUElUeXBlXG59IGZyb20gXCIuL0NvbXBpbGVyVXRpbHNcIjtcbmltcG9ydCB7dHlwZXNBcmVFcXVhbH0gZnJvbSBcIi4vTWV0aG9kT3ZlcmxvYWRVdGlsc1wiO1xuXG4vLyBNb2RpZnkgdG8gcmV0dXJuIHRoZSB0eXBlIGlmIHRoZSBvcGVyYXRvciBtZXRob2QgZXhpc3RzXG5leHBvcnQgZnVuY3Rpb24gZ2V0T3BlcmF0b3JNZXRob2RSZXR1cm5UeXBlKHR5cGVDaGVja2VyIDogVHlwZUNoZWNrZXIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IFR5cGUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wZXJhdG9yTWV0aG9kTmFtZTogc3RyaW5nLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByaWdodFR5cGU6IFR5cGUpOiBUeXBlIHwgbnVsbCB7XG4gICAgY29uc3QgdHlwZVN5bWJvbCA9IHR5cGUuZ2V0U3ltYm9sKCk7XG4gICAgaWYgKCF0eXBlU3ltYm9sKSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIGNvbnN0IGRlY2xhcmF0aW9ucyA9IHR5cGVTeW1ib2wuZ2V0RGVjbGFyYXRpb25zKCk7XG4gICAgZm9yIChjb25zdCBkZWNsYXJhdGlvbiBvZiBkZWNsYXJhdGlvbnMpIHtcbiAgICAgICAgaWYgKE5vZGUuaXNDbGFzc0RlY2xhcmF0aW9uKGRlY2xhcmF0aW9uKSkge1xuICAgICAgICAgICAgY29uc3QgY2xhc3NEZWNsYXJhdGlvbiA9IGRlY2xhcmF0aW9uIGFzIENsYXNzRGVjbGFyYXRpb247XG4gICAgICAgICAgICBjb25zdCBtZXRob2RzID0gY2xhc3NEZWNsYXJhdGlvbi5nZXRNZXRob2RzKCkuZmlsdGVyKG0gPT4gbS5nZXROYW1lKCkgPT09IG9wZXJhdG9yTWV0aG9kTmFtZSAmJiBtLmdldFR5cGVQYXJhbWV0ZXJzKCkubGVuZ3RoID09PSAwKTtcblxuICAgICAgICAgICAgZm9yIChjb25zdCBtZXRob2Qgb2YgbWV0aG9kcykge1xuICAgICAgICAgICAgICAgIGNvbnN0IHBhcmFtZXRlcnMgPSBtZXRob2QuZ2V0UGFyYW1ldGVycygpO1xuICAgICAgICAgICAgICAgIGlmIChwYXJhbWV0ZXJzLmxlbmd0aCA9PT0gMikge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBsZWZ0UGFyYW1ldGVyVHlwZSA9IHBhcmFtZXRlcnNbMF0uZ2V0VHlwZSgpO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCByaWdodFBhcmFtZXRlclR5cGUgPSBwYXJhbWV0ZXJzWzFdLmdldFR5cGUoKTtcblxuICAgICAgICAgICAgICAgICAgICBjb25zdCBoYXNSaWdodFR5cGUgPSB0eXBlc0FyZUVxdWFsKHJpZ2h0UGFyYW1ldGVyVHlwZSwgcmlnaHRUeXBlKSB8fCB0eXBlQ2hlY2tlci5pc1R5cGVBc3NpZ25hYmxlVG8ocmlnaHRUeXBlLCByaWdodFBhcmFtZXRlclR5cGUpO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBoYXNMZWZ0VHlwZSA9IHR5cGVzQXJlRXF1YWwobGVmdFBhcmFtZXRlclR5cGUsIHR5cGUpIHx8IHR5cGVDaGVja2VyLmlzVHlwZUFzc2lnbmFibGVUbyh0eXBlLCBsZWZ0UGFyYW1ldGVyVHlwZSk7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKGhhc0xlZnRUeXBlICYmIGhhc1JpZ2h0VHlwZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG1ldGhvZC5nZXRSZXR1cm5UeXBlKCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gbnVsbDtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldE9wZXJhdG9yTWV0aG9kTmFtZShcbiAgICBvcGVyYXRvcktpbmQ6IFN5bnRheEtpbmQsXG4gICAgaXNVbmFyeTogYm9vbGVhbiA9IGZhbHNlXG4pOiBzdHJpbmcgfCB1bmRlZmluZWQge1xuICAgIGlmIChpc1VuYXJ5KSB7XG4gICAgICAgIC8vIEhhbmRsZSB1bmFyeSBvcGVyYXRvcnM6XG4gICAgICAgIHN3aXRjaCAob3BlcmF0b3JLaW5kKSB7XG4gICAgICAgICAgICBjYXNlIFN5bnRheEtpbmQuTWludXNUb2tlbjpcbiAgICAgICAgICAgICAgICAvLyAtYVxuICAgICAgICAgICAgICAgIHJldHVybiBcIm9wX1VuYXJ5TmVnYXRpb25cIjtcbiAgICAgICAgICAgIGNhc2UgU3ludGF4S2luZC5QbHVzVG9rZW46XG4gICAgICAgICAgICAgICAgLy8gK2FcbiAgICAgICAgICAgICAgICByZXR1cm4gXCJvcF9VbmFyeVBsdXNcIjtcbiAgICAgICAgICAgIGNhc2UgU3ludGF4S2luZC5FeGNsYW1hdGlvblRva2VuOlxuICAgICAgICAgICAgICAgIC8vICFhXG4gICAgICAgICAgICAgICAgcmV0dXJuIFwib3BfTG9naWNhbE5vdFwiO1xuICAgICAgICAgICAgY2FzZSBTeW50YXhLaW5kLlRpbGRlVG9rZW46XG4gICAgICAgICAgICAgICAgLy8gfmFcbiAgICAgICAgICAgICAgICByZXR1cm4gXCJvcF9PbmVzQ29tcGxlbWVudFwiO1xuICAgICAgICAgICAgY2FzZSBTeW50YXhLaW5kLlBsdXNQbHVzVG9rZW46XG4gICAgICAgICAgICAgICAgLy8gKythIG9yIGErK1xuICAgICAgICAgICAgICAgIHJldHVybiBcIm9wX0luY3JlbWVudFwiO1xuICAgICAgICAgICAgY2FzZSBTeW50YXhLaW5kLk1pbnVzTWludXNUb2tlbjpcbiAgICAgICAgICAgICAgICAvLyAtLWEgb3IgYS0tXG4gICAgICAgICAgICAgICAgcmV0dXJuIFwib3BfRGVjcmVtZW50XCI7XG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgICAvLyBIYW5kbGUgYmluYXJ5IG9wZXJhdG9yczpcbiAgICAgICAgc3dpdGNoIChvcGVyYXRvcktpbmQpIHtcbiAgICAgICAgICAgIGNhc2UgU3ludGF4S2luZC5QbHVzVG9rZW46XG4gICAgICAgICAgICAgICAgLy8gYSArIGJcbiAgICAgICAgICAgICAgICByZXR1cm4gXCJvcF9BZGRpdGlvblwiO1xuICAgICAgICAgICAgY2FzZSBTeW50YXhLaW5kLk1pbnVzVG9rZW46XG4gICAgICAgICAgICAgICAgLy8gYSAtIGJcbiAgICAgICAgICAgICAgICByZXR1cm4gXCJvcF9TdWJ0cmFjdGlvblwiO1xuICAgICAgICAgICAgY2FzZSBTeW50YXhLaW5kLkFzdGVyaXNrVG9rZW46XG4gICAgICAgICAgICAgICAgLy8gYSAqIGJcbiAgICAgICAgICAgICAgICByZXR1cm4gXCJvcF9NdWx0aXBseVwiO1xuICAgICAgICAgICAgY2FzZSBTeW50YXhLaW5kLlNsYXNoVG9rZW46XG4gICAgICAgICAgICAgICAgLy8gYSAvIGJcbiAgICAgICAgICAgICAgICByZXR1cm4gXCJvcF9EaXZpc2lvblwiO1xuICAgICAgICAgICAgY2FzZSBTeW50YXhLaW5kLlBlcmNlbnRUb2tlbjpcbiAgICAgICAgICAgICAgICAvLyBhICUgYlxuICAgICAgICAgICAgICAgIHJldHVybiBcIm9wX01vZHVsdXNcIjtcbiAgICAgICAgICAgIGNhc2UgU3ludGF4S2luZC5FcXVhbHNFcXVhbHNUb2tlbjpcbiAgICAgICAgICAgIGNhc2UgU3ludGF4S2luZC5FcXVhbHNFcXVhbHNFcXVhbHNUb2tlbjpcbiAgICAgICAgICAgICAgICAvLyBhID09IGJcbiAgICAgICAgICAgICAgICByZXR1cm4gXCJvcF9FcXVhbGl0eVwiO1xuICAgICAgICAgICAgY2FzZSBTeW50YXhLaW5kLkV4Y2xhbWF0aW9uRXF1YWxzVG9rZW46XG4gICAgICAgICAgICBjYXNlIFN5bnRheEtpbmQuRXhjbGFtYXRpb25FcXVhbHNFcXVhbHNUb2tlbjpcbiAgICAgICAgICAgICAgICAvLyBhICE9IGJcbiAgICAgICAgICAgICAgICByZXR1cm4gXCJvcF9JbmVxdWFsaXR5XCI7XG4gICAgICAgICAgICBjYXNlIFN5bnRheEtpbmQuR3JlYXRlclRoYW5Ub2tlbjpcbiAgICAgICAgICAgICAgICAvLyBhID4gYlxuICAgICAgICAgICAgICAgIHJldHVybiBcIm9wX0dyZWF0ZXJUaGFuXCI7XG4gICAgICAgICAgICBjYXNlIFN5bnRheEtpbmQuTGVzc1RoYW5Ub2tlbjpcbiAgICAgICAgICAgICAgICAvLyBhIDwgYlxuICAgICAgICAgICAgICAgIHJldHVybiBcIm9wX0xlc3NUaGFuXCI7XG4gICAgICAgICAgICBjYXNlIFN5bnRheEtpbmQuR3JlYXRlclRoYW5FcXVhbHNUb2tlbjpcbiAgICAgICAgICAgICAgICAvLyBhID49IGJcbiAgICAgICAgICAgICAgICByZXR1cm4gXCJvcF9HcmVhdGVyVGhhbk9yRXF1YWxcIjtcbiAgICAgICAgICAgIGNhc2UgU3ludGF4S2luZC5MZXNzVGhhbkVxdWFsc1Rva2VuOlxuICAgICAgICAgICAgICAgIC8vIGEgPD0gYlxuICAgICAgICAgICAgICAgIHJldHVybiBcIm9wX0xlc3NUaGFuT3JFcXVhbFwiO1xuICAgICAgICAgICAgY2FzZSBTeW50YXhLaW5kLkJhclRva2VuOlxuICAgICAgICAgICAgICAgIC8vIGEgfCBiXG4gICAgICAgICAgICAgICAgcmV0dXJuIFwib3BfQml0d2lzZU9yXCI7XG4gICAgICAgICAgICBjYXNlIFN5bnRheEtpbmQuQW1wZXJzYW5kVG9rZW46XG4gICAgICAgICAgICAgICAgLy8gYSAmIGJcbiAgICAgICAgICAgICAgICByZXR1cm4gXCJvcF9CaXR3aXNlQW5kXCI7XG4gICAgICAgICAgICBjYXNlIFN5bnRheEtpbmQuQ2FyZXRUb2tlbjpcbiAgICAgICAgICAgICAgICAvLyBhIF4gYlxuICAgICAgICAgICAgICAgIHJldHVybiBcIm9wX0V4Y2x1c2l2ZU9yXCI7XG4gICAgICAgICAgICBjYXNlIFN5bnRheEtpbmQuTGVzc1RoYW5MZXNzVGhhblRva2VuOlxuICAgICAgICAgICAgICAgIC8vIGEgPDwgYlxuICAgICAgICAgICAgICAgIHJldHVybiBcIm9wX0xlZnRTaGlmdFwiO1xuICAgICAgICAgICAgY2FzZSBTeW50YXhLaW5kLkdyZWF0ZXJUaGFuR3JlYXRlclRoYW5Ub2tlbjpcbiAgICAgICAgICAgICAgICAvLyBhID4+IGJcbiAgICAgICAgICAgICAgICByZXR1cm4gXCJvcF9SaWdodFNoaWZ0XCI7XG4gICAgICAgICAgICAvLyBBZGQgYWRkaXRpb25hbCBiaW5hcnkgb3BlcmF0b3JzIGlmIG5lZWRlZC5cbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgICAgfVxuICAgIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHVud3JhcFBhcmVudGhlc2l6ZWRFeHByZXNzaW9uKG5vZGU6IE5vZGUpOiBOb2RlIHtcbiAgICBpZiAoTm9kZS5pc1BhcmVudGhlc2l6ZWRFeHByZXNzaW9uKG5vZGUpKSB7XG4gICAgICAgIHJldHVybiB1bndyYXBQYXJlbnRoZXNpemVkRXhwcmVzc2lvbihub2RlLmdldEV4cHJlc3Npb24oKSk7XG4gICAgfVxuICAgIHJldHVybiBub2RlO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gaXNDb21wb3VuZEFzc2lnbm1lbnQob3BlcmF0b3JLaW5kOiBTeW50YXhLaW5kKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIG9wZXJhdG9yS2luZCA+PSBTeW50YXhLaW5kLkZpcnN0Q29tcG91bmRBc3NpZ25tZW50ICYmIG9wZXJhdG9yS2luZCA8PSBTeW50YXhLaW5kLkxhc3RDb21wb3VuZEFzc2lnbm1lbnQ7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRFcXVpdmFsZW50T3BlcmF0b3JGb3JDb21wb3VuZChjb21wb3VuZE9wZXJhdG9yS2luZDogU3ludGF4S2luZCk6IFN5bnRheEtpbmQge1xuICAgIHN3aXRjaCAoY29tcG91bmRPcGVyYXRvcktpbmQpIHtcbiAgICAgICAgY2FzZSBTeW50YXhLaW5kLlBsdXNFcXVhbHNUb2tlbjpcbiAgICAgICAgICAgIHJldHVybiBTeW50YXhLaW5kLlBsdXNUb2tlbjtcbiAgICAgICAgY2FzZSBTeW50YXhLaW5kLk1pbnVzRXF1YWxzVG9rZW46XG4gICAgICAgICAgICByZXR1cm4gU3ludGF4S2luZC5NaW51c1Rva2VuO1xuICAgICAgICBjYXNlIFN5bnRheEtpbmQuQXN0ZXJpc2tFcXVhbHNUb2tlbjpcbiAgICAgICAgICAgIHJldHVybiBTeW50YXhLaW5kLkFzdGVyaXNrVG9rZW47XG4gICAgICAgIGNhc2UgU3ludGF4S2luZC5TbGFzaEVxdWFsc1Rva2VuOlxuICAgICAgICAgICAgcmV0dXJuIFN5bnRheEtpbmQuU2xhc2hUb2tlbjtcbiAgICAgICAgY2FzZSBTeW50YXhLaW5kLlBlcmNlbnRFcXVhbHNUb2tlbjpcbiAgICAgICAgICAgIHJldHVybiBTeW50YXhLaW5kLlBlcmNlbnRUb2tlbjtcbiAgICAgICAgY2FzZSBTeW50YXhLaW5kLkFtcGVyc2FuZEVxdWFsc1Rva2VuOlxuICAgICAgICAgICAgcmV0dXJuIFN5bnRheEtpbmQuQW1wZXJzYW5kVG9rZW47XG4gICAgICAgIGNhc2UgU3ludGF4S2luZC5CYXJFcXVhbHNUb2tlbjpcbiAgICAgICAgICAgIHJldHVybiBTeW50YXhLaW5kLkJhclRva2VuO1xuICAgICAgICBjYXNlIFN5bnRheEtpbmQuQ2FyZXRFcXVhbHNUb2tlbjpcbiAgICAgICAgICAgIHJldHVybiBTeW50YXhLaW5kLkNhcmV0VG9rZW47XG4gICAgICAgIGNhc2UgU3ludGF4S2luZC5MZXNzVGhhbkxlc3NUaGFuRXF1YWxzVG9rZW46XG4gICAgICAgICAgICByZXR1cm4gU3ludGF4S2luZC5MZXNzVGhhbkxlc3NUaGFuVG9rZW47XG4gICAgICAgIGNhc2UgU3ludGF4S2luZC5HcmVhdGVyVGhhbkdyZWF0ZXJUaGFuRXF1YWxzVG9rZW46XG4gICAgICAgICAgICByZXR1cm4gU3ludGF4S2luZC5HcmVhdGVyVGhhbkdyZWF0ZXJUaGFuVG9rZW47XG4gICAgICAgIGNhc2UgU3ludGF4S2luZC5HcmVhdGVyVGhhbkdyZWF0ZXJUaGFuR3JlYXRlclRoYW5FcXVhbHNUb2tlbjpcbiAgICAgICAgICAgIHJldHVybiBTeW50YXhLaW5kLkdyZWF0ZXJUaGFuR3JlYXRlclRoYW5HcmVhdGVyVGhhblRva2VuO1xuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBVbnN1cHBvcnRlZCBjb21wb3VuZCBvcGVyYXRvcjogJHtTeW50YXhLaW5kW2NvbXBvdW5kT3BlcmF0b3JLaW5kXX1gKTtcbiAgICB9XG59XG5cbi8vIE1vZGlmeSB0byByZXR1cm4gdGhlIHR5cGUgaWYgdGhlIHVuYXJ5IG9wZXJhdG9yIG1ldGhvZCBleGlzdHNcbmV4cG9ydCBmdW5jdGlvbiBnZXRVbmFyeU9wZXJhdG9yTWV0aG9kUmV0dXJuVHlwZSh0eXBlOiBUeXBlLCBvcGVyYXRvck1ldGhvZE5hbWU6IHN0cmluZyk6IFR5cGUgfCBudWxsIHtcbiAgICBjb25zdCB0eXBlU3ltYm9sID0gdHlwZS5nZXRTeW1ib2woKTtcbiAgICBpZiAoIXR5cGVTeW1ib2wpIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgY29uc3QgZGVjbGFyYXRpb25zID0gdHlwZVN5bWJvbC5nZXREZWNsYXJhdGlvbnMoKTtcbiAgICBmb3IgKGNvbnN0IGRlY2xhcmF0aW9uIG9mIGRlY2xhcmF0aW9ucykge1xuICAgICAgICBpZiAoTm9kZS5pc0NsYXNzRGVjbGFyYXRpb24oZGVjbGFyYXRpb24pKSB7XG4gICAgICAgICAgICBjb25zdCBjbGFzc0RlY2xhcmF0aW9uID0gZGVjbGFyYXRpb24gYXMgQ2xhc3NEZWNsYXJhdGlvbjtcbiAgICAgICAgICAgIGNvbnN0IG1ldGhvZHMgPSBjbGFzc0RlY2xhcmF0aW9uLmdldE1ldGhvZHMoKS5maWx0ZXIobSA9PiBtLmdldE5hbWUoKSA9PT0gb3BlcmF0b3JNZXRob2ROYW1lICYmIG0uZ2V0VHlwZVBhcmFtZXRlcnMoKS5sZW5ndGggPT09IDApO1xuXG4gICAgICAgICAgICBmb3IgKGNvbnN0IG1ldGhvZCBvZiBtZXRob2RzKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgcGFyYW1ldGVycyA9IG1ldGhvZC5nZXRQYXJhbWV0ZXJzKCk7XG4gICAgICAgICAgICAgICAgaWYgKHBhcmFtZXRlcnMubGVuZ3RoID09PSAxKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG9wZXJhbmRUeXBlID0gcGFyYW1ldGVyc1swXS5nZXRUeXBlKCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChvcGVyYW5kVHlwZS5nZXRUZXh0KCkgPT09IHR5cGUuZ2V0VGV4dCgpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbWV0aG9kLmdldFJldHVyblR5cGUoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBudWxsO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0T3BlcmF0b3JOb2RlUmV0dXJuVHlwZShub2RlOiBOb2RlLCBjb250ZXh0OiBHZW5pZXNMU1BDb250ZXh0KTogVHlwZSB8IG51bGwge1xuICAgIGlmIChOb2RlLmlzQmluYXJ5RXhwcmVzc2lvbihub2RlKSkge1xuICAgICAgICByZXR1cm4gZ2V0QmluYXJ5T3BlcmF0b3JOb2RlUmV0dXJuVHlwZShub2RlLCBjb250ZXh0KTtcbiAgICB9IGVsc2UgaWYgKE5vZGUuaXNQcmVmaXhVbmFyeUV4cHJlc3Npb24obm9kZSkgfHwgTm9kZS5pc1Bvc3RmaXhVbmFyeUV4cHJlc3Npb24obm9kZSkpIHtcbiAgICAgICAgcmV0dXJuIGdldFVuYXJ5T3BlcmF0b3JOb2RlUmV0dXJuVHlwZShub2RlLCBjb250ZXh0KTtcbiAgICB9XG5cbiAgICByZXR1cm4gbnVsbDtcbn1cblxuZnVuY3Rpb24gdW53cmFwVHlwZShub2RlOiBOb2RlLCBjb250ZXh0OiBHZW5pZXNMU1BDb250ZXh0KTogVHlwZSB8IG51bGwge1xuXG4gICAgaWYgKE5vZGUuaXNCaW5hcnlFeHByZXNzaW9uKG5vZGUpKSB7XG4gICAgICAgIHJldHVybiBnZXRCaW5hcnlPcGVyYXRvck5vZGVSZXR1cm5UeXBlKG5vZGUsIGNvbnRleHQpO1xuICAgIH0gZWxzZSBpZiAoTm9kZS5pc1ByZWZpeFVuYXJ5RXhwcmVzc2lvbihub2RlKSB8fCBOb2RlLmlzUG9zdGZpeFVuYXJ5RXhwcmVzc2lvbihub2RlKSkge1xuICAgICAgICByZXR1cm4gZ2V0VW5hcnlPcGVyYXRvck5vZGVSZXR1cm5UeXBlKG5vZGUsIGNvbnRleHQpO1xuICAgIH1cblxuICAgIHJldHVybiBjb250ZXh0LlR5cGVDaGVja2VyLmdldFR5cGVBdExvY2F0aW9uKG5vZGUpO1xufVxuXG5mdW5jdGlvbiBnZXRCaW5hcnlPcGVyYXRvck5vZGVSZXR1cm5UeXBlKG5vZGU6IEJpbmFyeUV4cHJlc3Npb24sIGNvbnRleHQ6IEdlbmllc0xTUENvbnRleHQpOiBUeXBlIHwgbnVsbCB7XG4gICAgY29uc3Qgb3BlcmF0b3JUb2tlbiA9IG5vZGUuZ2V0T3BlcmF0b3JUb2tlbigpO1xuICAgIGNvbnN0IG9wZXJhdG9yS2luZCA9IG9wZXJhdG9yVG9rZW4uZ2V0S2luZCgpO1xuICAgIGxldCBvcGVyYXRvck1ldGhvZE5hbWUgPSBnZXRPcGVyYXRvck1ldGhvZE5hbWUob3BlcmF0b3JLaW5kKTtcblxuICAgIGlmIChpc0NvbXBvdW5kQXNzaWdubWVudChvcGVyYXRvcktpbmQpKSB7XG4gICAgICAgIGNvbnN0IGVxdWl2YWxlbnRPcGVyYXRvcktpbmQgPSBnZXRFcXVpdmFsZW50T3BlcmF0b3JGb3JDb21wb3VuZChvcGVyYXRvcktpbmQpO1xuICAgICAgICBvcGVyYXRvck1ldGhvZE5hbWUgPSBnZXRPcGVyYXRvck1ldGhvZE5hbWUoZXF1aXZhbGVudE9wZXJhdG9yS2luZCk7XG4gICAgfVxuXG4gICAgaWYgKG9wZXJhdG9yTWV0aG9kTmFtZSA9PSBudWxsKSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIC8vIElnbm9yZSB0cmFuc2Zvcm1hdGlvbnMgZm9yICc9PSBudWxsJyBhbmQgJz09IHVuZGVmaW5lZCdcbiAgICBpZiAob3BlcmF0b3JLaW5kID09PSBTeW50YXhLaW5kLkVxdWFsc0VxdWFsc0VxdWFsc1Rva2VuXG4gICAgICAgIHx8IG9wZXJhdG9yS2luZCA9PT0gU3ludGF4S2luZC5FcXVhbHNFcXVhbHNUb2tlblxuICAgICAgICB8fCBvcGVyYXRvcktpbmQgPT09IFN5bnRheEtpbmQuRXhjbGFtYXRpb25FcXVhbHNFcXVhbHNUb2tlblxuICAgICAgICB8fCBvcGVyYXRvcktpbmQgPT0gU3ludGF4S2luZC5FeGNsYW1hdGlvbkVxdWFsc1Rva2VuKSB7XG4gICAgICAgIGNvbnN0IHJpZ2h0ID0gdW53cmFwUGFyZW50aGVzaXplZEV4cHJlc3Npb24obm9kZS5nZXRSaWdodCgpKTtcbiAgICAgICAgaWYgKE5vZGUuaXNOdWxsTGl0ZXJhbChyaWdodCkgfHwgTm9kZS5pc1VuZGVmaW5lZEtleXdvcmQocmlnaHQpKSB7XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGxlZnQgPSB1bndyYXBQYXJlbnRoZXNpemVkRXhwcmVzc2lvbihub2RlLmdldExlZnQoKSk7XG4gICAgICAgIGlmIChOb2RlLmlzTnVsbExpdGVyYWwobGVmdCkgfHwgTm9kZS5pc1VuZGVmaW5lZEtleXdvcmQobGVmdCkpIHtcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgY29uc3QgbGVmdCA9IHVud3JhcFBhcmVudGhlc2l6ZWRFeHByZXNzaW9uKG5vZGUuZ2V0TGVmdCgpKTtcbiAgICBjb25zdCByaWdodCA9IHVud3JhcFBhcmVudGhlc2l6ZWRFeHByZXNzaW9uKG5vZGUuZ2V0UmlnaHQoKSk7XG5cbiAgICBsZXQgbGVmdFR5cGUgPSB1bndyYXBUeXBlKGxlZnQsIGNvbnRleHQpO1xuICAgIGxldCByaWdodFR5cGUgPSB1bndyYXBUeXBlKHJpZ2h0LCBjb250ZXh0KTtcblxuICAgIGlmIChsZWZ0VHlwZSA9PSBudWxsIHx8IHJpZ2h0VHlwZSA9PSBudWxsKSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIGlmIChyaWdodFR5cGUuaXNMaXRlcmFsKCkpIHtcbiAgICAgICAgcmlnaHRUeXBlID0gY29udGV4dC5UeXBlQ2hlY2tlci5nZXRCYXNlVHlwZU9mTGl0ZXJhbFR5cGUocmlnaHRUeXBlKTtcbiAgICB9XG5cbiAgICBpZiAobGVmdFR5cGUuaXNMaXRlcmFsKCkpIHtcbiAgICAgICAgbGVmdFR5cGUgPSBjb250ZXh0LlR5cGVDaGVja2VyLmdldEJhc2VUeXBlT2ZMaXRlcmFsVHlwZShsZWZ0VHlwZSk7XG4gICAgfVxuXG4gICAgaWYgKCFnZXRJc1VuaXR5QVBJVHlwZShsZWZ0VHlwZSkgJiYgIWdldElzVW5pdHlBUElUeXBlKHJpZ2h0VHlwZSkpIHtcbiAgICAgICAgcmV0dXJuIGNvbnRleHQuVHlwZUNoZWNrZXIuZ2V0VHlwZUF0TG9jYXRpb24obm9kZSk7XG4gICAgfVxuXG4gICAgY29uc3QgbGVmdFJldHVyblR5cGUgPSBnZXRPcGVyYXRvck1ldGhvZFJldHVyblR5cGUoY29udGV4dC5UeXBlQ2hlY2tlciwgbGVmdFR5cGUsIG9wZXJhdG9yTWV0aG9kTmFtZSwgcmlnaHRUeXBlKTtcbiAgICBjb25zdCByaWdodFJldHVyblR5cGUgPSBnZXRPcGVyYXRvck1ldGhvZFJldHVyblR5cGUoY29udGV4dC5UeXBlQ2hlY2tlciwgcmlnaHRUeXBlLCBvcGVyYXRvck1ldGhvZE5hbWUsIGxlZnRUeXBlKTtcblxuICAgIGlmIChsZWZ0UmV0dXJuVHlwZSA9PSBudWxsICYmIHJpZ2h0UmV0dXJuVHlwZSA9PSBudWxsKSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIC8vIEhhbmRsZSBjb21wb3VuZCBhc3NpZ25tZW50cyAoKz0sIC09LCBldGMuKVxuICAgIGlmIChpc0NvbXBvdW5kQXNzaWdubWVudChvcGVyYXRvcktpbmQpKSB7XG4gICAgICAgIGNvbnN0IGVxdWl2YWxlbnRPcGVyYXRvcktpbmQgPSBnZXRFcXVpdmFsZW50T3BlcmF0b3JGb3JDb21wb3VuZChvcGVyYXRvcktpbmQpO1xuICAgICAgICBjb25zdCBlcXVpdmFsZW50T3BlcmF0b3JNZXRob2ROYW1lID0gZ2V0T3BlcmF0b3JNZXRob2ROYW1lKGVxdWl2YWxlbnRPcGVyYXRvcktpbmQpO1xuXG4gICAgICAgIGlmIChlcXVpdmFsZW50T3BlcmF0b3JNZXRob2ROYW1lID09IG51bGwpIHtcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGdldE9wZXJhdG9yTWV0aG9kUmV0dXJuVHlwZShjb250ZXh0LlR5cGVDaGVja2VyLCBsZWZ0VHlwZSwgZXF1aXZhbGVudE9wZXJhdG9yTWV0aG9kTmFtZSwgcmlnaHRUeXBlKTtcbiAgICB9XG5cbiAgICByZXR1cm4gbGVmdFJldHVyblR5cGUgPz8gcmlnaHRSZXR1cm5UeXBlO1xufVxuXG5mdW5jdGlvbiBnZXRVbmFyeU9wZXJhdG9yTm9kZVJldHVyblR5cGUobm9kZTogUHJlZml4VW5hcnlFeHByZXNzaW9uIHwgUG9zdGZpeFVuYXJ5RXhwcmVzc2lvbiwgY29udGV4dDogR2VuaWVzTFNQQ29udGV4dCk6IFR5cGUgfCBudWxsIHtcbiAgICBjb25zdCBvcGVyYW5kID0gdW53cmFwUGFyZW50aGVzaXplZEV4cHJlc3Npb24obm9kZS5nZXRPcGVyYW5kKCkpO1xuICAgIGNvbnN0IG9wZXJhdG9yS2luZCA9IG5vZGUuZ2V0T3BlcmF0b3JUb2tlbigpO1xuICAgIGNvbnN0IG9wZXJhdG9yTWV0aG9kTmFtZSA9IGdldE9wZXJhdG9yTWV0aG9kTmFtZShvcGVyYXRvcktpbmQsIHRydWUpO1xuXG4gICAgaWYgKG9wZXJhdG9yTWV0aG9kTmFtZSkge1xuICAgICAgICBjb25zdCBvcGVyYW5kVHlwZSA9IGNvbnRleHQuVHlwZUNoZWNrZXIuZ2V0VHlwZUF0TG9jYXRpb24ob3BlcmFuZCk7XG4gICAgICAgIHJldHVybiBnZXRVbmFyeU9wZXJhdG9yTWV0aG9kUmV0dXJuVHlwZShvcGVyYW5kVHlwZSwgb3BlcmF0b3JNZXRob2ROYW1lKTtcbiAgICB9XG5cbiAgICByZXR1cm4gbnVsbDtcbn1cbiIsImltcG9ydCAqIGFzIHRzIGZyb20gJ3R5cGVzY3JpcHQnO1xuaW1wb3J0ICogYXMgcGF0aCBmcm9tICdwYXRoJztcblxuaW1wb3J0IHtcbiAgICBleHRlbmRzTW9ub0JlaGF2aW91cixcbiAgICBleHRlbmRzU2NyaXB0YWJsZU9iamVjdCxcbiAgICBleHRyYWN0UHJvcGVydGllcyxcbiAgICBGaWxlQ29tcGlsZU91dHB1dCxcbiAgICBHZW5pZXNTY3JpcHRVaUV2ZW50cyxcbiAgICBnZXRGdWxsVHlwZU5hbWUsXG4gICAgSGVhZGVyRGVjb3JhdG9yLFxuICAgIEhpZGVJbkluc3BlY3RvckRlY29yYXRvcixcbiAgICBNb25vYmVoYXZpb3VyVHlwZU5hbWUsXG4gICAgTm9uU2VyaWFsaXplZERlY29yYXRvcixcbiAgICBQcm9wZXJ0eUluZm8sXG4gICAgcmVtb3ZlRGVjb3JhdG9ycyxcbiAgICBTY3JpcHRhYmxlT2JqZWN0VHlwZU5hbWUsXG4gICAgU2VyaWFsaXplRmllbGREZWNvcmF0b3IsXG4gICAgc2V0UHJvamVjdFJvb3QsIHNvcnRJbXBvcnRzQW5kVmFycyxcbiAgICBTcGFjZURlY29yYXRvcixcbiAgICBUb29sdGlwRGVjb3JhdG9yLFxuICAgIHRyYXZlcnNlUHJvdG90eXBlQ2hhaW4sXG4gICAgVWlJbnRlcmZhY2VUb0VudW1NYXAsXG4gICAgdXBkYXRlSW1wb3J0c1RvQWxpYXNQYXRoc1xufSBmcm9tIFwiLi4vQ29tcGlsZXJVdGlsc1wiO1xuaW1wb3J0IHtDbGFzc0RlY2xhcmF0aW9uLCBQcm9qZWN0LCBTb3VyY2VGaWxlLCBTeW50YXhLaW5kLH0gZnJvbSBcInRzLW1vcnBoXCI7XG5pbXBvcnQge1Byb21pc2VXcmFwcGVyVHJhbnNmb3JtZXJ9IGZyb20gXCIuLi90cmFuc2Zvcm1lcnMvUHJvbWlzZVdyYXBwZXJUcmFuc2Zvcm1lclwiO1xuaW1wb3J0IHtDb21wb25lbnRDYWxsVHJhbnNmb3JtZXJ9IGZyb20gXCIuLi90cmFuc2Zvcm1lcnMvQ29tcG9uZW50Q2FsbFRyYW5zZm9ybWVyXCI7XG5pbXBvcnQge1JlZlRyYW5zZm9ybWVyfSBmcm9tIFwiLi4vdHJhbnNmb3JtZXJzL1JlZlRyYW5zZm9ybWVyXCI7XG5pbXBvcnQge0dlbmVyaWNUeXBlVHJhbnNmb3JtZXJ9IGZyb20gXCIuLi90cmFuc2Zvcm1lcnMvR2VuZXJpY1R5cGVUcmFuc2Zvcm1lclwiO1xuaW1wb3J0IHtHZW5lcmljTWV0aG9kVHJhbnNmb3JtZXJ9IGZyb20gXCIuLi90cmFuc2Zvcm1lcnMvR2VuZXJpY01ldGhvZFRyYW5zZm9ybWVyXCI7XG5pbXBvcnQge0V4dGVuc2lvbk1ldGhvZFRyYW5zZm9ybWVyfSBmcm9tIFwiLi4vdHJhbnNmb3JtZXJzL0V4dGVuc2lvbk1ldGhvZFRyYW5zZm9ybWVyXCI7XG5pbXBvcnQge1RyYW5zZm9ybWF0aW9uQ29udGV4dH0gZnJvbSBcIi4uL3RyYW5zZm9ybWVycy9UcmFuc2Zvcm1hdGlvbkNvbnRleHRcIjtcbmltcG9ydCB7SVRyYW5zZm9ybWVyfSBmcm9tIFwiLi4vdHJhbnNmb3JtZXJzL0lUcmFuc2Zvcm1lclwiO1xuaW1wb3J0IHtHZW5pZXNJbnN0YW5jZVRyYW5zZm9ybWVyfSBmcm9tIFwiLi4vdHJhbnNmb3JtZXJzL0dlbmllc0luc3RhbmNlVHJhbnNmb3JtZXJcIjtcbmltcG9ydCB7U2NyaXB0YWJsZU9iamVjdENyZWF0ZUluc3RhbmNlVHJhbnNmb3JtZXJ9IGZyb20gXCIuLi90cmFuc2Zvcm1lcnMvU2NyaXB0YWJsZU9iamVjdENyZWF0ZUluc3RhbmNlVHJhbnNmb3JtZXJcIjtcbmltcG9ydCB7T3BlcmF0b3JPdmVybG9hZGluZ1RyYW5zZm9ybWVyfSBmcm9tIFwiLi4vdHJhbnNmb3JtZXJzL09wZXJhdG9yT3ZlcmxvYWRpbmdUcmFuc2Zvcm1lclwiO1xuaW1wb3J0IHtFdmVudENvbnRleHRUcmFuc2Zvcm1lcn0gZnJvbSBcIi4uL3RyYW5zZm9ybWVycy9FdmVudENvbnRleHRUcmFuc2Zvcm1lclwiO1xuaW1wb3J0IHtnZXRHZW5pZXNTZW1hbnRpY0RpYWdub3N0aWNzfSBmcm9tIFwiLi4vR2VuaWVzRGlhZ25vc3RpY3NVdGlsc1wiO1xuaW1wb3J0IHtEZWxlZ2F0ZVRvQXJyb3dGdW5jdGlvblRyYW5zZm9ybWVyfSBmcm9tIFwiLi4vdHJhbnNmb3JtZXJzL0RlbGVnYXRlVG9BcnJvd0Z1bmN0aW9uVHJhbnNmb3JtZXJcIjtcbmltcG9ydCB7TnVtZXJpY092ZXJsb2FkUmVzb2x1dGlvblRyYW5zZm9ybWVyfSBmcm9tIFwiLi4vdHJhbnNmb3JtZXJzL051bWVyaWNPdmVybG9hZFJlc29sdXRpb25UcmFuc2Zvcm1lclwiO1xuaW1wb3J0IHtCcmFja2V0QWNjZXNzVHJhbnNmb3JtZXJ9IGZyb20gXCIuLi90cmFuc2Zvcm1lcnMvQnJhY2tldEFjY2Vzc1RyYW5zZm9ybWVyXCI7XG5pbXBvcnQge0NTaGFycEV2ZW50VHJhbnNmb3JtZXJ9IGZyb20gXCIuLi90cmFuc2Zvcm1lcnMvQ1NoYXJwRXZlbnRUcmFuc2Zvcm1lclwiO1xuaW1wb3J0IE1hZ2ljU3RyaW5nIGZyb20gXCJtYWdpYy1zdHJpbmdcIjtcbmltcG9ydCB7ZGlmZl9tYXRjaF9wYXRjaH0gZnJvbSBcImRpZmYtbWF0Y2gtcGF0Y2hcIjtcbmltcG9ydCByZW1hcHBpbmcgZnJvbSBcIkBhbXBwcm9qZWN0L3JlbWFwcGluZ1wiO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBHZW5pZXNUcmFuc3BpbGVyIHtcbiAgICBwcml2YXRlIHByb2plY3Q6IFByb2plY3Q7XG4gICAgcHJpdmF0ZSByb290RGlyZWN0b3J5OiBzdHJpbmc7XG4gICAgcHJpdmF0ZSByZWFkb25seSB0cmFuc2Zvcm1lcnM6IHsgcGhhc2U6IG51bWJlciwgdHJhbnNmb3JtZXI6IElUcmFuc2Zvcm1lciB9W107XG4gICAgcHJpdmF0ZSB0cmFuc2Zvcm1hdGlvbkNvbnRleHQ6IFRyYW5zZm9ybWF0aW9uQ29udGV4dDtcblxuICAgIGNvbnN0cnVjdG9yKHRzQ29uZmlnUGF0aDogc3RyaW5nKSB7XG4gICAgICAgIHRoaXMucHJvamVjdCA9IG5ldyBQcm9qZWN0KHtcbiAgICAgICAgICAgIHRzQ29uZmlnRmlsZVBhdGg6IHRzQ29uZmlnUGF0aCxcbiAgICAgICAgICAgIHNraXBBZGRpbmdGaWxlc0Zyb21Uc0NvbmZpZzogZmFsc2UsXG4gICAgICAgIH0pO1xuXG4gICAgICAgIHRoaXMucm9vdERpcmVjdG9yeSA9IHBhdGguZGlybmFtZSh0c0NvbmZpZ1BhdGgpO1xuICAgICAgICBjb25zdCB0eXBlQ2hlY2tlciA9IHRoaXMucHJvamVjdC5nZXRUeXBlQ2hlY2tlcigpO1xuICAgICAgICAvL0dsb2JhbGx5IHNldCBmb3Igb3RoZXIgdXRpbHMvdHJhbnNmb3JtZXJzXG4gICAgICAgIHNldFByb2plY3RSb290KHRoaXMucm9vdERpcmVjdG9yeSk7XG5cbiAgICAgICAgdGhpcy50cmFuc2Zvcm1hdGlvbkNvbnRleHQgPSBuZXcgVHJhbnNmb3JtYXRpb25Db250ZXh0KHR5cGVDaGVja2VyKTtcblxuICAgICAgICAvL0VhY2ggcGhhc2UgaXMgZXNzZW50aWFsbHkgYSBmdWxsIHJlLWxvb3Agb2YgdGhlIEFTVFxuICAgICAgICB0aGlzLnRyYW5zZm9ybWVycyA9IFtcbiAgICAgICAgICAgIC8vUmVwbGFjZXMgcGxhY2Vob2xkZXIgQ1NoYXJwRXZlbnQgY2FsbHMgd2l0aCB0aGUgYWN0dWFsIGFkZCBhbmQgcmVtb3ZlIG1ldGhvZHMuXG4gICAgICAgICAgICB7cGhhc2U6IDEsIHRyYW5zZm9ybWVyOiBuZXcgQ1NoYXJwRXZlbnRUcmFuc2Zvcm1lcigpfSxcblxuICAgICAgICAgICAgLy9BbGxvd3MgdXNpbmcgJHJlZi52YWx1ZVxuICAgICAgICAgICAge3BoYXNlOiAxLCB0cmFuc2Zvcm1lcjogbmV3IFJlZlRyYW5zZm9ybWVyKCl9LFxuXG4gICAgICAgICAgICAvL0FsbG93cyBwYXNzIGNvbnRleHQgdG8gZ2VuaWVzIGV2ZW50L3NpZ25hbCBidXNcbiAgICAgICAgICAgIHtwaGFzZTogMSwgdHJhbnNmb3JtZXI6IG5ldyBFdmVudENvbnRleHRUcmFuc2Zvcm1lcigpfSxcblxuICAgICAgICAgICAgLy9JZiBwYXNzaW5nIGEgZnVuY3Rpb24gdG8gYSBkZWxlZ2F0ZSwgY29udmVydCB0byBhbiBhcnJvdyBmdW5jdGlvbiB0byBwcmVzZXJ2ZSBcbiAgICAgICAgICAgIC8vdGhlIGNvbnRleHRcbiAgICAgICAgICAgIHtwaGFzZTogMSwgdHJhbnNmb3JtZXI6IG5ldyBEZWxlZ2F0ZVRvQXJyb3dGdW5jdGlvblRyYW5zZm9ybWVyKCl9LFxuXG4gICAgICAgICAgICAvL0ZvciByZXBsYWNpbmcgYnJhY2tldCBhY2Nlc3MgZm9yIGluZGV4ZXJzIGFuZCByZXBsYWNpbmcgdGhlbSB3aXRoIGdldF9pdGVtIGFuZCBzZXRfaXRlbVxuICAgICAgICAgICAge3BoYXNlOiAxLCB0cmFuc2Zvcm1lcjogbmV3IEJyYWNrZXRBY2Nlc3NUcmFuc2Zvcm1lcigpfSxcblxuICAgICAgICAgICAgLy9BbGxvd3MgYXdhaXRpbmcgdGFzayBhbmQgdW5pdGFza1xuICAgICAgICAgICAge3BoYXNlOiAxLCB0cmFuc2Zvcm1lcjogbmV3IFByb21pc2VXcmFwcGVyVHJhbnNmb3JtZXIoKX0sXG5cbiAgICAgICAgICAgIC8vRW5zdXJlIHdlIGFyZSBoYW5kbGluZyBnZW5lcmljIGNvbXBvbmVudCBjYWxscyB0byB0aGVpciBvdmVybG9hZHNcbiAgICAgICAgICAgIHtwaGFzZTogMSwgdHJhbnNmb3JtZXI6IG5ldyBDb21wb25lbnRDYWxsVHJhbnNmb3JtZXIoKX0sXG5cbiAgICAgICAgICAgIC8vRW5zdXJlIHdlIGFyZSBoYW5kbGluZyBnZW5lcmljIGNvbXBvbmVudCBjYWxscyB0byB0aGVpciBvdmVybG9hZHNcbiAgICAgICAgICAgIHtwaGFzZTogMSwgdHJhbnNmb3JtZXI6IG5ldyBTY3JpcHRhYmxlT2JqZWN0Q3JlYXRlSW5zdGFuY2VUcmFuc2Zvcm1lcigpfSxcblxuICAgICAgICAgICAgLy9FbnN1cmUgd2UgYXJlIHRyYW5zZm9ybWluZyBnZW5lcmljIGV4dGVuc2lvbnMgbWV0aG9kcyB0byB1c2UgdGhlIGRlY2xhcmluZyB0eXBlIGluc3RlYWQuXG4gICAgICAgICAgICB7cGhhc2U6IDEsIHRyYW5zZm9ybWVyOiBuZXcgRXh0ZW5zaW9uTWV0aG9kVHJhbnNmb3JtZXIoKX0sXG5cbiAgICAgICAgICAgIC8vV2hlbiBwYXNzaW5nIFRTIE1vbm9iZWhhdmlvdXIgb3IgU2NyaXB0YWJsZU9iamVjdCB0byB1bml0eSBBUEkgd2Ugd2lsbCByZXBsYWNlXG4gICAgICAgICAgICAvL1dpdGggX19nZW5pZXNJbnN0YW5jZV9fIHdoaWNoIGlzIHByb3hpZWQgdG8gdGhlIGFjdHVhbCBjb21wb25lbnQuIEV4OiBEZXN0cm95KHRoaXMpO1xuICAgICAgICAgICAge3BoYXNlOiAxLCB0cmFuc2Zvcm1lcjogbmV3IEdlbmllc0luc3RhbmNlVHJhbnNmb3JtZXIoKX0sXG5cbiAgICAgICAgICAgIC8vRW5zdXJlIGFsbCBnZW5lcmljIHR5cGVzIGFyZSBoYW5kbGVkIGJlZm9yZSB3ZSBjcmVhdGUgZ2VuZXJpYyBtZXRob2RzXG4gICAgICAgICAgICB7cGhhc2U6IDIsIHRyYW5zZm9ybWVyOiBuZXcgR2VuZXJpY1R5cGVUcmFuc2Zvcm1lcigpfSxcblxuICAgICAgICAgICAgLy9IYW5kbGUgb3BlcmF0b3Igb3ZlcmxvYWRpbmcgYnkgY2FsbGluZyB0aGUgY29ycmVjdCBtZXRob2QuXG4gICAgICAgICAgICB7cGhhc2U6IDMsIHRyYW5zZm9ybWVyOiBuZXcgT3BlcmF0b3JPdmVybG9hZGluZ1RyYW5zZm9ybWVyKCl9LFxuXG4gICAgICAgICAgICAvL0Vuc3VyZSB3ZSBhcmUgdHJhbnNmb3JtaW5nIGdlbmVyaWMgZXh0ZW5zaW9ucyBtZXRob2RzIHRvIHVzZSB0aGUgZGVjbGFyaW5nIHR5cGUgaW5zdGVhZC5cbiAgICAgICAgICAgIC8vTk9URTogVGhpcyBzaG91bGQgaGFwcGVuIHJpZ2h0IGJlZm9yZSBnZW5lcmljIG1ldGhvZCB0cmFuc2Zvcm1lciBhbmQgYWZ0ZXIgb3RoZXJzIHNpbmNlIFxuICAgICAgICAgICAgLy9pdCBoYXMgaW5mbyBhYm91dCB0aGUgZ2VuZXJpYyBtZXRob2QgdHJhbnNmb3JtYXRpb25zIGFuZCB0aGF0IGluZm8gaXMgc3RvcmVkIHdpdGggdGhlIFxuICAgICAgICAgICAgLy9jYWxsIG5vZGUgYXMgYSBrZXkgc28gdGhpcyB3aWxsIGF2b2lkIGFueSBrZXlzIGJyZWFraW5nIGJlY2F1c2UgdGhlIG5vZGUgZ290IHRyYW5zZm9ybWVkLlxuICAgICAgICAgICAge3BoYXNlOiA0LCB0cmFuc2Zvcm1lcjogbmV3IE51bWVyaWNPdmVybG9hZFJlc29sdXRpb25UcmFuc2Zvcm1lcigpfSxcblxuICAgICAgICAgICAgLy9UcmFuc2Zvcm1zIGdlbmVyaWMgbWV0aG9kIGNhbGxzIHRvIGJlIGNhbGxlZCBjb3JyZWN0bHkgb24gdGhlIEMjIHNpZGUuXG4gICAgICAgICAgICB7cGhhc2U6IDUsIHRyYW5zZm9ybWVyOiBuZXcgR2VuZXJpY01ldGhvZFRyYW5zZm9ybWVyKCl9LFxuXG4gICAgICAgIF07XG4gICAgfVxuXG4gICAgcHVibGljIGNvbXBpbGUoZmlsZXNUb0NvbXBpbGU6IHN0cmluZ1tdLFxuICAgICAgICAgICAgICAgICAgIHByb2plY3RGaWxlczogc3RyaW5nW10sXG4gICAgICAgICAgICAgICAgICAgbW92ZWRGaWxlcz86IHsgb2xkUGF0aDogc3RyaW5nOyBuZXdQYXRoOiBzdHJpbmcgfVtdKTogc3RyaW5nIHtcblxuICAgICAgICAvLyBMb2FkIHNvdXJjZSBmaWxlcyBpbnRvIHRoZSBwcm9qZWN0XG4gICAgICAgIHRoaXMucHJvamVjdC5hZGRTb3VyY2VGaWxlc0F0UGF0aHMoZmlsZXNUb0NvbXBpbGUpO1xuICAgICAgICB0aGlzLnByb2plY3QuYWRkU291cmNlRmlsZXNBdFBhdGhzKHByb2plY3RGaWxlcyk7XG5cbiAgICAgICAgLy8gMi4gRml4IHJlZmVyZW5jZXMgYmVmb3JlIGNvbGxlY3RpbmcvdHJhbnNmb3JtaW5nXG4gICAgICAgIGlmIChtb3ZlZEZpbGVzICYmIG1vdmVkRmlsZXMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgdGhpcy5maXhSZWZlcmVuY2VzKG1vdmVkRmlsZXMsIHRoaXMucm9vdERpcmVjdG9yeSk7XG4gICAgICAgICAgICB0aGlzLnByb2plY3Quc2F2ZVN5bmMoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBjb2xsZWN0ZWRGaWxlczogU2V0PFNvdXJjZUZpbGU+ID0gbmV3IFNldDxTb3VyY2VGaWxlPigpO1xuICAgICAgICBsZXQgcHJvY2Vzc2VkOiBTZXQ8c3RyaW5nPiA9IG5ldyBTZXQ8c3RyaW5nPigpO1xuICAgICAgICBsZXQgZGVwZW5kZW5jeUdyYXBoOiBNYXA8U291cmNlRmlsZSwgU2V0PFNvdXJjZUZpbGU+PiA9IG5ldyBNYXA8U291cmNlRmlsZSwgU2V0PFNvdXJjZUZpbGU+PigpO1xuXG4gICAgICAgIC8vIFN0YXJ0IGNvbGxlY3RpbmcgZnJvbSBpbml0aWFsIGZpbGUgcGF0aHNcbiAgICAgICAgZmlsZXNUb0NvbXBpbGUuZm9yRWFjaChmaWxlUGF0aCA9PiB7XG4gICAgICAgICAgICBjb25zdCBzb3VyY2VGaWxlID0gdGhpcy5wcm9qZWN0LmdldFNvdXJjZUZpbGVPclRocm93KGZpbGVQYXRoKTtcblxuICAgICAgICAgICAgdGhpcy5jb2xsZWN0RmlsZXMoc291cmNlRmlsZSwgY29sbGVjdGVkRmlsZXMsIHByb2Nlc3NlZCwgZGVwZW5kZW5jeUdyYXBoKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gVG9wb2xvZ2ljYWwgc29ydFxuICAgICAgICBjb25zdCBzb3J0ZWRGaWxlcyA9IHRoaXMudG9wb2xvZ2ljYWxTb3J0KEFycmF5LmZyb20oY29sbGVjdGVkRmlsZXMpLCBkZXBlbmRlbmN5R3JhcGgpO1xuXG4gICAgICAgIC8vSW5pdGlhbGl6ZSB0cmFuc2Zvcm1lZCBjb2RlIG1hcFxuICAgICAgICBjb25zdCB0cmFuc2Zvcm1lZENvZGVNYXAgPSBuZXcgTWFwPFNvdXJjZUZpbGUsIE1hZ2ljU3RyaW5nPigpO1xuXG4gICAgICAgIGxldCBvdXRwdXRzOiBNYXA8U291cmNlRmlsZSwgRmlsZUNvbXBpbGVPdXRwdXQ+ID0gbmV3IE1hcDxTb3VyY2VGaWxlLCBGaWxlQ29tcGlsZU91dHB1dD4oKTtcblxuICAgICAgICAvL1ByZXByb2Nlc3Mgc291cmNlIGZpbGVzXG4gICAgICAgIHNvcnRlZEZpbGVzLmZvckVhY2gocyA9PiB7XG5cbiAgICAgICAgICAgIC8vU3RhcnQgd2l0aCB0aGUgb3JpZ2luIHRleHQuXG4gICAgICAgICAgICBsZXQgdHJhbnNmb3JtZWRDb2RlID0gbmV3IE1hZ2ljU3RyaW5nKHMuZ2V0RnVsbFRleHQoKSk7XG5cbiAgICAgICAgICAgIC8vUHJlLWVtaXQsIGVuc3VyZSBzb3VyY2UgZmlsZXMgaGF2ZSBjb3JyZWN0IGV4cG9ydHMgYW5kIHNhdmVcbiAgICAgICAgICAgIHRoaXMuc2V0RGVmYXVsdEV4cG9ydChzKTtcbiAgICAgICAgICAgIHVwZGF0ZUltcG9ydHNUb0FsaWFzUGF0aHMocyk7XG4gICAgICAgICAgICB0aGlzLmluaXRpYWxpemVDb21waWxlT3V0cHV0KG91dHB1dHMsIHMpO1xuXG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIC8vTWFwIHRzIG9yaWdpbiA8PiB0cmFuc2Zvcm1lZCB0c1xuICAgICAgICAgICAgICAgIHRoaXMuYXBwbHlUcmFuc2Zvcm1hdGlvbkRpZmZzKHRyYW5zZm9ybWVkQ29kZSwgcyk7XG4gICAgICAgICAgICAgICAgdHJhbnNmb3JtZWRDb2RlTWFwLnNldChzLCB0cmFuc2Zvcm1lZENvZGUpO1xuICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgIC8vaWYgZmFpbGVkIGxvZyBhbmQgY29udGludWVcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICBzb3J0ZWRGaWxlcy5mb3JFYWNoKHMgPT4ge1xuICAgICAgICAgICAgdGhpcy5lbWl0KG91dHB1dHMsIHRyYW5zZm9ybWVkQ29kZU1hcCwgcyk7XG4gICAgICAgIH0pXG5cbiAgICAgICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICAgIG91dHB1dHM6IFsuLi5vdXRwdXRzLnZhbHVlcygpXVxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBwcml2YXRlIHNldERlZmF1bHRFeHBvcnQoc291cmNlRmlsZTogU291cmNlRmlsZSkge1xuICAgICAgICAvLyBDaGVjayBpZiB0aGVyZSdzIGFscmVhZHkgYSBzdWl0YWJsZSBkZWZhdWx0IGV4cG9ydFxuICAgICAgICBjb25zdCBkZWZhdWx0RXhwb3J0U3ltYm9sID0gc291cmNlRmlsZS5nZXREZWZhdWx0RXhwb3J0U3ltYm9sKClcbiAgICAgICAgbGV0IGRlZmF1bHRFeHBvcnRlZENsYXNzID0gbnVsbDtcbiAgICAgICAgaWYgKGRlZmF1bHRFeHBvcnRTeW1ib2wpIHtcbiAgICAgICAgICAgIGNvbnN0IGRlY2xhcmF0aW9ucyA9IGRlZmF1bHRFeHBvcnRTeW1ib2wuZ2V0RGVjbGFyYXRpb25zKCk7XG4gICAgICAgICAgICBkZWZhdWx0RXhwb3J0ZWRDbGFzcyA9IGRlY2xhcmF0aW9ucy5maW5kKGRlY2wgPT4gZGVjbC5nZXRLaW5kKCkgPT09IHRzLlN5bnRheEtpbmQuQ2xhc3NEZWNsYXJhdGlvbik7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoZGVmYXVsdEV4cG9ydGVkQ2xhc3MgIT0gbnVsbCkge1xuICAgICAgICAgICAgcmV0dXJuOyAgLy8gRXhpdCB0aGUgZnVuY3Rpb24gZWFybHlcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIElmIG5vIHN1aXRhYmxlIGRlZmF1bHQgZXhwb3J0LCBtb2RpZnkgY2xhc3NlcyBhcyBuZWVkZWRcbiAgICAgICAgZm9yIChjb25zdCBjbHMgb2Ygc291cmNlRmlsZS5nZXRDbGFzc2VzKCkpIHtcbiAgICAgICAgICAgIGlmIChleHRlbmRzTW9ub0JlaGF2aW91cihjbHMpIHx8IGV4dGVuZHNTY3JpcHRhYmxlT2JqZWN0KGNscykpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBpc0RlZmF1bHRFeHBvcnRlZCA9IGNscy5pc0RlZmF1bHRFeHBvcnQoKTtcbiAgICAgICAgICAgICAgICBpZiAoIWlzRGVmYXVsdEV4cG9ydGVkKSB7XG4gICAgICAgICAgICAgICAgICAgIGNscy5zZXRJc0RlZmF1bHRFeHBvcnQodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgZml4UmVmZXJlbmNlcyhtb3ZlZEZpbGVzOiB7IG9sZFBhdGg6IHN0cmluZzsgbmV3UGF0aDogc3RyaW5nIH1bXSwgcHJvamVjdFJvb3Q6IHN0cmluZykge1xuICAgICAgICAvLyAxKSBCdWlsZCBtYXAgb2Ygb2xkQWJzUGF0aCAtPiBuZXdBYnNQYXRoXG4gICAgICAgIGNvbnN0IG1vdmVkTWFwID0gbmV3IE1hcDxzdHJpbmcsIHN0cmluZz4oKTtcbiAgICAgICAgZm9yIChjb25zdCB7b2xkUGF0aCwgbmV3UGF0aH0gb2YgbW92ZWRGaWxlcykge1xuICAgICAgICAgICAgbW92ZWRNYXAuc2V0KHBhdGgucmVzb2x2ZShvbGRQYXRoKSwgcGF0aC5yZXNvbHZlKG5ld1BhdGgpKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIDIpIEZvciBlYWNoIHNvdXJjZSBmaWxlIGluIHRoZSBwcm9qZWN0Li4uXG4gICAgICAgIGZvciAoY29uc3Qgc2Ygb2YgdGhpcy5wcm9qZWN0LmdldFNvdXJjZUZpbGVzKCkpIHtcbiAgICAgICAgICAgIGZvciAoY29uc3QgaW1wIG9mIHNmLmdldEltcG9ydERlY2xhcmF0aW9ucygpKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgcmF3SW1wb3J0ID0gaW1wLmdldE1vZHVsZVNwZWNpZmllclZhbHVlKCk7XG4gICAgICAgICAgICAgICAgaWYgKCFyYXdJbXBvcnQpIHtcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgLy8gMykgUmVzb2x2ZSB0aGUgb2xkIGFic29sdXRlIHBhdGggYWNjb3JkaW5nIHRvIHlvdXIgYmFzZVVybCBsb2dpY1xuICAgICAgICAgICAgICAgIGNvbnN0IG9sZEFic1BhdGggPSB0aGlzLnJlc29sdmVTcGVjaWZpZXIoXG4gICAgICAgICAgICAgICAgICAgIHJhd0ltcG9ydCxcbiAgICAgICAgICAgICAgICAgICAgc2YuZ2V0RGlyZWN0b3J5UGF0aCgpLCAvLyB0aGUgZGlyZWN0b3J5IG9mIHRoZSBjdXJyZW50IHNvdXJjZSBmaWxlXG4gICAgICAgICAgICAgICAgICAgIHByb2plY3RSb290ICAgICAgICAgICAgLy8gdGhlIHRzY29uZmlnIGZvbGRlclxuICAgICAgICAgICAgICAgICkgKyAnLnRzJztcblxuICAgICAgICAgICAgICAgIC8vIDQpIENoZWNrIGlmIHRoYXQgb2xkQWJzUGF0aCBpcyBpbiB5b3VyIG1vdmVkRmlsZXMgbWFwXG4gICAgICAgICAgICAgICAgaWYgKG1vdmVkTWFwLmhhcyhvbGRBYnNQYXRoKSkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBuZXdBYnNQYXRoID0gbW92ZWRNYXAuZ2V0KG9sZEFic1BhdGgpITtcblxuICAgICAgICAgICAgICAgICAgICAvLyA1KSBDb21wdXRlIG5ldyByZWxhdGl2ZSBwYXRoIGZyb20gdGhpcyBmaWxlIHRvIHRoZSBuZXcgZmlsZVxuICAgICAgICAgICAgICAgICAgICBsZXQgbmV3SW1wb3J0U3BlY2lmaWVyOiBzdHJpbmc7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG5ld1NvdXJjZUZpbGUgPSB0aGlzLnByb2plY3QuZ2V0U291cmNlRmlsZShuZXdBYnNQYXRoKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG5ld1NvdXJjZUZpbGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIElmIGl0J3MgaW4gdGhlIHByb2plY3QsIGxldCB0cy1tb3JwaCBjb21wdXRlIGEgbmljZSByZWxhdGl2ZSBwYXRoXG4gICAgICAgICAgICAgICAgICAgICAgICBuZXdJbXBvcnRTcGVjaWZpZXIgPSBzZi5nZXRSZWxhdGl2ZVBhdGhBc01vZHVsZVNwZWNpZmllclRvKG5ld1NvdXJjZUZpbGUpO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gT3RoZXJ3aXNlLCBtYW51YWxseSBjb21wdXRlIGEgcmVsYXRpdmUgcGF0aFxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgaW1wb3J0ZXJEaXIgPSBzZi5nZXREaXJlY3RvcnlQYXRoKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBuZXdJbXBvcnRTcGVjaWZpZXIgPSBwYXRoLnJlbGF0aXZlKGltcG9ydGVyRGlyLCBuZXdBYnNQYXRoKS5yZXBsYWNlKC9cXFxcL2csIFwiL1wiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghbmV3SW1wb3J0U3BlY2lmaWVyLnN0YXJ0c1dpdGgoXCIuXCIpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3SW1wb3J0U3BlY2lmaWVyID0gXCIuL1wiICsgbmV3SW1wb3J0U3BlY2lmaWVyO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgLy8gNikgRmluYWxseSB1cGRhdGUgdGhlIGltcG9ydFxuICAgICAgICAgICAgICAgICAgICBpbXAuc2V0TW9kdWxlU3BlY2lmaWVyKG5ld0ltcG9ydFNwZWNpZmllcik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmVzb2x2ZSB0aGUgcmF3IGltcG9ydCBzcGVjaWZpZXIgdG8gYW4gYWJzb2x1dGUgcGF0aCwgZ2l2ZW46XG4gICAgICogIC0gVGhlIGRpcmVjdG9yeSBvZiB0aGUgaW1wb3J0ZXIgc291cmNlIGZpbGVcbiAgICAgKiAgLSBUaGUgcHJvamVjdCByb290ICh3aGVyZSB0c2NvbmZpZy5qc29uIGlzLCBpLmUuIGJhc2VVcmwgPSBcIi5cIilcbiAgICAgKi9cbiAgICBwcml2YXRlIHJlc29sdmVTcGVjaWZpZXIoXG4gICAgICAgIHNwZWNpZmllcjogc3RyaW5nLFxuICAgICAgICBpbXBvcnRlckRpcjogc3RyaW5nLFxuICAgICAgICBwcm9qZWN0Um9vdDogc3RyaW5nXG4gICAgKTogc3RyaW5nIHtcbiAgICAgICAgLy8gMSkgSWYgaXQgc3RhcnRzIHdpdGggXCIuXCIgb3IgXCIuLlwiLCBpdCdzIHJlbGF0aXZlIHRvIHRoZSBpbXBvcnRlckRpclxuICAgICAgICBpZiAoc3BlY2lmaWVyLnN0YXJ0c1dpdGgoXCIuXCIpKSB7XG4gICAgICAgICAgICByZXR1cm4gcGF0aC5yZXNvbHZlKGltcG9ydGVyRGlyLCBzcGVjaWZpZXIpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gMikgSWYgaXQgc3RhcnRzIHdpdGggXCIvXCIsIGludGVycHJldCBhcyBhIHRydWx5IE9TLWFic29sdXRlIHBhdGhcbiAgICAgICAgLy8gICAgKHNvbWUgcHJvamVjdHMgZG86IGltcG9ydCBGb28gZnJvbSBcIi9hYnNvbHV0ZS9wYXRoXCIuIFJhcmUgaW4gVFMsIGJ1dCBwb3NzaWJsZS4pXG4gICAgICAgIGlmIChzcGVjaWZpZXIuc3RhcnRzV2l0aChcIi9cIikpIHtcbiAgICAgICAgICAgIHJldHVybiBwYXRoLnJlc29sdmUoc3BlY2lmaWVyKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIDMpIE90aGVyd2lzZSwgaXQncyBhIGJhc2VVcmwtYmFzZWQgaW1wb3J0IChsaWtlIFwiQXNzZXRzL0V4cGVyaWVuY2UvTXlTY3JpcHRcIikuXG4gICAgICAgIC8vICAgIFNvIHdlIHRyZWF0IHRoYXQgYXMgW3Byb2plY3RSb290XS9Bc3NldHMvRXhwZXJpZW5jZS9NeVNjcmlwdFxuICAgICAgICByZXR1cm4gcGF0aC5yZXNvbHZlKHByb2plY3RSb290LCBzcGVjaWZpZXIpO1xuICAgIH1cblxuICAgIHByaXZhdGUgZ3JvdXBUcmFuc2Zvcm1lcnNCeVBoYXNlKCk6IHsgW3BoYXNlOiBudW1iZXJdOiB7IHBoYXNlOiBudW1iZXIsIHRyYW5zZm9ybWVyOiBJVHJhbnNmb3JtZXIgfVtdIH0ge1xuICAgICAgICByZXR1cm4gdGhpcy50cmFuc2Zvcm1lcnMucmVkdWNlKChhY2MsIGN1cnIpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHtwaGFzZX0gPSBjdXJyO1xuICAgICAgICAgICAgaWYgKCFhY2NbcGhhc2VdKSB7XG4gICAgICAgICAgICAgICAgYWNjW3BoYXNlXSA9IFtdO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYWNjW3BoYXNlXS5wdXNoKGN1cnIpO1xuICAgICAgICAgICAgcmV0dXJuIGFjYztcbiAgICAgICAgfSwge30gYXMgeyBbcGhhc2U6IG51bWJlcl06IHsgcGhhc2U6IG51bWJlciwgdHJhbnNmb3JtZXI6IElUcmFuc2Zvcm1lciB9W10gfSk7XG4gICAgfVxuXG4gICAgcHVibGljIHJ1blRyYW5zZm9ybWVycyhzb3VyY2VGaWxlOiBTb3VyY2VGaWxlKTogdm9pZCB7XG4gICAgICAgIC8vIEdyb3VwIHRyYW5zZm9ybWVycyBieSBwaGFzZVxuICAgICAgICBjb25zdCB0cmFuc2Zvcm1lcnNCeVBoYXNlID0gdGhpcy5ncm91cFRyYW5zZm9ybWVyc0J5UGhhc2UoKTtcblxuICAgICAgICAvLyBSdW4gdHJhbnNmb3JtZXJzIHBoYXNlIGJ5IHBoYXNlXG4gICAgICAgIGZvciAoY29uc3QgcGhhc2Ugb2YgT2JqZWN0LmtleXModHJhbnNmb3JtZXJzQnlQaGFzZSkuc29ydCgoYSwgYikgPT4gTnVtYmVyKGEpIC0gTnVtYmVyKGIpKSkge1xuICAgICAgICAgICAgY29uc3QgcGhhc2VOdW1iZXIgPSBOdW1iZXIocGhhc2UpO1xuICAgICAgICAgICAgY29uc3QgdHJhbnNmb3JtZXJzID0gdHJhbnNmb3JtZXJzQnlQaGFzZVtwaGFzZU51bWJlcl07XG4gICAgICAgICAgICBsZXQgcmV0cnlDb3VudCA9IDA7XG4gICAgICAgICAgICBsZXQgaGFzRm9yZ290dGVuTm9kZSA9IHRydWU7XG5cbiAgICAgICAgICAgIHdoaWxlIChoYXNGb3Jnb3R0ZW5Ob2RlKSB7XG4gICAgICAgICAgICAgICAgaGFzRm9yZ290dGVuTm9kZSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIHJldHJ5Q291bnQrKztcblxuICAgICAgICAgICAgICAgIC8vIENyZWF0ZSBhIGxpc3QgdG8gdHJhY2sgbm9kZXMgdG8gcHJvY2Vzc1xuICAgICAgICAgICAgICAgIGNvbnN0IG5vZGVzVG9Qcm9jZXNzID0gc291cmNlRmlsZS5nZXREZXNjZW5kYW50cygpO1xuXG4gICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBub2Rlc1RvUHJvY2Vzcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICBsZXQgbm9kZSA9IG5vZGVzVG9Qcm9jZXNzW2ldO1xuICAgICAgICAgICAgICAgICAgICBsZXQgbW9kaWZpZWROb2RlID0gbm9kZTtcblxuICAgICAgICAgICAgICAgICAgICBpZiAoaGFzRm9yZ290dGVuTm9kZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICB0cmFuc2Zvcm1lcnMuZm9yRWFjaCgoe3RyYW5zZm9ybWVyfSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobW9kaWZpZWROb2RlLndhc0ZvcmdvdHRlbigpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaGFzRm9yZ290dGVuTm9kZSA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIW1vZGlmaWVkTm9kZS53YXNGb3Jnb3R0ZW4oKSAmJiB0cmFuc2Zvcm1lci5ub2RlVHlwZXMuaW5jbHVkZXMobW9kaWZpZWROb2RlLmdldEtpbmQoKSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb2RpZmllZE5vZGUgPSB0cmFuc2Zvcm1lci50cmFuc2Zvcm1Ob2RlKG1vZGlmaWVkTm9kZSwgdGhpcy50cmFuc2Zvcm1hdGlvbkNvbnRleHQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChtb2RpZmllZE5vZGUgIT09IG5vZGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGFzRm9yZ290dGVuTm9kZSA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFVwZGF0ZSB0aGUgbm9kZSBpbiB0aGUgbGlzdCBpZiBpdCB3YXMgbW9kaWZpZWRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbm9kZXNUb1Byb2Nlc3NbaV0gPSBtb2RpZmllZE5vZGU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBpZiAoaGFzRm9yZ290dGVuTm9kZSkge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhgUGhhc2UgJHtwaGFzZU51bWJlcn06IFJldHJ5aW5nIHRyYW5zZm9ybWF0aW9uIGR1ZSB0byBmb3Jnb3R0ZW4gbm9kZXMuIEF0dGVtcHQgJHtyZXRyeUNvdW50fWApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgaW5pdGlhbGl6ZUNvbXBpbGVPdXRwdXQob3V0cHV0czogTWFwPFNvdXJjZUZpbGUsIEZpbGVDb21waWxlT3V0cHV0PiwgczogU291cmNlRmlsZSkge1xuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICAvL0dldCBnZW5pZXMgY3VzdG9tIGRpYWdub3N0aWNzIFxuICAgICAgICAgICAgY29uc3QgZXJyb3JzID0gdGhpcy5nZXRHZW5pZXNEaWFnbm9zdGljcyhzKTtcblxuICAgICAgICAgICAgLy9SdW4gdHJhbnNmb3JtYXRpb25zXG4gICAgICAgICAgICB0aGlzLnJ1blRyYW5zZm9ybWVycyhzKTtcblxuICAgICAgICAgICAgc29ydEltcG9ydHNBbmRWYXJzKHMpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvL0FkZCBwcmUgZW1pdCBkaWFnbm9zdGljcyBhZnRlciB0cmFuc2Zvcm1hdGlvbnMgc2luY2Ugd2UgaGFuZGxlIHRyYW5zZm9ybWluZyBcbiAgICAgICAgICAgIC8vYW55IGVycm9yIGluZHVjaW5nIGNvZGUuXG4gICAgICAgICAgICBlcnJvcnMucHVzaCguLi50aGlzLmdldERpYWdub3N0aWNzKHMpKTtcblxuICAgICAgICAgICAgaWYgKGVycm9ycy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgb3V0cHV0cy5zZXQocywge1xuICAgICAgICAgICAgICAgICAgICBGaWxlUGF0aDogcy5nZXRGaWxlUGF0aCgpLFxuICAgICAgICAgICAgICAgICAgICBJc1N1Y2Nlc3NmdWw6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICBFcnJvcnM6IGVycm9ycyxcbiAgICAgICAgICAgICAgICAgICAgSnNTb3VyY2U6IFwiXCIsICAvLyBDYXB0dXJlIHRoZSBlbWl0dGVkIEphdmFTY3JpcHRcbiAgICAgICAgICAgICAgICAgICAgSXNNb25vYmVoYXZpb3VyOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgSXNTY3JpcHRhYmxlT2JqOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgUHJvcGVydGllczogW10sXG4gICAgICAgICAgICAgICAgICAgIElkOiBzLmdldEZpbGVQYXRoKCksXG4gICAgICAgICAgICAgICAgICAgIERlZmF1bHRUeXBlTmFtZTogXCJcIixcbiAgICAgICAgICAgICAgICAgICAgSW5oZXJpdGFuY2VDaGFpbjogW10sXG4gICAgICAgICAgICAgICAgICAgIFN1cHBvcnRlZFVpRXZlbnRzOiBHZW5pZXNTY3JpcHRVaUV2ZW50cy5Ob25lLFxuICAgICAgICAgICAgICAgICAgICBSZWZlcmVuY2VkU3BlY2lmaWVyczogW11cbiAgICAgICAgICAgICAgICB9KVxuXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuXG5cbiAgICAgICAgICAgIC8vTWFyayBjbGFzcyB0eXBlXG4gICAgICAgICAgICBjb25zdCBkZWZhdWx0RXhwb3J0U3ltYm9sID0gcy5nZXREZWZhdWx0RXhwb3J0U3ltYm9sKClcbiAgICAgICAgICAgIGxldCBkZWZhdWx0RXhwb3J0ZWRDbGFzczogQ2xhc3NEZWNsYXJhdGlvbiB8IHVuZGVmaW5lZCA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgIGlmIChkZWZhdWx0RXhwb3J0U3ltYm9sKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZGVjbGFyYXRpb25zID0gZGVmYXVsdEV4cG9ydFN5bWJvbC5nZXREZWNsYXJhdGlvbnMoKTtcbiAgICAgICAgICAgICAgICBkZWZhdWx0RXhwb3J0ZWRDbGFzcyA9IGRlY2xhcmF0aW9ucy5maW5kKGRlY2wgPT4gZGVjbC5nZXRLaW5kKCkgPT09IHRzLlN5bnRheEtpbmQuQ2xhc3NEZWNsYXJhdGlvbikgYXMgQ2xhc3NEZWNsYXJhdGlvbjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgbGV0IGlzTW9ub2JlaGF2aW91ciA9IGZhbHNlO1xuICAgICAgICAgICAgbGV0IGlzU2NyaXB0YWJsZU9iaiA9IGZhbHNlO1xuICAgICAgICAgICAgbGV0IGRlZmF1bHRUeXBlTmFtZSA9IFwiXCI7XG4gICAgICAgICAgICBpZiAoZGVmYXVsdEV4cG9ydGVkQ2xhc3MgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIGlzTW9ub2JlaGF2aW91ciA9IGV4dGVuZHNNb25vQmVoYXZpb3VyKGRlZmF1bHRFeHBvcnRlZENsYXNzKTtcbiAgICAgICAgICAgICAgICBpc1NjcmlwdGFibGVPYmogPSBleHRlbmRzU2NyaXB0YWJsZU9iamVjdChkZWZhdWx0RXhwb3J0ZWRDbGFzcyk7XG4gICAgICAgICAgICAgICAgZGVmYXVsdFR5cGVOYW1lID0gZ2V0RnVsbFR5cGVOYW1lKGRlZmF1bHRFeHBvcnRlZENsYXNzLmdldFR5cGUoKSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vQ29sbGVjdCBwcm9wZXJ0aWVzXG4gICAgICAgICAgICBjb25zdCBwcm9wZXJ0aWVzOiBQcm9wZXJ0eUluZm9bXSA9IFtdO1xuICAgICAgICAgICAgbGV0IGluaGVyaXRhbmNlQ2hhaW46IHN0cmluZ1tdID0gW107XG4gICAgICAgICAgICBsZXQgc3VwcG9ydGVkVWlFdmVudHM6IEdlbmllc1NjcmlwdFVpRXZlbnRzID0gR2VuaWVzU2NyaXB0VWlFdmVudHMuTm9uZTtcblxuICAgICAgICAgICAgaWYgKGlzTW9ub2JlaGF2aW91ciB8fCBpc1NjcmlwdGFibGVPYmogJiYgZGVmYXVsdEV4cG9ydGVkQ2xhc3MpIHtcbiAgICAgICAgICAgICAgICBsZXQgYmFzZUNsYXNzID0gZGVmYXVsdEV4cG9ydGVkQ2xhc3M7XG5cbiAgICAgICAgICAgICAgICB3aGlsZSAoYmFzZUNsYXNzKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGJhc2VDbGFzc05hbWUgPSBiYXNlQ2xhc3MuZ2V0TmFtZSgpO1xuXG4gICAgICAgICAgICAgICAgICAgIGlmIChiYXNlQ2xhc3NOYW1lID09IE1vbm9iZWhhdmlvdXJUeXBlTmFtZSB8fCBiYXNlQ2xhc3NOYW1lID09IFNjcmlwdGFibGVPYmplY3RUeXBlTmFtZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICBwcm9wZXJ0aWVzLnVuc2hpZnQoLi4uZXh0cmFjdFByb3BlcnRpZXMoYmFzZUNsYXNzKSk7XG4gICAgICAgICAgICAgICAgICAgIGJhc2VDbGFzcyA9IGJhc2VDbGFzcy5nZXRCYXNlQ2xhc3MoKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBpbmhlcml0YW5jZUNoYWluID0gdHJhdmVyc2VQcm90b3R5cGVDaGFpbihkZWZhdWx0RXhwb3J0ZWRDbGFzcyEpO1xuXG4gICAgICAgICAgICAgICAgaWYgKGluaGVyaXRhbmNlQ2hhaW4/Lmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgaW5oZXJpdGFuY2VDaGFpbi5mb3JFYWNoKGYgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFVpSW50ZXJmYWNlVG9FbnVtTWFwLmhhcyhmKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN1cHBvcnRlZFVpRXZlbnRzIHw9IFVpSW50ZXJmYWNlVG9FbnVtTWFwLmdldChmKSE7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBDb2xsZWN0IGFueSBpbXBvcnRzIHRoYXQgbm93IHN0YXJ0IHdpdGggQGFzc2V0cy8gb3IgQGNvbS5nZW5pZXNcbiAgICAgICAgICAgIGNvbnN0IHJlZmVyZW5jZWRTcGVjaWZpZXJzID0gcy5nZXRJbXBvcnREZWNsYXJhdGlvbnMoKVxuICAgICAgICAgICAgICAgIC5tYXAoaW1wID0+IGltcC5nZXRNb2R1bGVTcGVjaWZpZXJWYWx1ZSgpKVxuICAgICAgICAgICAgICAgIC5maWx0ZXIobW9kdWxlU3BlY2lmaWVyID0+XG4gICAgICAgICAgICAgICAgICAgIG1vZHVsZVNwZWNpZmllci5zdGFydHNXaXRoKCdAYXNzZXRzLycpIHx8XG4gICAgICAgICAgICAgICAgICAgIG1vZHVsZVNwZWNpZmllci5zdGFydHNXaXRoKCdAY29tLmdlbmllcycpXG4gICAgICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgb3V0cHV0cy5zZXQocywge1xuICAgICAgICAgICAgICAgIEZpbGVQYXRoOiBzLmdldEZpbGVQYXRoKCksXG4gICAgICAgICAgICAgICAgSXNTdWNjZXNzZnVsOiBmYWxzZSxcbiAgICAgICAgICAgICAgICBFcnJvcnM6IGVycm9ycyxcbiAgICAgICAgICAgICAgICBKc1NvdXJjZTogXCJcIiwgIC8vIENhcHR1cmUgdGhlIGVtaXR0ZWQgSmF2YVNjcmlwdFxuICAgICAgICAgICAgICAgIElzTW9ub2JlaGF2aW91cjogaXNNb25vYmVoYXZpb3VyLFxuICAgICAgICAgICAgICAgIElzU2NyaXB0YWJsZU9iajogaXNTY3JpcHRhYmxlT2JqLFxuICAgICAgICAgICAgICAgIFByb3BlcnRpZXM6IHByb3BlcnRpZXMsXG4gICAgICAgICAgICAgICAgSWQ6IHMuZ2V0RmlsZVBhdGgoKSxcbiAgICAgICAgICAgICAgICBEZWZhdWx0VHlwZU5hbWU6IGRlZmF1bHRUeXBlTmFtZSxcbiAgICAgICAgICAgICAgICBJbmhlcml0YW5jZUNoYWluOiBpbmhlcml0YW5jZUNoYWluLFxuICAgICAgICAgICAgICAgIFN1cHBvcnRlZFVpRXZlbnRzOiBzdXBwb3J0ZWRVaUV2ZW50cyxcbiAgICAgICAgICAgICAgICBSZWZlcmVuY2VkU3BlY2lmaWVyczogcmVmZXJlbmNlZFNwZWNpZmllcnNcbiAgICAgICAgICAgIH0pXG5cbiAgICAgICAgfSBjYXRjaCAoZTogYW55KSB7XG4gICAgICAgICAgICBsZXQgZXJyb3JzID0gdGhpcy5nZXREaWFnbm9zdGljcyhzKSA/PyBbXTtcbiAgICAgICAgICAgIGVycm9ycy5wdXNoKGBUcmFuc2Zvcm1hdGlvbnMgRmFpbGVkOiAke2V9YCk7XG5cbiAgICAgICAgICAgIC8vVHJhbnNmb3JtYXRpb25zIHByb2JhYmx5IGZhaWxlZCBiZWNhdXNlIHRoZXJlIHdlcmUgZXJyb3JzIGluIHRoZSBmaWxlLlxuICAgICAgICAgICAgb3V0cHV0cy5zZXQocywge1xuICAgICAgICAgICAgICAgIEZpbGVQYXRoOiBzLmdldEZpbGVQYXRoKCksXG4gICAgICAgICAgICAgICAgSXNTdWNjZXNzZnVsOiBmYWxzZSxcbiAgICAgICAgICAgICAgICBFcnJvcnM6IGVycm9ycyxcbiAgICAgICAgICAgICAgICBKc1NvdXJjZTogXCJcIiwgIC8vIENhcHR1cmUgdGhlIGVtaXR0ZWQgSmF2YVNjcmlwdFxuICAgICAgICAgICAgICAgIElzTW9ub2JlaGF2aW91cjogZmFsc2UsXG4gICAgICAgICAgICAgICAgSXNTY3JpcHRhYmxlT2JqOiBmYWxzZSxcbiAgICAgICAgICAgICAgICBQcm9wZXJ0aWVzOiBbXSxcbiAgICAgICAgICAgICAgICBJZDogcy5nZXRGaWxlUGF0aCgpLFxuICAgICAgICAgICAgICAgIERlZmF1bHRUeXBlTmFtZTogXCJcIixcbiAgICAgICAgICAgICAgICBJbmhlcml0YW5jZUNoYWluOiBbXSxcbiAgICAgICAgICAgICAgICBTdXBwb3J0ZWRVaUV2ZW50czogR2VuaWVzU2NyaXB0VWlFdmVudHMuTm9uZSxcbiAgICAgICAgICAgICAgICBSZWZlcmVuY2VkU3BlY2lmaWVyczogW11cbiAgICAgICAgICAgIH0pXG5cbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgfVxuXG4gICAgcHJpdmF0ZSBlbWl0KG91dHB1dHM6IE1hcDxTb3VyY2VGaWxlLCBGaWxlQ29tcGlsZU91dHB1dD4sIHRyYW5zZm9ybWVkQ29kZU1hcDogTWFwPFNvdXJjZUZpbGUsIE1hZ2ljU3RyaW5nPiwgZmlsZTogU291cmNlRmlsZSkge1xuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICAvL1N0cmlwIGRlY29yYXRvcnNcbiAgICAgICAgICAgIGNvbnN0IGRlY29yYXRvcnNUb1JlbW92ZSA9IFtcbiAgICAgICAgICAgICAgICBOb25TZXJpYWxpemVkRGVjb3JhdG9yLFxuICAgICAgICAgICAgICAgIEhpZGVJbkluc3BlY3RvckRlY29yYXRvcixcbiAgICAgICAgICAgICAgICBTZXJpYWxpemVGaWVsZERlY29yYXRvcixcbiAgICAgICAgICAgICAgICBIZWFkZXJEZWNvcmF0b3IsXG4gICAgICAgICAgICAgICAgU3BhY2VEZWNvcmF0b3IsXG4gICAgICAgICAgICAgICAgVG9vbHRpcERlY29yYXRvclxuICAgICAgICAgICAgXVxuXG4gICAgICAgICAgICBjb25zdCBkZWNvcmF0b3JzID0gZmlsZS5nZXREZXNjZW5kYW50c09mS2luZChTeW50YXhLaW5kLkRlY29yYXRvcik7XG4gICAgICAgICAgICByZW1vdmVEZWNvcmF0b3JzKGRlY29yYXRvcnMsIGRlY29yYXRvciA9PlxuICAgICAgICAgICAgICAgIGRlY29yYXRvcnNUb1JlbW92ZS5pbmNsdWRlcyhkZWNvcmF0b3IuZ2V0TmFtZSgpKVxuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy9FbWl0IGFuZCByZXR1cm4gb3V0cHV0XG4gICAgICAgICAgICBjb25zdCBvdXRwdXQgPSBmaWxlLmdldEVtaXRPdXRwdXQoKTtcbiAgICAgICAgICAgIGxldCBqc1NvdXJjZSA9IG91dHB1dC5nZXRPdXRwdXRGaWxlcygpWzBdLmdldFRleHQoKTtcbiAgICAgICAgICAgIGpzU291cmNlID0gdGhpcy5yZW1hcFNvdXJjZXMoanNTb3VyY2UsIGZpbGUsIHRyYW5zZm9ybWVkQ29kZU1hcCk7XG5cbiAgICAgICAgICAgIGxldCBjb21waWxlT3V0cHV0ID0gb3V0cHV0cy5nZXQoZmlsZSkhO1xuICAgICAgICAgICAgbGV0IGFsbEVycm9ycyA9IGNvbXBpbGVPdXRwdXQuRXJyb3JzO1xuICAgICAgICAgICAgY29tcGlsZU91dHB1dC5Jc1N1Y2Nlc3NmdWwgPSBhbGxFcnJvcnMgPT09IHVuZGVmaW5lZCB8fCBhbGxFcnJvcnMubGVuZ3RoID09PSAwO1xuICAgICAgICAgICAgY29tcGlsZU91dHB1dC5Kc1NvdXJjZSA9IGpzU291cmNlO1xuICAgICAgICB9IGNhdGNoIChlOiBhbnkpIHtcbiAgICAgICAgICAgIGxldCBjb21waWxlT3V0cHV0ID0gb3V0cHV0cy5nZXQoZmlsZSk7XG5cbiAgICAgICAgICAgIGlmICghY29tcGlsZU91dHB1dCkge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoIWNvbXBpbGVPdXRwdXQuRXJyb3JzKSB7XG4gICAgICAgICAgICAgICAgY29tcGlsZU91dHB1dC5FcnJvcnMgPSBbZV07XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGNvbXBpbGVPdXRwdXQuRXJyb3JzLnB1c2goYENvbXBpbGF0aW9uIEZhaWxlZDogJHtlfWApO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBjb21waWxlT3V0cHV0LklzU3VjY2Vzc2Z1bCA9IGZhbHNlO1xuICAgICAgICAgICAgY29tcGlsZU91dHB1dC5Kc1NvdXJjZSA9IFwiXCI7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKlxuICAgICAqIFJlbWFwIGpzIHNvdXJjZSBtYXAgdG8gdGhlIG9yaWdpbmFsIHRzIHNvdXJjZSBjb2RlXG4gICAgICovXG4gICAgcHJpdmF0ZSByZW1hcFNvdXJjZXMoZW1pdHRlZEpzOiBzdHJpbmcsIGZpbGU6IFNvdXJjZUZpbGUsIHRyYW5zZm9ybWVkQ29kZU1hcDogTWFwPFNvdXJjZUZpbGUsIE1hZ2ljU3RyaW5nPikge1xuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBsZXQgdHJhbnNmb3JtZWRDb2RlID0gdHJhbnNmb3JtZWRDb2RlTWFwLmdldChmaWxlKSE7XG5cbiAgICAgICAgICAgIC8vR2VuZXJhdGUgbWFwcGluZyBmcm9tIG9yaWdpbiB0cyA8PiBmaW5hbCB0c1xuICAgICAgICAgICAgbGV0IG9yaWdpblRvVHJhbnNmb3JtZWRTb3VyY2VNYXAgPSB0cmFuc2Zvcm1lZENvZGUuZ2VuZXJhdGVNYXAoe1xuICAgICAgICAgICAgICAgIHNvdXJjZTogZmlsZS5nZXRCYXNlTmFtZSgpLFxuICAgICAgICAgICAgICAgIGZpbGU6IGZpbGUuZ2V0QmFzZU5hbWUoKSxcbiAgICAgICAgICAgICAgICBpbmNsdWRlQ29udGVudDogZmFsc2UsXG4gICAgICAgICAgICAgICAgaGlyZXM6IHRydWVcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBjb25zdCBzb3VyY2VNYXBDb21tZW50UmVnZXggPSAvXFwvXFwvIyBzb3VyY2VNYXBwaW5nVVJMPWRhdGE6YXBwbGljYXRpb25cXC9qc29uKD86O2NoYXJzZXQ9dXRmLTgpPztiYXNlNjQsKFtBLVphLXowLTkrLz1dKykvO1xuICAgICAgICAgICAgY29uc3QgbWF0Y2ggPSBlbWl0dGVkSnMubWF0Y2goc291cmNlTWFwQ29tbWVudFJlZ2V4KTtcblxuICAgICAgICAgICAgaWYgKCFtYXRjaCkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIk5vIGlubGluZSBzb3VyY2UgbWFwIGZvdW5kIGluIHRoZSBKUyBvdXRwdXQuXCIpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBjb25zdCBiYXNlNjRNYXAgPSBtYXRjaFsxXTtcbiAgICAgICAgICAgIGNvbnN0IHRzVG9Kc01hcEpzb24gPSBCdWZmZXIuZnJvbShiYXNlNjRNYXAsICdiYXNlNjQnKS50b1N0cmluZygndXRmOCcpO1xuICAgICAgICAgICAgY29uc3QgdHNUb0pzTWFwID0gSlNPTi5wYXJzZSh0c1RvSnNNYXBKc29uKTtcblxuICAgICAgICAgICAgY29uc3QgcmVtYXBwZWQgPSByZW1hcHBpbmcoXG4gICAgICAgICAgICAgICAgW3RzVG9Kc01hcCwgSlNPTi5zdHJpbmdpZnkob3JpZ2luVG9UcmFuc2Zvcm1lZFNvdXJjZU1hcCldLCAoKSA9PiBudWxsXG4gICAgICAgICAgICApO1xuXG4gICAgICAgICAgICBjb25zdCBmaW5hbE1hcEpzb24gPSBKU09OLnN0cmluZ2lmeShyZW1hcHBlZCk7XG4gICAgICAgICAgICBjb25zdCBmaW5hbE1hcEJhc2U2NCA9IEJ1ZmZlci5mcm9tKGZpbmFsTWFwSnNvbiwgJ3V0ZjgnKS50b1N0cmluZygnYmFzZTY0Jyk7XG4gICAgICAgICAgICBjb25zdCBpbmxpbmVGaW5hbE1hcCA9IGBkYXRhOmFwcGxpY2F0aW9uL2pzb247Y2hhcnNldD11dGYtODtiYXNlNjQsJHtmaW5hbE1hcEJhc2U2NH1gO1xuXG4gICAgICAgICAgICBjb25zdCBqc091dHB1dFdpdGhvdXRNYXAgPSBlbWl0dGVkSnMucmVwbGFjZShzb3VyY2VNYXBDb21tZW50UmVnZXgsICcnKS50cmltKCk7XG4gICAgICAgICAgICByZXR1cm4gYCR7anNPdXRwdXRXaXRob3V0TWFwfVxcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPSR7aW5saW5lRmluYWxNYXB9YDtcbiAgICAgICAgfSBjYXRjaCAoZTogYW55KSB7XG4gICAgICAgICAgICAvL0ZhaWxlZCB0byByZW1hcCwgbG9nIGFuZCByZXR1cm4uXG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKGUpO1xuICAgICAgICAgICAgcmV0dXJuIGVtaXR0ZWRKcztcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgZ2V0R2VuaWVzRGlhZ25vc3RpY3Moc291cmNlRmlsZTogU291cmNlRmlsZSk6IHN0cmluZ1tdIHtcbiAgICAgICAgY29uc3QgZ2VuaWVzRGlhZ25vc3RpY3MgPSBnZXRHZW5pZXNTZW1hbnRpY0RpYWdub3N0aWNzKHNvdXJjZUZpbGUsIHRoaXMucHJvamVjdC5nZXRUeXBlQ2hlY2tlcigpKTtcblxuICAgICAgICByZXR1cm4gZ2VuaWVzRGlhZ25vc3RpY3MubWFwKGRpYWdub3N0aWMgPT4ge1xuICAgICAgICAgICAgY29uc3Qgc3RhcnQgPSBkaWFnbm9zdGljLnN0YXJ0ID8/IDA7XG4gICAgICAgICAgICBjb25zdCB7bGluZSwgY29sdW1ufSA9IHNvdXJjZUZpbGUuZ2V0TGluZUFuZENvbHVtbkF0UG9zKHN0YXJ0KTtcbiAgICAgICAgICAgIGNvbnN0IG1lc3NhZ2UgPSB0aGlzLmZsYXR0ZW5EaWFnbm9zdGljTWVzc2FnZVRleHQoZGlhZ25vc3RpYy5tZXNzYWdlVGV4dCk7XG4gICAgICAgICAgICByZXR1cm4gYCR7c291cmNlRmlsZS5nZXRGaWxlUGF0aCgpfSAoJHtsaW5lfSwke2NvbHVtbn0pOiAke21lc3NhZ2V9YDtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBnZXREaWFnbm9zdGljcyhzb3VyY2VGaWxlOiBTb3VyY2VGaWxlKTogc3RyaW5nW10ge1xuICAgICAgICBjb25zdCBwcmVFbWl0RGlhZ25vc3RpY3MgPSBzb3VyY2VGaWxlLmdldFByZUVtaXREaWFnbm9zdGljcygpLm1hcChkaWFnID0+IGRpYWcuY29tcGlsZXJPYmplY3QpO1xuXG4gICAgICAgIHJldHVybiBwcmVFbWl0RGlhZ25vc3RpY3MubWFwKGRpYWdub3N0aWMgPT4ge1xuICAgICAgICAgICAgY29uc3Qgc3RhcnQgPSBkaWFnbm9zdGljLnN0YXJ0ID8/IDA7XG4gICAgICAgICAgICBjb25zdCB7bGluZSwgY29sdW1ufSA9IHNvdXJjZUZpbGUuZ2V0TGluZUFuZENvbHVtbkF0UG9zKHN0YXJ0KTtcbiAgICAgICAgICAgIGNvbnN0IG1lc3NhZ2UgPSB0aGlzLmZsYXR0ZW5EaWFnbm9zdGljTWVzc2FnZVRleHQoZGlhZ25vc3RpYy5tZXNzYWdlVGV4dCk7XG4gICAgICAgICAgICByZXR1cm4gYCR7c291cmNlRmlsZS5nZXRGaWxlUGF0aCgpfSAoJHtsaW5lfSwke2NvbHVtbn0pOiAke21lc3NhZ2V9YDtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBmbGF0dGVuRGlhZ25vc3RpY01lc3NhZ2VUZXh0KG1lc3NhZ2VUZXh0OiBzdHJpbmcgfCB0cy5EaWFnbm9zdGljTWVzc2FnZUNoYWluKTogc3RyaW5nIHtcbiAgICAgICAgaWYgKHR5cGVvZiBtZXNzYWdlVGV4dCA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgIHJldHVybiBtZXNzYWdlVGV4dDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiB0cy5mbGF0dGVuRGlhZ25vc3RpY01lc3NhZ2VUZXh0KG1lc3NhZ2VUZXh0LCAnXFxuJyk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcml2YXRlIGNvbGxlY3RGaWxlcyhmaWxlOiBTb3VyY2VGaWxlLCBjb2xsZWN0ZWQ6IFNldDxTb3VyY2VGaWxlPiwgcHJvY2Vzc2VkOiBTZXQ8c3RyaW5nPiwgZGVwZW5kZW5jeUdyYXBoOiBNYXA8U291cmNlRmlsZSwgU2V0PFNvdXJjZUZpbGU+Pikge1xuICAgICAgICBjb25zdCBmaWxlUGF0aCA9IGZpbGUuZ2V0RmlsZVBhdGgoKTtcbiAgICAgICAgaWYgKHByb2Nlc3NlZC5oYXMoZmlsZVBhdGgpKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBwcm9jZXNzZWQuYWRkKGZpbGVQYXRoKTtcbiAgICAgICAgY29sbGVjdGVkLmFkZChmaWxlKTtcblxuICAgICAgICAvLyBJbml0aWFsaXplIGRlcGVuZGVuY2llcyBmb3IgdGhpcyBmaWxlXG4gICAgICAgIGlmICghZGVwZW5kZW5jeUdyYXBoLmhhcyhmaWxlKSkge1xuICAgICAgICAgICAgZGVwZW5kZW5jeUdyYXBoLnNldChmaWxlLCBuZXcgU2V0PFNvdXJjZUZpbGU+KCkpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gUHJvY2VzcyByZWZlcmVuY2VkIGZpbGVzIHJlY3Vyc2l2ZWx5XG4gICAgICAgIGZpbGUuZ2V0UmVmZXJlbmNpbmdTb3VyY2VGaWxlcygpLmZvckVhY2gocmVmRmlsZSA9PiB7XG4gICAgICAgICAgICB0aGlzLmNvbGxlY3RGaWxlcyhyZWZGaWxlLCBjb2xsZWN0ZWQsIHByb2Nlc3NlZCwgZGVwZW5kZW5jeUdyYXBoKTtcblxuICAgICAgICAgICAgLy8gQWRkIGRlcGVuZGVuY3lcbiAgICAgICAgICAgIGlmICghZGVwZW5kZW5jeUdyYXBoLmhhcyhyZWZGaWxlKSkge1xuICAgICAgICAgICAgICAgIGRlcGVuZGVuY3lHcmFwaC5zZXQocmVmRmlsZSwgbmV3IFNldDxTb3VyY2VGaWxlPigpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGRlcGVuZGVuY3lHcmFwaC5nZXQocmVmRmlsZSkhLmFkZChmaWxlKTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSB0b3BvbG9naWNhbFNvcnQoZmlsZXM6IFNvdXJjZUZpbGVbXSwgZGVwZW5kZW5jeUdyYXBoOiBNYXA8U291cmNlRmlsZSwgU2V0PFNvdXJjZUZpbGU+Pik6IFNvdXJjZUZpbGVbXSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy50b3BvbG9naWNhbFNvcnRXaXRoVGFyamFuKGZpbGVzLCBkZXBlbmRlbmN5R3JhcGgpO1xuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcihgVG9wb2xvZ2ljYWwgU29ydCBGYWlsZWQ6ICR7ZXJyb3J9YCk7XG4gICAgICAgICAgICByZXR1cm4gW107IC8vIEhhbmRsZSBhcHByb3ByaWF0ZWx5XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcml2YXRlIHRvcG9sb2dpY2FsU29ydFdpdGhDeWNsZXMoZmlsZXM6IFNvdXJjZUZpbGVbXSwgZGVwZW5kZW5jeUdyYXBoOiBNYXA8U291cmNlRmlsZSwgU2V0PFNvdXJjZUZpbGU+Pik6IFNvdXJjZUZpbGVbXVtdIHtcbiAgICAgICAgY29uc3QgaW5kZXhNYXAgPSBuZXcgTWFwPFNvdXJjZUZpbGUsIG51bWJlcj4oKTtcbiAgICAgICAgY29uc3QgbG93TGlua01hcCA9IG5ldyBNYXA8U291cmNlRmlsZSwgbnVtYmVyPigpO1xuICAgICAgICBjb25zdCBpbmRleCA9IHt2YWx1ZTogMH07XG4gICAgICAgIGNvbnN0IHN0YWNrOiBTb3VyY2VGaWxlW10gPSBbXTtcbiAgICAgICAgY29uc3Qgb25TdGFjayA9IG5ldyBTZXQ8U291cmNlRmlsZT4oKTtcbiAgICAgICAgY29uc3Qgc2NjTGlzdDogU291cmNlRmlsZVtdW10gPSBbXTtcblxuICAgICAgICBjb25zdCBzdHJvbmdDb25uZWN0ID0gKGZpbGU6IFNvdXJjZUZpbGUpID0+IHtcbiAgICAgICAgICAgIGluZGV4TWFwLnNldChmaWxlLCBpbmRleC52YWx1ZSk7XG4gICAgICAgICAgICBsb3dMaW5rTWFwLnNldChmaWxlLCBpbmRleC52YWx1ZSk7XG4gICAgICAgICAgICBpbmRleC52YWx1ZSsrO1xuICAgICAgICAgICAgc3RhY2sucHVzaChmaWxlKTtcbiAgICAgICAgICAgIG9uU3RhY2suYWRkKGZpbGUpO1xuXG4gICAgICAgICAgICBjb25zdCBkZXBlbmRlbmNpZXMgPSBkZXBlbmRlbmN5R3JhcGguZ2V0KGZpbGUpIHx8IG5ldyBTZXQ8U291cmNlRmlsZT4oKTtcbiAgICAgICAgICAgIGRlcGVuZGVuY2llcy5mb3JFYWNoKGRlcCA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKCFpbmRleE1hcC5oYXMoZGVwKSkge1xuICAgICAgICAgICAgICAgICAgICBzdHJvbmdDb25uZWN0KGRlcCk7XG4gICAgICAgICAgICAgICAgICAgIGxvd0xpbmtNYXAuc2V0KGZpbGUsIE1hdGgubWluKGxvd0xpbmtNYXAuZ2V0KGZpbGUpISwgbG93TGlua01hcC5nZXQoZGVwKSEpKTtcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKG9uU3RhY2suaGFzKGRlcCkpIHtcbiAgICAgICAgICAgICAgICAgICAgbG93TGlua01hcC5zZXQoZmlsZSwgTWF0aC5taW4obG93TGlua01hcC5nZXQoZmlsZSkhLCBpbmRleE1hcC5nZXQoZGVwKSEpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgaWYgKGxvd0xpbmtNYXAuZ2V0KGZpbGUpID09PSBpbmRleE1hcC5nZXQoZmlsZSkpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBzY2M6IFNvdXJjZUZpbGVbXSA9IFtdO1xuICAgICAgICAgICAgICAgIGxldCB3OiBTb3VyY2VGaWxlIHwgdW5kZWZpbmVkO1xuICAgICAgICAgICAgICAgIGRvIHtcbiAgICAgICAgICAgICAgICAgICAgdyA9IHN0YWNrLnBvcCgpO1xuICAgICAgICAgICAgICAgICAgICBpZiAodyA9PT0gdW5kZWZpbmVkKSBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgb25TdGFjay5kZWxldGUodyk7XG4gICAgICAgICAgICAgICAgICAgIHNjYy5wdXNoKHcpO1xuICAgICAgICAgICAgICAgIH0gd2hpbGUgKHcgIT09IGZpbGUpO1xuICAgICAgICAgICAgICAgIHNjY0xpc3QucHVzaChzY2MpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICAgIGZpbGVzLmZvckVhY2goZmlsZSA9PiB7XG4gICAgICAgICAgICBpZiAoIWluZGV4TWFwLmhhcyhmaWxlKSkge1xuICAgICAgICAgICAgICAgIHN0cm9uZ0Nvbm5lY3QoZmlsZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHJldHVybiBzY2NMaXN0O1xuICAgIH1cblxuICAgIHByaXZhdGUgdG9wb2xvZ2ljYWxTb3J0V2l0aFRhcmphbihmaWxlczogU291cmNlRmlsZVtdLCBkZXBlbmRlbmN5R3JhcGg6IE1hcDxTb3VyY2VGaWxlLCBTZXQ8U291cmNlRmlsZT4+KTogU291cmNlRmlsZVtdIHtcbiAgICAgICAgY29uc3Qgc2NjTGlzdCA9IHRoaXMudG9wb2xvZ2ljYWxTb3J0V2l0aEN5Y2xlcyhmaWxlcywgZGVwZW5kZW5jeUdyYXBoKTtcbiAgICAgICAgY29uc3Qgc29ydGVkOiBTb3VyY2VGaWxlW10gPSBbXTtcblxuICAgICAgICAvLyBQcm9jZXNzIFNDQ3MgaW4gcmV2ZXJzZSBvcmRlclxuICAgICAgICBmb3IgKGxldCBpID0gc2NjTGlzdC5sZW5ndGggLSAxOyBpID49IDA7IGktLSkge1xuICAgICAgICAgICAgc29ydGVkLnB1c2goLi4uc2NjTGlzdFtpXSk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gc29ydGVkO1xuICAgIH1cblxuXG4gICAgLyoqXG4gICAgICogQWZ0ZXIgd2UgZG8gc291cmNlIGNvZGUgdHJhbnNmb3JtYXRpb25zIGZvciB1bml0eSBzdXBwb3J0LFxuICAgICAqIHRoZSBmaW5hbCBBU1QgY2FuIGxvb2sgdmVyeSBkaWZmZXJlbnQgdGhhbiB0aGUgb3JpZ2luYWwsIHRoaXNcbiAgICAgKiBtZXNzZXMgdXAgc291cmNlIG1hcHMuIFRvIGZpeCwgd2UgbmVlZCB0byB1c2UgMiBsaWJyYXJpZXNcbiAgICAgKiBNYWdpY1N0cmluZyAtPiB0YWtlcyBhbiBvcmlnaW4gc3RyaW5nIGFuZCBhbGxvd3MgeW91IHRvIHRyYW5zZm9ybSBhbmQgaXQgdHJhY2tzIHRoZSBtYXBwaW5nXG4gICAgICogUmVtYXBwZXIgLT4gdHJhY2VzIG1hcHBpbmcgdGhyb3VnaCBtdWx0aXBsZSBmb3JtcyBhbmQgcmV0dXJucyBhIG1hcHBpbmcgdGhhdCBwb2ludHMgdG8gb3JpZ2luXG4gICAgICpcbiAgICAgKiBUaGlzIGZ1bmN0aW9uIGhhbmRsZXMgYXBwbHlpbmcgZGlmZnMgZnJvbSB0aGUgb3JpZ2luYWwgc3RyaW5nIHRvIHRoZSBmaW5hbCB0cmFuc2Zvcm1lZCBzb3VyY2VmaWxlIHN0cmluZ1xuICAgICAqIGFuZCB3ZSB1c2UgdGhlIG91dHB1dCBNYWdpY1N0cmluZyB0byBnZW5lcmF0ZSBtYXBwaW5nIGZyb20gb3JpZ2luIFRTIDw+IGZpbmFsIFRTXG4gICAgICovXG4gICAgcHJpdmF0ZSBhcHBseVRyYW5zZm9ybWF0aW9uRGlmZnMob3JpZ2luYWxGaWxlU3RyaW5nOiBNYWdpY1N0cmluZywgczogU291cmNlRmlsZSkge1xuICAgICAgICBjb25zdCBkbXAgPSBuZXcgZGlmZl9tYXRjaF9wYXRjaCgpO1xuICAgICAgICBjb25zdCBvcmlnaW5hbFRleHQgPSBvcmlnaW5hbEZpbGVTdHJpbmcub3JpZ2luYWw7XG4gICAgICAgIGNvbnN0IHRyYW5zZm9ybWVkVGV4dCA9IHMuZ2V0RnVsbFRleHQoKTtcblxuICAgICAgICAvLyBHZXQgcmF3IGRpZmZzIHdpdGhvdXQgc2VtYW50aWMgY2xlYW51cFxuICAgICAgICBjb25zdCBkaWZmcyA9IGRtcC5kaWZmX21haW4ob3JpZ2luYWxUZXh0LCB0cmFuc2Zvcm1lZFRleHQpO1xuXG4gICAgICAgIGxldCBvcmlnaW5hbFBvcyA9IDA7XG4gICAgICAgIGxldCB0cmFuc2Zvcm1lZFBvcyA9IDA7XG5cbiAgICAgICAgZm9yIChjb25zdCBbb3AsIHRleHRdIG9mIGRpZmZzKSB7XG4gICAgICAgICAgICBpZiAob3AgPT09IDApIHsgLy8gVW5jaGFuZ2VkXG4gICAgICAgICAgICAgICAgb3JpZ2luYWxQb3MgKz0gdGV4dC5sZW5ndGg7XG4gICAgICAgICAgICAgICAgdHJhbnNmb3JtZWRQb3MgKz0gdGV4dC5sZW5ndGg7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKG9wID09PSAtMSkgeyAvLyBEZWxldGlvblxuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIG9yaWdpbmFsRmlsZVN0cmluZy5yZW1vdmUob3JpZ2luYWxQb3MsIG9yaWdpbmFsUG9zICsgdGV4dC5sZW5ndGgpO1xuICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGBFcnJvciByZW1vdmluZyB0ZXh0IGF0IFske29yaWdpbmFsUG9zfSwgJHtvcmlnaW5hbFBvcyArIHRleHQubGVuZ3RofSk6ICR7ZXJyfWApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBvcmlnaW5hbFBvcyArPSB0ZXh0Lmxlbmd0aDtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAob3AgPT09IDEpIHsgLy8gSW5zZXJ0aW9uXG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgb3JpZ2luYWxGaWxlU3RyaW5nLmFwcGVuZFJpZ2h0KG9yaWdpbmFsUG9zLCB0ZXh0KTtcbiAgICAgICAgICAgICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihgRXJyb3IgaW5zZXJ0aW5nIHRleHQgYXQgJHtvcmlnaW5hbFBvc306ICR7ZXJyfWApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0cmFuc2Zvcm1lZFBvcyArPSB0ZXh0Lmxlbmd0aDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbn1cblxuXG4iLCJpbXBvcnQge1xuICAgIENsYXNzRGVjbGFyYXRpb24sXG4gICAgTWV0aG9kRGVjbGFyYXRpb24sXG4gICAgTm9kZSxcbiAgICBPcHRpb25hbEtpbmQsXG4gICAgU291cmNlRmlsZSxcbiAgICBTeW50YXhLaW5kLFxuICAgIFR5cGUsXG4gICAgVmFyaWFibGVEZWNsYXJhdGlvbktpbmQsXG4gICAgVmFyaWFibGVTdGF0ZW1lbnRTdHJ1Y3R1cmVcbn0gZnJvbSBcInRzLW1vcnBoXCI7XG5pbXBvcnQge1xuICAgIGNvbXBvbmVudE1ldGhvZHMsXG4gICAgR2VuaWVzSW5zdGFuY2VQcm9wTmFtZSxcbiAgICBnZXRGdWxsVHlwZU5hbWUsXG4gICAgZ2V0SXNVbml0eUFQSURlY2xhcmF0aW9uLFxuICAgIGdldElzVW5pdHlBUElUeXBlLFxuICAgIGdldFR5cGVOYW1lQW5kRW5zdXJlSW1wb3J0ZWQsIGluc2VydFZhcmlhYmxlU3RhdGVtZW50cyxcbiAgICBpc0dlbmllc1NjcmlwdFR5cGUsXG4gICAgaXNPckluaGVyaXRzRnJvbUdhbWVPYmplY3RPckNvbXBvbmVudFxufSBmcm9tIFwiLi4vQ29tcGlsZXJVdGlsc1wiO1xuaW1wb3J0IHsgVHJhbnNmb3JtYXRpb25Db250ZXh0IH0gZnJvbSBcIi4vVHJhbnNmb3JtYXRpb25Db250ZXh0XCI7XG5pbXBvcnQgeyBJVHJhbnNmb3JtZXIgfSBmcm9tIFwiLi9JVHJhbnNmb3JtZXJcIjtcblxuZXhwb3J0IGNsYXNzIEdlbmVyaWNNZXRob2RUcmFuc2Zvcm1lciBpbXBsZW1lbnRzIElUcmFuc2Zvcm1lciB7XG4gICAgbm9kZVR5cGVzID0gW1N5bnRheEtpbmQuQ2FsbEV4cHJlc3Npb25dO1xuXG4gICAgcHJpdmF0ZSBzb3VyY2VGaWxlR2VuZXJpY01hcDogTWFwPFNvdXJjZUZpbGUsIE1hcDxzdHJpbmcsIHN0cmluZz4+ID0gbmV3IE1hcCgpO1xuXG4gICAgdHJhbnNmb3JtTm9kZShub2RlOiBOb2RlLCB0cmFuc2Zvcm1hdGlvbkNvbnRleHQ6IFRyYW5zZm9ybWF0aW9uQ29udGV4dCk6IE5vZGUge1xuICAgICAgICBsZXQgbmV3Tm9kZSA9IG5vZGU7XG5cbiAgICAgICAgaWYgKG5vZGUuZ2V0S2luZCgpID09PSBTeW50YXhLaW5kLkNhbGxFeHByZXNzaW9uKSB7XG4gICAgICAgICAgICBjb25zdCBjYWxsRXhwcmVzc2lvbiA9IG5vZGUuYXNLaW5kT3JUaHJvdyhTeW50YXhLaW5kLkNhbGxFeHByZXNzaW9uKTtcbiAgICAgICAgICAgIGNvbnN0IGV4cHJlc3Npb24gPSBjYWxsRXhwcmVzc2lvbi5nZXRFeHByZXNzaW9uKCk7XG5cbiAgICAgICAgICAgIGNvbnN0IG1ldGhvZE5hbWVOb2RlID0gZXhwcmVzc2lvbi5nZXRMYXN0Q2hpbGRCeUtpbmQoU3ludGF4S2luZC5JZGVudGlmaWVyKTtcbiAgICAgICAgICAgIGlmIChtZXRob2ROYW1lTm9kZSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IG1ldGhvZE5hbWUgPSBtZXRob2ROYW1lTm9kZS5nZXRUZXh0KCk7XG4gICAgICAgICAgICAgICAgaWYgKGNvbXBvbmVudE1ldGhvZHMuaGFzKG1ldGhvZE5hbWUpKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGZpcnN0Q2hpbGQgPSBleHByZXNzaW9uLmdldEZpcnN0Q2hpbGQoKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGZpcnN0Q2hpbGQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGNsYXNzVHlwZSA9IHRyYW5zZm9ybWF0aW9uQ29udGV4dC50eXBlQ2hlY2tlci5nZXRUeXBlQXRMb2NhdGlvbihmaXJzdENoaWxkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpc09ySW5oZXJpdHNGcm9tR2FtZU9iamVjdE9yQ29tcG9uZW50KGNsYXNzVHlwZSwgdHJhbnNmb3JtYXRpb25Db250ZXh0KSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXdOb2RlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoZXhwcmVzc2lvbi5nZXRLaW5kKCkgPT09IFN5bnRheEtpbmQuUHJvcGVydHlBY2Nlc3NFeHByZXNzaW9uKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgcHJvcGVydHlBY2Nlc3MgPSBleHByZXNzaW9uLmFzS2luZE9yVGhyb3coU3ludGF4S2luZC5Qcm9wZXJ0eUFjY2Vzc0V4cHJlc3Npb24pO1xuICAgICAgICAgICAgICAgIGxldCBtZXRob2ROYW1lID0gcHJvcGVydHlBY2Nlc3MuZ2V0TmFtZSgpO1xuICAgICAgICAgICAgICAgIGxldCBtZXRob2REZWNsYXJhdGlvbiA6IE1ldGhvZERlY2xhcmF0aW9uIHwgdW5kZWZpbmVkID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgICAgIGNvbnN0IG1ldGhvZFN5bWJvbCA9IHByb3BlcnR5QWNjZXNzLmdldFN5bWJvbCgpO1xuICAgICAgICAgICAgICAgIGNvbnN0IGluc3RhbmNlID0gcHJvcGVydHlBY2Nlc3MuZ2V0RXhwcmVzc2lvbigpO1xuICAgICAgICAgICAgICAgIGNvbnN0IGluc3RhbmNlVHlwZSA9IGluc3RhbmNlLmdldFR5cGUoKTtcblxuICAgICAgICAgICAgICAgIGlmICghbWV0aG9kU3ltYm9sKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXdOb2RlO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIC8vIFJldHJpZXZlIG92ZXJsb2FkIGluZm8gZnJvbSBUcmFuc2Zvcm1hdGlvbkNvbnRleHRcbiAgICAgICAgICAgICAgICBjb25zdCBvdmVybG9hZEluZm8gPSB0cmFuc2Zvcm1hdGlvbkNvbnRleHQuZ2V0U3dhcE92ZXJsb2FkKGNhbGxFeHByZXNzaW9uKTtcbiAgICAgICAgICAgICAgICBpZiAob3ZlcmxvYWRJbmZvKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIFVzZSB0aGUgc3dhcHBlZCBtZXRob2QgbmFtZVxuICAgICAgICAgICAgICAgICAgICBtZXRob2ROYW1lID0gb3ZlcmxvYWRJbmZvLm1ldGhvZFN3YXBWYWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgbWV0aG9kRGVjbGFyYXRpb24gPSBvdmVybG9hZEluZm8uZGVjbGFyYXRpb247XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaWYobWV0aG9kRGVjbGFyYXRpb24gPT09IHVuZGVmaW5lZClcbiAgICAgICAgICAgICAgICB7XG5cbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZGVjbGFyYXRpb25zID0gbWV0aG9kU3ltYm9sLmdldERlY2xhcmF0aW9ucygpO1xuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgaWYoZGVjbGFyYXRpb25zLmxlbmd0aCA+IDApXG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1ldGhvZERlY2xhcmF0aW9uID0gZGVjbGFyYXRpb25zWzBdIGFzIE1ldGhvZERlY2xhcmF0aW9uO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ld05vZGU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBpZiAobWV0aG9kRGVjbGFyYXRpb24pIHtcblxuICAgICAgICAgICAgICAgICAgICBpZiAoIWdldElzVW5pdHlBUElEZWNsYXJhdGlvbihtZXRob2REZWNsYXJhdGlvbikpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXdOb2RlO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZGVjbGFyaW5nVHlwZSA9IG1ldGhvZERlY2xhcmF0aW9uLmdldFBhcmVudCgpLmdldFR5cGUoKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgYXJncyA9IGNhbGxFeHByZXNzaW9uLmdldEFyZ3VtZW50cygpO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCB0eXBlQXJnc05vZGVzID0gY2FsbEV4cHJlc3Npb24uZ2V0VHlwZUFyZ3VtZW50cygpO1xuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVBcmdzTm9kZXMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgc291cmNlRmlsZSA9IG5vZGUuZ2V0U291cmNlRmlsZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCF0aGlzLnNvdXJjZUZpbGVHZW5lcmljTWFwLmhhcyhzb3VyY2VGaWxlKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc291cmNlRmlsZUdlbmVyaWNNYXAuc2V0KHNvdXJjZUZpbGUsIG5ldyBNYXAoKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHR5cGVBcmdzID0gdHlwZUFyZ3NOb2Rlcy5tYXAodCA9PiB0LmdldFR5cGUoKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5oYXNNYXRjaGluZ05vbkdlbmVyaWNPdmVybG9hZChtZXRob2REZWNsYXJhdGlvbiwgdHlwZUFyZ3MsIGFyZ3MpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3Tm9kZSA9IHRoaXMucmVwbGFjZVdpdGhOb25HZW5lcmljQ2FsbChjYWxsRXhwcmVzc2lvbiwgdHlwZUFyZ3MsIGFyZ3MsIHRyYW5zZm9ybWF0aW9uQ29udGV4dCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBuZXdWYXJTdGF0ZW1lbnRzOiBPcHRpb25hbEtpbmQ8VmFyaWFibGVTdGF0ZW1lbnRTdHJ1Y3R1cmU+W10gPSBbXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBnZW5lcmljTWV0aG9kVmFyTmFtZSA9IHRoaXMuY3JlYXRlR2VuZXJpY01ldGhvZFZhcmlhYmxlKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWNsYXJpbmdUeXBlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXRob2ROYW1lLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlQXJnc05vZGVzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzb3VyY2VGaWxlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXdWYXJTdGF0ZW1lbnRzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cmFuc2Zvcm1hdGlvbkNvbnRleHRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5zZXJ0VmFyaWFibGVTdGF0ZW1lbnRzKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzb3VyY2VGaWxlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXdWYXJTdGF0ZW1lbnRzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cmFuc2Zvcm1hdGlvbkNvbnRleHRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgYXJnc1RleHQgPSBhcmdzLm1hcChhcmcgPT4gYXJnLmdldEZ1bGxUZXh0KCkpLmpvaW4oXCIsIFwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBpc1N0YXRpYyA9IG1ldGhvZERlY2xhcmF0aW9uLmlzU3RhdGljKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgaW5zdGFuY2VUZXh0ID0gaXNHZW5pZXNTY3JpcHRUeXBlKGluc3RhbmNlVHlwZSkgJiYgIWlzU3RhdGljXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gXCIvL0B0cy1pZ25vcmVcXG5cIiArIGluc3RhbmNlLmdldFRleHQoKSArIFwiLlwiICsgR2VuaWVzSW5zdGFuY2VQcm9wTmFtZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IGluc3RhbmNlLmdldFRleHQoKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG5ld0V4cHJlc3Npb25UZXh0ID0gaXNTdGF0aWNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyBgJHtnZW5lcmljTWV0aG9kVmFyTmFtZX0oJHthcmdzVGV4dH0pYFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IGAke2dlbmVyaWNNZXRob2RWYXJOYW1lfS5jYWxsKCR7aW5zdGFuY2VUZXh0fSwgJHthcmdzVGV4dH0pYDtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ld05vZGUgPSBjYWxsRXhwcmVzc2lvbi5yZXBsYWNlV2l0aFRleHQobmV3RXhwcmVzc2lvblRleHQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ld05vZGU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIG5ld05vZGU7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBnZXRUeXBlTmFtZSh0eXBlOiBUeXBlKTogc3RyaW5nIHtcbiAgICAgICAgcmV0dXJuIHR5cGUuZ2V0U3ltYm9sKCk/LmdldE5hbWUoKSA/PyB0eXBlLmdldFRleHQoKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGdldFR5cGVLZXkodHlwZTogVHlwZSwgdHlwZUFyZ3VtZW50czogVHlwZVtdKTogc3RyaW5nIHtcbiAgICAgICAgY29uc3QgZ2VuZXJpY1R5cGVOYW1lID0gdGhpcy5nZXRUeXBlTmFtZSh0eXBlKTtcbiAgICAgICAgcmV0dXJuIGAke2dlbmVyaWNUeXBlTmFtZX0kJHt0eXBlQXJndW1lbnRzLm1hcCh0ID0+IHtcbiAgICAgICAgICAgIGxldCB0QXJncyA9IHQuZ2V0VHlwZUFyZ3VtZW50cygpO1xuICAgICAgICAgICAgaWYgKHRBcmdzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5nZXRUeXBlS2V5KHQsIHRBcmdzKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0VHlwZU5hbWUodCk7XG4gICAgICAgIH0pLmpvaW4oXCIkXCIpfWA7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBnZXRLZXkodHlwZTogVHlwZSwgbWV0aG9kTmFtZTogc3RyaW5nLCBhcmdzOiBOb2RlW10pOiBzdHJpbmcge1xuICAgICAgICBjb25zdCBnZW5lcmljVHlwZU5hbWUgPSB0aGlzLmdldFR5cGVOYW1lKHR5cGUpO1xuICAgICAgICByZXR1cm4gYCR7Z2VuZXJpY1R5cGVOYW1lfSQke21ldGhvZE5hbWV9JCR7YXJncy5tYXAoYXJnID0+IHRoaXMuZ2V0VHlwZU5hbWUoYXJnLmdldFR5cGUoKSkpLmpvaW4oXCIkXCIpfWA7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBjcmVhdGVHZW5lcmljTWV0aG9kVmFyaWFibGUoXG4gICAgICAgIHR5cGU6IFR5cGUsXG4gICAgICAgIG1ldGhvZE5hbWU6IHN0cmluZyxcbiAgICAgICAgYXJnczogTm9kZVtdLFxuICAgICAgICBzb3VyY2VGaWxlOiBTb3VyY2VGaWxlLFxuICAgICAgICB2YXJTdGF0ZW1lbnRzOiBPcHRpb25hbEtpbmQ8VmFyaWFibGVTdGF0ZW1lbnRTdHJ1Y3R1cmU+W10sXG4gICAgICAgIHRyYW5zZm9ybWF0aW9uQ29udGV4dDogVHJhbnNmb3JtYXRpb25Db250ZXh0XG4gICAgKTogc3RyaW5nIHtcbiAgICAgICAgY29uc3QgZ2VuZXJpY1R5cGVOYW1lID0gdGhpcy5nZXRUeXBlTmFtZSh0eXBlKTtcbiAgICAgICAgY29uc3QgZ2VuZXJpY0tleSA9IHRoaXMuZ2V0S2V5KHR5cGUsIG1ldGhvZE5hbWUsIGFyZ3MpO1xuXG4gICAgICAgIGNvbnN0IGdlbmVyaWNNYXAgPSB0aGlzLnNvdXJjZUZpbGVHZW5lcmljTWFwLmdldChzb3VyY2VGaWxlKSE7XG5cbiAgICAgICAgaWYgKCFnZW5lcmljTWFwLmhhcyhnZW5lcmljS2V5KSkge1xuICAgICAgICAgICAgY29uc3QgZ2VuZXJpY0FyZ3MgPSBhcmdzLm1hcChhcmcgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChnZXRJc1VuaXR5QVBJVHlwZShhcmcuZ2V0VHlwZSgpKSAmJiBhcmcuZ2V0VHlwZSgpLmlzSW50ZXJmYWNlKCkpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGAkdHlwZW9mKFwiJHtnZXRGdWxsVHlwZU5hbWUoYXJnLmdldFR5cGUoKSl9XCIpYDtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5nZXRUeXBlTmFtZUFuZEVuc3VyZUltcG9ydGVkKGFyZy5nZXRUeXBlKCksIHNvdXJjZUZpbGUsIHRyYW5zZm9ybWF0aW9uQ29udGV4dCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGNvbnN0IGdlbmVyaWNEZWNsYXJhdGlvbiA9IGAkZ2VuZXJpY01ldGhvZCgke2dlbmVyaWNUeXBlTmFtZX0sIFwiJHttZXRob2ROYW1lfVwiLCAke2dlbmVyaWNBcmdzLmpvaW4oXCIsIFwiKX0pYDtcblxuICAgICAgICAgICAgY29uc3QgZ2VuZXJpY1Zhck5hbWUgPSBgXyR7Z2VuZXJpY0tleS5yZXBsYWNlKC9cXCQvZywgXCJfXCIpfWA7XG4gICAgICAgICAgICBnZW5lcmljTWFwLnNldChnZW5lcmljS2V5LCBnZW5lcmljVmFyTmFtZSk7XG5cbiAgICAgICAgICAgIHZhclN0YXRlbWVudHMucHVzaCh7XG4gICAgICAgICAgICAgICAgZGVjbGFyYXRpb25LaW5kOiBWYXJpYWJsZURlY2xhcmF0aW9uS2luZC5Db25zdCxcbiAgICAgICAgICAgICAgICBkZWNsYXJhdGlvbnM6IFt7XG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IGdlbmVyaWNWYXJOYW1lLFxuICAgICAgICAgICAgICAgICAgICBpbml0aWFsaXplcjogZ2VuZXJpY0RlY2xhcmF0aW9uXG4gICAgICAgICAgICAgICAgfV1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGdlbmVyaWNNYXAuZ2V0KGdlbmVyaWNLZXkpITtcbiAgICB9XG5cbiAgICBwcml2YXRlIGdldFR5cGVOYW1lQW5kRW5zdXJlSW1wb3J0ZWQodHlwZTogVHlwZSwgc291cmNlRmlsZTogU291cmNlRmlsZSwgdHJhbnNmb3JtYXRpb25Db250ZXh0OiBUcmFuc2Zvcm1hdGlvbkNvbnRleHQpOiBzdHJpbmcge1xuXG4gICAgICAgIGlmICh0cmFuc2Zvcm1hdGlvbkNvbnRleHQuc291cmNlRmlsZUdlbmVyaWNUeXBlTWFwLmhhcyhzb3VyY2VGaWxlKSkge1xuICAgICAgICAgICAgbGV0IG1hcHBpbmcgPSB0cmFuc2Zvcm1hdGlvbkNvbnRleHQuc291cmNlRmlsZUdlbmVyaWNUeXBlTWFwLmdldChzb3VyY2VGaWxlKSE7XG4gICAgICAgICAgICBsZXQgdHlwZUFyZ3MgPSB0eXBlLmdldFR5cGVBcmd1bWVudHMoKTtcbiAgICAgICAgICAgIGxldCB0eXBlS2V5ID0gdGhpcy5nZXRUeXBlS2V5KHR5cGUsIHR5cGVBcmdzKTtcblxuICAgICAgICAgICAgaWYgKG1hcHBpbmcuaGFzKHR5cGVLZXkpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG1hcHBpbmcuZ2V0KHR5cGVLZXkpITtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBnZXRUeXBlTmFtZUFuZEVuc3VyZUltcG9ydGVkKHR5cGUsIHNvdXJjZUZpbGUpO1xuICAgIH1cblxuICAgIHByaXZhdGUgaGFzTWF0Y2hpbmdOb25HZW5lcmljT3ZlcmxvYWQobWV0aG9kRGVjbGFyYXRpb246IE1ldGhvZERlY2xhcmF0aW9uLCB0eXBlQXJnczogVHlwZVtdLCBhcmdzOiBOb2RlW10pOiBib29sZWFuIHtcbiAgICAgICAgY29uc3QgcGFyZW50Q2xhc3MgPSBtZXRob2REZWNsYXJhdGlvbi5nZXRQYXJlbnQoKSBhcyBDbGFzc0RlY2xhcmF0aW9uO1xuICAgICAgICBjb25zdCBtZXRob2ROYW1lID0gbWV0aG9kRGVjbGFyYXRpb24uZ2V0TmFtZSgpO1xuICAgICAgICBjb25zdCBtZXRob2RzID0gcGFyZW50Q2xhc3MuZ2V0TWV0aG9kcygpLmZpbHRlcihtID0+IG0uZ2V0TmFtZSgpID09PSBtZXRob2ROYW1lICYmIG0uZ2V0VHlwZVBhcmFtZXRlcnMoKS5sZW5ndGggPT09IDApO1xuXG4gICAgICAgIGNvbnN0IGNzaGFycFR5cGVOYW1lID0gJ1N5c3RlbS5UeXBlJztcblxuICAgICAgICBmb3IgKGNvbnN0IG1ldGhvZCBvZiBtZXRob2RzKSB7XG4gICAgICAgICAgICBjb25zdCBwYXJhbWV0ZXJzID0gbWV0aG9kLmdldFBhcmFtZXRlcnMoKTtcbiAgICAgICAgICAgIGNvbnN0IHR5cGVQYXJhbUNvdW50ID0gcGFyYW1ldGVycy5maWx0ZXIocCA9PiB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGdldEZ1bGxUeXBlTmFtZShwLmdldFR5cGUoKSkgPT09IGNzaGFycFR5cGVOYW1lO1xuICAgICAgICAgICAgfSkubGVuZ3RoO1xuXG4gICAgICAgICAgICBpZiAodHlwZVBhcmFtQ291bnQgPT09IHR5cGVBcmdzLmxlbmd0aCAmJiBwYXJhbWV0ZXJzLmxlbmd0aCA9PT0gdHlwZUFyZ3MubGVuZ3RoICsgYXJncy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gcGFyYW1ldGVycy5ldmVyeSgocGFyYW0sIGluZGV4KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChpbmRleCA8IHR5cGVBcmdzLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGdldEZ1bGxUeXBlTmFtZShwYXJhbS5nZXRUeXBlKCkpID09PSBjc2hhcnBUeXBlTmFtZTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBwYXJhbS5nZXRUeXBlKCkuZ2V0VGV4dCgpID09PSBhcmdzW2luZGV4IC0gdHlwZUFyZ3MubGVuZ3RoXS5nZXRUeXBlKCkuZ2V0VGV4dCgpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIHByaXZhdGUgcmVwbGFjZVdpdGhOb25HZW5lcmljQ2FsbChjYWxsRXhwcmVzc2lvbjogTm9kZSwgdHlwZUFyZ3M6IFR5cGVbXSwgYXJnczogTm9kZVtdLCB0cmFuc2Zvcm1hdGlvbkNvbnRleHQ6IFRyYW5zZm9ybWF0aW9uQ29udGV4dCk6IE5vZGUge1xuICAgICAgICBjb25zdCBtZXRob2RDYWxsID0gY2FsbEV4cHJlc3Npb24uYXNLaW5kT3JUaHJvdyhTeW50YXhLaW5kLkNhbGxFeHByZXNzaW9uKTtcbiAgICAgICAgY29uc3QgcHJvcGVydHlBY2Nlc3MgPSBtZXRob2RDYWxsLmdldEV4cHJlc3Npb24oKS5hc0tpbmRPclRocm93KFN5bnRheEtpbmQuUHJvcGVydHlBY2Nlc3NFeHByZXNzaW9uKTtcbiAgICAgICAgY29uc3QgbWV0aG9kTmFtZSA9IHByb3BlcnR5QWNjZXNzLmdldE5hbWUoKTtcbiAgICAgICAgY29uc3QgaW5zdGFuY2VUZXh0ID0gcHJvcGVydHlBY2Nlc3MuZ2V0RXhwcmVzc2lvbigpLmdldFRleHQoKTtcblxuICAgICAgICBjb25zdCB0eXBlQXJnc1RleHQgPSB0eXBlQXJncy5tYXAoYXJnID0+IHtcbiAgICAgICAgICAgIGlmIChnZXRJc1VuaXR5QVBJVHlwZShhcmcpICYmIGFyZy5pc0ludGVyZmFjZSgpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGAkdHlwZW9mKFwiJHtnZXRGdWxsVHlwZU5hbWUoYXJnKX1cIilgO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gYCR7dGhpcy5nZXRUeXBlTmFtZUFuZEVuc3VyZUltcG9ydGVkKGFyZywgY2FsbEV4cHJlc3Npb24uZ2V0U291cmNlRmlsZSgpLCB0cmFuc2Zvcm1hdGlvbkNvbnRleHQpfWA7XG4gICAgICAgIH0pLmpvaW4oXCIsIFwiKTtcbiAgICAgICAgY29uc3QgYXJnc1RleHQgPSBhcmdzLm1hcChhcmcgPT4gYXJnLmdldFRleHQoKSkuam9pbihcIiwgXCIpO1xuICAgICAgICBjb25zdCByZXR1cm5UeXBlID0gbWV0aG9kQ2FsbC5nZXRSZXR1cm5UeXBlKCk7XG5cbiAgICAgICAgY29uc3QgbmV3RXhwcmVzc2lvblRleHQgPSBgJHtpbnN0YW5jZVRleHR9LiR7bWV0aG9kTmFtZX0oJHt0eXBlQXJnc1RleHR9JHthcmdzVGV4dCA/IGAsICR7YXJnc1RleHR9YCA6IFwiXCJ9KSBhcyAke3JldHVyblR5cGUuZ2V0VGV4dCgpfWA7XG5cbiAgICAgICAgcmV0dXJuIGNhbGxFeHByZXNzaW9uLnJlcGxhY2VXaXRoVGV4dChuZXdFeHByZXNzaW9uVGV4dCk7XG4gICAgfVxufVxuIiwiaW1wb3J0IEdlbmllc1RyYW5zcGlsZXIgZnJvbSAnLi9jb21waWxlci9Db21waWxlcic7XG5pbXBvcnQgKiBhcyB0cyBmcm9tICd0eXBlc2NyaXB0JztcblxuZnVuY3Rpb24gbWFpbigpIHtcbiAgICBjb25zdCBhcmdzID0gcHJvY2Vzcy5hcmd2LnNsaWNlKDIpO1xuICAgIGxldCB0c0NvbmZpZ1BhdGg6IHN0cmluZyB8IHVuZGVmaW5lZDtcbiAgICBsZXQgY29tcGlsZUZpbGVzOiBzdHJpbmdbXSA9IFtdO1xuICAgIGxldCBwcm9qZWN0RmlsZXM6IHN0cmluZ1tdID0gW107XG4gICAgbGV0IG1vdmVkRmlsZXM6IHsgb2xkUGF0aDogc3RyaW5nOyBuZXdQYXRoOiBzdHJpbmcgfVtdID0gW107XG4gICAgbGV0IGN1cnJlbnRGbGFnOiBzdHJpbmcgfCBudWxsID0gbnVsbDtcblxuICAgIC8vIENvbGxlY3QgY29tcGlsZSBhbmQgcHJvamVjdCBmaWxlcywgdHJlYXRpbmcgYWxsIGZvbGxvd2luZyBzdHJpbmdzIGFmdGVyIGVhY2ggZmxhZyBhcyBwYXJ0IG9mIHRoZSBsaXN0XG4gICAgZm9yIChjb25zdCBhcmcgb2YgYXJncykge1xuICAgICAgICBpZiAoYXJnID09PSAnLS10c2NvbmZpZycgfHwgYXJnID09PSAnLXQnKSB7XG4gICAgICAgICAgICBjdXJyZW50RmxhZyA9ICd0c2NvbmZpZyc7XG4gICAgICAgIH0gZWxzZSBpZiAoYXJnID09PSAnLWMnIHx8IGFyZyA9PT0gJy0tY29tcGlsZScpIHtcbiAgICAgICAgICAgIGN1cnJlbnRGbGFnID0gJ2NvbXBpbGUnO1xuICAgICAgICB9IGVsc2UgaWYgKGFyZyA9PT0gJy1wJyB8fCBhcmcgPT09ICctLXByb2plY3QnKSB7XG4gICAgICAgICAgICBjdXJyZW50RmxhZyA9ICdwcm9qZWN0JztcbiAgICAgICAgfSBlbHNlIGlmIChhcmcgPT09ICctbWYnIHx8IGFyZyA9PT0gJy0tbW92ZWRGaWxlcycpIHtcbiAgICAgICAgICAgIGN1cnJlbnRGbGFnID0gJ21vdmVkRmlsZXMnO1xuICAgICAgICB9IGVsc2UgaWYgKGN1cnJlbnRGbGFnID09PSAndHNjb25maWcnKSB7XG4gICAgICAgICAgICB0c0NvbmZpZ1BhdGggPSBhcmc7XG4gICAgICAgICAgICBjdXJyZW50RmxhZyA9IG51bGw7IC8vIHJlc2V0IGZsYWcgYWZ0ZXIgY2FwdHVyaW5nIHRoZSB2YWx1ZVxuICAgICAgICB9IGVsc2UgaWYgKGN1cnJlbnRGbGFnID09PSAnY29tcGlsZScpIHtcbiAgICAgICAgICAgIGNvbXBpbGVGaWxlcy5wdXNoKGFyZyk7XG4gICAgICAgIH0gZWxzZSBpZiAoY3VycmVudEZsYWcgPT09ICdwcm9qZWN0Jykge1xuICAgICAgICAgICAgcHJvamVjdEZpbGVzLnB1c2goYXJnKTtcbiAgICAgICAgfSBlbHNlIGlmIChjdXJyZW50RmxhZyA9PT0gJ21vdmVkRmlsZXMnKSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIG1vdmVkRmlsZXMgPSBKU09OLnBhcnNlKGFyZyk7XG4gICAgICAgICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdGYWlsZWQgdG8gcGFyc2UgbW92ZWRGaWxlcyBKU09OOicsIGVycik7XG4gICAgICAgICAgICAgICAgcHJvY2Vzcy5leGl0KDEpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY3VycmVudEZsYWcgPSBudWxsO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgaWYgKCF0c0NvbmZpZ1BhdGggfHwgY29tcGlsZUZpbGVzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICBjb25zb2xlLmVycm9yKCdVc2FnZTogbm9kZSBpbmRleC5qcyAtLXRzY29uZmlnIDx0c2NvbmZpZ1BhdGg+IC1jIDxmaWxlMT4gWzxmaWxlMj4gWy4uLl1dIC1wIDxhZGRpdGlvbmFsRmlsZTE+IFs8YWRkaXRpb25hbEZpbGUyPiBbLi4uXV0nKTtcbiAgICAgICAgcHJvY2Vzcy5leGl0KDEpO1xuICAgIH1cblxuICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IGNvbXBpbGVyID0gbmV3IEdlbmllc1RyYW5zcGlsZXIodHNDb25maWdQYXRoKTtcblxuICAgICAgICAvLyBBd2FpdCB0aGUgcmVzdWx0IG9mIHRoZSBjb21waWxlIGZ1bmN0aW9uXG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGNvbXBpbGVyLmNvbXBpbGUoY29tcGlsZUZpbGVzLCBwcm9qZWN0RmlsZXMsIG1vdmVkRmlsZXMpO1xuICAgICAgICBwcm9jZXNzLnN0ZG91dC53cml0ZShyZXN1bHQudG9TdHJpbmcoKSk7IC8vIFdyaXRlIHRoZSByZXN1bHQgdG8gc3Rkb3V0XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcignQ29tcGlsYXRpb24gZmFpbGVkOicsIGVycm9yKTtcbiAgICAgICAgcHJvY2Vzcy5leGl0KDEpO1xuICAgIH1cbn1cblxuLy8gUnVuIHRoZSBtYWluIGZ1bmN0aW9uXG5tYWluKCk7XG4iLCJpbXBvcnQge1xuICAgIFN5bnRheEtpbmQsXG4gICAgTm9kZSxcbiAgICBDYWxsRXhwcmVzc2lvbixcbiAgICBUeXBlLFxuICAgIEV4cHJlc3Npb24sXG4gICAgUHJvcGVydHlBY2Nlc3NFeHByZXNzaW9uLCBUeXBlRm9ybWF0RmxhZ3MsXG59IGZyb20gJ3RzLW1vcnBoJztcbmltcG9ydCB7XG4gICAgZ2V0RnVsbFR5cGVOYW1lLFxufSBmcm9tICcuLi9Db21waWxlclV0aWxzJztcbmltcG9ydCB7IFRyYW5zZm9ybWF0aW9uQ29udGV4dCB9IGZyb20gJy4vVHJhbnNmb3JtYXRpb25Db250ZXh0JztcbmltcG9ydCB7IElUcmFuc2Zvcm1lciB9IGZyb20gJy4vSVRyYW5zZm9ybWVyJztcblxuZXhwb3J0IGNsYXNzIENTaGFycEV2ZW50VHJhbnNmb3JtZXIgaW1wbGVtZW50cyBJVHJhbnNmb3JtZXIge1xuICAgIG5vZGVUeXBlcyA9IFtTeW50YXhLaW5kLkNhbGxFeHByZXNzaW9uXTtcblxuICAgIHRyYW5zZm9ybU5vZGUobm9kZTogTm9kZSwgdHJhbnNmb3JtYXRpb25Db250ZXh0OiBUcmFuc2Zvcm1hdGlvbkNvbnRleHQpOiBOb2RlIHtcbiAgICAgICAgaWYgKE5vZGUuaXNDYWxsRXhwcmVzc2lvbihub2RlKSkge1xuICAgICAgICAgICAgY29uc3QgY2FsbEV4cHJlc3Npb24gPSBub2RlIGFzIENhbGxFeHByZXNzaW9uO1xuICAgICAgICAgICAgY29uc3QgZXhwcmVzc2lvbiA9IGNhbGxFeHByZXNzaW9uLmdldEV4cHJlc3Npb24oKTtcblxuICAgICAgICAgICAgaWYgKE5vZGUuaXNQcm9wZXJ0eUFjY2Vzc0V4cHJlc3Npb24oZXhwcmVzc2lvbikpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBtZXRob2ROYW1lID0gZXhwcmVzc2lvbi5nZXROYW1lKCk7XG5cbiAgICAgICAgICAgICAgICBpZiAobWV0aG9kTmFtZSA9PT0gJ0FkZCcgfHwgbWV0aG9kTmFtZSA9PT0gJ1JlbW92ZScpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZXZlbnRFeHByZXNzaW9uID0gZXhwcmVzc2lvbi5nZXRFeHByZXNzaW9uKCk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGV2ZW50VHlwZSA9IHRyYW5zZm9ybWF0aW9uQ29udGV4dC50eXBlQ2hlY2tlci5nZXRUeXBlQXRMb2NhdGlvbihldmVudEV4cHJlc3Npb24pO1xuXG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmlzQ1NoYXJwRXZlbnRUeXBlKGV2ZW50VHlwZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChOb2RlLmlzUHJvcGVydHlBY2Nlc3NFeHByZXNzaW9uKGV2ZW50RXhwcmVzc2lvbikpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBwcm9wZXJ0eU5hbWUgPSBldmVudEV4cHJlc3Npb24uZ2V0TmFtZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG9iamVjdEV4cHJlc3Npb24gPSBldmVudEV4cHJlc3Npb24uZ2V0RXhwcmVzc2lvbigpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbmV3Q2FsbEV4cHJlc3Npb24gPSB0aGlzLmNyZWF0ZU5ld0NhbGxFeHByZXNzaW9uKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYWxsRXhwcmVzc2lvbixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb2JqZWN0RXhwcmVzc2lvbixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWV0aG9kTmFtZS50b0xvd2VyQ2FzZSgpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcm9wZXJ0eU5hbWVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQWRkIHRzLWlnbm9yZSBjb21tZW50XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5hZGRUc0lnbm9yZUNvbW1lbnQobmV3Q2FsbEV4cHJlc3Npb24pO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ld0NhbGxFeHByZXNzaW9uO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIG5vZGU7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBpc0NTaGFycEV2ZW50VHlwZSh0eXBlOiBUeXBlKTogYm9vbGVhbiB7XG4gICAgICAgIGNvbnN0IHN5bWJvbCA9IHR5cGUuZ2V0U3ltYm9sKCk7XG4gICAgICAgIGlmICghc3ltYm9sKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCB0eXBlTmFtZSA9IHN5bWJvbC5nZXROYW1lKCk7XG5cbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgIHR5cGVOYW1lID09PSAnQ1NoYXJwRXZlbnQnIHx8XG4gICAgICAgICAgICB0eXBlTmFtZSA9PT0gJ0NTaGFycEV2ZW50X0FkZCcgfHxcbiAgICAgICAgICAgIHR5cGVOYW1lID09PSAnQ1NoYXJwRXZlbnRfUmVtb3ZlJ1xuICAgICAgICApO1xuICAgIH1cblxuICAgIHByaXZhdGUgY3JlYXRlTmV3Q2FsbEV4cHJlc3Npb24oXG4gICAgICAgIGNhbGxFeHByZXNzaW9uOiBDYWxsRXhwcmVzc2lvbixcbiAgICAgICAgb2JqZWN0RXhwcmVzc2lvbjogRXhwcmVzc2lvbixcbiAgICAgICAgbWV0aG9kUHJlZml4OiBzdHJpbmcsXG4gICAgICAgIHByb3BlcnR5TmFtZTogc3RyaW5nXG4gICAgKTogQ2FsbEV4cHJlc3Npb24ge1xuICAgICAgICBjb25zdCBhcmdzVGV4dCA9IGNhbGxFeHByZXNzaW9uXG4gICAgICAgICAgICAuZ2V0QXJndW1lbnRzKClcbiAgICAgICAgICAgIC5tYXAoKGFyZykgPT4gYXJnLmdldFRleHQoKSlcbiAgICAgICAgICAgIC5qb2luKCcsICcpO1xuICAgICAgICBjb25zdCBuZXdNZXRob2ROYW1lID0gYCR7bWV0aG9kUHJlZml4fV8ke3Byb3BlcnR5TmFtZX1gO1xuICAgICAgICBjb25zdCBuZXdDYWxsRXhwcmVzc2lvblRleHQgPSBgJHtvYmplY3RFeHByZXNzaW9uLmdldFRleHQoKX0uJHtuZXdNZXRob2ROYW1lfSgke2FyZ3NUZXh0fSlgO1xuXG4gICAgICAgIGNvbnN0IG5ld0NhbGxFeHByZXNzaW9uID0gY2FsbEV4cHJlc3Npb24ucmVwbGFjZVdpdGhUZXh0KFxuICAgICAgICAgICAgbmV3Q2FsbEV4cHJlc3Npb25UZXh0XG4gICAgICAgICkgYXMgQ2FsbEV4cHJlc3Npb247XG5cbiAgICAgICAgcmV0dXJuIG5ld0NhbGxFeHByZXNzaW9uO1xuICAgIH1cblxuICAgIHByaXZhdGUgYWRkVHNJZ25vcmVDb21tZW50KGNhbGxFeHByZXNzaW9uOiBDYWxsRXhwcmVzc2lvbik6IHZvaWQge1xuICAgICAgICBjb25zdCBzb3VyY2VGaWxlID0gY2FsbEV4cHJlc3Npb24uZ2V0U291cmNlRmlsZSgpO1xuICAgICAgICBjb25zdCBzdGFydCA9IGNhbGxFeHByZXNzaW9uLmdldFN0YXJ0KCk7XG4gICAgICAgIHNvdXJjZUZpbGUuaW5zZXJ0VGV4dChzdGFydCwgJy8vIEB0cy1pZ25vcmVcXG4nKTtcbiAgICB9XG59XG4iLCJtb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoXCJkaWZmLW1hdGNoLXBhdGNoXCIpOyIsImltcG9ydCB7XG4gICAgTm9kZSxcbiAgICBTeW50YXhLaW5kLFxuICAgIEFycm93RnVuY3Rpb24sXG4gICAgVHlwZVxufSBmcm9tIFwidHMtbW9ycGhcIjtcbmltcG9ydCB7SVRyYW5zZm9ybWVyfSBmcm9tIFwiLi9JVHJhbnNmb3JtZXJcIjtcbmltcG9ydCB7VHJhbnNmb3JtYXRpb25Db250ZXh0fSBmcm9tIFwiLi9UcmFuc2Zvcm1hdGlvbkNvbnRleHRcIjtcbmltcG9ydCB7aXNHZW5pZXNFdmVudFR5cGUsIGlzU2lnbmFsQnVzVHlwZX0gZnJvbSBcIi4uL0NvbXBpbGVyVXRpbHNcIjtcblxuZXhwb3J0IGNsYXNzIERlbGVnYXRlVG9BcnJvd0Z1bmN0aW9uVHJhbnNmb3JtZXIgaW1wbGVtZW50cyBJVHJhbnNmb3JtZXIge1xuICAgIG5vZGVUeXBlcyA9IFtTeW50YXhLaW5kLkNhbGxFeHByZXNzaW9uXTtcblxuICAgIHRyYW5zZm9ybU5vZGUobm9kZTogTm9kZSwgdHJhbnNmb3JtYXRpb25Db250ZXh0OiBUcmFuc2Zvcm1hdGlvbkNvbnRleHQpOiBOb2RlIHtcbiAgICAgICAgaWYgKCFOb2RlLmlzQ2FsbEV4cHJlc3Npb24obm9kZSkpIHtcbiAgICAgICAgICAgIHJldHVybiBub2RlO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgY2FsbEV4cHJlc3Npb24gPSBub2RlLmFzS2luZE9yVGhyb3coU3ludGF4S2luZC5DYWxsRXhwcmVzc2lvbik7XG4gICAgICAgIGNvbnN0IHR5cGVDaGVja2VyID0gdHJhbnNmb3JtYXRpb25Db250ZXh0LnR5cGVDaGVja2VyO1xuICAgICAgICBjb25zdCBleHByZXNzaW9uID0gY2FsbEV4cHJlc3Npb24uZ2V0RXhwcmVzc2lvbigpO1xuICAgICAgICBcbiAgICAgICAgLy8gQ2hlY2sgaWYgdGhlIGNhbGwgaXMgYSBwcm9wZXJ0eSBhY2Nlc3MgKGUuZy4sIFNpZ25hbEJ1cy5zdWJzY3JpYmUpXG4gICAgICAgIGlmIChOb2RlLmlzUHJvcGVydHlBY2Nlc3NFeHByZXNzaW9uKGV4cHJlc3Npb24pKSB7XG4gICAgICAgICAgICBjb25zdCBvYmplY3RFeHByZXNzaW9uID0gZXhwcmVzc2lvbi5nZXRFeHByZXNzaW9uKCk7XG4gICAgICAgICAgICBjb25zdCBvYmplY3RUeXBlID0gdHlwZUNoZWNrZXIuZ2V0VHlwZUF0TG9jYXRpb24ob2JqZWN0RXhwcmVzc2lvbik7XG5cbiAgICAgICAgICAgIC8vIENoZWNrIGlmIGl0IGlzIGEgU2lnbmFsQnVzIG9yIEdlbmllc0V2ZW50IG1ldGhvZHMgdGhlbiB3ZSBpZ25vcmUgc2luY2Ugd2UgYXJlXG4gICAgICAgICAgICAvLyB0cmFuc2Zvcm1pbmcgdGhlbSBzb21ld2hlcmUgZWxzZVxuICAgICAgICAgICAgaWYgKGlzU2lnbmFsQnVzVHlwZShvYmplY3RUeXBlKSB8fCBpc0dlbmllc0V2ZW50VHlwZShvYmplY3RUeXBlKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBub2RlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgY29uc3Qgc2lnbmF0dXJlID0gdHlwZUNoZWNrZXIuZ2V0UmVzb2x2ZWRTaWduYXR1cmUoY2FsbEV4cHJlc3Npb24pO1xuICAgICAgICBpZiAoIXNpZ25hdHVyZSkge1xuICAgICAgICAgICAgcmV0dXJuIG5vZGU7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBwYXJhbWV0ZXJzID0gc2lnbmF0dXJlLmdldFBhcmFtZXRlcnMoKTtcbiAgICAgICAgY29uc3QgYXJncyA9IGNhbGxFeHByZXNzaW9uLmdldEFyZ3VtZW50cygpO1xuXG4gICAgICAgIGFyZ3MubWFwKChhcmcsIGluZGV4KSA9PiB7XG4gICAgICAgICAgICBjb25zdCBwYXJhbWV0ZXIgPSBwYXJhbWV0ZXJzW2luZGV4XTtcbiAgICAgICAgICAgIGlmIChwYXJhbWV0ZXIpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBwYXJhbVR5cGUgPSB0eXBlQ2hlY2tlci5nZXRUeXBlT2ZTeW1ib2xBdExvY2F0aW9uKHBhcmFtZXRlciwgY2FsbEV4cHJlc3Npb24pO1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLmlzRGVsZWdhdGVUeXBlKHBhcmFtVHlwZSkgJiYgIU5vZGUuaXNBcnJvd0Z1bmN0aW9uKGFyZykpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMud3JhcEluQXJyb3dGdW5jdGlvbihhcmcsIHBhcmFtVHlwZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGFyZztcbiAgICAgICAgfSk7XG5cblxuICAgICAgICByZXR1cm4gY2FsbEV4cHJlc3Npb247XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBpc0RlbGVnYXRlVHlwZSh0eXBlOiBUeXBlKTogYm9vbGVhbiB7XG4gICAgICAgIGNvbnN0IGNhbGxTaWduYXR1cmVzID0gdHlwZS5nZXRDYWxsU2lnbmF0dXJlcygpO1xuICAgICAgICByZXR1cm4gY2FsbFNpZ25hdHVyZXMubGVuZ3RoID4gMDtcbiAgICB9XG5cbiAgICBwcml2YXRlIHdyYXBJbkFycm93RnVuY3Rpb24obm9kZTogTm9kZSwgcGFyYW1UeXBlOiBUeXBlKTogQXJyb3dGdW5jdGlvbiB7XG4gICAgICAgIGNvbnN0IGNhbGxTaWduYXR1cmVzID0gcGFyYW1UeXBlLmdldENhbGxTaWduYXR1cmVzKCk7XG4gICAgICAgIGlmIChjYWxsU2lnbmF0dXJlcy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkV4cGVjdGVkIGRlbGVnYXRlIHR5cGUgdG8gaGF2ZSBjYWxsIHNpZ25hdHVyZXMuXCIpO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgcGFyYW1ldGVycyA9IGNhbGxTaWduYXR1cmVzWzBdLmdldFBhcmFtZXRlcnMoKTtcbiAgICAgICAgY29uc3QgcGFyYW1OYW1lcyA9IHBhcmFtZXRlcnMubWFwKHBhcmFtID0+IHBhcmFtLmdldE5hbWUoKSk7XG4gICAgICAgIGNvbnN0IHBhcmFtVGV4dCA9IHBhcmFtTmFtZXMuam9pbihcIiwgXCIpO1xuICAgICAgICBjb25zdCBhcnJvd0Z1bmN0aW9uVGV4dCA9IGAoJHtwYXJhbVRleHR9KSA9PiAke25vZGUuZ2V0VGV4dCgpfSgke3BhcmFtVGV4dH0pYDtcblxuICAgICAgICBjb25zb2xlLmxvZyhgV3JhcHBpbmcgaW4gYXJyb3cgZnVuY3Rpb246ICR7YXJyb3dGdW5jdGlvblRleHR9YCk7XG5cbiAgICAgICAgLy8gVXNpbmcgbm9kZS5yZXBsYWNlV2l0aFRleHQgZm9yIHNpbXBsaWNpdHksIGFzIHRzLW1vcnBoIGRvZXNuJ3QgcHJvdmlkZSBkaXJlY3QgY29udmVyc2lvblxuICAgICAgICByZXR1cm4gbm9kZS5yZXBsYWNlV2l0aFRleHQoYXJyb3dGdW5jdGlvblRleHQpIGFzIEFycm93RnVuY3Rpb247XG4gICAgfVxufSIsIi8vIEJyYWNrZXRBY2Nlc3NUcmFuc2Zvcm1lci50c1xuaW1wb3J0IHtcbiAgICBFbGVtZW50QWNjZXNzRXhwcmVzc2lvbixcbiAgICBTeW50YXhLaW5kLFxuICAgIE5vZGUsXG4gICAgTWV0aG9kRGVjbGFyYXRpb24sXG4gICAgTWV0aG9kU2lnbmF0dXJlLFxuICAgIENsYXNzRGVjbGFyYXRpb24sXG4gICAgSW50ZXJmYWNlRGVjbGFyYXRpb24sXG4gICAgU3ltYm9sLFxuICAgIFR5cGUsXG4gICAgQmluYXJ5RXhwcmVzc2lvbixcbn0gZnJvbSBcInRzLW1vcnBoXCI7XG5pbXBvcnQgeyBJVHJhbnNmb3JtZXIgfSBmcm9tIFwiLi9JVHJhbnNmb3JtZXJcIjtcbmltcG9ydCB7IFRyYW5zZm9ybWF0aW9uQ29udGV4dCB9IGZyb20gXCIuL1RyYW5zZm9ybWF0aW9uQ29udGV4dFwiO1xuaW1wb3J0IHtHRVRfSVRFTV9OQU1FLCBnZXRJc1VuaXR5QVBJVHlwZSwgU0VUX0lURU1fTkFNRX0gZnJvbSBcIi4uL0NvbXBpbGVyVXRpbHNcIjtcblxuZXhwb3J0IGNsYXNzIEJyYWNrZXRBY2Nlc3NUcmFuc2Zvcm1lciBpbXBsZW1lbnRzIElUcmFuc2Zvcm1lciB7XG4gICAgLy8gU3BlY2lmeSB0aGUgbm9kZSB0eXBlcyB0aGlzIHRyYW5zZm9ybWVyIHdpbGwgaGFuZGxlXG4gICAgbm9kZVR5cGVzID0gW1N5bnRheEtpbmQuRWxlbWVudEFjY2Vzc0V4cHJlc3Npb25dO1xuXG4gICAgXG4gICAgdHJhbnNmb3JtTm9kZShub2RlOiBOb2RlLCB0cmFuc2Zvcm1hdGlvbkNvbnRleHQ6IFRyYW5zZm9ybWF0aW9uQ29udGV4dCk6IE5vZGUge1xuICAgICAgICBpZiAoIU5vZGUuaXNFbGVtZW50QWNjZXNzRXhwcmVzc2lvbihub2RlKSkge1xuICAgICAgICAgICAgcmV0dXJuIG5vZGU7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBlbGVtZW50QWNjZXNzID0gbm9kZSBhcyBFbGVtZW50QWNjZXNzRXhwcmVzc2lvbjtcbiAgICAgICAgY29uc3QgZXhwcmVzc2lvbiA9IGVsZW1lbnRBY2Nlc3MuZ2V0RXhwcmVzc2lvbigpO1xuICAgICAgICBjb25zdCBhcmd1bWVudEV4cHJlc3Npb24gPSBlbGVtZW50QWNjZXNzLmdldEFyZ3VtZW50RXhwcmVzc2lvbigpO1xuXG4gICAgICAgIGlmICghYXJndW1lbnRFeHByZXNzaW9uKSB7XG4gICAgICAgICAgICAvLyBJZiB0aGVyZSdzIG5vIGFyZ3VtZW50IChlLmcuLCBvYmpbXSksIHNraXAgdHJhbnNmb3JtYXRpb25cbiAgICAgICAgICAgIHJldHVybiBub2RlO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgdHlwZSA9IGV4cHJlc3Npb24uZ2V0VHlwZSgpO1xuXG4gICAgICAgIC8vIENoZWNrIGlmIHRoZSB0eXBlIGlzIGEgVW5pdHkgQVBJIHR5cGVcbiAgICAgICAgaWYgKCFnZXRJc1VuaXR5QVBJVHlwZSh0eXBlKSkge1xuICAgICAgICAgICAgcmV0dXJuIG5vZGU7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBSZXRyaWV2ZSB0aGUgc3ltYm9sIG9mIHRoZSB0eXBlXG4gICAgICAgIGNvbnN0IHR5cGVTeW1ib2wgPSB0eXBlLmdldFN5bWJvbCgpO1xuICAgICAgICBpZiAoIXR5cGVTeW1ib2wpIHtcbiAgICAgICAgICAgIHJldHVybiBub2RlO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gR2V0IGFsbCBkZWNsYXJhdGlvbnMgKGNsYXNzZXMgYW5kIGludGVyZmFjZXMpIGFzc29jaWF0ZWQgd2l0aCB0aGUgdHlwZVxuICAgICAgICBjb25zdCBkZWNsYXJhdGlvbnMgPSB0eXBlU3ltYm9sLmdldERlY2xhcmF0aW9ucygpLmZpbHRlcihcbiAgICAgICAgICAgIGRlY2wgPT4gTm9kZS5pc0NsYXNzRGVjbGFyYXRpb24oZGVjbCkgfHwgTm9kZS5pc0ludGVyZmFjZURlY2xhcmF0aW9uKGRlY2wpXG4gICAgICAgICkgYXMgKENsYXNzRGVjbGFyYXRpb24gfCBJbnRlcmZhY2VEZWNsYXJhdGlvbilbXTtcblxuICAgICAgICBpZiAoZGVjbGFyYXRpb25zLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgcmV0dXJuIG5vZGU7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBDb2xsZWN0IGFsbCB1bmlxdWUgZ2V0X2l0ZW0gYW5kIHNldF9pdGVtIG1ldGhvZHMgYWNyb3NzIGFsbCBkZWNsYXJhdGlvbnNcbiAgICAgICAgY29uc3QgZ2V0SXRlbU1ldGhvZHM6IChNZXRob2REZWNsYXJhdGlvbiB8IE1ldGhvZFNpZ25hdHVyZSlbXSA9IFtdO1xuICAgICAgICBjb25zdCBzZXRJdGVtTWV0aG9kczogKE1ldGhvZERlY2xhcmF0aW9uIHwgTWV0aG9kU2lnbmF0dXJlKVtdID0gW107XG5cbiAgICAgICAgY29uc3QgbWV0aG9kU2lnbmF0dXJlcyA9IG5ldyBTZXQ8c3RyaW5nPigpO1xuXG4gICAgICAgIGRlY2xhcmF0aW9ucy5mb3JFYWNoKGRlY2wgPT4ge1xuICAgICAgICAgICAgY29uc3QgY2xhc3NPckludGVyZmFjZSA9IGRlY2wgYXMgQ2xhc3NEZWNsYXJhdGlvbiB8IEludGVyZmFjZURlY2xhcmF0aW9uO1xuXG4gICAgICAgICAgICAvLyBnZXRNZXRob2RzIHJldHVybnMgYW4gYXJyYXkgb2YgTWV0aG9kRGVjbGFyYXRpb24gb3IgTWV0aG9kU2lnbmF0dXJlXG4gICAgICAgICAgICBjb25zdCBtZXRob2RzID0gY2xhc3NPckludGVyZmFjZS5nZXRNZXRob2RzKCk7XG5cbiAgICAgICAgICAgIG1ldGhvZHMuZm9yRWFjaChtZXRob2QgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IG1ldGhvZE5hbWUgPSBtZXRob2QuZ2V0TmFtZSgpO1xuICAgICAgICAgICAgICAgIGlmIChtZXRob2ROYW1lID09PSBHRVRfSVRFTV9OQU1FIHx8IG1ldGhvZE5hbWUgPT09IFNFVF9JVEVNX05BTUUpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gR2VuZXJhdGUgYSB1bmlxdWUgc2lnbmF0dXJlIHN0cmluZyBmb3IgdGhlIG1ldGhvZFxuICAgICAgICAgICAgICAgICAgICBjb25zdCBzaWduYXR1cmUgPSBtZXRob2QuZ2V0U2lnbmF0dXJlKCkuZ2V0RGVjbGFyYXRpb24oKT8uZ2V0VGV4dCgpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoc2lnbmF0dXJlICYmICFtZXRob2RTaWduYXR1cmVzLmhhcyhzaWduYXR1cmUpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobWV0aG9kTmFtZSA9PT0gR0VUX0lURU1fTkFNRSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdldEl0ZW1NZXRob2RzLnB1c2gobWV0aG9kKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0SXRlbU1ldGhvZHMucHVzaChtZXRob2QpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgbWV0aG9kU2lnbmF0dXJlcy5hZGQoc2lnbmF0dXJlKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcblxuICAgICAgICBpZiAoZ2V0SXRlbU1ldGhvZHMubGVuZ3RoID09PSAwICYmIHNldEl0ZW1NZXRob2RzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgLy8gTmVpdGhlciBnZXR0ZXIgbm9yIHNldHRlciBleGlzdHM7IG5vIHRyYW5zZm9ybWF0aW9uIG5lZWRlZFxuICAgICAgICAgICAgcmV0dXJuIG5vZGU7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBwYXJlbnQgPSBlbGVtZW50QWNjZXNzLmdldFBhcmVudCgpO1xuXG4gICAgICAgIC8vIERldGVybWluZSBpZiB0aGlzIGlzIGEgZ2V0dGVyIG9yIHNldHRlclxuICAgICAgICBpZiAoXG4gICAgICAgICAgICBOb2RlLmlzQmluYXJ5RXhwcmVzc2lvbihwYXJlbnQpICYmXG4gICAgICAgICAgICBwYXJlbnQuZ2V0T3BlcmF0b3JUb2tlbigpLmdldEtpbmQoKSA9PT0gU3ludGF4S2luZC5FcXVhbHNUb2tlbiAmJlxuICAgICAgICAgICAgcGFyZW50LmdldExlZnQoKSA9PT0gZWxlbWVudEFjY2Vzc1xuICAgICAgICApIHtcbiAgICAgICAgICAgIC8vIFRoaXMgaXMgYSBzZXR0ZXI6IG9ialtpbmRleF0gPSB2YWx1ZVxuICAgICAgICAgICAgaWYgKHNldEl0ZW1NZXRob2RzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBub2RlO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBjb25zdCB2YWx1ZUV4cHJlc3Npb24gPSBwYXJlbnQuZ2V0UmlnaHQoKTtcblxuICAgICAgICAgICAgLy8gQXR0ZW1wdCB0byBmaW5kIGEgbWF0Y2hpbmcgc2V0X2l0ZW0gbWV0aG9kXG4gICAgICAgICAgICBjb25zdCBtYXRjaGluZ1NldEl0ZW0gPSBzZXRJdGVtTWV0aG9kcy5maW5kKG1ldGhvZCA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgcGFyYW1zID0gbWV0aG9kLmdldFBhcmFtZXRlcnMoKTtcbiAgICAgICAgICAgICAgICBpZiAocGFyYW1zLmxlbmd0aCAhPT0gMikge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgY29uc3QgaW5kZXhQYXJhbVR5cGUgPSBwYXJhbXNbMF0uZ2V0VHlwZSgpO1xuICAgICAgICAgICAgICAgIGNvbnN0IHZhbHVlUGFyYW1UeXBlID0gcGFyYW1zWzFdLmdldFR5cGUoKTtcblxuICAgICAgICAgICAgICAgIGNvbnN0IGluZGV4QXJnVHlwZSA9IGFyZ3VtZW50RXhwcmVzc2lvbi5nZXRUeXBlKCk7XG4gICAgICAgICAgICAgICAgY29uc3QgdmFsdWVBcmdUeXBlID0gdmFsdWVFeHByZXNzaW9uLmdldFR5cGUoKTtcblxuICAgICAgICAgICAgICAgIGNvbnN0IHR5cGVDaGVja2VyID0gdHJhbnNmb3JtYXRpb25Db250ZXh0LnR5cGVDaGVja2VyO1xuXG4gICAgICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICAgICAgdHlwZUNoZWNrZXIuaXNUeXBlQXNzaWduYWJsZVRvKGluZGV4QXJnVHlwZSwgaW5kZXhQYXJhbVR5cGUpICYmXG4gICAgICAgICAgICAgICAgICAgIHR5cGVDaGVja2VyLmlzVHlwZUFzc2lnbmFibGVUbyh2YWx1ZUFyZ1R5cGUsIHZhbHVlUGFyYW1UeXBlKVxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgaWYgKCFtYXRjaGluZ1NldEl0ZW0pIHtcbiAgICAgICAgICAgICAgICAvLyBObyBzdWl0YWJsZSBzZXRfaXRlbSBvdmVybG9hZCBmb3VuZFxuICAgICAgICAgICAgICAgIHJldHVybiBub2RlO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBDb25zdHJ1Y3QgdGhlIG5ldyBleHByZXNzaW9uOiBvYmouc2V0X2l0ZW0oaW5kZXgsIHZhbHVlKVxuICAgICAgICAgICAgY29uc3QgZXhwcmVzc2lvblRleHQgPSBleHByZXNzaW9uLmdldFRleHQoKTtcbiAgICAgICAgICAgIGNvbnN0IGluZGV4VGV4dCA9IGFyZ3VtZW50RXhwcmVzc2lvbi5nZXRUZXh0KCk7XG4gICAgICAgICAgICBjb25zdCB2YWx1ZVRleHQgPSB2YWx1ZUV4cHJlc3Npb24uZ2V0VGV4dCgpO1xuXG4gICAgICAgICAgICBjb25zdCBzZXRJdGVtQ2FsbCA9IGAke2V4cHJlc3Npb25UZXh0fS4ke1NFVF9JVEVNX05BTUV9KCR7aW5kZXhUZXh0fSwgJHt2YWx1ZVRleHR9KWA7XG5cbiAgICAgICAgICAgIC8vIFJlcGxhY2UgdGhlIGVudGlyZSBiaW5hcnkgZXhwcmVzc2lvblxuICAgICAgICAgICAgcGFyZW50LnJlcGxhY2VXaXRoVGV4dChzZXRJdGVtQ2FsbCk7XG5cbiAgICAgICAgICAgIHJldHVybiBwYXJlbnQ7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAvLyBUaGlzIGlzIGEgZ2V0dGVyOiBvYmpbaW5kZXhdXG4gICAgICAgICAgICBpZiAoZ2V0SXRlbU1ldGhvZHMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5vZGU7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIEF0dGVtcHQgdG8gZmluZCBhIG1hdGNoaW5nIGdldF9pdGVtIG1ldGhvZFxuICAgICAgICAgICAgY29uc3QgbWF0Y2hpbmdHZXRJdGVtID0gZ2V0SXRlbU1ldGhvZHMuZmluZChtZXRob2QgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IHBhcmFtcyA9IG1ldGhvZC5nZXRQYXJhbWV0ZXJzKCk7XG4gICAgICAgICAgICAgICAgaWYgKHBhcmFtcy5sZW5ndGggIT09IDEpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGNvbnN0IGluZGV4UGFyYW1UeXBlID0gcGFyYW1zWzBdLmdldFR5cGUoKTtcbiAgICAgICAgICAgICAgICBjb25zdCBpbmRleEFyZ1R5cGUgPSBhcmd1bWVudEV4cHJlc3Npb24uZ2V0VHlwZSgpO1xuXG4gICAgICAgICAgICAgICAgY29uc3QgdHlwZUNoZWNrZXIgPSB0cmFuc2Zvcm1hdGlvbkNvbnRleHQudHlwZUNoZWNrZXI7XG5cbiAgICAgICAgICAgICAgICByZXR1cm4gdHlwZUNoZWNrZXIuaXNUeXBlQXNzaWduYWJsZVRvKGluZGV4QXJnVHlwZSwgaW5kZXhQYXJhbVR5cGUpO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGlmICghbWF0Y2hpbmdHZXRJdGVtKSB7XG4gICAgICAgICAgICAgICAgLy8gTm8gc3VpdGFibGUgZ2V0X2l0ZW0gb3ZlcmxvYWQgZm91bmRcbiAgICAgICAgICAgICAgICByZXR1cm4gbm9kZTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gQ29uc3RydWN0IHRoZSBuZXcgZXhwcmVzc2lvbjogb2JqLmdldF9pdGVtKGluZGV4KVxuICAgICAgICAgICAgY29uc3QgZXhwcmVzc2lvblRleHQgPSBleHByZXNzaW9uLmdldFRleHQoKTtcbiAgICAgICAgICAgIGNvbnN0IGluZGV4VGV4dCA9IGFyZ3VtZW50RXhwcmVzc2lvbi5nZXRUZXh0KCk7XG5cbiAgICAgICAgICAgIGNvbnN0IGdldEl0ZW1DYWxsID0gYCR7ZXhwcmVzc2lvblRleHR9LiR7R0VUX0lURU1fTkFNRX0oJHtpbmRleFRleHR9KWA7XG5cbiAgICAgICAgICAgIC8vIFJlcGxhY2UgdGhlIGVsZW1lbnQgYWNjZXNzIGV4cHJlc3Npb25cbiAgICAgICAgICAgIGVsZW1lbnRBY2Nlc3MucmVwbGFjZVdpdGhUZXh0KGdldEl0ZW1DYWxsKTtcblxuICAgICAgICAgICAgcmV0dXJuIGVsZW1lbnRBY2Nlc3M7XG4gICAgICAgIH1cbiAgICB9XG59XG4iLCJpbXBvcnQgeyBTeW50YXhLaW5kLCBOb2RlLCBUeXBlQ2hlY2tlciwgUHJvcGVydHlBY2Nlc3NFeHByZXNzaW9uLCBCaW5hcnlFeHByZXNzaW9uIH0gZnJvbSAndHMtbW9ycGgnO1xuaW1wb3J0IHtUcmFuc2Zvcm1hdGlvbkNvbnRleHR9IGZyb20gXCIuL1RyYW5zZm9ybWF0aW9uQ29udGV4dFwiO1xuaW1wb3J0IHtJVHJhbnNmb3JtZXJ9IGZyb20gXCIuL0lUcmFuc2Zvcm1lclwiO1xuXG5leHBvcnQgY2xhc3MgUmVmVHJhbnNmb3JtZXIgaW1wbGVtZW50cyBJVHJhbnNmb3JtZXIge1xuICAgIG5vZGVUeXBlcyA9IFtTeW50YXhLaW5kLkJpbmFyeUV4cHJlc3Npb24sIFN5bnRheEtpbmQuUHJvcGVydHlBY2Nlc3NFeHByZXNzaW9uXTtcbiAgICBcbiAgICB0cmFuc2Zvcm1Ob2RlKG5vZGU6IE5vZGUsIHRyYW5zZm9ybWF0aW9uQ29udGV4dDogVHJhbnNmb3JtYXRpb25Db250ZXh0KTogTm9kZSB7XG4gICAgICAgIFxuICAgICAgICBsZXQgbmV3Tm9kZSA9IG5vZGU7XG4gICAgICAgIFxuICAgICAgICBpZiAoTm9kZS5pc0JpbmFyeUV4cHJlc3Npb24obm9kZSkgJiYgbm9kZS5nZXRPcGVyYXRvclRva2VuKCkuZ2V0S2luZCgpID09PSBTeW50YXhLaW5kLkVxdWFsc1Rva2VuKSB7XG4gICAgICAgICAgICBjb25zdCBiaW5hcnlFeHByZXNzaW9uID0gbm9kZSBhcyBCaW5hcnlFeHByZXNzaW9uO1xuICAgICAgICAgICAgY29uc3QgbGVmdCA9IGJpbmFyeUV4cHJlc3Npb24uZ2V0TGVmdCgpO1xuICAgICAgICAgICAgY29uc3QgcmlnaHQgPSBiaW5hcnlFeHByZXNzaW9uLmdldFJpZ2h0KCk7XG5cbiAgICAgICAgICAgIGlmIChOb2RlLmlzUHJvcGVydHlBY2Nlc3NFeHByZXNzaW9uKGxlZnQpICYmIGxlZnQuZ2V0TmFtZSgpID09PSAndmFsdWUnICYmIHRoaXMuaXNSZWZUeXBlKGxlZnQuZ2V0RXhwcmVzc2lvbigpLCB0cmFuc2Zvcm1hdGlvbkNvbnRleHQudHlwZUNoZWNrZXIpKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgcmVmRXhwcmVzc2lvbiA9IGxlZnQuZ2V0RXhwcmVzc2lvbigpLmdldFRleHQoKTtcbiAgICAgICAgICAgICAgICBjb25zdCB2YWx1ZUV4cHJlc3Npb24gPSByaWdodC5nZXRUZXh0KCk7XG4gICAgICAgICAgICAgICAgbmV3Tm9kZSA9IG5vZGUucmVwbGFjZVdpdGhUZXh0KGAkc2V0KCR7cmVmRXhwcmVzc2lvbn0sICR7dmFsdWVFeHByZXNzaW9ufSlgKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIGlmIChOb2RlLmlzUHJvcGVydHlBY2Nlc3NFeHByZXNzaW9uKG5vZGUpKSB7XG4gICAgICAgICAgICBjb25zdCBwcm9wZXJ0eUFjY2Vzc0V4cHJlc3Npb24gPSBub2RlIGFzIFByb3BlcnR5QWNjZXNzRXhwcmVzc2lvbjtcbiAgICAgICAgICAgIGlmIChwcm9wZXJ0eUFjY2Vzc0V4cHJlc3Npb24uZ2V0TmFtZSgpID09PSAndmFsdWUnICYmIHRoaXMuaXNSZWZUeXBlKHByb3BlcnR5QWNjZXNzRXhwcmVzc2lvbi5nZXRFeHByZXNzaW9uKCksIHRyYW5zZm9ybWF0aW9uQ29udGV4dC50eXBlQ2hlY2tlcikpIHtcbiAgICAgICAgICAgICAgICBjb25zdCByZWZFeHByZXNzaW9uID0gcHJvcGVydHlBY2Nlc3NFeHByZXNzaW9uLmdldEV4cHJlc3Npb24oKS5nZXRUZXh0KCk7XG4gICAgICAgICAgICAgICAgbmV3Tm9kZSA9IG5vZGUucmVwbGFjZVdpdGhUZXh0KGAkdW5yZWYoJHtyZWZFeHByZXNzaW9ufSlgKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgcmV0dXJuIG5ld05vZGU7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBpc1JlZlR5cGUobm9kZTogTm9kZSwgdHlwZUNoZWNrZXI6IFR5cGVDaGVja2VyKTogYm9vbGVhbiB7XG4gICAgICAgIGNvbnN0IHR5cGUgPSB0eXBlQ2hlY2tlci5nZXRUeXBlQXRMb2NhdGlvbihub2RlKTtcbiAgICAgICAgY29uc3QgdHlwZVN5bWJvbCA9IHR5cGUuZ2V0U3ltYm9sKCk7XG4gICAgICAgIHJldHVybiB0eXBlU3ltYm9sID8gdHlwZVN5bWJvbC5nZXROYW1lKCkgPT09ICckUmVmJyA6IGZhbHNlO1xuICAgIH1cbn1cbiIsImltcG9ydCB7Q2FsbEV4cHJlc3Npb24sIE1ldGhvZERlY2xhcmF0aW9uLCBOb2RlLCBTb3VyY2VGaWxlLCBTeW50YXhLaW5kLCBUeXBlLCBUeXBlRm9ybWF0RmxhZ3N9IGZyb20gXCJ0cy1tb3JwaFwiO1xuaW1wb3J0IHtcbiAgICBHZW5pZXNJbnN0YW5jZVByb3BOYW1lLFxuICAgIGdldElzVW5pdHlBUElEZWNsYXJhdGlvbixcbiAgICBnZXRUeXBlTmFtZUFuZEVuc3VyZUltcG9ydGVkLFxuICAgIGlzR2VuaWVzU2NyaXB0VHlwZVxufSBmcm9tIFwiLi4vQ29tcGlsZXJVdGlsc1wiO1xuaW1wb3J0IHtUcmFuc2Zvcm1hdGlvbkNvbnRleHR9IGZyb20gXCIuL1RyYW5zZm9ybWF0aW9uQ29udGV4dFwiO1xuaW1wb3J0IHtJVHJhbnNmb3JtZXJ9IGZyb20gXCIuL0lUcmFuc2Zvcm1lclwiO1xuaW1wb3J0IHtzZWxlY3RCZXN0T3ZlcmxvYWR9IGZyb20gXCIuLi9NZXRob2RPdmVybG9hZFV0aWxzXCI7XG5cbmV4cG9ydCBjbGFzcyBFeHRlbnNpb25NZXRob2RUcmFuc2Zvcm1lciBpbXBsZW1lbnRzIElUcmFuc2Zvcm1lciB7XG4gICAgbm9kZVR5cGVzID0gW1N5bnRheEtpbmQuQ2FsbEV4cHJlc3Npb25dO1xuXG4gICAgdHJhbnNmb3JtTm9kZShub2RlOiBOb2RlLCB0cmFuc2Zvcm1hdGlvbkNvbnRleHQ6IFRyYW5zZm9ybWF0aW9uQ29udGV4dCk6IE5vZGUge1xuICAgICAgICBpZiAoIU5vZGUuaXNDYWxsRXhwcmVzc2lvbihub2RlKSkge1xuICAgICAgICAgICAgcmV0dXJuIG5vZGU7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBjYWxsRXhwcmVzc2lvbiA9IG5vZGUgYXMgQ2FsbEV4cHJlc3Npb247XG4gICAgICAgIGNvbnN0IGV4cHJlc3Npb24gPSBjYWxsRXhwcmVzc2lvbi5nZXRFeHByZXNzaW9uKCk7XG5cbiAgICAgICAgaWYgKCFOb2RlLmlzUHJvcGVydHlBY2Nlc3NFeHByZXNzaW9uKGV4cHJlc3Npb24pKSB7XG4gICAgICAgICAgICByZXR1cm4gbm9kZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHByb3BlcnR5QWNjZXNzID0gZXhwcmVzc2lvbi5hc0tpbmRPclRocm93KFN5bnRheEtpbmQuUHJvcGVydHlBY2Nlc3NFeHByZXNzaW9uKTtcbiAgICAgICAgY29uc3QgbWV0aG9kTmFtZSA9IHByb3BlcnR5QWNjZXNzLmdldE5hbWUoKTtcbiAgICAgICAgY29uc3QgaW5zdGFuY2UgPSBwcm9wZXJ0eUFjY2Vzcy5nZXRFeHByZXNzaW9uKCk7XG4gICAgICAgIGNvbnN0IHR5cGUgPSBpbnN0YW5jZS5nZXRUeXBlKCk7XG5cbiAgICAgICAgY29uc3Qgc3ltYm9sID0gcHJvcGVydHlBY2Nlc3MuZ2V0U3ltYm9sKCk7XG4gICAgICAgIGlmICghc3ltYm9sKSB7XG4gICAgICAgICAgICByZXR1cm4gbm9kZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGRlY2xhcmF0aW9ucyA9IHN5bWJvbC5nZXREZWNsYXJhdGlvbnMoKTtcbiAgICAgICAgXG4gICAgICAgIGlmKCFkZWNsYXJhdGlvbnMgfHwgZGVjbGFyYXRpb25zLmxlbmd0aCA8PSAwKSB7XG4gICAgICAgICAgICByZXR1cm4gbm9kZTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgY29uc3Qgb3ZlcmxvYWREZWNsYXJhdGlvbnMgPSBkZWNsYXJhdGlvbnMuZmlsdGVyKGRlY2wgPT5cbiAgICAgICAgICAgIE5vZGUuaXNNZXRob2RTaWduYXR1cmUoZGVjbClcbiAgICAgICAgKSBhcyBNZXRob2REZWNsYXJhdGlvbltdO1xuXG4gICAgICAgIGlmIChvdmVybG9hZERlY2xhcmF0aW9ucy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgIHJldHVybiBub2RlO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgbWV0aG9kRGVjbGFyYXRpb24gPSBvdmVybG9hZERlY2xhcmF0aW9uc1swXSBhcyBNZXRob2REZWNsYXJhdGlvbjtcblxuICAgICAgICBpZiAoIWdldElzVW5pdHlBUElEZWNsYXJhdGlvbihtZXRob2REZWNsYXJhdGlvbikpIHtcbiAgICAgICAgICAgIHJldHVybiBub2RlO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgdHlwZUNoZWNrZXIgPSB0cmFuc2Zvcm1hdGlvbkNvbnRleHQudHlwZUNoZWNrZXI7XG5cbiAgICAgICAgLy8gUGVyZm9ybSBvdmVybG9hZCByZXNvbHV0aW9uXG4gICAgICAgIGNvbnN0IGJlc3RPdmVybG9hZCA9IHNlbGVjdEJlc3RPdmVybG9hZChvdmVybG9hZERlY2xhcmF0aW9ucywgY2FsbEV4cHJlc3Npb24sIHR5cGVDaGVja2VyKTtcblxuICAgICAgICBpZiAoIWJlc3RPdmVybG9hZCkge1xuICAgICAgICAgICAgLy8gTm8gc3VpdGFibGUgb3ZlcmxvYWQgZm91bmQ7IGZhbGxiYWNrIHRvIHRoZSBmaXJzdCBvdmVybG9hZFxuICAgICAgICAgICAgcmV0dXJuIG5vZGU7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoYmVzdE92ZXJsb2FkLmdldEtpbmQoKSAhPSBTeW50YXhLaW5kLk1ldGhvZFNpZ25hdHVyZSkge1xuICAgICAgICAgICAgcmV0dXJuIG5vZGU7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBqc0RvY1RhZ3MgPSBiZXN0T3ZlcmxvYWQuZ2V0SnNEb2NzKCkuZmxhdE1hcChkID0+IGQuZ2V0VGFncygpKSB8fCBbXTtcblxuICAgICAgICBpZiAoIWpzRG9jVGFncy5zb21lKHRhZyA9PiB0YWcuZ2V0VGFnTmFtZSgpID09PSAnZXh0ZW5zaW9uJykpIHtcbiAgICAgICAgICAgIHJldHVybiBub2RlO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgZXh0ZW5zaW9uVGFnID0ganNEb2NUYWdzLmZpbmQodGFnID0+IHRhZy5nZXRUYWdOYW1lKCkgPT09ICdleHRlbnNpb24nKTtcblxuICAgICAgICBpZiAoIWV4dGVuc2lvblRhZykge1xuICAgICAgICAgICAgcmV0dXJuIG5vZGU7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgZXh0ZW5zaW9uR2VuZXJpY0FyZ0luZGV4OiBudW1iZXIgfCBudWxsID0gbnVsbDtcblxuICAgICAgICAvLyBQYXJzZSAgQGV4dGVuc2lvbi1nZW5lcmljLWFyZy1pbmRleCB3aGljaCBtYXBzIHRvIHRoZSBnZW5lcmljIGFyZ3VtZW50IG9mIHRoZSBgdGhpc2AgcGFyYW1ldGVyXG4gICAgICAgIGNvbnN0IGV4dGVuc2lvbkdlbmVyaWNBcmdJbmRleFRhZyA9IGpzRG9jVGFncy5maW5kKFxuICAgICAgICAgICAgKHQpID0+IHQuZ2V0VGFnTmFtZSgpID09PSBcImV4dGVuc2lvbi1nZW5lcmljLWFyZy1pbmRleFwiXG4gICAgICAgICk7XG5cbiAgICAgICAgaWYgKGV4dGVuc2lvbkdlbmVyaWNBcmdJbmRleFRhZykge1xuICAgICAgICAgICAgY29uc3QgdGV4dCA9IGV4dGVuc2lvbkdlbmVyaWNBcmdJbmRleFRhZy5nZXRDb21tZW50VGV4dCgpIHx8IFwiMFwiO1xuICAgICAgICAgICAgZXh0ZW5zaW9uR2VuZXJpY0FyZ0luZGV4ID0gcGFyc2VJbnQodGV4dCwgMTApO1xuICAgICAgICAgICAgaWYgKGlzTmFOKGV4dGVuc2lvbkdlbmVyaWNBcmdJbmRleCkpIHtcbiAgICAgICAgICAgICAgICBleHRlbnNpb25HZW5lcmljQXJnSW5kZXggPSBudWxsOyAvLyBmYWxsYmFjayBpZiBwYXJzZSBmYWlsc1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgZXh0ZW5zaW9uQ29tbWVudCA9IGV4dGVuc2lvblRhZy5nZXRDb21tZW50VGV4dCgpO1xuICAgICAgICBjb25zdCB7XG4gICAgICAgICAgICBleHRlbnNpb25DbGFzcyxcbiAgICAgICAgICAgIGV4dGVuc2lvbk1ldGhvZCxcbiAgICAgICAgICAgIHR5cGVQYXJhbWV0ZXJzXG4gICAgICAgIH0gPSB0aGlzLnBhcnNlRXh0ZW5zaW9uQ29tbWVudChleHRlbnNpb25Db21tZW50LCBtZXRob2ROYW1lKTtcblxuXG4gICAgICAgIGNvbnN0IHNvdXJjZUZpbGUgPSBub2RlLmdldFNvdXJjZUZpbGUoKTtcbiAgICAgICAgXG4gICAgICAgIGNvbnN0IHR5cGVBcmdzID0gdGhpcy5leHRyYWN0QW5kT3JkZXJUeXBlQXJndW1lbnRzKGluc3RhbmNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYWxsRXhwcmVzc2lvbixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmVzdE92ZXJsb2FkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlUGFyYW1ldGVycyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXh0ZW5zaW9uR2VuZXJpY0FyZ0luZGV4KTtcbiAgICAgICAgXG4gICAgICAgIHNvdXJjZUZpbGUuZml4TWlzc2luZ0ltcG9ydHMoKTtcbiAgICAgICAgXG4gICAgICAgIGNvbnN0IGFyZ3MgPSBjYWxsRXhwcmVzc2lvbi5nZXRBcmd1bWVudHMoKTtcbiAgICAgICAgY29uc3QgcGFydHMgPSBleHRlbnNpb25DbGFzcy5zcGxpdCgnLicpO1xuICAgICAgICBjb25zdCBjbGFzc1Nob3J0TmFtZSA9IHBhcnRzLnBvcCgpIHx8ICcnO1xuICAgICAgICBjb25zdCBuYW1lc3BhY2UgPSBwYXJ0cy5qb2luKCcuJyk7XG5cbiAgICAgICAgdGhpcy5lbnN1cmVJbXBvcnQoc291cmNlRmlsZSwgY2xhc3NTaG9ydE5hbWUsIG5hbWVzcGFjZSk7XG5cbiAgICAgICAgY29uc3QgaW5zdGFuY2VUZXh0ID0gaXNHZW5pZXNTY3JpcHRUeXBlKHR5cGUpID8gXCIvL0B0cy1pZ25vcmVcXG5cIiArIGluc3RhbmNlLmdldFRleHQoKSArIFwiLlwiICsgR2VuaWVzSW5zdGFuY2VQcm9wTmFtZSA6IGluc3RhbmNlLmdldFRleHQoKTtcbiAgICAgICAgY29uc3QgYXJnc1RleHQgPSBhcmdzLm1hcChhcmcgPT4gYXJnLmdldEZ1bGxUZXh0KCkpLmpvaW4oXCIsIFwiKTtcblxuICAgICAgICAvLyBDb25zdHJ1Y3QgdGhlIG5ldyBleHByZXNzaW9uIHRleHRcbiAgICAgICAgY29uc3QgbmV3RXhwcmVzc2lvblRleHQgPSB0eXBlQXJncy5sZW5ndGggPiAwXG4gICAgICAgICAgICA/IGAke2NsYXNzU2hvcnROYW1lfS4ke2V4dGVuc2lvbk1ldGhvZH08JHt0eXBlQXJncy5qb2luKFwiLCBcIil9Pigke2luc3RhbmNlVGV4dH0sICR7YXJnc1RleHR9KWBcbiAgICAgICAgICAgIDogYCR7Y2xhc3NTaG9ydE5hbWV9LiR7ZXh0ZW5zaW9uTWV0aG9kfSgke2luc3RhbmNlVGV4dH0sICR7YXJnc1RleHR9KWA7XG5cbiAgICAgICAgcmV0dXJuIGNhbGxFeHByZXNzaW9uLnJlcGxhY2VXaXRoVGV4dChuZXdFeHByZXNzaW9uVGV4dCk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBwYXJzZUV4dGVuc2lvbkNvbW1lbnQoY29tbWVudDogc3RyaW5nIHwgdW5kZWZpbmVkLCBtZXRob2ROYW1lOiBzdHJpbmcpOiB7XG4gICAgICAgIGV4dGVuc2lvbkNsYXNzOiBzdHJpbmcsXG4gICAgICAgIGV4dGVuc2lvbk1ldGhvZDogc3RyaW5nLFxuICAgICAgICB0eXBlUGFyYW1ldGVyczogc3RyaW5nW11cbiAgICB9IHtcbiAgICAgICAgaWYgKCFjb21tZW50KSB7XG4gICAgICAgICAgICByZXR1cm4ge2V4dGVuc2lvbkNsYXNzOiBcIlwiLCBleHRlbnNpb25NZXRob2Q6IG1ldGhvZE5hbWUsIHR5cGVQYXJhbWV0ZXJzOiBbXX07XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCByZWdleCA9IC9eKD88bmFtZXNwYWNlPlthLXpBLVpfXVxcdyooPzpcXC5bYS16QS1aX11cXHcqKSopXFwuKD88bWV0aG9kPlthLXpBLVpfXVxcdyopXFxzKig/OjwoPzxhcmd1bWVudHM+W14+XSopPik/JC87XG4gICAgICAgIGNvbnN0IG1hdGNoID0gY29tbWVudC5tYXRjaChyZWdleCk7XG5cbiAgICAgICAgaWYgKG1hdGNoICYmIG1hdGNoLmdyb3Vwcykge1xuICAgICAgICAgICAgY29uc3Qge25hbWVzcGFjZSwgbWV0aG9kLCBhcmd1bWVudHM6IHR5cGVQYXJhbXN9ID0gbWF0Y2guZ3JvdXBzO1xuICAgICAgICAgICAgY29uc3QgdHlwZVBhcmFtZXRlcnMgPSB0eXBlUGFyYW1zID8gdHlwZVBhcmFtcy5zcGxpdCgnLCcpLm1hcChwYXJhbSA9PiBwYXJhbS50cmltKCkpIDogW107XG4gICAgICAgICAgICByZXR1cm4ge2V4dGVuc2lvbkNsYXNzOiBuYW1lc3BhY2UsIGV4dGVuc2lvbk1ldGhvZDogbWV0aG9kLCB0eXBlUGFyYW1ldGVyc307XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4ge2V4dGVuc2lvbkNsYXNzOiBcIlwiLCBleHRlbnNpb25NZXRob2Q6IG1ldGhvZE5hbWUsIHR5cGVQYXJhbWV0ZXJzOiBbXX07XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBlbnN1cmVJbXBvcnQoc291cmNlRmlsZTogU291cmNlRmlsZSwgY2xhc3NOYW1lOiBzdHJpbmcsIG5hbWVTcGFjZTogc3RyaW5nKTogdm9pZCB7XG4gICAgICAgIGNvbnN0IGltcG9ydERlY2xhcmF0aW9ucyA9IHNvdXJjZUZpbGUuZ2V0SW1wb3J0RGVjbGFyYXRpb25zKCk7XG5cbiAgICAgICAgbGV0IGhhc0ltcG9ydCA9IGZhbHNlO1xuICAgICAgICBmb3IgKGNvbnN0IGltcG9ydERlY2wgb2YgaW1wb3J0RGVjbGFyYXRpb25zKSB7XG4gICAgICAgICAgICBpZiAoaW1wb3J0RGVjbC5nZXRNb2R1bGVTcGVjaWZpZXIoKS5nZXRMaXRlcmFsVGV4dCgpID09PSBuYW1lU3BhY2UpIHtcbiAgICAgICAgICAgICAgICBoYXNJbXBvcnQgPSB0cnVlO1xuICAgICAgICAgICAgICAgIGNvbnN0IG5hbWVkSW1wb3J0cyA9IGltcG9ydERlY2wuZ2V0TmFtZWRJbXBvcnRzKCk7XG4gICAgICAgICAgICAgICAgY29uc3QgYWxyZWFkeUltcG9ydGVkID0gbmFtZWRJbXBvcnRzLnNvbWUobmFtZWRJbXBvcnQgPT4gbmFtZWRJbXBvcnQuZ2V0TmFtZSgpID09PSBjbGFzc05hbWUpO1xuICAgICAgICAgICAgICAgIGlmICghYWxyZWFkeUltcG9ydGVkKSB7XG4gICAgICAgICAgICAgICAgICAgIGltcG9ydERlY2wuYWRkTmFtZWRJbXBvcnQoY2xhc3NOYW1lKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIWhhc0ltcG9ydCkge1xuICAgICAgICAgICAgc291cmNlRmlsZS5hZGRJbXBvcnREZWNsYXJhdGlvbih7XG4gICAgICAgICAgICAgICAgbmFtZWRJbXBvcnRzOiBbe25hbWU6IGNsYXNzTmFtZX1dLFxuICAgICAgICAgICAgICAgIG1vZHVsZVNwZWNpZmllcjogbmFtZVNwYWNlLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcml2YXRlIGdldFR5cGVOYW1lKHR5cGU6IFR5cGUpOiBzdHJpbmcge1xuICAgICAgICByZXR1cm4gdHlwZS5nZXRUZXh0KHVuZGVmaW5lZCwgVHlwZUZvcm1hdEZsYWdzLk5vbmUpO1xuICAgIH1cbiAgICBcbiAgICBwcml2YXRlIGV4dHJhY3RBbmRPcmRlclR5cGVBcmd1bWVudHMoaW5zdGFuY2U6IE5vZGUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhbGxFeHByZXNzaW9uOiBDYWxsRXhwcmVzc2lvbixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWV0aG9kRGVjbGFyYXRpb246IE1ldGhvZERlY2xhcmF0aW9uLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlUGFyYW1ldGVyczogc3RyaW5nW10sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4dGVuc2lvbkdlbmVyaWNBcmdJbmRleDogbnVtYmVyIHwgbnVsbCk6IHN0cmluZ1tdIHtcbiAgICAgICAgY29uc3QgaW5zdGFuY2VUeXBlID0gaW5zdGFuY2UuZ2V0VHlwZSgpO1xuXG4gICAgICAgIGNvbnN0IHR5cGVBcmdzID0gaW5zdGFuY2VUeXBlLmdldFR5cGVBcmd1bWVudHMoKTtcbiAgICAgICAgY29uc3QgdHlwZVBhcmFtcyA9IGluc3RhbmNlVHlwZS5nZXRTeW1ib2xPclRocm93KCkuZ2V0RGVjbGFyZWRUeXBlKCkuZ2V0VHlwZUFyZ3VtZW50cygpO1xuICAgICAgICBjb25zdCB0eXBlQXJnTWFwID0gbmV3IE1hcDxzdHJpbmcsIHN0cmluZz4oKTtcblxuICAgICAgICB0eXBlQXJncy5mb3JFYWNoKCh0eXBlQXJnLCBpbmRleCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgcGFyYW0gPSB0eXBlUGFyYW1zW2luZGV4XTtcbiAgICAgICAgICAgIGlmIChwYXJhbSkge1xuICAgICAgICAgICAgICAgIHR5cGVBcmdNYXAuc2V0KHBhcmFtLmdldFRleHQoKSwgdHlwZUFyZy5nZXRUZXh0KCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICBjb25zdCBjYWxsVHlwZUFyZ3MgPSBjYWxsRXhwcmVzc2lvbi5nZXRUeXBlQXJndW1lbnRzKCk7XG4gICAgICAgIGNvbnN0IGNhbGxUeXBlUGFyYW1zID0gbWV0aG9kRGVjbGFyYXRpb24uZ2V0VHlwZVBhcmFtZXRlcnMoKTtcblxuICAgICAgICBjYWxsVHlwZUFyZ3MuZm9yRWFjaCgodHlwZUFyZywgaW5kZXgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHBhcmFtID0gY2FsbFR5cGVQYXJhbXNbaW5kZXhdO1xuICAgICAgICAgICAgaWYgKHBhcmFtKSB7XG4gICAgICAgICAgICAgICAgdHlwZUFyZ01hcC5zZXQocGFyYW0uZ2V0VGV4dCgpLCB0eXBlQXJnLmdldFRleHQoKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIE9yZGVyIHR5cGUgYXJndW1lbnRzIGJhc2VkIG9uIHRoZSB0eXBlIHBhcmFtZXRlciBvcmRlciBpbiB0aGUgY29tbWVudFxuICAgICAgICBsZXQgc29ydGVkUGFyYW1zID0gdHlwZVBhcmFtZXRlcnMubWFwKHBhcmFtID0+IHR5cGVBcmdNYXAuZ2V0KHBhcmFtKSB8fCBwYXJhbSk7XG5cbiAgICAgICAgLy8gMikgSWYgd2UgaGF2ZSBhbiBleHRlbnNpb25HZW5lcmljQXJnSW5kZXgsIGluc2VydCB0aGUgaW5zdGFuY2XigJlzIHR5cGVcbiAgICAgICAgaWYgKGV4dGVuc2lvbkdlbmVyaWNBcmdJbmRleCAhPT0gbnVsbCAmJiBleHRlbnNpb25HZW5lcmljQXJnSW5kZXggPj0gMCAmJiBleHRlbnNpb25HZW5lcmljQXJnSW5kZXggPD0gc29ydGVkUGFyYW1zLmxlbmd0aCkge1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBnZXRUeXBlTmFtZUFuZEVuc3VyZUltcG9ydGVkKGluc3RhbmNlVHlwZSwgY2FsbEV4cHJlc3Npb24uZ2V0U291cmNlRmlsZSgpKTtcbiAgICAgICAgICAgIHNvcnRlZFBhcmFtcy5zcGxpY2UoZXh0ZW5zaW9uR2VuZXJpY0FyZ0luZGV4LCAwLCB0aGlzLmdldFR5cGVOYW1lKGluc3RhbmNlVHlwZSkpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHNvcnRlZFBhcmFtcztcbiAgICB9XG59XG4iLCJpbXBvcnQgeyBTeW50YXhLaW5kLCBOb2RlLCBDYWxsRXhwcmVzc2lvbiwgVHlwZUNoZWNrZXIsIFR5cGUgfSBmcm9tICd0cy1tb3JwaCc7XG5pbXBvcnQge1xuICAgIGNvbnZlcnRUb0FsaWFzUGF0aCwgR2VuaWVzU2NyaXB0VHlwZSwgZ2V0RnVsbFR5cGVOYW1lLFxuICAgIGdldEdlbmllc1NjcmlwdFR5cGVGcm9tVHlwZSxcbiAgICBnZXRJc1VuaXR5QVBJVHlwZVxufSBmcm9tICcuLi9Db21waWxlclV0aWxzJztcbmltcG9ydCB7VHJhbnNmb3JtYXRpb25Db250ZXh0fSBmcm9tIFwiLi9UcmFuc2Zvcm1hdGlvbkNvbnRleHRcIjtcbmltcG9ydCB7SVRyYW5zZm9ybWVyfSBmcm9tIFwiLi9JVHJhbnNmb3JtZXJcIjtcblxuZXhwb3J0IGNsYXNzIFNjcmlwdGFibGVPYmplY3RDcmVhdGVJbnN0YW5jZVRyYW5zZm9ybWVyIGltcGxlbWVudHMgSVRyYW5zZm9ybWVyIHtcbiAgICBub2RlVHlwZXMgPSBbU3ludGF4S2luZC5DYWxsRXhwcmVzc2lvbl07XG5cbiAgICB0cmFuc2Zvcm1Ob2RlKG5vZGU6IE5vZGUsIHRyYW5zZm9ybWF0aW9uQ29udGV4dDogVHJhbnNmb3JtYXRpb25Db250ZXh0KTogTm9kZSB7XG4gICAgICAgIGxldCBuZXdOb2RlID0gbm9kZTtcblxuICAgICAgICBpZiAoTm9kZS5pc0NhbGxFeHByZXNzaW9uKG5vZGUpKSB7XG4gICAgICAgICAgICBjb25zdCBjYWxsRXhwcmVzc2lvbiA9IG5vZGUgYXMgQ2FsbEV4cHJlc3Npb247XG4gICAgICAgICAgICBjb25zdCBleHByZXNzaW9uID0gY2FsbEV4cHJlc3Npb24uZ2V0RXhwcmVzc2lvbigpO1xuICAgICAgICAgICAgY29uc3QgdHlwZUFyZ3VtZW50cyA9IGNhbGxFeHByZXNzaW9uLmdldFR5cGVBcmd1bWVudHMoKTtcbiAgICAgICAgICAgIGNvbnN0IG1ldGhvZEFyZ3VtZW50cyA9IGNhbGxFeHByZXNzaW9uLmdldEFyZ3VtZW50cygpO1xuXG4gICAgICAgICAgICBpZiAodHlwZUFyZ3VtZW50cy5sZW5ndGggPiAwIHx8IHRoaXMuaXNUeXBlb2ZBcmd1bWVudChtZXRob2RBcmd1bWVudHMpKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgbWV0aG9kTmFtZU5vZGUgPSBleHByZXNzaW9uLmdldExhc3RDaGlsZEJ5S2luZChTeW50YXhLaW5kLklkZW50aWZpZXIpO1xuICAgICAgICAgICAgICAgIGlmICghbWV0aG9kTmFtZU5vZGUpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ld05vZGU7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgY29uc3QgbWV0aG9kTmFtZSA9IG1ldGhvZE5hbWVOb2RlLmdldFRleHQoKTtcbiAgICAgICAgICAgICAgICBpZiAobWV0aG9kTmFtZSA9PT0gJ0NyZWF0ZUluc3RhbmNlJykge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBmaXJzdENoaWxkID0gZXhwcmVzc2lvbi5nZXRGaXJzdENoaWxkKCk7XG4gICAgICAgICAgICAgICAgICAgIGlmICghZmlyc3RDaGlsZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ld05vZGU7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICBjb25zdCBjbGFzc1R5cGUgPSB0cmFuc2Zvcm1hdGlvbkNvbnRleHQudHlwZUNoZWNrZXIuZ2V0VHlwZUF0TG9jYXRpb24oZmlyc3RDaGlsZCk7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmlzU2NyaXB0YWJsZU9iamVjdChjbGFzc1R5cGUsIHRyYW5zZm9ybWF0aW9uQ29udGV4dCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHJldHVyblR5cGUgPSB0cmFuc2Zvcm1hdGlvbkNvbnRleHQudHlwZUNoZWNrZXIuZ2V0VHlwZUF0TG9jYXRpb24oY2FsbEV4cHJlc3Npb24pO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodHlwZUFyZ3VtZW50cy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdHlwZUFyZ3VtZW50ID0gdHlwZUFyZ3VtZW50c1swXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0eXBlQXJndW1lbnRUeXBlID0gdHJhbnNmb3JtYXRpb25Db250ZXh0LnR5cGVDaGVja2VyLmdldFR5cGVBdExvY2F0aW9uKHR5cGVBcmd1bWVudCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3Tm9kZSA9IHRoaXMucHJvY2Vzc1R5cGVBcmd1bWVudChjYWxsRXhwcmVzc2lvbiwgdHlwZUFyZ3VtZW50VHlwZSwgZmFsc2UsIG1ldGhvZE5hbWUsIGZpcnN0Q2hpbGQsIHJldHVyblR5cGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLmlzVHlwZW9mQXJndW1lbnQobWV0aG9kQXJndW1lbnRzKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHR5cGVBcmd1bWVudCA9IHRoaXMuZ2V0VHlwZUZyb21UeXBlb2ZBcmd1bWVudChtZXRob2RBcmd1bWVudHNbMF0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0eXBlQXJndW1lbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdHlwZUFyZ3VtZW50VHlwZSA9IHRyYW5zZm9ybWF0aW9uQ29udGV4dC50eXBlQ2hlY2tlci5nZXRUeXBlQXRMb2NhdGlvbih0eXBlQXJndW1lbnQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXdOb2RlID0gdGhpcy5wcm9jZXNzVHlwZUFyZ3VtZW50KGNhbGxFeHByZXNzaW9uLCB0eXBlQXJndW1lbnRUeXBlLCB0cnVlLCBtZXRob2ROYW1lLCBmaXJzdENoaWxkLCByZXR1cm5UeXBlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gbmV3Tm9kZTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGlzVHlwZW9mQXJndW1lbnQoYXJnczogTm9kZVtdKTogYm9vbGVhbiB7XG4gICAgICAgIHJldHVybiBhcmdzLmxlbmd0aCA+IDAgJiYgYXJnc1swXS5nZXRUZXh0KCkuc3RhcnRzV2l0aCgnJHR5cGVvZignKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGdldFR5cGVGcm9tVHlwZW9mQXJndW1lbnQoYXJnOiBOb2RlKTogTm9kZSB8IHVuZGVmaW5lZCB7XG4gICAgICAgIGNvbnN0IGNhbGxFeHByZXNzaW9uID0gYXJnLmdldEZpcnN0Q2hpbGRCeUtpbmQoU3ludGF4S2luZC5DYWxsRXhwcmVzc2lvbik7XG4gICAgICAgIGlmIChjYWxsRXhwcmVzc2lvbikge1xuICAgICAgICAgICAgY29uc3QgdHlwZUFyZ3VtZW50ID0gY2FsbEV4cHJlc3Npb24uZ2V0QXJndW1lbnRzKClbMF07XG4gICAgICAgICAgICBpZiAoTm9kZS5pc1R5cGVOb2RlKHR5cGVBcmd1bWVudCkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdHlwZUFyZ3VtZW50O1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBwcm9jZXNzVHlwZUFyZ3VtZW50KGNhbGxFeHByZXNzaW9uOiBDYWxsRXhwcmVzc2lvbiwgdHlwZUFyZ3VtZW50VHlwZTogVHlwZSwgaXNUeXBlT2ZBcmcgOiBib29sZWFuLCBtZXRob2ROYW1lOiBzdHJpbmcsIGZpcnN0Q2hpbGQ6IE5vZGUsIHJldHVyblR5cGU6IFR5cGUpOiBOb2RlIHtcbiAgICAgICAgaWYgKGdldElzVW5pdHlBUElUeXBlKHR5cGVBcmd1bWVudFR5cGUpKSB7XG5cbiAgICAgICAgICAgIGlmKGlzVHlwZU9mQXJnKVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHJldHVybiBjYWxsRXhwcmVzc2lvbjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgY29uc3QgdHlwZU5hbWUgPSB0aGlzLmdldFR5cGVOYW1lKHR5cGVBcmd1bWVudFR5cGUpO1xuICAgICAgICAgICAgY29uc3QgbmV3Q2FsbEV4cHJlc3Npb25UZXh0ID0gdGhpcy5jcmVhdGVPdmVybG9hZGVkQ2FsbEV4cHJlc3Npb24oY2FsbEV4cHJlc3Npb24sIGAkdHlwZW9mKCR7dHlwZU5hbWV9KWAsIG1ldGhvZE5hbWUsIGZpcnN0Q2hpbGQsIHJldHVyblR5cGUpO1xuICAgICAgICAgICAgcmV0dXJuIGNhbGxFeHByZXNzaW9uLnJlcGxhY2VXaXRoVGV4dChuZXdDYWxsRXhwcmVzc2lvblRleHQpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY29uc3Qgc2NyaXB0VHlwZSA9IGdldEdlbmllc1NjcmlwdFR5cGVGcm9tVHlwZSh0eXBlQXJndW1lbnRUeXBlKTtcbiAgICAgICAgICAgIGlmIChzY3JpcHRUeXBlID09PSBHZW5pZXNTY3JpcHRUeXBlLlNjcmlwdGFibGVPYmplY3QpIHtcbiAgICAgICAgICAgICAgICBjb25zdCB0eXBlTmFtZSA9IGdldEZ1bGxUeXBlTmFtZSh0eXBlQXJndW1lbnRUeXBlKTtcbiAgICAgICAgICAgICAgICBjb25zdCBuZXdDYWxsRXhwcmVzc2lvblRleHQgPSB0aGlzLmNyZWF0ZU92ZXJsb2FkZWRDYWxsRXhwcmVzc2lvbihjYWxsRXhwcmVzc2lvbiwgYFwiJHt0eXBlTmFtZX1cImAsIG1ldGhvZE5hbWUsIGZpcnN0Q2hpbGQsIHJldHVyblR5cGUsIHRydWUpO1xuICAgICAgICAgICAgICAgIHJldHVybiBjYWxsRXhwcmVzc2lvbi5yZXBsYWNlV2l0aFRleHQobmV3Q2FsbEV4cHJlc3Npb25UZXh0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBjYWxsRXhwcmVzc2lvbjtcbiAgICB9XG5cbiAgICBwcml2YXRlIGlzU2NyaXB0YWJsZU9iamVjdCh0eXBlOiBUeXBlLCB0cmFuc2Zvcm1hdGlvbkNvbnRleHQ6IFRyYW5zZm9ybWF0aW9uQ29udGV4dCk6IGJvb2xlYW4ge1xuICAgICAgICBpZiAoIXR5cGUpIHJldHVybiBmYWxzZTtcblxuICAgICAgICBjb25zdCBzeW1ib2wgPSB0eXBlLmdldFN5bWJvbCgpO1xuICAgICAgICBpZiAoIXN5bWJvbCkgcmV0dXJuIGZhbHNlO1xuXG4gICAgICAgIGlmIChzeW1ib2wuZ2V0TmFtZSgpID09PSAnU2NyaXB0YWJsZU9iamVjdCcpIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRoaXMuaW5oZXJpdHNGcm9tKHR5cGUsIFsnU2NyaXB0YWJsZU9iamVjdCddLCB0cmFuc2Zvcm1hdGlvbkNvbnRleHQpO1xuICAgIH1cblxuICAgIHByaXZhdGUgaW5oZXJpdHNGcm9tKHR5cGU6IFR5cGUsIGJhc2VOYW1lczogc3RyaW5nW10sIHRyYW5zZm9ybWF0aW9uQ29udGV4dDogVHJhbnNmb3JtYXRpb25Db250ZXh0KTogYm9vbGVhbiB7XG4gICAgICAgIGNvbnN0IGJhc2VUeXBlcyA9IHRoaXMuZ2V0QmFzZVR5cGVzKHR5cGUsIHRyYW5zZm9ybWF0aW9uQ29udGV4dCk7XG4gICAgICAgIGZvciAoY29uc3QgYmFzZVR5cGUgb2YgYmFzZVR5cGVzKSB7XG4gICAgICAgICAgICBjb25zdCBiYXNlVHlwZU5hbWUgPSBiYXNlVHlwZS5nZXRTeW1ib2woKT8uZ2V0TmFtZSgpO1xuICAgICAgICAgICAgaWYgKGJhc2VUeXBlTmFtZSAmJiBiYXNlTmFtZXMuaW5jbHVkZXMoYmFzZVR5cGVOYW1lKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMuaW5oZXJpdHNGcm9tKGJhc2VUeXBlLCBiYXNlTmFtZXMsIHRyYW5zZm9ybWF0aW9uQ29udGV4dCkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBnZXRCYXNlVHlwZXModHlwZTogVHlwZSwgdHJhbnNmb3JtYXRpb25Db250ZXh0OiBUcmFuc2Zvcm1hdGlvbkNvbnRleHQpOiBUeXBlW10ge1xuICAgICAgICBjb25zdCBiYXNlVHlwZXM6IFR5cGVbXSA9IFtdO1xuICAgICAgICBjb25zdCBzeW1ib2wgPSB0eXBlLmdldFN5bWJvbCgpO1xuICAgICAgICBpZiAoIXN5bWJvbCkgcmV0dXJuIGJhc2VUeXBlcztcblxuICAgICAgICBjb25zdCBkZWNsYXJhdGlvbnMgPSBzeW1ib2wuZ2V0RGVjbGFyYXRpb25zKCk7XG4gICAgICAgIGlmICghZGVjbGFyYXRpb25zKSByZXR1cm4gYmFzZVR5cGVzO1xuXG4gICAgICAgIGZvciAoY29uc3QgZGVjbGFyYXRpb24gb2YgZGVjbGFyYXRpb25zKSB7XG4gICAgICAgICAgICBpZiAoTm9kZS5pc0NsYXNzRGVjbGFyYXRpb24oZGVjbGFyYXRpb24pKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgaGVyaXRhZ2VDbGF1c2VzID0gZGVjbGFyYXRpb24uZ2V0SGVyaXRhZ2VDbGF1c2VzKCk7XG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCBoZXJpdGFnZUNsYXVzZSBvZiBoZXJpdGFnZUNsYXVzZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdHlwZXMgPSBoZXJpdGFnZUNsYXVzZS5nZXRUeXBlTm9kZXMoKTtcbiAgICAgICAgICAgICAgICAgICAgZm9yIChjb25zdCB0eXBlTm9kZSBvZiB0eXBlcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgYmFzZVR5cGUgPSB0cmFuc2Zvcm1hdGlvbkNvbnRleHQudHlwZUNoZWNrZXIuZ2V0VHlwZUF0TG9jYXRpb24odHlwZU5vZGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGJhc2VUeXBlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYmFzZVR5cGVzLnB1c2goYmFzZVR5cGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBiYXNlVHlwZXM7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBnZXRUeXBlTmFtZSh0eXBlOiBUeXBlKTogc3RyaW5nIHtcbiAgICAgICAgY29uc3Qgc3ltYm9sID0gdHlwZS5nZXRTeW1ib2woKTtcbiAgICAgICAgaWYgKHN5bWJvbCkge1xuICAgICAgICAgICAgcmV0dXJuIHN5bWJvbC5nZXROYW1lKCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHR5cGUuZ2V0VGV4dCgpO1xuICAgIH1cblxuICAgIHByaXZhdGUgY3JlYXRlT3ZlcmxvYWRlZENhbGxFeHByZXNzaW9uKGNhbGxFeHByZXNzaW9uOiBDYWxsRXhwcmVzc2lvbiwgdHlwZUFyZ3VtZW50VGV4dDogc3RyaW5nLCBtZXRob2ROYW1lOiBzdHJpbmcsIGZpcnN0Q2hpbGQ6IE5vZGUsIHJldHVyblR5cGU6IFR5cGUsIGFkZFRzSWdub3JlOiBib29sZWFuID0gZmFsc2UpOiBzdHJpbmcge1xuICAgICAgICBjb25zdCBtZXRob2RBcmd1bWVudHMgPSBjYWxsRXhwcmVzc2lvbi5nZXRBcmd1bWVudHMoKS5tYXAoYXJnID0+IGFyZy5nZXRUZXh0KCkpLmpvaW4oJywgJyk7XG4gICAgICAgIGNvbnN0IGNhc3RUeXBlID0gcmV0dXJuVHlwZS5nZXRUZXh0KCk7XG5cbiAgICAgICAgbGV0IG5ld0NhbGwgPSBgKCR7Zmlyc3RDaGlsZC5nZXRGdWxsVGV4dCgpfS4ke21ldGhvZE5hbWV9KCR7dHlwZUFyZ3VtZW50VGV4dH0ke21ldGhvZEFyZ3VtZW50cyA/ICcsICcgKyBtZXRob2RBcmd1bWVudHMgOiAnJ30pIGFzICR7Y2FzdFR5cGV9KWA7XG5cbiAgICAgICAgaWYgKGFkZFRzSWdub3JlKSB7XG4gICAgICAgICAgICBuZXdDYWxsID0gYCR7bmV3Q2FsbH1gO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIG5ld0NhbGw7XG4gICAgfVxufVxuIiwibW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKFwibWFnaWMtc3RyaW5nXCIpOyIsImltcG9ydCB7IFN5bnRheEtpbmQsIE5vZGUsIENhbGxFeHByZXNzaW9uLCBUeXBlQ2hlY2tlciwgVHlwZSB9IGZyb20gJ3RzLW1vcnBoJztcbmltcG9ydCB7XG4gICAgY29tcG9uZW50TWV0aG9kcyxcbiAgICBjb252ZXJ0VG9BbGlhc1BhdGgsXG4gICAgR2VuaWVzU2NyaXB0VHlwZSxcbiAgICBnZXRGdWxsVHlwZU5hbWUsXG4gICAgZ2V0R2VuaWVzU2NyaXB0VHlwZUZyb21UeXBlLFxuICAgIGdldElzVW5pdHlBUElUeXBlLCBpc09ySW5oZXJpdHNGcm9tR2FtZU9iamVjdE9yQ29tcG9uZW50XG59IGZyb20gJy4uL0NvbXBpbGVyVXRpbHMnO1xuaW1wb3J0IHsgVHJhbnNmb3JtYXRpb25Db250ZXh0IH0gZnJvbSAnLi9UcmFuc2Zvcm1hdGlvbkNvbnRleHQnO1xuaW1wb3J0IHsgSVRyYW5zZm9ybWVyIH0gZnJvbSAnLi9JVHJhbnNmb3JtZXInO1xuXG5cbmV4cG9ydCBjbGFzcyBDb21wb25lbnRDYWxsVHJhbnNmb3JtZXIgaW1wbGVtZW50cyBJVHJhbnNmb3JtZXIge1xuICAgIG5vZGVUeXBlcyA9IFtTeW50YXhLaW5kLkNhbGxFeHByZXNzaW9uXTtcblxuICAgIHRyYW5zZm9ybU5vZGUobm9kZTogTm9kZSwgdHJhbnNmb3JtYXRpb25Db250ZXh0OiBUcmFuc2Zvcm1hdGlvbkNvbnRleHQpOiBOb2RlIHtcbiAgICAgICAgbGV0IG5ld05vZGUgPSBub2RlO1xuXG4gICAgICAgIGlmIChOb2RlLmlzQ2FsbEV4cHJlc3Npb24obm9kZSkpIHtcbiAgICAgICAgICAgIGNvbnN0IGNhbGxFeHByZXNzaW9uID0gbm9kZSBhcyBDYWxsRXhwcmVzc2lvbjtcbiAgICAgICAgICAgIGNvbnN0IGV4cHJlc3Npb24gPSBjYWxsRXhwcmVzc2lvbi5nZXRFeHByZXNzaW9uKCk7XG4gICAgICAgICAgICBjb25zdCB0eXBlQXJndW1lbnRzID0gY2FsbEV4cHJlc3Npb24uZ2V0VHlwZUFyZ3VtZW50cygpO1xuICAgICAgICAgICAgY29uc3QgbWV0aG9kQXJndW1lbnRzID0gY2FsbEV4cHJlc3Npb24uZ2V0QXJndW1lbnRzKCk7XG5cbiAgICAgICAgICAgIGlmICh0eXBlQXJndW1lbnRzLmxlbmd0aCA+IDAgfHwgdGhpcy5pc1R5cGVvZkFyZ3VtZW50KG1ldGhvZEFyZ3VtZW50cykpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBtZXRob2ROYW1lTm9kZSA9IGV4cHJlc3Npb24uZ2V0TGFzdENoaWxkQnlLaW5kKFN5bnRheEtpbmQuSWRlbnRpZmllcik7XG4gICAgICAgICAgICAgICAgaWYgKCFtZXRob2ROYW1lTm9kZSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3Tm9kZTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBjb25zdCBtZXRob2ROYW1lID0gbWV0aG9kTmFtZU5vZGUuZ2V0VGV4dCgpO1xuICAgICAgICAgICAgICAgIGlmIChjb21wb25lbnRNZXRob2RzLmhhcyhtZXRob2ROYW1lKSkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBmaXJzdENoaWxkID0gZXhwcmVzc2lvbi5nZXRGaXJzdENoaWxkKCk7XG4gICAgICAgICAgICAgICAgICAgIGlmICghZmlyc3RDaGlsZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ld05vZGU7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICBjb25zdCBjbGFzc1R5cGUgPSB0cmFuc2Zvcm1hdGlvbkNvbnRleHQudHlwZUNoZWNrZXIuZ2V0VHlwZUF0TG9jYXRpb24oZmlyc3RDaGlsZCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChpc09ySW5oZXJpdHNGcm9tR2FtZU9iamVjdE9yQ29tcG9uZW50KGNsYXNzVHlwZSwgdHJhbnNmb3JtYXRpb25Db250ZXh0KSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcmV0dXJuVHlwZSA9IHRyYW5zZm9ybWF0aW9uQ29udGV4dC50eXBlQ2hlY2tlci5nZXRUeXBlQXRMb2NhdGlvbihjYWxsRXhwcmVzc2lvbik7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0eXBlQXJndW1lbnRzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0eXBlQXJndW1lbnQgPSB0eXBlQXJndW1lbnRzWzBdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHR5cGVBcmd1bWVudFR5cGUgPSB0cmFuc2Zvcm1hdGlvbkNvbnRleHQudHlwZUNoZWNrZXIuZ2V0VHlwZUF0TG9jYXRpb24odHlwZUFyZ3VtZW50KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXdOb2RlID0gdGhpcy5wcm9jZXNzVHlwZUFyZ3VtZW50KGNhbGxFeHByZXNzaW9uLCB0eXBlQXJndW1lbnRUeXBlLCBmYWxzZSwgcmV0dXJuVHlwZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMuaXNUeXBlb2ZBcmd1bWVudChtZXRob2RBcmd1bWVudHMpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdHlwZUFyZ3VtZW50ID0gdGhpcy5nZXRUeXBlRnJvbVR5cGVvZkFyZ3VtZW50KG1ldGhvZEFyZ3VtZW50c1swXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVBcmd1bWVudCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0eXBlQXJndW1lbnRUeXBlID0gdHJhbnNmb3JtYXRpb25Db250ZXh0LnR5cGVDaGVja2VyLmdldFR5cGVBdExvY2F0aW9uKHR5cGVBcmd1bWVudCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ld05vZGUgPSB0aGlzLnByb2Nlc3NUeXBlQXJndW1lbnQoY2FsbEV4cHJlc3Npb24sIHR5cGVBcmd1bWVudFR5cGUsIHRydWUsIHJldHVyblR5cGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBuZXdOb2RlO1xuICAgIH1cblxuICAgIHByaXZhdGUgaXNUeXBlb2ZBcmd1bWVudChhcmdzOiBOb2RlW10pOiBib29sZWFuIHtcbiAgICAgICAgcmV0dXJuIGFyZ3MubGVuZ3RoID4gMCAmJiBhcmdzWzBdLmdldFRleHQoKS5zdGFydHNXaXRoKCckdHlwZW9mKCcpO1xuICAgIH1cblxuICAgIHByaXZhdGUgZ2V0VHlwZUZyb21UeXBlb2ZBcmd1bWVudChhcmc6IE5vZGUpOiBOb2RlIHwgdW5kZWZpbmVkIHtcbiAgICAgICAgY29uc3QgY2FsbEV4cHJlc3Npb24gPSBhcmcuZ2V0Rmlyc3RDaGlsZEJ5S2luZChTeW50YXhLaW5kLkNhbGxFeHByZXNzaW9uKTtcbiAgICAgICAgaWYgKGNhbGxFeHByZXNzaW9uKSB7XG4gICAgICAgICAgICBjb25zdCB0eXBlQXJndW1lbnQgPSBjYWxsRXhwcmVzc2lvbi5nZXRBcmd1bWVudHMoKVswXTtcbiAgICAgICAgICAgIGlmIChOb2RlLmlzVHlwZU5vZGUodHlwZUFyZ3VtZW50KSkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0eXBlQXJndW1lbnQ7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9XG5cbiAgICBwcml2YXRlIHByb2Nlc3NUeXBlQXJndW1lbnQoY2FsbEV4cHJlc3Npb246IENhbGxFeHByZXNzaW9uLCB0eXBlQXJndW1lbnRUeXBlOiBUeXBlLCBpc1R5cGVPZkFyZzogYm9vbGVhbiwgcmV0dXJuVHlwZTogVHlwZSk6IE5vZGUge1xuICAgICAgICBpZiAoZ2V0SXNVbml0eUFQSVR5cGUodHlwZUFyZ3VtZW50VHlwZSkpIHtcblxuICAgICAgICAgICAgaWYgKGlzVHlwZU9mQXJnKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGNhbGxFeHByZXNzaW9uO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBjb25zdCB0eXBlTmFtZSA9IHR5cGVBcmd1bWVudFR5cGUuaXNJbnRlcmZhY2UoKSA/IGAkdHlwZW9mKFwiJHtnZXRGdWxsVHlwZU5hbWUodHlwZUFyZ3VtZW50VHlwZSl9XCIpYCA6IGAkdHlwZW9mKCR7dGhpcy5nZXRUeXBlTmFtZSh0eXBlQXJndW1lbnRUeXBlKX0pYDtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuY3JlYXRlT3ZlcmxvYWRlZENhbGxFeHByZXNzaW9uKGNhbGxFeHByZXNzaW9uLCBgJHt0eXBlTmFtZX1gLCByZXR1cm5UeXBlKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgaWYodHlwZUFyZ3VtZW50VHlwZS5pc0ludGVyZmFjZSgpKVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGNvbnN0IHR5cGVOYW1lID0gZ2V0RnVsbFR5cGVOYW1lKHR5cGVBcmd1bWVudFR5cGUpO1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmNyZWF0ZU92ZXJsb2FkZWRDYWxsRXhwcmVzc2lvbihjYWxsRXhwcmVzc2lvbiwgYFwiJHt0eXBlTmFtZX1cImAsIHJldHVyblR5cGUsIHRydWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICBjb25zdCBzY3JpcHRUeXBlID0gZ2V0R2VuaWVzU2NyaXB0VHlwZUZyb21UeXBlKHR5cGVBcmd1bWVudFR5cGUpO1xuICAgICAgICAgICAgaWYgKHNjcmlwdFR5cGUgPT09IEdlbmllc1NjcmlwdFR5cGUuTW9ub2JlaGF2aW91cikge1xuICAgICAgICAgICAgICAgIGNvbnN0IHR5cGVOYW1lID0gZ2V0RnVsbFR5cGVOYW1lKHR5cGVBcmd1bWVudFR5cGUpO1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmNyZWF0ZU92ZXJsb2FkZWRDYWxsRXhwcmVzc2lvbihjYWxsRXhwcmVzc2lvbiwgYFwiJHt0eXBlTmFtZX1cImAsIHJldHVyblR5cGUsIHRydWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGNhbGxFeHByZXNzaW9uO1xuICAgIH1cblxuICAgIHByaXZhdGUgZ2V0VHlwZU5hbWUodHlwZTogVHlwZSk6IHN0cmluZyB7XG4gICAgICAgIGNvbnN0IHN5bWJvbCA9IHR5cGUuZ2V0U3ltYm9sKCk7XG4gICAgICAgIGlmIChzeW1ib2wpIHtcbiAgICAgICAgICAgIHJldHVybiBzeW1ib2wuZ2V0TmFtZSgpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0eXBlLmdldFRleHQoKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGNyZWF0ZU92ZXJsb2FkZWRDYWxsRXhwcmVzc2lvbihjYWxsRXhwcmVzc2lvbjogQ2FsbEV4cHJlc3Npb24sIHR5cGVBcmd1bWVudFRleHQ6IHN0cmluZywgcmV0dXJuVHlwZTogVHlwZSwgYWRkVHNJZ25vcmU6IGJvb2xlYW4gPSBmYWxzZSk6IENhbGxFeHByZXNzaW9uIHtcbiAgICAgICAgY29uc3QgY2FzdFR5cGUgPSByZXR1cm5UeXBlLmdldFRleHQoKTtcblxuICAgICAgICBjYWxsRXhwcmVzc2lvbi5nZXRUeXBlQXJndW1lbnRzKCkuZm9yRWFjaCgoZWxlbWVudCkgPT4ge1xuICAgICAgICAgICAgY2FsbEV4cHJlc3Npb24ucmVtb3ZlVHlwZUFyZ3VtZW50KGVsZW1lbnQpO1xuICAgICAgICB9KTtcblxuICAgICAgICBjYWxsRXhwcmVzc2lvbi5pbnNlcnRBcmd1bWVudCgwLCB0eXBlQXJndW1lbnRUZXh0KTtcblxuICAgICAgICAvLyBHZXQgdGhlIHRleHQgb2YgdGhlIGNhbGwgZXhwcmVzc2lvblxuICAgICAgICBjb25zdCBjYWxsRXhwcmVzc2lvblRleHQgPSBjYWxsRXhwcmVzc2lvbi5nZXRUZXh0KCk7XG5cbiAgICAgICAgLy8gQ3JlYXRlIHRoZSBuZXcgdGV4dCB3aXRoIHRoZSBjYXN0XG4gICAgICAgIGNvbnN0IG5ld0NhbGxFeHByZXNzaW9uVGV4dCA9IGAoJHtjYWxsRXhwcmVzc2lvblRleHR9IGFzICR7Y2FzdFR5cGV9KWA7XG5cbiAgICAgICAgLy8gUmVwbGFjZSB0aGUgY2FsbCBleHByZXNzaW9uIHdpdGggdGhlIG5ldyB0ZXh0XG4gICAgICAgIGNvbnN0IG5ld0V4cHJlc3Npb24gPSBjYWxsRXhwcmVzc2lvbi5yZXBsYWNlV2l0aFRleHQobmV3Q2FsbEV4cHJlc3Npb25UZXh0KSBhcyBDYWxsRXhwcmVzc2lvbjtcblxuICAgICAgICBpZiAoYWRkVHNJZ25vcmUpIHtcbiAgICAgICAgICAgIC8vIEdldCB0aGUgc291cmNlIGZpbGUgdGhhdCBjb250YWlucyB0aGUgY2FsbCBleHByZXNzaW9uXG4gICAgICAgICAgICBjb25zdCBzb3VyY2VGaWxlID0gbmV3RXhwcmVzc2lvbi5nZXRTb3VyY2VGaWxlKCk7XG5cbiAgICAgICAgICAgIC8vIEdldCB0aGUgc3RhcnQgcG9zaXRpb24gb2YgdGhlIGNhbGwgZXhwcmVzc2lvblxuICAgICAgICAgICAgY29uc3Qgc3RhcnQgPSBuZXdFeHByZXNzaW9uLmdldFN0YXJ0KCk7XG5cbiAgICAgICAgICAgIC8vIEluc2VydCB0aGUgdHMtaWdub3JlIGNvbW1lbnQgYmVmb3JlIHRoZSBjYWxsIGV4cHJlc3Npb25cbiAgICAgICAgICAgIHNvdXJjZUZpbGUuaW5zZXJ0VGV4dChzdGFydCwgXCIvLyBAdHMtaWdub3JlXFxuXCIpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIG5ld0V4cHJlc3Npb247XG4gICAgfVxufVxuIiwiaW1wb3J0IHsgTm9kZSwgU3ludGF4S2luZCwgVHlwZUNoZWNrZXIsIFR5cGUsIENhbGxFeHByZXNzaW9uIH0gZnJvbSBcInRzLW1vcnBoXCI7XG5pbXBvcnQgeyBUcmFuc2Zvcm1hdGlvbkNvbnRleHQgfSBmcm9tIFwiLi9UcmFuc2Zvcm1hdGlvbkNvbnRleHRcIjtcbmltcG9ydCB7IElUcmFuc2Zvcm1lciB9IGZyb20gXCIuL0lUcmFuc2Zvcm1lclwiO1xuaW1wb3J0IHtHZW5pZXNJbnN0YW5jZVByb3BOYW1lLCBnZXRJc1VuaXR5QVBJVHlwZSwgaXNHZW5pZXNTY3JpcHRUeXBlfSBmcm9tIFwiLi4vQ29tcGlsZXJVdGlsc1wiO1xuXG5leHBvcnQgY2xhc3MgR2VuaWVzSW5zdGFuY2VUcmFuc2Zvcm1lciBpbXBsZW1lbnRzIElUcmFuc2Zvcm1lciB7XG4gICAgbm9kZVR5cGVzID0gW1N5bnRheEtpbmQuQ2FsbEV4cHJlc3Npb25dO1xuXG4gICAgdHJhbnNmb3JtTm9kZShub2RlOiBOb2RlLCB0cmFuc2Zvcm1hdGlvbkNvbnRleHQ6IFRyYW5zZm9ybWF0aW9uQ29udGV4dCk6IE5vZGUge1xuICAgICAgICBpZiAoIU5vZGUuaXNDYWxsRXhwcmVzc2lvbihub2RlKSkge1xuICAgICAgICAgICAgcmV0dXJuIG5vZGU7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBjYWxsRXhwcmVzc2lvbiA9IG5vZGUuYXNLaW5kT3JUaHJvdyhTeW50YXhLaW5kLkNhbGxFeHByZXNzaW9uKTtcbiAgICAgICAgY29uc3QgdHlwZUNoZWNrZXIgPSB0cmFuc2Zvcm1hdGlvbkNvbnRleHQudHlwZUNoZWNrZXI7XG5cbiAgICAgICAgLy8gQ2hlY2sgaWYgdGhlIGNhbGwgZXhwcmVzc2lvbiBpcyBiZWluZyBtYWRlIGZyb20gYSBVbml0eSB0eXBlXG4gICAgICAgIGNvbnN0IGV4cHJlc3Npb25UeXBlID0gdHlwZUNoZWNrZXIuZ2V0VHlwZUF0TG9jYXRpb24oY2FsbEV4cHJlc3Npb24uZ2V0RXhwcmVzc2lvbigpKTtcbiAgICAgICAgaWYgKCFnZXRJc1VuaXR5QVBJVHlwZShleHByZXNzaW9uVHlwZSkpIHtcbiAgICAgICAgICAgIHJldHVybiBub2RlO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgYXJncyA9IGNhbGxFeHByZXNzaW9uLmdldEFyZ3VtZW50cygpO1xuICAgICAgICBhcmdzLmZvckVhY2goKGFyZywgaW5kZXgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHR5cGUgPSB0eXBlQ2hlY2tlci5nZXRUeXBlQXRMb2NhdGlvbihhcmcpO1xuICAgICAgICAgICAgaWYgKGlzR2VuaWVzU2NyaXB0VHlwZSh0eXBlKSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGFyZ1RleHQgPSBhcmcuZ2V0VGV4dCgpO1xuICAgICAgICAgICAgICAgIGNvbnN0IG5ld0FyZ1RleHQgPSBgLy9AdHMtaWdub3JlXFxuJHthcmdUZXh0fS4ke0dlbmllc0luc3RhbmNlUHJvcE5hbWV9YDtcbiAgICAgICAgICAgICAgICBhcmdzW2luZGV4XSA9IGFyZy5yZXBsYWNlV2l0aFRleHQobmV3QXJnVGV4dCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHJldHVybiBjYWxsRXhwcmVzc2lvbjtcbiAgICB9XG59XG4iLCJtb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoXCJAYW1wcHJvamVjdC9yZW1hcHBpbmdcIik7IiwiaW1wb3J0IHtcbiAgICBDYWxsRXhwcmVzc2lvbixcbiAgICBNZXRob2REZWNsYXJhdGlvbixcbiAgICBOb2RlLFxuICAgIFN5bnRheEtpbmQsXG4gICAgVHlwZSxcbiAgICBUeXBlQ2hlY2tlcixcbn0gZnJvbSBcInRzLW1vcnBoXCI7XG5pbXBvcnQge1RyYW5zZm9ybWF0aW9uQ29udGV4dH0gZnJvbSBcIi4vVHJhbnNmb3JtYXRpb25Db250ZXh0XCI7XG5pbXBvcnQge0lUcmFuc2Zvcm1lcn0gZnJvbSBcIi4vSVRyYW5zZm9ybWVyXCI7XG5pbXBvcnQge2NsZWFuVHlwZVRleHQsIGdldElzVW5pdHlBUElEZWNsYXJhdGlvbiwgTnVtZXJpY2FsQWxpYXNlc30gZnJvbSBcIi4uL0NvbXBpbGVyVXRpbHNcIjtcbmltcG9ydCB7c2VsZWN0QmVzdE92ZXJsb2FkLCBpc051bWVyaWNDYXN0YWJsZSwgdHlwZXNBcmVFcXVhbCwgaW5mZXJQb3NzaWJsZVR5cGVzfSBmcm9tIFwiLi4vTWV0aG9kT3ZlcmxvYWRVdGlsc1wiO1xuXG5leHBvcnQgY2xhc3MgTnVtZXJpY092ZXJsb2FkUmVzb2x1dGlvblRyYW5zZm9ybWVyIGltcGxlbWVudHMgSVRyYW5zZm9ybWVyIHtcbiAgICBub2RlVHlwZXMgPSBbU3ludGF4S2luZC5DYWxsRXhwcmVzc2lvbl07XG5cbiAgICB0cmFuc2Zvcm1Ob2RlKG5vZGU6IE5vZGUsIHRyYW5zZm9ybWF0aW9uQ29udGV4dDogVHJhbnNmb3JtYXRpb25Db250ZXh0KTogTm9kZSB7XG4gICAgICAgIGlmICghTm9kZS5pc0NhbGxFeHByZXNzaW9uKG5vZGUpKSB7XG4gICAgICAgICAgICByZXR1cm4gbm9kZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGNhbGxFeHByZXNzaW9uID0gbm9kZSBhcyBDYWxsRXhwcmVzc2lvbjtcbiAgICAgICAgY29uc3QgZXhwcmVzc2lvbiA9IGNhbGxFeHByZXNzaW9uLmdldEV4cHJlc3Npb24oKTtcblxuICAgICAgICBpZiAoIU5vZGUuaXNQcm9wZXJ0eUFjY2Vzc0V4cHJlc3Npb24oZXhwcmVzc2lvbikgJiYgIU5vZGUuaXNJZGVudGlmaWVyKGV4cHJlc3Npb24pKSB7XG4gICAgICAgICAgICByZXR1cm4gbm9kZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IG1ldGhvZE5hbWVOb2RlID0gTm9kZS5pc1Byb3BlcnR5QWNjZXNzRXhwcmVzc2lvbihleHByZXNzaW9uKSA/IGV4cHJlc3Npb24uZ2V0TmFtZU5vZGUoKSA6IGV4cHJlc3Npb247XG5cbiAgICAgICAgY29uc3Qgc3ltYm9sID0gbWV0aG9kTmFtZU5vZGUuZ2V0U3ltYm9sKCk7XG4gICAgICAgIGlmICghc3ltYm9sKSB7XG4gICAgICAgICAgICByZXR1cm4gbm9kZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IG92ZXJsb2FkRGVjbGFyYXRpb25zID0gc3ltYm9sLmdldERlY2xhcmF0aW9ucygpLmZpbHRlcihkZWNsID0+XG4gICAgICAgICAgICBOb2RlLmlzTWV0aG9kRGVjbGFyYXRpb24oZGVjbClcbiAgICAgICAgKSBhcyBNZXRob2REZWNsYXJhdGlvbltdO1xuXG4gICAgICAgIGlmIChvdmVybG9hZERlY2xhcmF0aW9ucy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgIHJldHVybiBub2RlO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgbWV0aG9kRGVjbGFyYXRpb24gPSBvdmVybG9hZERlY2xhcmF0aW9uc1swXSBhcyBNZXRob2REZWNsYXJhdGlvbjtcblxuICAgICAgICBpZiAoIWdldElzVW5pdHlBUElEZWNsYXJhdGlvbihtZXRob2REZWNsYXJhdGlvbikpIHtcbiAgICAgICAgICAgIHJldHVybiBub2RlO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgdHlwZUNoZWNrZXIgPSB0cmFuc2Zvcm1hdGlvbkNvbnRleHQudHlwZUNoZWNrZXI7XG5cbiAgICAgICAgLy8gUGVyZm9ybSBvdmVybG9hZCByZXNvbHV0aW9uXG4gICAgICAgIGNvbnN0IGJlc3RPdmVybG9hZCA9IHNlbGVjdEJlc3RPdmVybG9hZChvdmVybG9hZERlY2xhcmF0aW9ucywgY2FsbEV4cHJlc3Npb24sIHR5cGVDaGVja2VyKTtcblxuICAgICAgICBpZiAoIWJlc3RPdmVybG9hZCkge1xuICAgICAgICAgICAgLy8gTm8gc3VpdGFibGUgb3ZlcmxvYWQgZm91bmQ7IGZhbGxiYWNrIHRvIHRoZSBmaXJzdCBvdmVybG9hZFxuICAgICAgICAgICAgcmV0dXJuIG5vZGU7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBHZXQgbWV0aG9kU3dhcCB2YWx1ZSBmcm9tIEpTRG9jXG4gICAgICAgIGNvbnN0IGpzRG9jcyA9IGJlc3RPdmVybG9hZC5nZXRKc0RvY3MoKTtcbiAgICAgICAgbGV0IG1ldGhvZFN3YXBWYWx1ZTogc3RyaW5nIHwgdW5kZWZpbmVkO1xuICAgICAgICBmb3IgKGNvbnN0IGpzRG9jIG9mIGpzRG9jcykge1xuICAgICAgICAgICAgY29uc3QgdGFncyA9IGpzRG9jLmdldFRhZ3MoKTtcbiAgICAgICAgICAgIGZvciAoY29uc3QgdGFnIG9mIHRhZ3MpIHtcbiAgICAgICAgICAgICAgICBpZiAodGFnLmdldFRhZ05hbWUoKSA9PT0gJ21ldGhvZFN3YXAnKSB7XG4gICAgICAgICAgICAgICAgICAgIG1ldGhvZFN3YXBWYWx1ZSA9IHRhZy5nZXRDb21tZW50VGV4dCgpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAobWV0aG9kU3dhcFZhbHVlKSB7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIW1ldGhvZFN3YXBWYWx1ZSkge1xuICAgICAgICAgICAgLy8gbWV0aG9kU3dhcCBub3QgZm91bmQ7IGNhbm5vdCBwcm9jZWVkXG4gICAgICAgICAgICByZXR1cm4gbm9kZTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vICoqQ2hlY2sgaWYgdGhlIG1ldGhvZCBpcyBnZW5lcmljKipcbiAgICAgICAgY29uc3QgdHlwZVBhcmFtZXRlcnMgPSBiZXN0T3ZlcmxvYWQuZ2V0VHlwZVBhcmFtZXRlcnMoKTtcbiAgICAgICAgaWYgKHR5cGVQYXJhbWV0ZXJzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIC8vIFRoZSBtZXRob2QgaXMgZ2VuZXJpY1xuICAgICAgICAgICAgLy8gU3RvcmUgdGhlIHNlbGVjdGVkIG92ZXJsb2FkIGluZm8gaW4gdGhlIFRyYW5zZm9ybWF0aW9uQ29udGV4dFxuICAgICAgICAgICAgdHJhbnNmb3JtYXRpb25Db250ZXh0LnNldFN3YXBPdmVybG9hZChjYWxsRXhwcmVzc2lvbiwge1xuICAgICAgICAgICAgICAgIGRlY2xhcmF0aW9uOiBiZXN0T3ZlcmxvYWQsXG4gICAgICAgICAgICAgICAgbWV0aG9kU3dhcFZhbHVlLFxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIC8vICoqRG8gbm90IG1vZGlmeSB0aGUgY2FsbCBleHByZXNzaW9uIGhlcmUqKlxuICAgICAgICAgICAgcmV0dXJuIG5vZGU7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBJbmZlciBwb3NzaWJsZSB0eXBlcyBmb3IgZWFjaCBhcmd1bWVudFxuICAgICAgICBjb25zdCBhcmd1bWVudFR5cGVzTGlzdCA9IGNhbGxFeHByZXNzaW9uLmdldEFyZ3VtZW50cygpLm1hcChhcmcgPT5cbiAgICAgICAgICAgIGluZmVyUG9zc2libGVUeXBlcyhhcmcsIHR5cGVDaGVja2VyKVxuICAgICAgICApO1xuXG4gICAgICAgIC8vIFByb2NlZWQgd2l0aCBzd2FwcGluZyBmb3Igbm9uLWdlbmVyaWMgbWV0aG9kc1xuXG4gICAgICAgIC8vIEJ1aWxkIHRoZSBuZXcgbWV0aG9kIGNhbGxcbiAgICAgICAgY29uc3QgbmV3QXJndW1lbnRzID0gY2FsbEV4cHJlc3Npb24uZ2V0QXJndW1lbnRzKCkubWFwKChhcmcsIGluZGV4KSA9PiB7XG4gICAgICAgICAgICBjb25zdCBwb3NzaWJsZUFyZ1R5cGVzID0gYXJndW1lbnRUeXBlc0xpc3RbaW5kZXhdO1xuICAgICAgICAgICAgY29uc3QgcGFyYW1UeXBlID0gdHlwZUNoZWNrZXIuZ2V0VHlwZUF0TG9jYXRpb24oYmVzdE92ZXJsb2FkLmdldFBhcmFtZXRlcnMoKVtpbmRleF0pO1xuXG4gICAgICAgICAgICBjb25zdCBhcmdUeXBlTWF0Y2ggPSBwb3NzaWJsZUFyZ1R5cGVzLmZpbmQoYXJnVHlwZSA9PiB0eXBlc0FyZUVxdWFsKGFyZ1R5cGUsIHBhcmFtVHlwZSkpO1xuXG4gICAgICAgICAgICBpZiAoYXJnVHlwZU1hdGNoKSB7XG4gICAgICAgICAgICAgICAgLy8gRXhhY3QgbWF0Y2gsIHVzZSBhcmd1bWVudCBhcyBpc1xuICAgICAgICAgICAgICAgIHJldHVybiBhcmcuZ2V0RnVsbFRleHQoKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAocG9zc2libGVBcmdUeXBlcy5zb21lKGFyZ1R5cGUgPT4gaXNOdW1lcmljQ2FzdGFibGUoYXJnVHlwZSwgcGFyYW1UeXBlKSkpIHtcbiAgICAgICAgICAgICAgICAvLyBDYXN0IGFyZ3VtZW50IHRvIHRoZSBwYXJhbWV0ZXIgdHlwZVxuICAgICAgICAgICAgICAgIHJldHVybiBgKCR7YXJnLmdldEZ1bGxUZXh0KCl9KSBhcyAke3BhcmFtVHlwZS5nZXRUZXh0KCl9YDtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgLy8gQ2Fubm90IGNhc3QsIGJ1dCBwcm9jZWVkIHdpdGggY2FzdGluZyB0byBwYXJhbWV0ZXIgdHlwZVxuICAgICAgICAgICAgICAgIHJldHVybiBgKCR7YXJnLmdldEZ1bGxUZXh0KCl9KSBhcyAke3BhcmFtVHlwZS5nZXRUZXh0KCl9YDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gSW5jbHVkZSB0aGUgb2JqZWN0IGFjY2VzcyBpbiB0aGUgbmV3IG1ldGhvZCBjYWxsXG4gICAgICAgIGxldCBuZXdFeHByZXNzaW9uVGV4dDogc3RyaW5nO1xuICAgICAgICBpZiAoTm9kZS5pc1Byb3BlcnR5QWNjZXNzRXhwcmVzc2lvbihleHByZXNzaW9uKSkge1xuICAgICAgICAgICAgY29uc3Qgb2JqZWN0VGV4dCA9IGV4cHJlc3Npb24uZ2V0RXhwcmVzc2lvbigpLmdldFRleHQoKTtcbiAgICAgICAgICAgIG5ld0V4cHJlc3Npb25UZXh0ID0gYCR7b2JqZWN0VGV4dH0uJHttZXRob2RTd2FwVmFsdWV9YDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIG5ld0V4cHJlc3Npb25UZXh0ID0gbWV0aG9kU3dhcFZhbHVlO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgbmV3Q2FsbEV4cHJlc3Npb25UZXh0ID0gYCR7bmV3RXhwcmVzc2lvblRleHR9KCR7bmV3QXJndW1lbnRzLmpvaW4oJywgJyl9KWA7XG5cbiAgICAgICAgLy8gUmVwbGFjZSB0aGUgb3JpZ2luYWwgY2FsbCB3aXRoIHRoZSBuZXcgY2FsbFxuICAgICAgICBjb25zdCBuZXdOb2RlID0gY2FsbEV4cHJlc3Npb24ucmVwbGFjZVdpdGhUZXh0KG5ld0NhbGxFeHByZXNzaW9uVGV4dCk7XG5cbiAgICAgICAgLy8gR2V0IHRoZSBzb3VyY2UgZmlsZSB0aGF0IGNvbnRhaW5zIHRoZSBjYWxsIGV4cHJlc3Npb25cbiAgICAgICAgY29uc3Qgc291cmNlRmlsZSA9IG5ld05vZGUuZ2V0U291cmNlRmlsZSgpO1xuXG4gICAgICAgIC8vIEdldCB0aGUgc3RhcnQgcG9zaXRpb24gb2YgdGhlIGNhbGwgZXhwcmVzc2lvblxuICAgICAgICBjb25zdCBzdGFydCA9IG5ld05vZGUuZ2V0U3RhcnQoKTtcblxuICAgICAgICAvLyBJbnNlcnQgdGhlIHRzLWlnbm9yZSBjb21tZW50IGJlZm9yZSB0aGUgY2FsbCBleHByZXNzaW9uXG4gICAgICAgIHNvdXJjZUZpbGUuaW5zZXJ0VGV4dChzdGFydCwgXCIvLyBAdHMtaWdub3JlXFxuXCIpO1xuXG4gICAgICAgIHJldHVybiBuZXdOb2RlO1xuICAgIH1cblxufVxuIiwibW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKFwidHMtbW9ycGhcIik7IiwiaW1wb3J0IHtcbiAgICBOb2RlLFxuICAgIE9wdGlvbmFsS2luZCxcbiAgICBTb3VyY2VGaWxlLFxuICAgIFN5bnRheEtpbmQsXG4gICAgVHlwZSxcbiAgICBWYXJpYWJsZURlY2xhcmF0aW9uS2luZCxcbiAgICBWYXJpYWJsZVN0YXRlbWVudFN0cnVjdHVyZVxufSBmcm9tIFwidHMtbW9ycGhcIjtcbmltcG9ydCB7XG4gICAgZW5zdXJlVHlwZUltcG9ydGVkLFxuICAgIGdldElzVW5pdHlBUElUeXBlLFxuICAgIGdldFR5cGVOYW1lQW5kRW5zdXJlSW1wb3J0ZWQsIGluc2VydFZhcmlhYmxlU3RhdGVtZW50c1xufSBmcm9tIFwiLi4vQ29tcGlsZXJVdGlsc1wiO1xuaW1wb3J0IHsgVHJhbnNmb3JtYXRpb25Db250ZXh0IH0gZnJvbSBcIi4vVHJhbnNmb3JtYXRpb25Db250ZXh0XCI7XG5pbXBvcnQgeyBJVHJhbnNmb3JtZXIgfSBmcm9tIFwiLi9JVHJhbnNmb3JtZXJcIjtcblxuZXhwb3J0IGNsYXNzIEdlbmVyaWNUeXBlVHJhbnNmb3JtZXIgaW1wbGVtZW50cyBJVHJhbnNmb3JtZXIge1xuICAgIG5vZGVUeXBlcyA9IFtTeW50YXhLaW5kLk5ld0V4cHJlc3Npb24sIFN5bnRheEtpbmQuQ2FsbEV4cHJlc3Npb25dO1xuXG4gICAgdHJhbnNmb3JtTm9kZShub2RlOiBOb2RlLCBjb250ZXh0OiBUcmFuc2Zvcm1hdGlvbkNvbnRleHQpOiBOb2RlIHtcbiAgICAgICAgaWYgKG5vZGUuaXNLaW5kKFN5bnRheEtpbmQuTmV3RXhwcmVzc2lvbikpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnRyYW5zZm9ybU5ld0V4cHJlc3Npb24obm9kZSwgY29udGV4dCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAvLyBGb3IgYWxsIG90aGVyIG5vZGUga2luZHMsIGRvIHRoZSBzYW1lIGJyaWRnaW5nIGFwcHJvYWNoXG4gICAgICAgICAgICByZXR1cm4gdGhpcy50cmFuc2Zvcm1HZW5lcmljVXNhZ2Uobm9kZSwgY29udGV4dCk7XG4gICAgICAgIH1cbiAgICB9XG5cblxuICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAgLy8gICAgICBORVcgRVhQUkVTU0lPTiBMT0dJQ1xuICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAgcHJpdmF0ZSB0cmFuc2Zvcm1OZXdFeHByZXNzaW9uKG5vZGU6IE5vZGUsIHRyYW5zZm9ybWF0aW9uQ29udGV4dDogVHJhbnNmb3JtYXRpb25Db250ZXh0KSB7XG4gICAgICAgIGNvbnN0IG5ld0V4cHJlc3Npb24gPSBub2RlLmFzS2luZE9yVGhyb3coU3ludGF4S2luZC5OZXdFeHByZXNzaW9uKTtcbiAgICAgICAgY29uc3QgdHlwZSA9IG5ld0V4cHJlc3Npb24uZ2V0VHlwZSgpO1xuICAgICAgICBjb25zdCB0eXBlQXJndW1lbnRzID0gbmV3RXhwcmVzc2lvbi5nZXRUeXBlQXJndW1lbnRzKCkubWFwKHQgPT4gdC5nZXRUeXBlKCkpO1xuICAgICAgICBjb25zdCBhcmdzID0gbmV3RXhwcmVzc2lvbi5nZXRBcmd1bWVudHMoKTtcblxuICAgICAgICBpZiAoZ2V0SXNVbml0eUFQSVR5cGUodHlwZSkgJiYgdHlwZUFyZ3VtZW50cy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBjb25zdCBzb3VyY2VGaWxlID0gbm9kZS5nZXRTb3VyY2VGaWxlKCk7XG5cbiAgICAgICAgICAgIC8vIDEpIEVuc3VyZSB0aGUgZ2VuZXJpYyBtYXAgZm9yIHRoaXMgZmlsZSBpcyBzZXQgdXAgYW5kIHR5cGUgaXMgaW1wb3J0ZWQuXG4gICAgICAgICAgICB0aGlzLmVuc3VyZUdlbmVyaWNUeXBlTWFwKHNvdXJjZUZpbGUsIHRyYW5zZm9ybWF0aW9uQ29udGV4dCk7XG4gICAgICAgICAgICBlbnN1cmVUeXBlSW1wb3J0ZWQodHlwZSwgc291cmNlRmlsZSk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIDIpIENyZWF0ZSB0aGUgYnJpZGdpbmcgdmFyaWFibGUgaWYgbmVlZGVkXG4gICAgICAgICAgICBsZXQgbmV3VmFyU3RhdGVtZW50czogT3B0aW9uYWxLaW5kPFZhcmlhYmxlU3RhdGVtZW50U3RydWN0dXJlPltdID0gW107XG4gICAgICAgICAgICBjb25zdCBnZW5lcmljVmFyTmFtZSA9IHRoaXMuY3JlYXRlR2VuZXJpY1R5cGVWYXJpYWJsZShcbiAgICAgICAgICAgICAgICB0eXBlLFxuICAgICAgICAgICAgICAgIHR5cGVBcmd1bWVudHMsXG4gICAgICAgICAgICAgICAgc291cmNlRmlsZSxcbiAgICAgICAgICAgICAgICBuZXdWYXJTdGF0ZW1lbnRzLFxuICAgICAgICAgICAgICAgIHRyYW5zZm9ybWF0aW9uQ29udGV4dFxuICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgLy8gMykgSW5zZXJ0IHRoZSB2YXJpYWJsZSBzdGF0ZW1lbnRzIGFmdGVyIHRoZSBsYXN0IGltcG9ydFxuICAgICAgICAgICAgaW5zZXJ0VmFyaWFibGVTdGF0ZW1lbnRzKFxuICAgICAgICAgICAgICAgIHNvdXJjZUZpbGUsXG4gICAgICAgICAgICAgICAgbmV3VmFyU3RhdGVtZW50cyxcbiAgICAgICAgICAgICAgICB0cmFuc2Zvcm1hdGlvbkNvbnRleHRcbiAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgIC8vIDQpIFJlcGxhY2UgYG5ldyBTb21lR2VuZXJpYzwuLi4+KGFyZ3MpYCB0ZXh0IHdpdGggdGhlIGJyaWRnaW5nIHZhcmlhYmxlOlxuICAgICAgICAgICAgLy8gICAgYG5ldyBfR2VuZXJpY1ZhcihhcmdzKSBhcyBTb21lR2VuZXJpYzwuLi4+YFxuICAgICAgICAgICAgY29uc3QgYXJnc1RleHQgPSBhcmdzLm1hcChhcmcgPT4gYXJnLmdldEZ1bGxUZXh0KCkpLmpvaW4oXCIsIFwiKTtcbiAgICAgICAgICAgIGNvbnN0IG5ld0V4cHJlc3Npb25UZXh0ID0gYG5ldyAke2dlbmVyaWNWYXJOYW1lfSgke2FyZ3NUZXh0fSkgYXMgJHt0eXBlLmdldFRleHQoKX1gO1xuICAgICAgICAgICAgcmV0dXJuIG5ld0V4cHJlc3Npb24ucmVwbGFjZVdpdGhUZXh0KG5ld0V4cHJlc3Npb25UZXh0KTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBub2RlO1xuICAgIH1cblxuICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAgLy8gICAgIEdFTkVSSUMgVVNBR0UgTE9HSUNcbiAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgIHByaXZhdGUgdHJhbnNmb3JtR2VuZXJpY1VzYWdlKG5vZGU6IE5vZGUsIGNvbnRleHQ6IFRyYW5zZm9ybWF0aW9uQ29udGV4dCk6IE5vZGUge1xuICAgICAgICBsZXQgbm9kZVR5cGU6IFR5cGUgfCB1bmRlZmluZWQ7XG5cbiAgICAgICAgc3dpdGNoIChub2RlLmdldEtpbmQoKSkge1xuICAgICAgICAgICAgY2FzZSBTeW50YXhLaW5kLkNhbGxFeHByZXNzaW9uOiB7XG4gICAgICAgICAgICAgICAgY29uc3QgY2FsbEV4cHIgPSBub2RlLmFzS2luZE9yVGhyb3coU3ludGF4S2luZC5DYWxsRXhwcmVzc2lvbik7XG4gICAgICAgICAgICAgICAgbm9kZVR5cGUgPSBjb250ZXh0LnR5cGVDaGVja2VyLmdldFR5cGVBdExvY2F0aW9uKGNhbGxFeHByKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhc2UgU3ludGF4S2luZC5Qcm9wZXJ0eUFjY2Vzc0V4cHJlc3Npb246IHtcbiAgICAgICAgICAgICAgICBjb25zdCBwcm9wQWNjZXNzID0gbm9kZS5hc0tpbmRPclRocm93KFN5bnRheEtpbmQuUHJvcGVydHlBY2Nlc3NFeHByZXNzaW9uKTtcbiAgICAgICAgICAgICAgICBub2RlVHlwZSA9IHByb3BBY2Nlc3MuZ2V0VHlwZSgpO1xuICAgICAgICAgICAgICAgIC8vIGdldFR5cGUoKSB1c3VhbGx5IGdpdmVzIHRoZSB0eXBlIG9mIHRoZSBwcm9wZXJ0eSBhY2Nlc3MgXG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXNlIFN5bnRheEtpbmQuVmFyaWFibGVEZWNsYXJhdGlvbjoge1xuICAgICAgICAgICAgICAgIGNvbnN0IHZhckRlY2wgPSBub2RlLmFzS2luZE9yVGhyb3coU3ludGF4S2luZC5WYXJpYWJsZURlY2xhcmF0aW9uKTtcbiAgICAgICAgICAgICAgICAvLyBZb3UgbWlnaHQgZGVjaWRlIHRvIGxvb2sgYXQgaXRzIGluaXRpYWxpemVy4oCZcyB0eXBlIG9yIGl0cyBkZWNsYXJlZCB0eXBlOlxuICAgICAgICAgICAgICAgIGNvbnN0IGluaXRpYWxpemVyID0gdmFyRGVjbC5nZXRJbml0aWFsaXplcigpO1xuICAgICAgICAgICAgICAgIGlmICghaW5pdGlhbGl6ZXIpIHJldHVybiBub2RlOyAvLyBubyBicmlkZ2luZyBpZiBubyBpbml0aWFsaXplclxuICAgICAgICAgICAgICAgIG5vZGVUeXBlID0gaW5pdGlhbGl6ZXIuZ2V0VHlwZSgpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2FzZSBTeW50YXhLaW5kLkJpbmFyeUV4cHJlc3Npb246IHtcbiAgICAgICAgICAgICAgICAvLyBhc3NpZ25tZW50IFwieCA9IHlcIlxuICAgICAgICAgICAgICAgIGNvbnN0IGJpbkV4cHIgPSBub2RlLmFzS2luZE9yVGhyb3coU3ludGF4S2luZC5CaW5hcnlFeHByZXNzaW9uKTtcbiAgICAgICAgICAgICAgICAvLyB3ZSBvbmx5IGNhcmUgYWJvdXQgYnJpZGdpbmcgaWYgdGhlIHJpZ2h0LWhhbmQgc2lkZSBpcyBhIGdlbmVyaWNcbiAgICAgICAgICAgICAgICBjb25zdCByaHMgPSBiaW5FeHByLmdldFJpZ2h0KCk7XG4gICAgICAgICAgICAgICAgbm9kZVR5cGUgPSByaHMuZ2V0VHlwZSgpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2FzZSBTeW50YXhLaW5kLkFzRXhwcmVzc2lvbjoge1xuICAgICAgICAgICAgICAgIGNvbnN0IGFzRXhwciA9IG5vZGUuYXNLaW5kT3JUaHJvdyhTeW50YXhLaW5kLkFzRXhwcmVzc2lvbik7XG4gICAgICAgICAgICAgICAgLy8gVGhlIFwiYXNzZXJ0ZWQgdHlwZVwiIG1pZ2h0IGJlIHRoZSByZWFsIHR5cGU6IFxuICAgICAgICAgICAgICAgIG5vZGVUeXBlID0gYXNFeHByLmdldFR5cGUoKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhc2UgU3ludGF4S2luZC5UeXBlQXNzZXJ0aW9uRXhwcmVzc2lvbjoge1xuICAgICAgICAgICAgICAgIGNvbnN0IHR5cGVBc3NlcnRpb24gPSBub2RlLmFzS2luZE9yVGhyb3coU3ludGF4S2luZC5UeXBlQXNzZXJ0aW9uRXhwcmVzc2lvbik7XG4gICAgICAgICAgICAgICAgLy8gXCIoPEZvbz4geClcIiDigJMgZ2V0IHRoZSB0eXBlIGZyb20gdGhlIHR5cGUgYXNzZXJ0aW9uXG4gICAgICAgICAgICAgICAgbm9kZVR5cGUgPSB0eXBlQXNzZXJ0aW9uLmdldFR5cGUoKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5vZGU7IC8vIHVuZXhwZWN0ZWQgZmFsbGJhY2tcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIDIpIElmIHdlIGZvdW5kIG5vIHR5cGUsIG9yIGl0J3Mgbm90IGEgdW5pdHkgZ2VuZXJpYywgYmFpbCBvdXRcbiAgICAgICAgaWYgKCFub2RlVHlwZSB8fCAhZ2V0SXNVbml0eUFQSVR5cGUobm9kZVR5cGUpKSByZXR1cm4gbm9kZTtcblxuICAgICAgICBjb25zdCB0eXBlQXJncyA9IG5vZGVUeXBlLmdldFR5cGVBcmd1bWVudHMoKTtcbiAgICAgICAgaWYgKHR5cGVBcmdzLmxlbmd0aCA9PT0gMCkgcmV0dXJuIG5vZGU7XG5cbiAgICAgICAgLy8gMykgQ3JlYXRlIGJyaWRnaW5nIHZhcmlhYmxlICsgaW5zZXJ0IHZhcmlhYmxlIHN0YXRlbWVudHNcbiAgICAgICAgY29uc3Qgc291cmNlRmlsZSA9IG5vZGUuZ2V0U291cmNlRmlsZSgpO1xuICAgICAgICBpZiAoIWNvbnRleHQuc291cmNlRmlsZUdlbmVyaWNUeXBlTWFwLmhhcyhzb3VyY2VGaWxlKSkge1xuICAgICAgICAgICAgY29udGV4dC5zb3VyY2VGaWxlR2VuZXJpY1R5cGVNYXAuc2V0KHNvdXJjZUZpbGUsIG5ldyBNYXAoKSk7XG4gICAgICAgIH1cblxuICAgICAgICBlbnN1cmVUeXBlSW1wb3J0ZWQobm9kZVR5cGUsIHNvdXJjZUZpbGUpO1xuICAgICAgICBcbiAgICAgICAgbGV0IG5ld1ZhclN0YXRlbWVudHM6IE9wdGlvbmFsS2luZDxWYXJpYWJsZVN0YXRlbWVudFN0cnVjdHVyZT5bXSA9IFtdO1xuICAgICAgICB0aGlzLmNyZWF0ZUdlbmVyaWNUeXBlVmFyaWFibGUobm9kZVR5cGUsIHR5cGVBcmdzLCBzb3VyY2VGaWxlLCBuZXdWYXJTdGF0ZW1lbnRzLCBjb250ZXh0KTtcblxuICAgICAgICAvLyBpbnNlcnQgdGhlbVxuICAgICAgICBpbnNlcnRWYXJpYWJsZVN0YXRlbWVudHMoc291cmNlRmlsZSwgbmV3VmFyU3RhdGVtZW50cywgY29udGV4dCk7XG5cbiAgICAgICAgcmV0dXJuIG5vZGU7XG4gICAgfVxuXG4gICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICAvLyAgSEVMUEVSOiBFbnN1cmUgdGhlcmUncyBhIE1hcCBmb3IgdGhpcyBzb3VyY2UgZmlsZVxuICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAgcHJpdmF0ZSBlbnN1cmVHZW5lcmljVHlwZU1hcChzb3VyY2VGaWxlOiBTb3VyY2VGaWxlLCB0cmFuc2Zvcm1hdGlvbkNvbnRleHQ6IFRyYW5zZm9ybWF0aW9uQ29udGV4dCkge1xuICAgICAgICBpZiAoIXRyYW5zZm9ybWF0aW9uQ29udGV4dC5zb3VyY2VGaWxlR2VuZXJpY1R5cGVNYXAuaGFzKHNvdXJjZUZpbGUpKSB7XG4gICAgICAgICAgICB0cmFuc2Zvcm1hdGlvbkNvbnRleHQuc291cmNlRmlsZUdlbmVyaWNUeXBlTWFwLnNldChzb3VyY2VGaWxlLCBuZXcgTWFwKCkpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICAvLyAgSEVMUEVSOiBDcmVhdGUgYCRnZW5lcmljKC4uLilgIHZhcmlhYmxlIGlmIG5vdCBleGlzdFxuICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAgcHJpdmF0ZSBjcmVhdGVHZW5lcmljVHlwZVZhcmlhYmxlKFxuICAgICAgICB0eXBlOiBUeXBlLFxuICAgICAgICB0eXBlQXJndW1lbnRzOiBUeXBlW10sXG4gICAgICAgIHNvdXJjZUZpbGU6IFNvdXJjZUZpbGUsXG4gICAgICAgIHZhclN0YXRlbWVudHM6IE9wdGlvbmFsS2luZDxWYXJpYWJsZVN0YXRlbWVudFN0cnVjdHVyZT5bXSxcbiAgICAgICAgdHJhbnNmb3JtYXRpb25Db250ZXh0OiBUcmFuc2Zvcm1hdGlvbkNvbnRleHRcbiAgICApOiBzdHJpbmcge1xuICAgICAgICBjb25zdCBnZW5lcmljTWFwID0gdHJhbnNmb3JtYXRpb25Db250ZXh0LnNvdXJjZUZpbGVHZW5lcmljVHlwZU1hcC5nZXQoc291cmNlRmlsZSkhO1xuICAgICAgICBjb25zdCBnZW5lcmljS2V5ID0gdGhpcy5nZXRLZXkodHlwZSwgdHlwZUFyZ3VtZW50cyk7XG4gICAgICAgIGlmICghZ2VuZXJpY01hcC5oYXMoZ2VuZXJpY0tleSkpIHtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgY29uc3QgZ2VuZXJpY1R5cGVOYW1lID0gdGhpcy5nZXRUeXBlTmFtZSh0eXBlKTtcbiAgICAgICAgICAgIGNvbnN0IGdlbmVyaWNBcmdzID0gdHlwZUFyZ3VtZW50cy5tYXAodCA9PiB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0VHlwZU5hbWVBbmRFbnN1cmVJbXBvcnRlZChcbiAgICAgICAgICAgICAgICAgICAgdCxcbiAgICAgICAgICAgICAgICAgICAgc291cmNlRmlsZSxcbiAgICAgICAgICAgICAgICAgICAgdmFyU3RhdGVtZW50cyxcbiAgICAgICAgICAgICAgICAgICAgdHJhbnNmb3JtYXRpb25Db250ZXh0XG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBjb25zdCBnZW5lcmljRGVjbGFyYXRpb24gPSBgJGdlbmVyaWMoJHtnZW5lcmljVHlwZU5hbWV9LCAke2dlbmVyaWNBcmdzLmpvaW4oXCIsIFwiKX0pYDtcbiAgICAgICAgICAgIGNvbnN0IGdlbmVyaWNWYXJOYW1lID0gYF8ke2dlbmVyaWNLZXkucmVwbGFjZSgvXFwkL2csIFwiX1wiKX1gO1xuXG4gICAgICAgICAgICBnZW5lcmljTWFwLnNldChnZW5lcmljS2V5LCBnZW5lcmljVmFyTmFtZSk7XG5cbiAgICAgICAgICAgIHZhclN0YXRlbWVudHMucHVzaCh7XG4gICAgICAgICAgICAgICAgZGVjbGFyYXRpb25LaW5kOiBWYXJpYWJsZURlY2xhcmF0aW9uS2luZC5Db25zdCxcbiAgICAgICAgICAgICAgICBkZWNsYXJhdGlvbnM6IFt7XG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IGdlbmVyaWNWYXJOYW1lLFxuICAgICAgICAgICAgICAgICAgICBpbml0aWFsaXplcjogZ2VuZXJpY0RlY2xhcmF0aW9uXG4gICAgICAgICAgICAgICAgfV1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGdlbmVyaWNNYXAuZ2V0KGdlbmVyaWNLZXkpITtcbiAgICB9XG5cbiAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgIC8vICBIRUxQRVI6IFJlY3Vyc2l2ZWx5IGdldCBhIHN0YWJsZSBcImtleVwiIGZvciB0eXBlK2FyZ3NcbiAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgIHByaXZhdGUgZ2V0S2V5KHR5cGU6IFR5cGUsIHR5cGVBcmd1bWVudHM6IFR5cGVbXSk6IHN0cmluZyB7XG4gICAgICAgIGNvbnN0IGJhc2VOYW1lID0gdGhpcy5nZXRUeXBlTmFtZSh0eXBlKTtcbiAgICAgICAgY29uc3QgbmVzdGVkID0gdHlwZUFyZ3VtZW50cy5tYXAodCA9PiB7XG4gICAgICAgICAgICBjb25zdCB0QXJncyA9IHQuZ2V0VHlwZUFyZ3VtZW50cygpO1xuICAgICAgICAgICAgcmV0dXJuICh0QXJncy5sZW5ndGggPiAwKSA/IHRoaXMuZ2V0S2V5KHQsIHRBcmdzKSA6IHRoaXMuZ2V0VHlwZU5hbWUodCk7XG4gICAgICAgIH0pLmpvaW4oXCIkXCIpO1xuICAgICAgICByZXR1cm4gYCR7YmFzZU5hbWV9JCR7bmVzdGVkfWA7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBnZXRUeXBlTmFtZSh0eXBlOiBUeXBlKTogc3RyaW5nIHtcbiAgICAgICAgcmV0dXJuIHR5cGUuZ2V0U3ltYm9sKCk/LmdldE5hbWUoKSA/PyB0eXBlLmdldFRleHQoKTtcbiAgICB9XG5cbiAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgIC8vICBIRUxQRVI6IElmIHR5cGUgaGFzIG5lc3RlZCBnZW5lcmljcywgY3JlYXRlIHRoZW0gdG9vXG4gICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICBwcml2YXRlIGdldFR5cGVOYW1lQW5kRW5zdXJlSW1wb3J0ZWQoXG4gICAgICAgIHR5cGU6IFR5cGUsXG4gICAgICAgIHNvdXJjZUZpbGU6IFNvdXJjZUZpbGUsXG4gICAgICAgIHZhclN0YXRlbWVudHM6IE9wdGlvbmFsS2luZDxWYXJpYWJsZVN0YXRlbWVudFN0cnVjdHVyZT5bXSxcbiAgICAgICAgdHJhbnNmb3JtYXRpb25Db250ZXh0OiBUcmFuc2Zvcm1hdGlvbkNvbnRleHRcbiAgICApOiBzdHJpbmcge1xuICAgICAgICBpZiAodHlwZS5nZXRUeXBlQXJndW1lbnRzKCkubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuY3JlYXRlR2VuZXJpY1R5cGVWYXJpYWJsZShcbiAgICAgICAgICAgICAgICB0eXBlLFxuICAgICAgICAgICAgICAgIHR5cGUuZ2V0VHlwZUFyZ3VtZW50cygpLFxuICAgICAgICAgICAgICAgIHNvdXJjZUZpbGUsXG4gICAgICAgICAgICAgICAgdmFyU3RhdGVtZW50cyxcbiAgICAgICAgICAgICAgICB0cmFuc2Zvcm1hdGlvbkNvbnRleHRcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGdldFR5cGVOYW1lQW5kRW5zdXJlSW1wb3J0ZWQodHlwZSwgc291cmNlRmlsZSk7XG4gICAgfVxufVxuIiwiaW1wb3J0IHtcbiAgICBTeW50YXhLaW5kLFxuICAgIE5vZGUsXG4gICAgQmluYXJ5RXhwcmVzc2lvbixcbiAgICBQcmVmaXhVbmFyeUV4cHJlc3Npb24sXG4gICAgUG9zdGZpeFVuYXJ5RXhwcmVzc2lvbixcbiAgICBFeHByZXNzaW9uXG59IGZyb20gJ3RzLW1vcnBoJztcbmltcG9ydCB7VHJhbnNmb3JtYXRpb25Db250ZXh0fSBmcm9tIFwiLi9UcmFuc2Zvcm1hdGlvbkNvbnRleHRcIjtcbmltcG9ydCB7SVRyYW5zZm9ybWVyfSBmcm9tIFwiLi9JVHJhbnNmb3JtZXJcIjtcbmltcG9ydCB7XG4gICAgZ2V0SXNVbml0eUFQSVR5cGUsXG59IGZyb20gXCIuLi9Db21waWxlclV0aWxzXCI7XG5pbXBvcnQge1xuICAgIGdldEVxdWl2YWxlbnRPcGVyYXRvckZvckNvbXBvdW5kLFxuICAgIGdldE9wZXJhdG9yTWV0aG9kTmFtZSwgZ2V0T3BlcmF0b3JNZXRob2RSZXR1cm5UeXBlLFxuICAgIGdldFVuYXJ5T3BlcmF0b3JNZXRob2RSZXR1cm5UeXBlLCBpc0NvbXBvdW5kQXNzaWdubWVudCwgdW53cmFwUGFyZW50aGVzaXplZEV4cHJlc3Npb24sXG59IGZyb20gXCIuLi9PcGVyYXRvck92ZXJsb2FkaW5nVXRpbHNcIjtcblxuZXhwb3J0IGNsYXNzIE9wZXJhdG9yT3ZlcmxvYWRpbmdUcmFuc2Zvcm1lciBpbXBsZW1lbnRzIElUcmFuc2Zvcm1lciB7XG4gICAgbm9kZVR5cGVzID0gW1N5bnRheEtpbmQuQmluYXJ5RXhwcmVzc2lvbiwgU3ludGF4S2luZC5QcmVmaXhVbmFyeUV4cHJlc3Npb24sIFN5bnRheEtpbmQuUG9zdGZpeFVuYXJ5RXhwcmVzc2lvbl07XG5cbiAgICB0cmFuc2Zvcm1Ob2RlKG5vZGU6IE5vZGUsIHRyYW5zZm9ybWF0aW9uQ29udGV4dDogVHJhbnNmb3JtYXRpb25Db250ZXh0KTogTm9kZSB7XG4gICAgICAgIGlmIChOb2RlLmlzQmluYXJ5RXhwcmVzc2lvbihub2RlKSkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMudHJhbnNmb3JtQmluYXJ5RXhwcmVzc2lvbihub2RlLCB0cmFuc2Zvcm1hdGlvbkNvbnRleHQpO1xuICAgICAgICB9IGVsc2UgaWYgKE5vZGUuaXNQcmVmaXhVbmFyeUV4cHJlc3Npb24obm9kZSkgfHwgTm9kZS5pc1Bvc3RmaXhVbmFyeUV4cHJlc3Npb24obm9kZSkpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnRyYW5zZm9ybVVuYXJ5RXhwcmVzc2lvbihub2RlLCB0cmFuc2Zvcm1hdGlvbkNvbnRleHQpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBub2RlO1xuICAgIH1cblxuICAgIHByaXZhdGUgdHJhbnNmb3JtQmluYXJ5RXhwcmVzc2lvbihub2RlOiBCaW5hcnlFeHByZXNzaW9uLCB0cmFuc2Zvcm1hdGlvbkNvbnRleHQ6IFRyYW5zZm9ybWF0aW9uQ29udGV4dCk6IE5vZGUge1xuICAgICAgICBjb25zdCBvcGVyYXRvclRva2VuID0gbm9kZS5nZXRPcGVyYXRvclRva2VuKCk7XG4gICAgICAgIGNvbnN0IG9wZXJhdG9yS2luZCA9IG9wZXJhdG9yVG9rZW4uZ2V0S2luZCgpO1xuICAgICAgICBsZXQgb3BlcmF0b3JNZXRob2ROYW1lID0gZ2V0T3BlcmF0b3JNZXRob2ROYW1lKG9wZXJhdG9yS2luZCk7XG4gICAgICAgIFxuICAgICAgICBpZihpc0NvbXBvdW5kQXNzaWdubWVudChvcGVyYXRvcktpbmQpKVxuICAgICAgICB7XG4gICAgICAgICAgICBjb25zdCBlcXVpdmFsZW50T3BlcmF0b3JLaW5kID0gZ2V0RXF1aXZhbGVudE9wZXJhdG9yRm9yQ29tcG91bmQob3BlcmF0b3JLaW5kKTtcbiAgICAgICAgICAgIG9wZXJhdG9yTWV0aG9kTmFtZSA9IGdldE9wZXJhdG9yTWV0aG9kTmFtZShlcXVpdmFsZW50T3BlcmF0b3JLaW5kKTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgaWYgKG9wZXJhdG9yTWV0aG9kTmFtZSkge1xuXG4gICAgICAgICAgICAvLyBJZ25vcmUgdHJhbnNmb3JtYXRpb25zIGZvciAnPT0gbnVsbCcgYW5kICc9PSB1bmRlZmluZWQnXG4gICAgICAgICAgICBpZiAob3BlcmF0b3JLaW5kID09PSBTeW50YXhLaW5kLkVxdWFsc0VxdWFsc0VxdWFsc1Rva2VuXG4gICAgICAgICAgICAgICAgfHwgb3BlcmF0b3JLaW5kID09PSBTeW50YXhLaW5kLkVxdWFsc0VxdWFsc1Rva2VuXG4gICAgICAgICAgICAgICAgfHwgb3BlcmF0b3JLaW5kID09PSBTeW50YXhLaW5kLkV4Y2xhbWF0aW9uRXF1YWxzRXF1YWxzVG9rZW5cbiAgICAgICAgICAgICAgICB8fCBvcGVyYXRvcktpbmQgPT0gU3ludGF4S2luZC5FeGNsYW1hdGlvbkVxdWFsc1Rva2VuKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgcmlnaHQgPSB1bndyYXBQYXJlbnRoZXNpemVkRXhwcmVzc2lvbihub2RlLmdldFJpZ2h0KCkpO1xuICAgICAgICAgICAgICAgIGlmIChOb2RlLmlzTnVsbExpdGVyYWwocmlnaHQpIHx8IE5vZGUuaXNVbmRlZmluZWRLZXl3b3JkKHJpZ2h0KSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbm9kZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGNvbnN0IGxlZnQgPSB1bndyYXBQYXJlbnRoZXNpemVkRXhwcmVzc2lvbihub2RlLmdldExlZnQoKSk7XG4gICAgICAgICAgICBjb25zdCByaWdodCA9IHVud3JhcFBhcmVudGhlc2l6ZWRFeHByZXNzaW9uKG5vZGUuZ2V0UmlnaHQoKSk7XG5cbiAgICAgICAgICAgIGNvbnN0IHRyYW5zZm9ybWVkTGVmdCA9IHRoaXMudHJhbnNmb3JtTm9kZUlmTmVlZGVkKGxlZnQsIHRyYW5zZm9ybWF0aW9uQ29udGV4dCk7XG4gICAgICAgICAgICBjb25zdCB0cmFuc2Zvcm1lZFJpZ2h0ID0gdGhpcy50cmFuc2Zvcm1Ob2RlSWZOZWVkZWQocmlnaHQsIHRyYW5zZm9ybWF0aW9uQ29udGV4dCk7XG5cbiAgICAgICAgICAgIGxldCBsZWZ0VHlwZSA9IHRyYW5zZm9ybWF0aW9uQ29udGV4dC50eXBlQ2hlY2tlci5nZXRUeXBlQXRMb2NhdGlvbih0cmFuc2Zvcm1lZExlZnQpO1xuICAgICAgICAgICAgbGV0IHJpZ2h0VHlwZSA9IHRyYW5zZm9ybWF0aW9uQ29udGV4dC50eXBlQ2hlY2tlci5nZXRUeXBlQXRMb2NhdGlvbih0cmFuc2Zvcm1lZFJpZ2h0KTtcblxuICAgICAgICAgICAgaWYgKHJpZ2h0VHlwZS5pc0xpdGVyYWwoKSkge1xuICAgICAgICAgICAgICAgIHJpZ2h0VHlwZSA9IHRyYW5zZm9ybWF0aW9uQ29udGV4dC50eXBlQ2hlY2tlci5nZXRCYXNlVHlwZU9mTGl0ZXJhbFR5cGUocmlnaHRUeXBlKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKGxlZnRUeXBlLmlzTGl0ZXJhbCgpKSB7XG4gICAgICAgICAgICAgICAgbGVmdFR5cGUgPSB0cmFuc2Zvcm1hdGlvbkNvbnRleHQudHlwZUNoZWNrZXIuZ2V0QmFzZVR5cGVPZkxpdGVyYWxUeXBlKGxlZnRUeXBlKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKCFnZXRJc1VuaXR5QVBJVHlwZShsZWZ0VHlwZSkgJiYgIWdldElzVW5pdHlBUElUeXBlKHJpZ2h0VHlwZSkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbm9kZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgY29uc3QgbGVmdFRleHQgPSB0cmFuc2Zvcm1lZExlZnQuZ2V0VGV4dCgpO1xuICAgICAgICAgICAgY29uc3QgcmlnaHRUZXh0ID0gdHJhbnNmb3JtZWRSaWdodC5nZXRUZXh0KCk7XG4gICAgICAgICAgICBjb25zdCBsZWZ0UmV0dXJuVHlwZSA9IGdldE9wZXJhdG9yTWV0aG9kUmV0dXJuVHlwZSh0cmFuc2Zvcm1hdGlvbkNvbnRleHQudHlwZUNoZWNrZXIsIGxlZnRUeXBlLCBvcGVyYXRvck1ldGhvZE5hbWUsIHJpZ2h0VHlwZSk7XG4gICAgICAgICAgICBjb25zdCByaWdodFJldHVyblR5cGUgPSBnZXRPcGVyYXRvck1ldGhvZFJldHVyblR5cGUodHJhbnNmb3JtYXRpb25Db250ZXh0LnR5cGVDaGVja2VyLCByaWdodFR5cGUsIG9wZXJhdG9yTWV0aG9kTmFtZSwgbGVmdFR5cGUpO1xuXG4gICAgICAgICAgICBpZihsZWZ0UmV0dXJuVHlwZSA9PSBudWxsICYmIHJpZ2h0UmV0dXJuVHlwZSA9PSBudWxsKVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHJldHVybiBub2RlO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBIYW5kbGUgY29tcG91bmQgYXNzaWdubWVudHMgKCs9LCAtPSwgZXRjLilcbiAgICAgICAgICAgIGlmIChpc0NvbXBvdW5kQXNzaWdubWVudChvcGVyYXRvcktpbmQpKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgbGVmdE5hbWUgPSBsZWZ0LmdldFRleHQoKTtcbiAgICAgICAgICAgICAgICBjb25zdCBlcXVpdmFsZW50T3BlcmF0b3JLaW5kID0gZ2V0RXF1aXZhbGVudE9wZXJhdG9yRm9yQ29tcG91bmQob3BlcmF0b3JLaW5kKTtcbiAgICAgICAgICAgICAgICBjb25zdCBlcXVpdmFsZW50T3BlcmF0b3JNZXRob2ROYW1lID0gZ2V0T3BlcmF0b3JNZXRob2ROYW1lKGVxdWl2YWxlbnRPcGVyYXRvcktpbmQpO1xuICAgICAgICAgICAgICAgIGNvbnN0IGVxdWl2YWxlbnRFeHByZXNzaW9uID0gYCR7bGVmdE5hbWV9ID0gJHtsZWZ0VHlwZS5nZXRTeW1ib2woKT8uZ2V0TmFtZSgpfS4ke2VxdWl2YWxlbnRPcGVyYXRvck1ldGhvZE5hbWV9KCR7bGVmdE5hbWV9LCAke3JpZ2h0VGV4dH0pYDtcbiAgICAgICAgICAgICAgICByZXR1cm4gbm9kZS5yZXBsYWNlV2l0aFRleHQoZXF1aXZhbGVudEV4cHJlc3Npb24pO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBjb25zdCB2YWxpZFR5cGUgPSBsZWZ0UmV0dXJuVHlwZSAhPSBudWxsID8gbGVmdFR5cGUgOiByaWdodFR5cGU7XG4gICAgICAgICAgICBjb25zdCBuZXdUZXh0ID0gYCR7dmFsaWRUeXBlIS5nZXRTeW1ib2woKT8uZ2V0TmFtZSgpfS4ke29wZXJhdG9yTWV0aG9kTmFtZX0oJHtsZWZ0VGV4dH0sICR7cmlnaHRUZXh0fSlgO1xuXG4gICAgICAgICAgICAvLyBBZGQgcGFyZW50aGVzZXMgdG8gbWFpbnRhaW4gb3JkZXIgb2Ygb3BlcmF0aW9uc1xuICAgICAgICAgICAgaWYgKE5vZGUuaXNCaW5hcnlFeHByZXNzaW9uKHRyYW5zZm9ybWVkTGVmdCkgfHwgTm9kZS5pc0JpbmFyeUV4cHJlc3Npb24odHJhbnNmb3JtZWRSaWdodCkpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBwYXJlbnRoZXNpemVkTmV3VGV4dCA9IGAoJHtuZXdUZXh0fSlgO1xuICAgICAgICAgICAgICAgIHJldHVybiBub2RlLnJlcGxhY2VXaXRoVGV4dChwYXJlbnRoZXNpemVkTmV3VGV4dCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiBub2RlLnJlcGxhY2VXaXRoVGV4dChuZXdUZXh0KTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBub2RlO1xuICAgIH1cblxuICAgIHByaXZhdGUgdHJhbnNmb3JtVW5hcnlFeHByZXNzaW9uKG5vZGU6IFByZWZpeFVuYXJ5RXhwcmVzc2lvbiB8IFBvc3RmaXhVbmFyeUV4cHJlc3Npb24sIHRyYW5zZm9ybWF0aW9uQ29udGV4dDogVHJhbnNmb3JtYXRpb25Db250ZXh0KTogTm9kZSB7XG4gICAgICAgIGNvbnN0IG9wZXJhbmQgPSB1bndyYXBQYXJlbnRoZXNpemVkRXhwcmVzc2lvbihub2RlLmdldE9wZXJhbmQoKSk7XG4gICAgICAgIGNvbnN0IG9wZXJhdG9yS2luZCA9IG5vZGUuZ2V0T3BlcmF0b3JUb2tlbigpO1xuICAgICAgICBjb25zdCBvcGVyYXRvck1ldGhvZE5hbWUgPSBnZXRPcGVyYXRvck1ldGhvZE5hbWUob3BlcmF0b3JLaW5kLCB0cnVlKTtcblxuICAgICAgICBpZiAob3BlcmF0b3JNZXRob2ROYW1lKSB7XG4gICAgICAgICAgICBjb25zdCBvcGVyYW5kVHlwZSA9IHRyYW5zZm9ybWF0aW9uQ29udGV4dC50eXBlQ2hlY2tlci5nZXRUeXBlQXRMb2NhdGlvbihvcGVyYW5kKTtcblxuICAgICAgICAgICAgaWYgKGdldFVuYXJ5T3BlcmF0b3JNZXRob2RSZXR1cm5UeXBlKG9wZXJhbmRUeXBlLCBvcGVyYXRvck1ldGhvZE5hbWUpKSB7XG4gICAgICAgICAgICAgICAgY29uc3Qgb3BlcmFuZFRleHQgPSBvcGVyYW5kLmdldFRleHQoKTtcbiAgICAgICAgICAgICAgICBjb25zdCBuZXdUZXh0ID0gYCR7b3BlcmFuZFR5cGUuZ2V0U3ltYm9sKCk/LmdldE5hbWUoKX0uJHtvcGVyYXRvck1ldGhvZE5hbWV9KCR7b3BlcmFuZFRleHR9KWA7XG5cbiAgICAgICAgICAgICAgICAvLyBBZGQgcGFyZW50aGVzZXMgdG8gbWFpbnRhaW4gb3JkZXIgb2Ygb3BlcmF0aW9uc1xuICAgICAgICAgICAgICAgIGNvbnN0IHBhcmVudGhlc2l6ZWROZXdUZXh0ID0gYCgke25ld1RleHR9KWA7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5vZGUucmVwbGFjZVdpdGhUZXh0KHBhcmVudGhlc2l6ZWROZXdUZXh0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBub2RlO1xuICAgIH1cblxuICAgIHByaXZhdGUgdHJhbnNmb3JtTm9kZUlmTmVlZGVkKG5vZGU6IE5vZGUsIHRyYW5zZm9ybWF0aW9uQ29udGV4dDogVHJhbnNmb3JtYXRpb25Db250ZXh0KTogRXhwcmVzc2lvbiB7XG4gICAgICAgIGNvbnN0IHVud3JhcHBlZE5vZGUgPSB1bndyYXBQYXJlbnRoZXNpemVkRXhwcmVzc2lvbihub2RlKTtcbiAgICAgICAgaWYgKE5vZGUuaXNCaW5hcnlFeHByZXNzaW9uKHVud3JhcHBlZE5vZGUpIHx8IE5vZGUuaXNQcmVmaXhVbmFyeUV4cHJlc3Npb24odW53cmFwcGVkTm9kZSkgfHwgTm9kZS5pc1Bvc3RmaXhVbmFyeUV4cHJlc3Npb24odW53cmFwcGVkTm9kZSkpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnRyYW5zZm9ybU5vZGUodW53cmFwcGVkTm9kZSwgdHJhbnNmb3JtYXRpb25Db250ZXh0KSBhcyBFeHByZXNzaW9uO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB1bndyYXBwZWROb2RlIGFzIEV4cHJlc3Npb247XG4gICAgfVxuICAgIFxufVxuIiwibW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKFwidHlwZXNjcmlwdFwiKTsiLCJtb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoXCJwYXRoXCIpOyIsIm1vZHVsZS5leHBvcnRzID0gcmVxdWlyZShcInR5cGVzY3JpcHQvbGliL3Rzc2VydmVybGlicmFyeVwiKTsiLCIvLyBUaGUgbW9kdWxlIGNhY2hlXG52YXIgX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fID0ge307XG5cbi8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG5mdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuXHR2YXIgY2FjaGVkTW9kdWxlID0gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXTtcblx0aWYgKGNhY2hlZE1vZHVsZSAhPT0gdW5kZWZpbmVkKSB7XG5cdFx0cmV0dXJuIGNhY2hlZE1vZHVsZS5leHBvcnRzO1xuXHR9XG5cdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG5cdHZhciBtb2R1bGUgPSBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdID0ge1xuXHRcdC8vIG5vIG1vZHVsZS5pZCBuZWVkZWRcblx0XHQvLyBubyBtb2R1bGUubG9hZGVkIG5lZWRlZFxuXHRcdGV4cG9ydHM6IHt9XG5cdH07XG5cblx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG5cdF9fd2VicGFja19tb2R1bGVzX19bbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG5cdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG5cdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbn1cblxuIiwiLy8gc3RhcnR1cFxuLy8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4vLyBUaGlzIGVudHJ5IG1vZHVsZSBpcyByZWZlcmVuY2VkIGJ5IG90aGVyIG1vZHVsZXMgc28gaXQgY2FuJ3QgYmUgaW5saW5lZFxudmFyIF9fd2VicGFja19leHBvcnRzX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIyOSk7XG4iXSwibmFtZXMiOlsicm9vdCIsImZhY3RvcnkiLCJleHBvcnRzIiwibW9kdWxlIiwiZGVmaW5lIiwiYW1kIiwidGhpcyIsIm5vZGVUeXBlcyIsIlN5bnRheEtpbmQiLCJDYWxsRXhwcmVzc2lvbiIsInRyYW5zZm9ybU5vZGUiLCJub2RlIiwidHJhbnNmb3JtYXRpb25Db250ZXh0IiwiTm9kZSIsImlzQ2FsbEV4cHJlc3Npb24iLCJjYWxsRXhwcmVzc2lvbiIsImFzS2luZE9yVGhyb3ciLCJ0eXBlQ2hlY2tlciIsImV4cHJlc3Npb24iLCJnZXRFeHByZXNzaW9uIiwiaXNQcm9wZXJ0eUFjY2Vzc0V4cHJlc3Npb24iLCJtZXRob2ROYW1lIiwiZ2V0TmFtZSIsIm9iamVjdEV4cHJlc3Npb24iLCJvYmplY3RUeXBlIiwiZ2V0VHlwZUF0TG9jYXRpb24iLCJpc1NpZ25hbEJ1c01ldGhvZCIsImlzU2lnbmFsQnVzVHlwZSIsImlzR2VuaWVzRXZlbnRNZXRob2QiLCJpc0dlbmllc0V2ZW50VHlwZSIsImFyZ3MiLCJnZXRBcmd1bWVudHMiLCJtZXRob2RBcmdJbmRleCIsIm1ldGhvZEFyZ3NDb3VudCIsImxlbmd0aCIsIm1ldGhvZEFyZyIsImNvbnRleHRFeHByZXNzaW9uIiwiZ2V0Q29udGV4dEV4cHJlc3Npb24iLCJhZGRBcmd1bWVudCIsImdldFRleHQiLCJzb3VyY2VGaWxlR2VuZXJpY1R5cGVNYXAiLCJNYXAiLCJsYXN0R2VuZXJpY1R5cGVWYXJJbmRleCIsIm92ZXJsb2FkTWFwIiwic2V0U3dhcE92ZXJsb2FkIiwib3ZlcmxvYWRJbmZvIiwic2V0IiwiZ2V0U3dhcE92ZXJsb2FkIiwiZ2V0IiwiR2VuaWVzU2NyaXB0VWlFdmVudHMiLCJwcm9qZWN0Um9vdCIsIkdlbmllc0RlY2xhcmF0aW9uRmlsZUFubm90YXRpb24iLCJHZW5pZXNJbnN0YW5jZVByb3BOYW1lIiwiTW9ub2JlaGF2aW91clR5cGVOYW1lIiwiU2NyaXB0YWJsZU9iamVjdFR5cGVOYW1lIiwiTm9uU2VyaWFsaXplZERlY29yYXRvciIsIkhpZGVJbkluc3BlY3RvckRlY29yYXRvciIsIlNlcmlhbGl6ZUZpZWxkRGVjb3JhdG9yIiwiSGVhZGVyRGVjb3JhdG9yIiwiU3BhY2VEZWNvcmF0b3IiLCJUb29sdGlwRGVjb3JhdG9yIiwiR0VUX0lURU1fTkFNRSIsIlNFVF9JVEVNX05BTUUiLCJjb21wb25lbnRNZXRob2RzIiwiU2V0IiwiQWxsb3dlZFVpSW50ZXJmYWNlcyIsIlVpSW50ZXJmYWNlVG9FbnVtTWFwIiwiUG9pbnRlckNsaWNrIiwiUG9pbnRlckRvd24iLCJQb2ludGVyRW50ZXIiLCJQb2ludGVyRXhpdCIsIlBvaW50ZXJVcCIsIkJlZ2luRHJhZyIsIkRlc2VsZWN0IiwiRHJhZyIsIkRyb3AiLCJFbmREcmFnIiwiSW5pdGlhbGl6ZVBvdGVudGlhbERyYWciLCJTY3JvbGwiLCJTZWxlY3QiLCJTdWJtaXQiLCJVcGRhdGVTZWxlY3RlZCIsIk1vdmUiLCJDYW5jZWwiLCJBbGlhc1RvVHlwZU5hbWUiLCJBbGlhc1RvRnVsbFR5cGVOYW1lIiwiR2VuaWVzU2NyaXB0VHlwZSIsImV4dGVuZHNNb25vQmVoYXZpb3VyIiwiY2xhc3NEZWNsIiwiYmFzZUNsYXNzIiwiZ2V0QmFzZUNsYXNzIiwiZXh0ZW5kc1NjcmlwdGFibGVPYmplY3QiLCJpbmhlcml0c0Zyb20iLCJ0eXBlIiwiYmFzZU5hbWVzIiwiYmFzZVR5cGVzIiwic3ltYm9sIiwiZ2V0U3ltYm9sIiwiZGVjbGFyYXRpb25zIiwiZ2V0RGVjbGFyYXRpb25zIiwiZGVjbGFyYXRpb24iLCJpc0NsYXNzRGVjbGFyYXRpb24iLCJoZXJpdGFnZUNsYXVzZXMiLCJnZXRIZXJpdGFnZUNsYXVzZXMiLCJoZXJpdGFnZUNsYXVzZSIsInR5cGVzIiwiZ2V0VHlwZU5vZGVzIiwidHlwZU5vZGUiLCJiYXNlVHlwZSIsInB1c2giLCJnZXRCYXNlVHlwZXMiLCJiYXNlVHlwZU5hbWUiLCJpbmNsdWRlcyIsImdldEZ1bGxUeXBlTmFtZSIsImZvckNzaGFycCIsImluY2x1ZGVBcmd1bWVudHMiLCJ0ZXh0IiwiYWxpYXNTeW1ib2wiLCJnZXRBbGlhc1N5bWJvbCIsImhhcyIsImdldElzVW5pdHlBUElUeXBlIiwiZ2V0RnVsbHlRdWFsaWZpZWROYW1lIiwicmVwbGFjZSIsImlzRXhwb3J0ZWQiLCJmb3JFYWNoIiwiZGVjbCIsImlzSW50ZXJmYWNlRGVjbGFyYXRpb24iLCJzb3VyY2VGaWxlUGF0aCIsImdldFNvdXJjZUZpbGUiLCJnZXRGaWxlUGF0aCIsInJlbGF0aXZlUGF0aCIsImNvbnZlcnRUb0FsaWFzUGF0aCIsInBhcnNlZFBhdGgiLCJwYXRoIiwicGFyc2UiLCJmaWxlUGF0aFdpdGhvdXRFeHQiLCJqb2luIiwiZGlyIiwibmFtZSIsInBhcnNlZCIsImFsaWFzUGF0aCIsImNvbnZlcnRUb0dlbmllc0FsaWFzUGF0aCIsInJlZ2V4IiwidGVzdCIsInR5cGVBcmd1bWVudHMiLCJnZXRUeXBlQXJndW1lbnRzIiwiYXJnIiwiaW5kZXgiLCJhcmdUZXh0IiwiZXh0cmFjdFByb3BlcnRpZXMiLCJjbHMiLCJiYXNlUGF0aCIsInR5cGVBcmd1bWVudE1hcCIsInByb3BlcnRpZXMiLCJnZXRQcm9wZXJ0aWVzIiwicHJvcCIsInZpc2liaWxpdHkiLCJnZXRTY29wZSIsImRlY29yYXRvcnMiLCJleHRyYWN0RGVjb3JhdG9ycyIsImlzU3RhdGljIiwiaXNSZWFkb25seSIsInNvbWUiLCJkIiwiVHlwZSIsInJlc29sdmVHZW5lcmljVHlwZSIsImdldFR5cGUiLCJpc0FycmF5IiwicmVzb2x2ZWRUeXBlIiwicmVzb2x2ZUFycmF5RWxlbWVudFR5cGUiLCJ0eXBlTmFtZSIsInByb3BOYW1lIiwiZnVsbFBhdGgiLCJnZXRJbml0aWFsaXplciIsImdldEtpbmQiLCJOZXdFeHByZXNzaW9uIiwibmV3RXhwcmVzc2lvbiIsIm1hcCIsIlByb3BlcnR5QWNjZXNzRXhwcmVzc2lvbiIsInBhZSIsImluaXRpYWxpemVyRXhwcmVzc2lvbnMiLCJoYXNJbml0aWFsaXplciIsImluaXRpYWxpemVyIiwiQXJyYXlMaXRlcmFsRXhwcmVzc2lvbiIsImFycmF5TGl0ZXJhbCIsImkiLCJnZXRFbGVtZW50cyIsImVsZW1lbnQiLCJwcm9wZXJ0eUluZm8iLCJQYXRoIiwiTmFtZSIsIlR5cGVOYW1lIiwiQ2hpbGRQcm9wZXJ0aWVzIiwiSXNBcnJheSIsIklzRW51bSIsIkVudW1LZXlzIiwiRW51bVZhbHVlcyIsIkRlY29yYXRvcnMiLCJJc0dlbmllc0JlaGF2aW91clJlZiIsIklzR2VuaWVzU2NyaXB0YWJsZU9iamVjdFJlZiIsIkluaXRpYWxpemVycyIsIkFycmF5RWxlbWVudEluaXRpYWxpemVyIiwidW5kZWZpbmVkIiwiQXJyYXlEaW1lbnNpb24iLCJkaW1lbnNpb24iLCJnZXRBcnJheUVsZW1lbnRJbml0aWFsaXplciIsImZpbGxFeHRyYVByb3BlcnR5SW5mbyIsImlzRW51bSIsImlzVW5pdHlUeXBlIiwiZ2V0SXNVbml0eUFQSURlY2xhcmF0aW9uIiwiZ2VuaWVzU2NyaXB0VHlwZSIsImdldEdlbmllc1NjcmlwdFR5cGVGcm9tTm9kZSIsIk1vbm9iZWhhdmlvdXIiLCJTY3JpcHRhYmxlT2JqZWN0IiwiTm9uZSIsImtleXMiLCJ2YWx1ZXMiLCJmaW5kIiwiZGVjIiwiRW51bURlY2xhcmF0aW9uIiwiZ2V0TWVtYmVycyIsIm1lbWJlciIsImdldFZhbHVlIiwiZXh0cmFjdEVudW1EZXRhaWxzIiwidmFsdWUiLCJ0b1N0cmluZyIsImZpbGxFbnVtSW5mbyIsInR5cGVQYXJhbXMiLCJnZXRUeXBlUGFyYW1ldGVycyIsInR5cGVBcmdzIiwibmV3VHlwZUFyZ3VtZW50TWFwIiwicGFyYW0iLCJ1bmlxdWVQYXJhbU5hbWUiLCJjaGlsZFByb3BlcnRpZXMiLCJ1bnNoaWZ0IiwibmV3QmFzZSIsInVuZGVybHlpbmdUeXBlTmFtZSIsInByb3BQYXRoIiwiZ2V0QXJyYXlFbGVtZW50VHlwZSIsImN1cnJlbnREaW1lbnNpb24iLCJpc1R5cGVQYXJhbWV0ZXIiLCJwYXJlbnREZWNsIiwiZ2V0UGFyZW50IiwidW5pcXVlVHlwZU5hbWUiLCJnZXRJc1VuaXR5QVBJU291cmNlRmlsZSIsInNvdXJjZUZpbGUiLCJmaXJzdE5vZGUiLCJnZXRGaXJzdENoaWxkIiwiY29uc29sZSIsImxvZyIsImxlYWRpbmdDb21tZW50cyIsImdldExlYWRpbmdDb21tZW50UmFuZ2VzIiwicyIsImdldEFwcGFyZW50VHlwZSIsIkNsYXNzRGVjbGFyYXRpb24iLCJpc01vbm9iZWhhdmlvdXIiLCJpc1NjcmlwdGFibGVPYmplY3QiLCJnZXRHZW5pZXNTY3JpcHRUeXBlRnJvbVR5cGUiLCJhYnNvbHV0ZVBhdGgiLCJub3JtYWxpemVkUGF0aCIsInNwbGl0Iiwic2VwIiwiYXNzZXRzSW5kZXgiLCJpbmRleE9mIiwic3Vic3RyaW5nIiwiYXNzZXRzUHJlZml4IiwiY29tR2VuaWVzTWF0Y2giLCJtYXRjaCIsInJlc29sdmUiLCJnZXREZWNvcmF0b3JzIiwiQXJncyIsImEiLCJOdW1lcmljYWxBbGlhc2VzIiwiY29uZGl0aW9uIiwiZGVjb3JhdG9yIiwicmVtb3ZlIiwiY2xhc3NEZWNsYXJhdGlvbiIsInJlc3VsdFNldCIsImN1cnJlbnRDbGFzcyIsImNsYXNzVHlwZU5hbWUiLCJhZGQiLCJnZXRJbXBsZW1lbnRzIiwiaW1wbGVtZW50Q2xhdXNlIiwicXVldWUiLCJjdXJyZW50SWZhY2VUeXBlIiwic2hpZnQiLCJpZmFjZU5hbWUiLCJBcnJheSIsImZyb20iLCJhbGxTdGF0ZW1lbnRzIiwiZ2V0U3RhdGVtZW50cyIsImltcG9ydERlY2xhcmF0aW9ucyIsImZpbHRlciIsInN0bXQiLCJJbXBvcnREZWNsYXJhdGlvbiIsInZhcmlhYmxlU3RhdGVtZW50cyIsIlZhcmlhYmxlU3RhdGVtZW50Iiwib3RoZXJTdGF0ZW1lbnRzIiwibmV3VGV4dCIsInJlcGxhY2VXaXRoVGV4dCIsInZhclN0YXRlbWVudHMiLCJsYXN0SW1wb3J0SW5kZXgiLCJzdGF0ZW1lbnRzIiwiZ2V0TGFzdEltcG9ydEluZGV4Iiwic3RhdGVtZW50c0xlbmd0aCIsIk1hdGgiLCJtaW4iLCJpbnNlcnRWYXJpYWJsZVN0YXRlbWVudHMiLCJ0eXBlTW9kdWxlIiwic2NyaXB0VHlwZSIsIkVycm9yIiwiY3NUeXBlTmFtZSIsImxhc3REb3RJbmRleCIsImxhc3RJbmRleE9mIiwiZXhpc3RpbmdJbXBvcnQiLCJnZXRJbXBvcnREZWNsYXJhdGlvbnMiLCJpbXBvcnREZWNsIiwiZ2V0TW9kdWxlU3BlY2lmaWVyVmFsdWUiLCJnZXROYW1lZEltcG9ydHMiLCJuYW1lZEltcG9ydCIsImFkZE5hbWVkSW1wb3J0IiwiaW1wb3J0U3RydWN0dXJlIiwia2luZCIsIlN0cnVjdHVyZUtpbmQiLCJtb2R1bGVTcGVjaWZpZXIiLCJuYW1lZEltcG9ydHMiLCJhZGRJbXBvcnREZWNsYXJhdGlvbiIsImFyZ1R5cGUiLCJyZXNvbHZlTmFtZSIsIlN5bWJvbEZsYWdzIiwiQWxsIiwiZ2V0RGVjbGFyZWRUeXBlT2ZTeW1ib2wiLCJ0eXBlVGV4dCIsInRyaW0iLCJpc1RoaXNFeHByZXNzaW9uIiwiZ2V0TmFtZU5vZGUiLCJpc0lkZW50aWZpZXIiLCJnVHlwZSIsImZpbGVQYXRoIiwiZ2V0RGlyZWN0b3J5UGF0aCIsImltcG9ydERlY2xhcmF0aW9uIiwic3RhcnRzV2l0aCIsInNldE1vZHVsZVNwZWNpZmllciIsImluZmVyUG9zc2libGVUeXBlcyIsImluZmVycmVkVHlwZU5hbWVzIiwiYnJhbmRlZFR5cGUiLCJnZXRUeXBlQnlOYW1lIiwiZ2V0QnJhbmRlZFR5cGVzIiwibnVtZXJpY0luZm8iLCJnZXROdW1lcmljVmFsdWUiLCJpbmZvIiwiaGFzRGVjaW1hbCIsImluZmVyVHlwZXNGcm9tTnVtZXJpY0luZm8iLCJjbGVhblR5cGVUZXh0Iiwic2NvcmVPdmVybG9hZCIsIm92ZXJsb2FkIiwiYXJndW1lbnRUeXBlc0xpc3QiLCJwYXJhbWV0ZXJzIiwiZ2V0UGFyYW1ldGVycyIsInNjb3JlIiwicGFyYW1UeXBlIiwiYXJnVHlwZXMiLCJhcmdTY29yZSIsInNjb3JlUGFyYW1ldGVyIiwicG9zc2libGVBcmdUeXBlcyIsImJlc3RTY29yZSIsImNvbnN0cmFpbnQiLCJnZXRDb25zdHJhaW50IiwidHlwZXNBcmVFcXVhbCIsIm1heCIsImlzVHlwZUFzc2lnbmFibGVUbyIsImlzVmFsaWROdW1lcmljYWxUeXBlIiwiaXNOdW1lcmljQ2FzdGFibGUiLCJmcm9tVHlwZSIsInRvVHlwZSIsImZyb21UeXBlTmFtZSIsInRvVHlwZU5hbWUiLCJieXRlIiwic2J5dGUiLCJzaG9ydCIsInVzaG9ydCIsImludCIsInVpbnQiLCJmbG9hdCIsImRvdWJsZSIsIm51bWJlciIsInR5cGUxIiwidHlwZTIiLCJudW1lcmljTGl0ZXJhbEluZm8iLCJnZXROdW1lcmljTGl0ZXJhbEluZm8iLCJpc1ZhcmlhYmxlRGVjbGFyYXRpb24iLCJpc1Byb3BlcnR5RGVjbGFyYXRpb24iLCJ2YWx1ZUluZm8iLCJwZXJmb3JtRmxvd0FuYWx5c2lzIiwiaXNOdW1lcmljTGl0ZXJhbCIsIk51bWJlciIsImlzUHJlZml4VW5hcnlFeHByZXNzaW9uIiwiZ2V0T3BlcmF0b3JUb2tlbiIsIk1pbnVzVG9rZW4iLCJvcGVyYW5kIiwiZ2V0T3BlcmFuZCIsInVzYWdlTm9kZSIsImN1cnJlbnRWYWx1ZUluZm8iLCJpbml0VmFsdWVJbmZvIiwiZ2V0TnVtZXJpY1ZhbHVlRnJvbUV4cHJlc3Npb24iLCJtZXRob2REZWNsYXJhdGlvbiIsImdldEZpcnN0QW5jZXN0b3JCeUtpbmQiLCJNZXRob2REZWNsYXJhdGlvbiIsInVzYWdlU3RhcnQiLCJnZXRTdGFydCIsImFzc2lnbm1lbnRzIiwiZ2V0RGVzY2VuZGFudHMiLCJpc0JpbmFyeUV4cHJlc3Npb24iLCJpc1Bvc3RmaXhVbmFyeUV4cHJlc3Npb24iLCJhc3NpZ25tZW50Iiwib3BlcmF0b3JLaW5kIiwibGVmdCIsImdldExlZnQiLCJyaWdodCIsImdldFJpZ2h0IiwiaXNBc3NpZ25tZW50VG9TeW1ib2wiLCJFcXVhbHNUb2tlbiIsIlBsdXNFcXVhbHNUb2tlbiIsIk1pbnVzRXF1YWxzVG9rZW4iLCJBc3Rlcmlza0VxdWFsc1Rva2VuIiwiU2xhc2hFcXVhbHNUb2tlbiIsIlBlcmNlbnRFcXVhbHNUb2tlbiIsImV2YWx1YXRlQ29tcG91bmRBc3NpZ25tZW50IiwiZGVsdGEiLCJQbHVzUGx1c1Rva2VuIiwiZXhwciIsImV4cHJTeW1ib2wiLCJsZWZ0SW5mbyIsInJpZ2h0SW5mbyIsImV2YWx1YXRlQmluYXJ5T3BlcmF0aW9uIiwiYmluYXJ5T3BlcmF0b3JLaW5kIiwiUGx1c1Rva2VuIiwiQXN0ZXJpc2tUb2tlbiIsIlNsYXNoVG9rZW4iLCJQZXJjZW50VG9rZW4iLCJyZXN1bHRWYWx1ZSIsIm92ZXJsb2FkcyIsImNhbGxBcmdzIiwiYmVzdE92ZXJsb2FkIiwiaGlnaGVzdFNjb3JlIiwiQ1VTVE9NX0RJQUdOT1NUSUNfQ09ERVMiLCJBTExPV0VEX0lOSEVSSVRBTkNFX1RZUEVTIiwiQ09NUE9ORU5UX01FVEhPRFMiLCJhZGREaWFnbm9zdGljIiwiZGlhZ25vc3RpY3MiLCJtZXNzYWdlVGV4dCIsImNvZGUiLCJzdGFydCIsImdldFdpZHRoIiwiZGlhZ25vc3RpYyIsImZpbGUiLCJjb21waWxlck5vZGUiLCJjYXRlZ29yeSIsIkRpYWdub3N0aWNDYXRlZ29yeSIsInNvdXJjZSIsImdldENsYXNzZXMiLCJpbXBsZW1lbnRlZEludGVyZmFjZXMiLCJiYXNlQ2xhc3NOYW1lIiwiZGlhZ25vc3RpY01lc3NhZ2UiLCJpbnRmIiwicHJvY2Vzc0NsYXNzRGlhZ25vc3RpY3MiLCJnZXREZXNjZW5kYW50c09mS2luZCIsImNhbGxFeHByIiwibWV0aG9kRGVjbGFyYXRpb25zIiwibWV0aG9kU3ltYm9sIiwiaXNNZXRob2REZWNsYXJhdGlvbiIsImdldE1ldGhvZE5hbWUiLCJjYWxsQXJnVHlwZXMiLCJnZXRQcm9qZWN0IiwiZ2V0VHlwZUNoZWNrZXIiLCJoYXNNYXRjaGluZ05vbkdlbmVyaWNPdmVybG9hZCIsInZhbGlkQXJncyIsIm0iLCJ0eXBlQXJnTm9kZSIsInR5cGVBcmdUeXBlIiwiaXNWYWxpZENvbXBvbmVudFR5cGVBcmciLCJnZXRJc1ZhbGlkVW5pdHlHZW5lcmljVHlwZUFyZyIsInByb2Nlc3NHZW5lcmljTWV0aG9kQ2FsbCIsInByb2Nlc3NDYWxsRXhwcmVzc2lvbkRpYWdub3N0aWNzIiwibmV3RXhwciIsInR5cGVTeW1ib2wiLCJjbGFzc0RlY2xhcmF0aW9ucyIsImV4cGVjdGVkVHlwZUFyZ3NDb3VudCIsInByb3ZpZGVkVHlwZUFyZ3NDb3VudCIsInByb2Nlc3NUeXBlVXNhZ2VEaWFnbm9zdGljcyIsIkF3YWl0RXhwcmVzc2lvbiIsImlzQXdhaXRFeHByZXNzaW9uIiwiYXdhaXRFeHByZXNzaW9uIiwiaXNQcm9taXNlIiwid3JhcHBlZEV4cHJlc3Npb25UZXh0IiwiaXNQcm9taXNlTWV0aG9kIiwiZ2V0T3BlcmF0b3JNZXRob2RSZXR1cm5UeXBlIiwib3BlcmF0b3JNZXRob2ROYW1lIiwicmlnaHRUeXBlIiwibWV0aG9kcyIsImdldE1ldGhvZHMiLCJtZXRob2QiLCJsZWZ0UGFyYW1ldGVyVHlwZSIsInJpZ2h0UGFyYW1ldGVyVHlwZSIsImhhc1JpZ2h0VHlwZSIsImdldFJldHVyblR5cGUiLCJnZXRPcGVyYXRvck1ldGhvZE5hbWUiLCJpc1VuYXJ5IiwiRXhjbGFtYXRpb25Ub2tlbiIsIlRpbGRlVG9rZW4iLCJNaW51c01pbnVzVG9rZW4iLCJFcXVhbHNFcXVhbHNUb2tlbiIsIkVxdWFsc0VxdWFsc0VxdWFsc1Rva2VuIiwiRXhjbGFtYXRpb25FcXVhbHNUb2tlbiIsIkV4Y2xhbWF0aW9uRXF1YWxzRXF1YWxzVG9rZW4iLCJHcmVhdGVyVGhhblRva2VuIiwiTGVzc1RoYW5Ub2tlbiIsIkdyZWF0ZXJUaGFuRXF1YWxzVG9rZW4iLCJMZXNzVGhhbkVxdWFsc1Rva2VuIiwiQmFyVG9rZW4iLCJBbXBlcnNhbmRUb2tlbiIsIkNhcmV0VG9rZW4iLCJMZXNzVGhhbkxlc3NUaGFuVG9rZW4iLCJHcmVhdGVyVGhhbkdyZWF0ZXJUaGFuVG9rZW4iLCJ1bndyYXBQYXJlbnRoZXNpemVkRXhwcmVzc2lvbiIsImlzUGFyZW50aGVzaXplZEV4cHJlc3Npb24iLCJpc0NvbXBvdW5kQXNzaWdubWVudCIsIkZpcnN0Q29tcG91bmRBc3NpZ25tZW50IiwiTGFzdENvbXBvdW5kQXNzaWdubWVudCIsImdldEVxdWl2YWxlbnRPcGVyYXRvckZvckNvbXBvdW5kIiwiY29tcG91bmRPcGVyYXRvcktpbmQiLCJBbXBlcnNhbmRFcXVhbHNUb2tlbiIsIkJhckVxdWFsc1Rva2VuIiwiQ2FyZXRFcXVhbHNUb2tlbiIsIkxlc3NUaGFuTGVzc1RoYW5FcXVhbHNUb2tlbiIsIkdyZWF0ZXJUaGFuR3JlYXRlclRoYW5FcXVhbHNUb2tlbiIsIkdyZWF0ZXJUaGFuR3JlYXRlclRoYW5HcmVhdGVyVGhhbkVxdWFsc1Rva2VuIiwiR3JlYXRlclRoYW5HcmVhdGVyVGhhbkdyZWF0ZXJUaGFuVG9rZW4iLCJnZXRVbmFyeU9wZXJhdG9yTWV0aG9kUmV0dXJuVHlwZSIsInVud3JhcFR5cGUiLCJjb250ZXh0IiwiZ2V0QmluYXJ5T3BlcmF0b3JOb2RlUmV0dXJuVHlwZSIsImdldFVuYXJ5T3BlcmF0b3JOb2RlUmV0dXJuVHlwZSIsIlR5cGVDaGVja2VyIiwiaXNOdWxsTGl0ZXJhbCIsImlzVW5kZWZpbmVkS2V5d29yZCIsImxlZnRUeXBlIiwiaXNMaXRlcmFsIiwiZ2V0QmFzZVR5cGVPZkxpdGVyYWxUeXBlIiwibGVmdFJldHVyblR5cGUiLCJyaWdodFJldHVyblR5cGUiLCJlcXVpdmFsZW50T3BlcmF0b3JNZXRob2ROYW1lIiwiY29uc3RydWN0b3IiLCJ0c0NvbmZpZ1BhdGgiLCJwcm9qZWN0IiwiUHJvamVjdCIsInRzQ29uZmlnRmlsZVBhdGgiLCJza2lwQWRkaW5nRmlsZXNGcm9tVHNDb25maWciLCJyb290RGlyZWN0b3J5IiwiZGlybmFtZSIsInNldFByb2plY3RSb290IiwiVHJhbnNmb3JtYXRpb25Db250ZXh0IiwidHJhbnNmb3JtZXJzIiwicGhhc2UiLCJ0cmFuc2Zvcm1lciIsIkNTaGFycEV2ZW50VHJhbnNmb3JtZXIiLCJSZWZUcmFuc2Zvcm1lciIsIkV2ZW50Q29udGV4dFRyYW5zZm9ybWVyIiwiRGVsZWdhdGVUb0Fycm93RnVuY3Rpb25UcmFuc2Zvcm1lciIsIkJyYWNrZXRBY2Nlc3NUcmFuc2Zvcm1lciIsIlByb21pc2VXcmFwcGVyVHJhbnNmb3JtZXIiLCJDb21wb25lbnRDYWxsVHJhbnNmb3JtZXIiLCJTY3JpcHRhYmxlT2JqZWN0Q3JlYXRlSW5zdGFuY2VUcmFuc2Zvcm1lciIsIkV4dGVuc2lvbk1ldGhvZFRyYW5zZm9ybWVyIiwiR2VuaWVzSW5zdGFuY2VUcmFuc2Zvcm1lciIsIkdlbmVyaWNUeXBlVHJhbnNmb3JtZXIiLCJPcGVyYXRvck92ZXJsb2FkaW5nVHJhbnNmb3JtZXIiLCJOdW1lcmljT3ZlcmxvYWRSZXNvbHV0aW9uVHJhbnNmb3JtZXIiLCJHZW5lcmljTWV0aG9kVHJhbnNmb3JtZXIiLCJjb21waWxlIiwiZmlsZXNUb0NvbXBpbGUiLCJwcm9qZWN0RmlsZXMiLCJtb3ZlZEZpbGVzIiwiYWRkU291cmNlRmlsZXNBdFBhdGhzIiwiZml4UmVmZXJlbmNlcyIsInNhdmVTeW5jIiwiY29sbGVjdGVkRmlsZXMiLCJwcm9jZXNzZWQiLCJkZXBlbmRlbmN5R3JhcGgiLCJnZXRTb3VyY2VGaWxlT3JUaHJvdyIsImNvbGxlY3RGaWxlcyIsInNvcnRlZEZpbGVzIiwidG9wb2xvZ2ljYWxTb3J0IiwidHJhbnNmb3JtZWRDb2RlTWFwIiwib3V0cHV0cyIsInRyYW5zZm9ybWVkQ29kZSIsImdldEZ1bGxUZXh0Iiwic2V0RGVmYXVsdEV4cG9ydCIsInVwZGF0ZUltcG9ydHNUb0FsaWFzUGF0aHMiLCJpbml0aWFsaXplQ29tcGlsZU91dHB1dCIsImFwcGx5VHJhbnNmb3JtYXRpb25EaWZmcyIsImUiLCJlcnJvciIsImVtaXQiLCJKU09OIiwic3RyaW5naWZ5IiwiZGVmYXVsdEV4cG9ydFN5bWJvbCIsImdldERlZmF1bHRFeHBvcnRTeW1ib2wiLCJkZWZhdWx0RXhwb3J0ZWRDbGFzcyIsInRzIiwiaXNEZWZhdWx0RXhwb3J0Iiwic2V0SXNEZWZhdWx0RXhwb3J0IiwibW92ZWRNYXAiLCJvbGRQYXRoIiwibmV3UGF0aCIsInNmIiwiZ2V0U291cmNlRmlsZXMiLCJpbXAiLCJyYXdJbXBvcnQiLCJvbGRBYnNQYXRoIiwicmVzb2x2ZVNwZWNpZmllciIsIm5ld0Fic1BhdGgiLCJuZXdJbXBvcnRTcGVjaWZpZXIiLCJuZXdTb3VyY2VGaWxlIiwiZ2V0UmVsYXRpdmVQYXRoQXNNb2R1bGVTcGVjaWZpZXJUbyIsImltcG9ydGVyRGlyIiwicmVsYXRpdmUiLCJzcGVjaWZpZXIiLCJncm91cFRyYW5zZm9ybWVyc0J5UGhhc2UiLCJyZWR1Y2UiLCJhY2MiLCJjdXJyIiwicnVuVHJhbnNmb3JtZXJzIiwidHJhbnNmb3JtZXJzQnlQaGFzZSIsIk9iamVjdCIsInNvcnQiLCJiIiwicGhhc2VOdW1iZXIiLCJyZXRyeUNvdW50IiwiaGFzRm9yZ290dGVuTm9kZSIsIm5vZGVzVG9Qcm9jZXNzIiwibW9kaWZpZWROb2RlIiwid2FzRm9yZ290dGVuIiwiZXJyb3JzIiwiZ2V0R2VuaWVzRGlhZ25vc3RpY3MiLCJzb3J0SW1wb3J0c0FuZFZhcnMiLCJnZXREaWFnbm9zdGljcyIsIkZpbGVQYXRoIiwiSXNTdWNjZXNzZnVsIiwiRXJyb3JzIiwiSnNTb3VyY2UiLCJJc01vbm9iZWhhdmlvdXIiLCJJc1NjcmlwdGFibGVPYmoiLCJQcm9wZXJ0aWVzIiwiSWQiLCJEZWZhdWx0VHlwZU5hbWUiLCJJbmhlcml0YW5jZUNoYWluIiwiU3VwcG9ydGVkVWlFdmVudHMiLCJSZWZlcmVuY2VkU3BlY2lmaWVycyIsImlzU2NyaXB0YWJsZU9iaiIsImRlZmF1bHRUeXBlTmFtZSIsImluaGVyaXRhbmNlQ2hhaW4iLCJzdXBwb3J0ZWRVaUV2ZW50cyIsInRyYXZlcnNlUHJvdG90eXBlQ2hhaW4iLCJmIiwicmVmZXJlbmNlZFNwZWNpZmllcnMiLCJkZWNvcmF0b3JzVG9SZW1vdmUiLCJEZWNvcmF0b3IiLCJyZW1vdmVEZWNvcmF0b3JzIiwianNTb3VyY2UiLCJnZXRFbWl0T3V0cHV0IiwiZ2V0T3V0cHV0RmlsZXMiLCJyZW1hcFNvdXJjZXMiLCJjb21waWxlT3V0cHV0IiwiYWxsRXJyb3JzIiwiZW1pdHRlZEpzIiwib3JpZ2luVG9UcmFuc2Zvcm1lZFNvdXJjZU1hcCIsImdlbmVyYXRlTWFwIiwiZ2V0QmFzZU5hbWUiLCJpbmNsdWRlQ29udGVudCIsImhpcmVzIiwic291cmNlTWFwQ29tbWVudFJlZ2V4IiwiYmFzZTY0TWFwIiwidHNUb0pzTWFwSnNvbiIsIkJ1ZmZlciIsInRzVG9Kc01hcCIsInJlbWFwcGVkIiwiZmluYWxNYXBKc29uIiwiaW5saW5lRmluYWxNYXAiLCJnZXRHZW5pZXNTZW1hbnRpY0RpYWdub3N0aWNzIiwibGluZSIsImNvbHVtbiIsImdldExpbmVBbmRDb2x1bW5BdFBvcyIsIm1lc3NhZ2UiLCJmbGF0dGVuRGlhZ25vc3RpY01lc3NhZ2VUZXh0IiwiZ2V0UHJlRW1pdERpYWdub3N0aWNzIiwiZGlhZyIsImNvbXBpbGVyT2JqZWN0IiwiY29sbGVjdGVkIiwiZ2V0UmVmZXJlbmNpbmdTb3VyY2VGaWxlcyIsInJlZkZpbGUiLCJmaWxlcyIsInRvcG9sb2dpY2FsU29ydFdpdGhUYXJqYW4iLCJ0b3BvbG9naWNhbFNvcnRXaXRoQ3ljbGVzIiwiaW5kZXhNYXAiLCJsb3dMaW5rTWFwIiwic3RhY2siLCJvblN0YWNrIiwic2NjTGlzdCIsInN0cm9uZ0Nvbm5lY3QiLCJkZXAiLCJzY2MiLCJ3IiwicG9wIiwiZGVsZXRlIiwic29ydGVkIiwib3JpZ2luYWxGaWxlU3RyaW5nIiwiZG1wIiwiZGlmZl9tYXRjaF9wYXRjaCIsIm9yaWdpbmFsVGV4dCIsIm9yaWdpbmFsIiwidHJhbnNmb3JtZWRUZXh0IiwiZGlmZnMiLCJkaWZmX21haW4iLCJvcmlnaW5hbFBvcyIsInRyYW5zZm9ybWVkUG9zIiwib3AiLCJlcnIiLCJhcHBlbmRSaWdodCIsInNvdXJjZUZpbGVHZW5lcmljTWFwIiwibmV3Tm9kZSIsIm1ldGhvZE5hbWVOb2RlIiwiZ2V0TGFzdENoaWxkQnlLaW5kIiwiSWRlbnRpZmllciIsImZpcnN0Q2hpbGQiLCJjbGFzc1R5cGUiLCJpc09ySW5oZXJpdHNGcm9tR2FtZU9iamVjdE9yQ29tcG9uZW50IiwicHJvcGVydHlBY2Nlc3MiLCJpbnN0YW5jZSIsImluc3RhbmNlVHlwZSIsIm1ldGhvZFN3YXBWYWx1ZSIsImRlY2xhcmluZ1R5cGUiLCJ0eXBlQXJnc05vZGVzIiwidCIsInJlcGxhY2VXaXRoTm9uR2VuZXJpY0NhbGwiLCJuZXdWYXJTdGF0ZW1lbnRzIiwiZ2VuZXJpY01ldGhvZFZhck5hbWUiLCJjcmVhdGVHZW5lcmljTWV0aG9kVmFyaWFibGUiLCJhcmdzVGV4dCIsImluc3RhbmNlVGV4dCIsImlzR2VuaWVzU2NyaXB0VHlwZSIsIm5ld0V4cHJlc3Npb25UZXh0IiwiZ2V0VHlwZU5hbWUiLCJnZXRUeXBlS2V5IiwidEFyZ3MiLCJnZXRLZXkiLCJnZW5lcmljVHlwZU5hbWUiLCJnZW5lcmljS2V5IiwiZ2VuZXJpY01hcCIsImdlbmVyaWNEZWNsYXJhdGlvbiIsImlzSW50ZXJmYWNlIiwiZ2V0VHlwZU5hbWVBbmRFbnN1cmVJbXBvcnRlZCIsImdlbmVyaWNWYXJOYW1lIiwiZGVjbGFyYXRpb25LaW5kIiwiVmFyaWFibGVEZWNsYXJhdGlvbktpbmQiLCJDb25zdCIsIm1hcHBpbmciLCJ0eXBlS2V5IiwicGFyZW50Q2xhc3MiLCJjc2hhcnBUeXBlTmFtZSIsInAiLCJldmVyeSIsIm1ldGhvZENhbGwiLCJ0eXBlQXJnc1RleHQiLCJwcm9jZXNzIiwiYXJndiIsInNsaWNlIiwiY29tcGlsZUZpbGVzIiwiY3VycmVudEZsYWciLCJleGl0IiwicmVzdWx0Iiwic3Rkb3V0Iiwid3JpdGUiLCJtYWluIiwiZXZlbnRFeHByZXNzaW9uIiwiZXZlbnRUeXBlIiwiaXNDU2hhcnBFdmVudFR5cGUiLCJwcm9wZXJ0eU5hbWUiLCJuZXdDYWxsRXhwcmVzc2lvbiIsImNyZWF0ZU5ld0NhbGxFeHByZXNzaW9uIiwidG9Mb3dlckNhc2UiLCJhZGRUc0lnbm9yZUNvbW1lbnQiLCJtZXRob2RQcmVmaXgiLCJuZXdNZXRob2ROYW1lIiwibmV3Q2FsbEV4cHJlc3Npb25UZXh0IiwiaW5zZXJ0VGV4dCIsInJlcXVpcmUiLCJzaWduYXR1cmUiLCJnZXRSZXNvbHZlZFNpZ25hdHVyZSIsInBhcmFtZXRlciIsImdldFR5cGVPZlN5bWJvbEF0TG9jYXRpb24iLCJpc0RlbGVnYXRlVHlwZSIsImlzQXJyb3dGdW5jdGlvbiIsIndyYXBJbkFycm93RnVuY3Rpb24iLCJnZXRDYWxsU2lnbmF0dXJlcyIsImNhbGxTaWduYXR1cmVzIiwicGFyYW1UZXh0IiwiYXJyb3dGdW5jdGlvblRleHQiLCJFbGVtZW50QWNjZXNzRXhwcmVzc2lvbiIsImlzRWxlbWVudEFjY2Vzc0V4cHJlc3Npb24iLCJlbGVtZW50QWNjZXNzIiwiYXJndW1lbnRFeHByZXNzaW9uIiwiZ2V0QXJndW1lbnRFeHByZXNzaW9uIiwiZ2V0SXRlbU1ldGhvZHMiLCJzZXRJdGVtTWV0aG9kcyIsIm1ldGhvZFNpZ25hdHVyZXMiLCJnZXRTaWduYXR1cmUiLCJnZXREZWNsYXJhdGlvbiIsInBhcmVudCIsInZhbHVlRXhwcmVzc2lvbiIsInBhcmFtcyIsImluZGV4UGFyYW1UeXBlIiwidmFsdWVQYXJhbVR5cGUiLCJpbmRleEFyZ1R5cGUiLCJ2YWx1ZUFyZ1R5cGUiLCJleHByZXNzaW9uVGV4dCIsImluZGV4VGV4dCIsInZhbHVlVGV4dCIsInNldEl0ZW1DYWxsIiwiZ2V0SXRlbUNhbGwiLCJCaW5hcnlFeHByZXNzaW9uIiwiYmluYXJ5RXhwcmVzc2lvbiIsImlzUmVmVHlwZSIsInJlZkV4cHJlc3Npb24iLCJwcm9wZXJ0eUFjY2Vzc0V4cHJlc3Npb24iLCJvdmVybG9hZERlY2xhcmF0aW9ucyIsImlzTWV0aG9kU2lnbmF0dXJlIiwic2VsZWN0QmVzdE92ZXJsb2FkIiwiTWV0aG9kU2lnbmF0dXJlIiwianNEb2NUYWdzIiwiZ2V0SnNEb2NzIiwiZmxhdE1hcCIsImdldFRhZ3MiLCJ0YWciLCJnZXRUYWdOYW1lIiwiZXh0ZW5zaW9uVGFnIiwiZXh0ZW5zaW9uR2VuZXJpY0FyZ0luZGV4IiwiZXh0ZW5zaW9uR2VuZXJpY0FyZ0luZGV4VGFnIiwiZ2V0Q29tbWVudFRleHQiLCJwYXJzZUludCIsImlzTmFOIiwiZXh0ZW5zaW9uQ29tbWVudCIsImV4dGVuc2lvbkNsYXNzIiwiZXh0ZW5zaW9uTWV0aG9kIiwidHlwZVBhcmFtZXRlcnMiLCJwYXJzZUV4dGVuc2lvbkNvbW1lbnQiLCJleHRyYWN0QW5kT3JkZXJUeXBlQXJndW1lbnRzIiwiZml4TWlzc2luZ0ltcG9ydHMiLCJwYXJ0cyIsImNsYXNzU2hvcnROYW1lIiwibmFtZXNwYWNlIiwiZW5zdXJlSW1wb3J0IiwiY29tbWVudCIsImdyb3VwcyIsImFyZ3VtZW50cyIsImNsYXNzTmFtZSIsIm5hbWVTcGFjZSIsImhhc0ltcG9ydCIsImdldE1vZHVsZVNwZWNpZmllciIsImdldExpdGVyYWxUZXh0IiwiVHlwZUZvcm1hdEZsYWdzIiwiZ2V0U3ltYm9sT3JUaHJvdyIsImdldERlY2xhcmVkVHlwZSIsInR5cGVBcmdNYXAiLCJ0eXBlQXJnIiwiY2FsbFR5cGVBcmdzIiwiY2FsbFR5cGVQYXJhbXMiLCJzb3J0ZWRQYXJhbXMiLCJzcGxpY2UiLCJtZXRob2RBcmd1bWVudHMiLCJpc1R5cGVvZkFyZ3VtZW50IiwicmV0dXJuVHlwZSIsInR5cGVBcmd1bWVudCIsInR5cGVBcmd1bWVudFR5cGUiLCJwcm9jZXNzVHlwZUFyZ3VtZW50IiwiZ2V0VHlwZUZyb21UeXBlb2ZBcmd1bWVudCIsImdldEZpcnN0Q2hpbGRCeUtpbmQiLCJpc1R5cGVOb2RlIiwiaXNUeXBlT2ZBcmciLCJjcmVhdGVPdmVybG9hZGVkQ2FsbEV4cHJlc3Npb24iLCJ0eXBlQXJndW1lbnRUZXh0IiwiYWRkVHNJZ25vcmUiLCJjYXN0VHlwZSIsIm5ld0NhbGwiLCJyZW1vdmVUeXBlQXJndW1lbnQiLCJpbnNlcnRBcmd1bWVudCIsImV4cHJlc3Npb25UeXBlIiwibmV3QXJnVGV4dCIsImpzRG9jcyIsImpzRG9jIiwidGFncyIsIm5ld0FyZ3VtZW50cyIsImlzS2luZCIsInRyYW5zZm9ybU5ld0V4cHJlc3Npb24iLCJ0cmFuc2Zvcm1HZW5lcmljVXNhZ2UiLCJlbnN1cmVHZW5lcmljVHlwZU1hcCIsImVuc3VyZVR5cGVJbXBvcnRlZCIsImNyZWF0ZUdlbmVyaWNUeXBlVmFyaWFibGUiLCJub2RlVHlwZSIsIlZhcmlhYmxlRGVjbGFyYXRpb24iLCJBc0V4cHJlc3Npb24iLCJUeXBlQXNzZXJ0aW9uRXhwcmVzc2lvbiIsIlByZWZpeFVuYXJ5RXhwcmVzc2lvbiIsIlBvc3RmaXhVbmFyeUV4cHJlc3Npb24iLCJ0cmFuc2Zvcm1CaW5hcnlFeHByZXNzaW9uIiwidHJhbnNmb3JtVW5hcnlFeHByZXNzaW9uIiwiZXF1aXZhbGVudE9wZXJhdG9yS2luZCIsInRyYW5zZm9ybWVkTGVmdCIsInRyYW5zZm9ybU5vZGVJZk5lZWRlZCIsInRyYW5zZm9ybWVkUmlnaHQiLCJsZWZ0VGV4dCIsInJpZ2h0VGV4dCIsImxlZnROYW1lIiwiZXF1aXZhbGVudEV4cHJlc3Npb24iLCJwYXJlbnRoZXNpemVkTmV3VGV4dCIsIm9wZXJhbmRUeXBlIiwib3BlcmFuZFRleHQiLCJ1bndyYXBwZWROb2RlIiwiX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiY2FjaGVkTW9kdWxlIiwiX193ZWJwYWNrX21vZHVsZXNfXyIsImNhbGwiXSwic291cmNlUm9vdCI6IiJ9